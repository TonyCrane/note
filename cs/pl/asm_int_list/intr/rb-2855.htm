<HTML>
<HEAD>
<TITLE>Int 21/AX=4403h
</TITLE>
<META NAME="Description" CONTENT="
Int 21/AX=4403h - SMARTDRV.SYS v3.x only - IOCTL - CACHE CONTROL - 
AX = 4403h
BX = handle for device SMARTAAR
CX = number of bytes to write
DS:DX - SMARTDRV control block (see #01523)
Return: CF clear if successful
AX = number of bytes actually written
0000h if control block too small for given command
CF set on error
AX = error code (01h,05h,06h,0Dh) (see #01680 at AH=59h/BX=0000h)
Note:  NCache2 (from the Norton Utilities v8.0) attempts to support this
">
<META NAME="robots" CONTENT="none">
</HEAD>
<BODY BGCOLOR="#FFD0A0">
<center>
<h2>Int 21/AX=4403h
</h2>
</center><p>
<table border=1 cellpadding=3 cellspacing=1>
<td>
<a href="rb-2854.htm">
<img src=./gif/lup.gif border=0 alt=Prev></a>
<a href="rb-2856.htm">
<img src=./gif/ldown.gif border=0 alt=Next></a>
<a href="../rbrown.htm">
<img src=./gif/lhome.gif border=0 alt=Ralf Brown Page></a>
<td><a href="int.htm">Interrups</a></td>
<td><a href="cat.htm">Categories</a></td>
<td><a href="alpha.htm">Contents</a></td>
</td></table><p>
<p><img src=./gif/rbline.gif width="100%" alt="------"><p>
<h3><font color=#C00040>SMARTDRV.SYS v3.x only - IOCTL - CACHE CONTROL</font></h3>
<PRE>
AX = 4403h
BX = handle for device "SMARTAAR"
CX = number of bytes to write
DS:DX -> SMARTDRV control block <a href="rb-2855.htm#Table1523">(see #01523)</a><br>
<p><b>Return:</b><br>CF clear if successful
AX = number of bytes actually written
0000h if control block too small for given command
CF set on error
AX = error code (01h,05h,06h,0Dh) <a href="rb-0000.htm#Table0"></a>(see #01680 at AH=59h/BX=0000h)
</PRE>
<p><b>Note:</b>
NCache2 (from the Norton Utilities v8.0) attempts to support this
interface, but does not do so correctly, often hanging the system;
one should use the SmartDrive v4.x or NCache private interfaces
(see INT 2F/AX=4A10h/BX=0000h,INT 2F/AX=FE00h/DI=4E55h)
<p><b>See Also:</b>
<a href="rb-2828.htm">AX=4402h"SMARTDRV"</a> - <a href="rb-4822.htm">INT 2F/AX=4A10h/BX=0000h</a>
<PRE>
<p>
<a name=table1522></a>
(Table 01522)
Values for SMARTDRV function code:
00h    flush cache
01h    flush and discard cache
02h    disable caching (flushes and discards cache first)
03h    enable caching
04h    control write caching
05h    set flushing tick count
06h    lock cache contents
07h    unlock cache contents
08h    set flush-on-reboot flag
09h    unused
0Ah    control full-track caching
0Bh    reduce cache size
0Ch    increase cache size
0Dh    set INT 13 chain address
<p>
Format of SMARTDRV control block:
<a name=table1523></a>
Offset  Size    Description     (Table 01523)
00h    BYTE    function code <a href="rb-2855.htm#Table1522">(see #01522)</a>
---functions 00h-03h,06h,07h---
no additional fields
---function 04h---
01h    BYTE    write caching control action
00h turn off write-through
01h turn on write-through
02h turn off write buffering (also flushes cache)
03h turn on write buffering (also flushes cache)
---function 05h---
01h    WORD    number of timer ticks between cache flushes
---function 08h---
01h    BYTE    new flush-on-reboot flag (00h off, 01h on)
---function 0Ah---
01h    BYTE    full-track writes are
00h not cached
01h cached
---functions 0Bh,0Ch---
01h    WORD    number of 16K pages by which to increase/reduce cache size
---function 0Dh---
01h    DWORD   new address to which to chain on INT 13
</PRE>
<p><b>Note:</b>
The previous address is not preserved
<p>
<b>Category: <a href="cat-004.htm">
Caches/Spoolers</a>
- <a href="int-21.htm">
Int 21h</a>
- <a href="alpha-s.htm">
S</a>
</b><p><p><img src=./gif/rbline.gif width="100%" alt="------"><p>
<table border=1 cellpadding=3 cellspacing=1>
<td>
<a href="rb-2854.htm">
<img src=./gif/lup.gif border=0 alt=Prev></a>
<a href="rb-2856.htm">
<img src=./gif/ldown.gif border=0 alt=Next></a>
<a href="../rbrown.htm">
<img src=./gif/lhome.gif border=0 alt=Ralf Brown Page></a>
<td><a href="int.htm">Interrups</a></td>
<td><a href="cat.htm">Categories</a></td>
<td><a href="alpha.htm">Contents</a></td>
</td></table><p>



</BODY>
</HTML>
