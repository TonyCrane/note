<HTML>
<HEAD>
<TITLE>Int 2A/AH=80h
</TITLE>
<META NAME="Description" CONTENT="
Int 2A/AH=80h - NETWORK - BEGIN DOS CRITICAL SECTION - 
AH = 80h
AL = critical section number (00h-0Fh) (see #02555)
Notes: normally hooked to avoid interrupting a critical section, rather than
called
the handler should ensure that none of the critical sections are
reentered, usually by suspending a task which attempts to reenter
an active critical section
the DOS kernel does not invoke critical sections 01h and 02h unless it
is patched. DOS 3.1+ contains a zero-terminated list of words
beginning at offset -11 from the Swappable Data Area
">
<META NAME="robots" CONTENT="none">
</HEAD>
<BODY BGCOLOR="#FFD0A0">
<center>
<h2>Int 2A/AH=80h
</h2>
</center><p>
<table border=1 cellpadding=3 cellspacing=1>
<td>
<a href="rb-4139.htm">
<img src=./gif/lup.gif border=0 alt=Prev></a>
<a href="rb-4141.htm">
<img src=./gif/ldown.gif border=0 alt=Next></a>
<a href="../rbrown.htm">
<img src=./gif/lhome.gif border=0 alt=Ralf Brown Page></a>
<td><a href="int.htm">Interrups</a></td>
<td><a href="cat.htm">Categories</a></td>
<td><a href="alpha.htm">Contents</a></td>
</td></table><p>
<p><img src=./gif/rbline.gif width="100%" alt="------"><p>
<h3><font color=#C00040>NETWORK - BEGIN DOS CRITICAL SECTION</font></h3>
<PRE>
AH = 80h
AL = critical section number (00h-0Fh) <a href="rb-4140.htm#Table2555">(see #02555)</a>
</PRE>
<p><b>Notes:</b>
Normally hooked to avoid interrupting a critical section, rather than
called.
The handler should ensure that none of the critical sections are
reentered, usually by suspending a task which attempts to reenter
an active critical section.
The DOS kernel does not invoke critical sections 01h and 02h unless it
is patched.  DOS 3.1+ contains a zero-terminated list of words
beginning at offset -11 from the Swappable Data Area
<a href="rb-0000.htm#Table0"></a>(see #01687 at INT 21/AX=5D06h); each word contains the offset within
the DOS data segment of a byte which must be changed from C3h (RET)
to 50h (PUSH AX) under DOS 3.x or from 00h to a nonzero value under
DOS 4.0+ to enable use of critical sections.  For DOS 4.0+, all
words in this list point at the byte at offset 0D0Ch..
MS Windows patches the DOS kernel's calls to INT 2A/AH=80h-81h into
far calls to its own handler, and does not reflect the calls back
to INT 2A unless SYSTEM.INI contains ReflectDOSInt2A=1 or
ModifyDOSInt2A=0 in the [386Enh] section.
Novell NETX does not issue INT 2A/AH=80h and INT 2A/AH=81h calls when
it intercepts INT 21 calls and processes them itself
<p><b>See Also:</b>
<a href="rb-4141.htm">AH=81h</a> - <a href="rb-4142.htm">AH=82h</a> - <a href="rb-4145.htm">AX=8700h</a> - <a href="rb-3023.htm">INT 21/AX=5D06h</a
<PRE>
<p>
<a name=table2555></a>
(Table 02555)
Values for DOS critical section number:
01h    DOS kernel, SHARE.EXE, DOSMGR.
Apparently for maintaining the integrity of DOS/SHARE/NET
data structures
02h    DOS kernel, DOSMGR.
Ensures that no multitasking occurs while DOS is calling an
installable device driver
05h    network redirector
06h    DOS 4.x only IFSFUNC
08h    ASSIGN.COM
0Ah    MSCDEX, CORELCDX
0Fh    IBM PC LAN server (while intercepting INT 10/AH=06h,07h,0Eh)
</PRE>
<p>
<b>Category: <a href="cat-010.htm">
DOS Kernel</a>
- <a href="int-2A.htm">
Int 2Ah</a>
- <a href="alpha-n.htm">
N</a>
</b><p><p><img src=./gif/rbline.gif width="100%" alt="------"><p>
<table border=1 cellpadding=3 cellspacing=1>
<td>
<a href="rb-4139.htm">
<img src=./gif/lup.gif border=0 alt=Prev></a>
<a href="rb-4141.htm">
<img src=./gif/ldown.gif border=0 alt=Next></a>
<a href="../rbrown.htm">
<img src=./gif/lhome.gif border=0 alt=Ralf Brown Page></a>
<td><a href="int.htm">Interrups</a></td>
<td><a href="cat.htm">Categories</a></td>
<td><a href="alpha.htm">Contents</a></td>
</td></table><p>



</BODY>
</HTML>
