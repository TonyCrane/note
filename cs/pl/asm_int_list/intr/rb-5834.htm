<HTML>
<HEAD>
<TITLE>Int 31/AX=0303h
</TITLE>
<META NAME="Description" CONTENT="
Int 31/AX=0303h - DPMI 0.9+ - ALLOCATE REAL MODE CALLBACK ADDRESS - 
AX = 0303h
DS:(E)SI = selector:offset of procedure to call
ES:(E)DI = selector:offset of real mode call structure (see #03148)
Return: CF clear if successful
CX:DX = segment:offset of real mode call address (see #03149)
CF set on error
AX = error code (DPMI 1.0+) (8015h) (see #03143)
Notes: the real mode call structure is static, causing reentrancy problems;
its contents are only valid at the time of a callback
the called procedure must modify the real mode CS:IP before returning
">
<META NAME="robots" CONTENT="none">
</HEAD>
<BODY BGCOLOR="#FFD0A0">
<center>
<h2>Int 31/AX=0303h
</h2>
</center><p>
<table border=1 cellpadding=3 cellspacing=1>
<td>
<a href="rb-5833.htm">
<img src=./gif/lup.gif border=0 alt=Prev></a>
<a href="rb-5835.htm">
<img src=./gif/ldown.gif border=0 alt=Next></a>
<a href="../rbrown.htm">
<img src=./gif/lhome.gif border=0 alt=Ralf Brown Page></a>
<td><a href="int.htm">Interrups</a></td>
<td><a href="cat.htm">Categories</a></td>
<td><a href="alpha.htm">Contents</a></td>
</td></table><p>
<p><img src=./gif/rbline.gif width="100%" alt="------"><p>
<h3><font color=#C00040>DPMI 0.9+ - ALLOCATE REAL MODE CALLBACK ADDRESS</font></h3>
<PRE>
AX = 0303h
DS:(E)SI = selector:offset of procedure to call
ES:(E)DI = selector:offset of real mode call structure <a href="rb-5831.htm#Table3148">(see #03148)</a><br>
<p><b>Return:</b><br>CF clear if successful
CX:DX = segment:offset of real mode call address <a href="rb-5834.htm#Table3149">(see #03149)</a>
CF set on error
AX = error code (DPMI 1.0+) (8015h) <a href="rb-5802.htm#Table3143">(see #03143)</a>
</PRE>
<p><b>Notes:</b>
The real mode call structure is static, causing reentrancy problems;
its contents are only valid at the time of a callback.
The called procedure must modify the real mode CS:IP before returning.
Values are returned to real mode by modifying the real mode call struc.
DPMI hosts must provide at least 16 callbacks per client.
The limited DPMI host built into Phar Lap's 286|DOS-Extender v2.5 does
not support this function
<p><b>BUG:</b>
Windows NT 4.0 either ignores or clears the high 16 bits of EDI,
causing an illegal instruction error if the real mode call
structure's offset in ES is greater than 64K
<p><b>See Also:</b>
<a href="rb-5835.htm">AX=0304h</a> - <a href="rb-5871.htm">AX=0C00h</a>
<PRE>
<p>
<a name=table3149></a>
(Table 03149)
Values DPMI real-mode callback procedure is called with:.
DS:(E)SI = selector:offset of real mode SS:SP.
ES:(E)DI = selector:offset of real mode call structure.
SS:(E)SP = locked protected mode API stack.
Interrupts disabled<br>
<p><b>Return:</b><br>(with IRET)
ES:(E)DI = selector:offset of real mode call structure to restore
</PRE>
<p>
<b>Category: <a href="cat-009.htm">
DOS Extenders</a>
- <a href="int-31.htm">
Int 31h</a>
- <a href="alpha-d.htm">
D</a>
</b><p><p><img src=./gif/rbline.gif width="100%" alt="------"><p>
<table border=1 cellpadding=3 cellspacing=1>
<td>
<a href="rb-5833.htm">
<img src=./gif/lup.gif border=0 alt=Prev></a>
<a href="rb-5835.htm">
<img src=./gif/ldown.gif border=0 alt=Next></a>
<a href="../rbrown.htm">
<img src=./gif/lhome.gif border=0 alt=Ralf Brown Page></a>
<td><a href="int.htm">Interrups</a></td>
<td><a href="cat.htm">Categories</a></td>
<td><a href="alpha.htm">Contents</a></td>
</td></table><p>



</BODY>
</HTML>
