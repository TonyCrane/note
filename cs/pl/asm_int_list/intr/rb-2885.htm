<HTML>
<HEAD>
<TITLE>Int 21/AX=4405h
</TITLE>
<META NAME="Description" CONTENT="
Int 21/AX=4405h - COMBI-disk v1.13 - CONTROL COMBI-disk - 
AX = 4405h
BL = drive number (00h = default, 01h = A:, etc) for RAM disk
CX = number of bytes to write
DS:DX - buffer containing command packet (see #01539)
Return: CF clear if successful
AX = number of bytes actually transferred
CF set on error
AX = error code (01h,05h,06h,0Dh) (see #01680 at AH=59h/BX=0000h)
SeeAlso: AX=4404hCOMBI
">
<META NAME="robots" CONTENT="none">
</HEAD>
<BODY BGCOLOR="#FFD0A0">
<center>
<h2>Int 21/AX=4405h
</h2>
</center><p>
<table border=1 cellpadding=3 cellspacing=1>
<td>
<a href="rb-2884.htm">
<img src=./gif/lup.gif border=0 alt=Prev></a>
<a href="rb-2886.htm">
<img src=./gif/ldown.gif border=0 alt=Next></a>
<a href="../rbrown.htm">
<img src=./gif/lhome.gif border=0 alt=Ralf Brown Page></a>
<td><a href="int.htm">Interrups</a></td>
<td><a href="cat.htm">Categories</a></td>
<td><a href="alpha.htm">Contents</a></td>
</td></table><p>
<p><img src=./gif/rbline.gif width="100%" alt="------"><p>
<h3><font color=#C00040>COMBI-disk v1.13 - CONTROL COMBI-disk</font></h3>
<PRE>
AX = 4405h
BL = drive number (00h = default, 01h = A:, etc) for RAM disk
CX = number of bytes to write
DS:DX -> buffer containing command packet <a href="rb-2885.htm#Table1539">(see #01539)</a><br>
<p><b>Return:</b><br>CF clear if successful
AX = number of bytes actually transferred
CF set on error
AX = error code (01h,05h,06h,0Dh) <a href="rb-0000.htm#Table0"></a>(see #01680 at AH=59h/BX=0000h)
</PRE>
<p><b>See Also:</b>
<a href="rb-2879.htm">AX=4404h"COMBI"</a>
<PRE>
<p>
<a name=table1538></a>
(Table 01538)
Values for COMBI-disk command code:
80h    flush cache
81h    change options byte
82h    shrink memory
83h    expand memory
84h    get dirty block information
85h    reset write errors
86h    reset counters
<p>
Format of COMBI-disk command packet:
<a name=table1539></a>
Offset  Size    Description     (Table 01539)
00h    WORD    version
02h    BYTE    command code <a href="rb-2885.htm#Table1538">(see #01538)</a>
---command code 80h---
no additional fields
---command code 81h---
03h    BYTE    new options byte <a href="rb-2885.htm#Table1540">(see #01540)</a>
---command code 82h---
03h    WORD    number of KB to release
---command code 83h---
03h    WORD    number of KB to expand
---command code 84h---
03h    DWORD   -> buffer for block info <a href="rb-2885.htm#Table1541">(see #01541)</a>
---command code 85h---
03h    DWORD   block ID
---command code 86h---
03h    BYTE    which counters to reset
<p><b>bit 0:</b><br>Hard disk read counts
<p><b>bit 1:</b><br>Hard disk write counts
<p><b>bit 2:</b><br>RAM disk read/write counts
</PRE>
<p><b>Note:</b>
Multiple commands may be placed in a single packet by stringing
together as many command/argument pairs as desired
<PRE>
<p>
Bitfields for COMBI-disk options byte:
<a name=table1540></a>
Bit(s)  Description     (Table 01540)
0      cache off
1      cache frozen
2      write caching enabled
3      delayed writing disabled
5      fix memory allocation (no XMS lending)
6      no 'sector not found' error
<p>
Format of COMBI-disk block info:
<a name=table1541></a>
Offset  Size    Description     (Table 01541)
00h    DWORD   block ID
04h    BYTE    bitmask of valid sectors in block
05h    BYTE    bitmask of dirty sectors in block
06h    BYTE    last error returned by BIOS
07h    BYTE    number of errors
</PRE>
<p>
<b>Category: <a href="cat-008.htm">
Disk I/O Enhancements</a>
- <a href="int-21.htm">
Int 21h</a>
- <a href="alpha-c.htm">
C</a>
</b><p><p><img src=./gif/rbline.gif width="100%" alt="------"><p>
<table border=1 cellpadding=3 cellspacing=1>
<td>
<a href="rb-2884.htm">
<img src=./gif/lup.gif border=0 alt=Prev></a>
<a href="rb-2886.htm">
<img src=./gif/ldown.gif border=0 alt=Next></a>
<a href="../rbrown.htm">
<img src=./gif/lhome.gif border=0 alt=Ralf Brown Page></a>
<td><a href="int.htm">Interrups</a></td>
<td><a href="cat.htm">Categories</a></td>
<td><a href="alpha.htm">Contents</a></td>
</td></table><p>



</BODY>
</HTML>
