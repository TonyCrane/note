<HTML>
<HEAD>
<TITLE>Int 13/AX=057Fh/SI=324Dh
</TITLE>
<META NAME="Description" CONTENT="
Int 13/AX=057Fh/SI=324Dh - 2M - FORMAT TRACK - 
AX = 057Fh
SI = 324Dh (2M)
CH = track number
DH = head number
DL = drive number
ES:BX - boot sector of future 2M diskette
Return: CF set on error
CF clear if successful
AH = status (see #00234)
Program: 2M is a TSR developed by Ciriaco Garc¡a de Celis to support
">
<META NAME="robots" CONTENT="none">
</HEAD>
<BODY BGCOLOR="#FFD0A0">
<center>
<h2>Int 13/AX=057Fh/SI=324Dh
</h2>
</center><p>
<table border=1 cellpadding=3 cellspacing=1>
<td>
<a href="rb-0612.htm">
<img src=./gif/lup.gif border=0 alt=Prev></a>
<a href="rb-0614.htm">
<img src=./gif/ldown.gif border=0 alt=Next></a>
<a href="../rbrown.htm">
<img src=./gif/lhome.gif border=0 alt=Ralf Brown Page></a>
<td><a href="int.htm">Interrups</a></td>
<td><a href="cat.htm">Categories</a></td>
<td><a href="alpha.htm">Contents</a></td>
</td></table><p>
<p><img src=./gif/rbline.gif width="100%" alt="------"><p>
<h3><font color=#C00040>2M - FORMAT TRACK</font></h3>
<PRE>
AX = 057Fh
SI = 324Dh ("2M")
CH = track number
DH = head number
DL = drive number
ES:BX -> boot sector of future 2M diskette<br>
<p><b>Return:</b><br>CF set on error
CF clear if successful
AH = status <a href="rb-0606.htm#Table234">(see #00234)</a>
</PRE>
<p><b>Program:</b>
2M is a TSR developed by Ciriaco Garc¡a de Celis to support
non standard diskettes with 820-902/1476-1558K (5.25 DD/HD)
and 984-1066/1804-1886K/3608-3772K (3.5 DD/HD/ED)
<PRE>
<p><b>InstallCheck:</b><br>Must search for a "CiriSOFT:2M:1.3" or "CiriSOFT:2MX:3.0" or
similar (recomended ":2M:", ":2MX:", or ":2MB:" substrings) in the
CiriSOFT TSR interface
</PRE>
<p><b>Notes:</b>
It is not necessary to call AH=17h or AH=18h first (will be ignored).
The diskette format must always begin on cylinder 0 head 0.
The boot sector can be obtained from an already-formatted 2M diskette
(by calling AH=02h with head number 00h in 2M v1.x and with head
number 80h for 2M v2+).
Since 2M v2.0, the BOOT sector is emulated using the first physical
sector of FAT2; the second-sixth physical sectors of FAT2 in HD or ED
diskettes store the SuperBOOT code. To skip the FAT2 emulation (using
FAT1) of 2M, in order to read the SuperBOOT code, head number must be
80h-81h instead 0-1 (bit 7 active) in standard read/write functions.
This lets diskcopy programs format 2M target diskettes copying
SuperBOOT code. If the target diskette is already 2MF formatted
(containing boot code) this trick it is not necessary..
When using STV technology (offset 65 of boot sector equal to 1) it is
necessary to write the full track before formatting (except track 0
side 0) to complete the format and skip future CRC errors on read; in
track 0 side 1 the head used must be 81h instead 1. Diskcopy programs
may do a format-write-verify sequential phases to improve performance
<p><b>See Also:</b>
<a href="rb-0610.htm">AH=05h"FLOPPY"</a> - <a href="rb-0645.htm">AH=18h/CX=5055h</a> - <a href="rb-4254.htm">INT 2F"CiriSOFT"</a>
<p>
<b>Category: <a href="cat-008.htm">
Disk I/O Enhancements</a>
- <a href="int-13.htm">
Int 13h</a>
- <a href="alpha-@.htm">
@</a>
</b><p><p><img src=./gif/rbline.gif width="100%" alt="------"><p>
<table border=1 cellpadding=3 cellspacing=1>
<td>
<a href="rb-0612.htm">
<img src=./gif/lup.gif border=0 alt=Prev></a>
<a href="rb-0614.htm">
<img src=./gif/ldown.gif border=0 alt=Next></a>
<a href="../rbrown.htm">
<img src=./gif/lhome.gif border=0 alt=Ralf Brown Page></a>
<td><a href="int.htm">Interrups</a></td>
<td><a href="cat.htm">Categories</a></td>
<td><a href="alpha.htm">Contents</a></td>
</td></table><p>



</BODY>
</HTML>
