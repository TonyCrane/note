<HTML>
<HEAD>
<TITLE>Int 2F/AX=C000h
</TITLE>
<META NAME="Description" CONTENT="
Int 2F/AX=C000h - Novell NetWare Event Service Layer (NESL) 1.0 - INSTALLATION CHECK - 
AX = C000h
Return: AL = FFh if installed
DX:BX - FAR entry point (see #03013,#03014,#03015,#03016,#03017,#03018)
ES:SI - signature string NESL_EVENTS
Program: NESL is a generic interface for event handling in ODI drivers and
other NetWare-oriented modules. Primarily intended to support
power management and hot swapping of PCMCIA cards, but it is not
limited to this.
Range: AH=C0h to AH=FFh, selected by scanning for first free multiplex number
SeeAlso: AX=C000hLink Support Layer,AX=C000hNETWARN
">
<META NAME="robots" CONTENT="none">
</HEAD>
<BODY BGCOLOR="#FFD0A0">
<center>
<h2>Int 2F/AX=C000h
</h2>
</center><p>
<table border=1 cellpadding=3 cellspacing=1>
<td>
<a href="rb-5287.htm">
<img src=./gif/lup.gif border=0 alt=Prev></a>
<a href="rb-5289.htm">
<img src=./gif/ldown.gif border=0 alt=Next></a>
<a href="../rbrown.htm">
<img src=./gif/lhome.gif border=0 alt=Ralf Brown Page></a>
<td><a href="int.htm">Interrups</a></td>
<td><a href="cat.htm">Categories</a></td>
<td><a href="alpha.htm">Contents</a></td>
</td></table><p>
<p><img src=./gif/rbline.gif width="100%" alt="------"><p>
<h3><font color=#C00040>Novell NetWare Event Service Layer (NESL) 1.0 - INSTALLATION CHECK</font></h3>
<PRE>
AX = C000h<br>
<p><b>Return:</b><br>AL = FFh if installed
DX:BX -> FAR entry point <a href="rb-0000.htm#Table0"></a>(see #03013,#03014,#03015,#03016,#03017,#03018)
ES:SI -> signature string "NESL_EVENTS"
</PRE>
<p><b>Program:</b>
NESL is a generic interface for event handling in ODI drivers and
other NetWare-oriented modules.  Primarily intended to support
power management and "hot swapping" of PCMCIA cards, but it is not
limited to this.
<PRE>
<p><b>Range:</b><br>AH=C0h to AH=FFh, selected by scanning for first free multiplex number
</PRE>
<p><b>See Also:</b>
<a href="rb-5287.htm">AX=C000h"Link Support Layer"</a> - <a href="rb-5289.htm">AX=C000h"NETWARN"</a>
<PRE>
<p>
<a name=table3013></a>
(Table 03013)
Call NESL function GetNESLConfigPointer with:.
BX = 0000h<br>
<p><b>Return:</b><br>AX = completion code (0000h,8008h) (see #03019)
ES:SI -> NESL configuration table if successful <a href="rb-5288.htm#Table3020">(see #03020)</a>
BP,DS,STACK preserved
</PRE>
<p><b>Desc:</b>
Obtain a pointer to the NESL Configuration Table
<p><b>See Also:</b>
#03014 - #03017
<PRE>
<p>
<a name=table3014></a>
(Table 03014)
Call NESL function RegisterEventProducer with:.
BX = 0001h.
ES:SI -> Producer Event Control Block (PECB) <a href="rb-5288.htm#Table3021">(see #03021)</a><br>
<p><b>Return:</b><br>AX = completion code (0000h, 8005h, 8008h) (see #03019)
ES:SI -> still points to PECB
BP,DS,STACK preserved
</PRE>
<p><b>Desc:</b>
Allows a module to register as a producer of a given event class
<p><b>Note:</b>
PECB_ClassName and PECB_Flags must be filled in on entry
<p><b>See Also:</b>
#02870 - #03015 - #03016 - #03017
<PRE>
<p>
<a name=table3015></a>
(Table 03015)
Call NESL function DeRegisterEventProducer with:.
BX = 0002h.
ES:SI -> PECB previously passed to RegisterEventProducer <a href="rb-5288.htm#Table3021">(see #03021)</a><br>
<p><b>Return:</b><br>AX = completion code (0000h, 8002h, 8008h) (see #03019)
ES:SI -> still points to PECB
BP,DS,STACK preserved
</PRE>
<p><b>Desc:</b>
Allows a module to de-register as a producer of a given event class
<p><b>See Also:</b>
#03014 - #03018
<PRE>
<p>
<a name=table3016></a>
(Table 03016)
Call NESL function EventNotification with:.
BX = 0003h.
ES:SI -> PECB previously registered <a href="rb-5288.htm#Table3021">(see #03021)</a><br>
<p><b>Return:</b><br>AX = completion code (0h, 8005h, 8008h) (see #03019)
ES:SI -> still points to PECB
BP,DS,STACK preserved
</PRE>
<p><b>Desc:</b>
Allows a module to signal that an event has just occurred in a given
event class.
<p><b>Notes:</b>
Once called, NESL will generate corresponding callouts for this
event, as described in Table #03023..
On entry, the PECB_DataPtr must point at an Event Parameter Block (EPB)
<a href="rb-5288.htm#Table3024">(see #03024)</a> filled in to match the desired event
<p><b>See Also:</b>
#03014
<PRE>
<p>
<a name=table3017></a>
(Table 03017)
Call NESL function RegisterEventConsumer with:.
BX = 0004h.
ES:SI -> Consumer Event Control Block (CECB) <a href="rb-5288.htm#Table3022">(see #03022)</a><br>
<p><b>Return:</b><br>AX = completion code (0h, 8005h, 8008h) (see #03019)
ES:SI -> still points to CECB
BP,DS,STACK preserved
</PRE>
<p><b>Desc:</b>
Allows a module to register as a consumer of a given event class
<p><b>Note:</b>
On entry, the CECB_ClassName, CECB_NotifProc and CECB_OSILevel must be
filled in.
<p><b>See Also:</b>
#03014 - #03018
<PRE>
<p>
<a name=table3018></a>
(Table 03018)
Call NESL function DeRegisterEventConsumer with:.
BX = 0005h.
ES:SI -> CECB previously passed to RegisterEventConsumer <a href="rb-5288.htm#Table3022">(see #03022)</a><br>
<p><b>Return:</b><br>AX = completion code (0h, 8002h, 8008h) (see #03019)
ES:SI -> still points to CECB
BP,DS,STACK preserved
</PRE>
<p><b>Desc:</b>
Allows a module to de-register as a consumer of a given event class
<p><b>See Also:</b>
#03015 - #03017
<PRE>
<p>
<a name=table3019></a>
(Table 03019)
Values for NESL Error code:
0000h  Successful
8002h  Bad Parameter
8005h  Fail
8008h  Bad Command
<p>
Format of NESL Configuration Table:
<a name=table3020></a>
Offset  Size    Description     (Table 03020)
00h    WORD    NESL_Cfg_MajVer  Major Version of this table (=1)
02h    WORD    NESL_Cfg_MinVer  Minor Version of this table (=0)
04h    DWORD   NESL_Cfg_ModLName   -> ASCIZ long name of NESL module
(typically -> "NetWare Event Service Layer for 16-Bit DOS")
08h    DWORD   NESL_Cfg_ModSName   -> ASCIZ short name of NESL module
(typically -> "NESL")
0Ch    WORD    NESL_Cfg_ModMajVer  Major Version of NESL itself (=1)
0Eh    WORD    NESL_Cfg_ModMinVer  Minor Version of NESL itself (=0)
<p>
Format of NESL Producer Event Control Block (PECB):
<a name=table3021></a>
Offset  Size    Description     (Table 03021)
00h    WORD    PECB_MajVer  Major Version of this structure (=1)
02h    WORD    PECB_MinVer  Minor Version of this structure (=0)
04h    DWORD   PECB_NextProducer   -> next PECB.  NULL if last.
08h    DWORD   PECB_ClassName      -> ASCIZ string identifying event
class <a href="rb-5288.htm#Table3025">(see #03025)</a>
0Ch    DWORD   PECB_ConsumerList   -> list of consumers for this event class
10h    DWORD   PECB_DataPtr        -> points to additional data during events
14h    DWORD   PECB_Flags
Bit 0   =0  consumers should be called "top down" for this
event class.  (OSI level 7 down to OSI level 1)
=1  consumers should be called "bottom up"
Bits 1-31   Reserved =0
18h  8 BYTEs   PECB_Reserved (all zeros)
</PRE>
<p><b>Note:</b>
Although the event producer provides the memory for the PECB, the
NESL module controls this memory until the event class is
de-registered..
While owned by NESL, this structure should be treated as read-only,
except for the PECB_DataPtr field.
<PRE>
<p>
Format of NESL Consumer Event Control Block (CECB):
<a name=table3022></a>
Offset  Size    Description     (Table 03022)
00h    WORD    CECB_MajVer  Major Version of this structure (=1)
02h    WORD    CECB_MinVer  Minor Version of this structure (=0)
04h    DWORD   CECB_NextConsumer   -> next CECB.  NULL if last.
08h    DWORD   CECB_ClassName      -> ASCIZ string identifying event
class <a href="rb-5288.htm#Table3025">(see #03025)</a>
0Ch    DWORD   CECB_NotifProc      -> FAR CALL event handler <a href="rb-5288.htm#Table3023">(see #03023)</a>
10h    WORD    CECB_OSILevel
Bits 4-7 = OSI Layer of this module (1 through 7)
Bits 0-3 = relative ordering with other modules on same layer
13h 14 BYTEs   CECB_Reserved (all zeros)
</PRE>
<p><b>Note:</b>
Although the event consumer provides the memory for the CECB, the
NESL module controls this memory until the consumer is de-registered..
While owned by NESL, this structure should be treated as read-only,
<PRE>
<p>
<a name=table3023></a>
(Table 03023)
Values NESL Consumer Notification Procedure is called with:.
ES:SI -> Event Parameter Block (EPB) <a href="rb-5288.htm#Table3024">(see #03024)</a><br>
<p><b>Return:</b><br>AX = completion code (0000h, 8005h) (see #03019)
ES:SI -> still points to EPB
</PRE>
<p><b>Desc:</b>
Called by NESL to notify the consumer when an event has occurred in
an event class for which it has registered.
<p><b>See Also:</b>
#03022
<PRE>
<p>
Format of NESL Event Parameter Block (EPB):
<a name=table3024></a>
Offset  Size    Description     (Table 03024)
00h    WORD    EPB_MajVer  Major Version of this structure (=1)
02h    WORD    EPB_MinVer  Minor Version of this structure (=0)
04h    DWORD   EPB_ClassName  -> ASCIZ string identifying event class
<a href="rb-5288.htm#Table3025">(see #03025)</a>
08h    DWORD   EPB_EventName  -> ASCIZ string identifying event within
class <a href="rb-5288.htm#Table3026">(see #03026)</a>
0Ch    DWORD   EPB_ModuleName -> ASCIZ string identifying module
producing event
10h    DWORD   EPB_DataPtr0   -> event-defined data or NULL if not used
14h    DWORD   EPB_DataPtr1   -> event-defined data or NULL if not used
18h  8 BYTEs   EPB_Reserved (all zeros)
<p>
<a name=table3025></a>
(Table 03025)
Values for NESL Event Class Names:
Event Class            Description
-------------------    -----------------------------------------
Service Suspend        Suspension of a service.  Called top-down.
Service Resume         Resumption/availability of a service. Called bottom-up.
Service/Status Change  Change in status or level of service.  Called top-down.
Suspend Request        Request to suspend a service.  Called bottom-up.
</PRE>
<p><b>Note:</b>
Contact Novell Labs to register new event classes.
<PRE>
<p>
<a name=table3026></a>
(Table 03026)
Values for NESL Event Names:
Event Name                     Class               Description
--------------------------     -------------       ---------------------------
MLID Cable Disconnect          Service Suspend     Cable disconnected from NIC
MLID Card Removal              Service Suspend     PCMCIA card removed
MLID Hardware Failure          Service Suspend     Serious hardware
failure in NIC
MLID Not In Range              Service Suspend     Wireless access point
is out of range
MLID Shutdown                  Service Suspend     MLID was shut down
MLID Media Access Denied       Service Suspend     Access to physical
medium unsuccessful
MLID Cable Reconnect           Service Resume      Cable re-connected to NIC
MLID Card Insertion Complete   Service Resume      PCMCIA card inserted
MLID In Range                  Service Resume      Wireless access point
in range
MLID Reset                     Service Resume      MLID was just reset
MLID Access Point Change       Serv/Status Change  Station has moved to
new access point
MLID Speed Change              Serv/Status Change  Change in communic. speed
</PRE>
<p><b>Note:</b>
Contact Novell Labs to register new event names..
For all predefined events above, EPB_DataPtr0 <a href="rb-5288.htm#Table3024">(see #03024)</a> points
to the MLID Configuration table (see AX=C000h"ODI") for the
affected MLID.
<p>
<b>Category: <a href="cat-026.htm">
Netware</a>
- <a href="int-2F.htm">
Int 2Fh</a>
- <a href="alpha-n.htm">
N</a>
</b><p><p><img src=./gif/rbline.gif width="100%" alt="------"><p>
<table border=1 cellpadding=3 cellspacing=1>
<td>
<a href="rb-5287.htm">
<img src=./gif/lup.gif border=0 alt=Prev></a>
<a href="rb-5289.htm">
<img src=./gif/ldown.gif border=0 alt=Next></a>
<a href="../rbrown.htm">
<img src=./gif/lhome.gif border=0 alt=Ralf Brown Page></a>
<td><a href="int.htm">Interrups</a></td>
<td><a href="cat.htm">Categories</a></td>
<td><a href="alpha.htm">Contents</a></td>
</td></table><p>



</BODY>
</HTML>
