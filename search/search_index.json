{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs \u00b6 For full documentation visit mkdocs.org . Commands \u00b6 mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout \u00b6 mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files. class OpeningManimExample ( Scene ): def construct ( self ): intro_words = Text ( \"\"\" The original motivation for manim was to better illustrate mathematical functions as transformations. \"\"\" )","title":"HomePage"},{"location":"#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files. class OpeningManimExample ( Scene ): def construct ( self ): intro_words = Text ( \"\"\" The original motivation for manim was to better illustrate mathematical functions as transformations. \"\"\" )","title":"Project layout"},{"location":"todo/","text":"\u4ee3\u529e\u4e8b\u9879 \u00b6 nav \u680f\u989c\u8272 \u6697\u8272\u4e3b\u9898 \u5b57\u4f53\u5927\u5c0f h1 h2 \u7684 font-weight\uff08\u8c8c\u4f3c\u624b\u673a\u4e0a\u6ca1\u95ee\u9898\uff1f\uff09 \u884c\u8ddd \u4fee\u516c\u5f0f\u6e32\u67d3 \u4e3b\u9875\u3001\u5173\u4e8e \u9875\u811a\u7248\u6743\u4fe1\u606f \u9875\u811a\u8054\u7cfb\u65b9\u5f0f \u94fe\u63a5 GitHub \u4ed3\u5e93 tasklist \u6837\u5f0f \u642c\u8fd0\u535a\u5ba2 \u4e8c\u7ef4\u7801 Haskell hackergame writeup \u642c\u51e0\u4e2a\u6bd4\u8d5b\u7684 writeup \u5efa\u7acb writeup \u5206\u533a \u5efa\u7acb \u8ba1\u7b97\u673a \u5206\u533a \u90e8\u7f72\u5230\u4e91\u670d\u52a1\u5668 \u5de6\u4e0a\u89d2 logo \u5b8c\u5584 css \u5b8c\u5584\u56fe\u7247\u94fe\u63a5 \u7ed1\u5b9a\u57df\u540d \u516c\u5f00 repo \u663e\u793a\u6700\u540e\u4fee\u6539\u65f6\u95f4 GitHub repo \u6dfb\u52a0 README \u624b\u673a\u7aef\u989c\u8272\u95ee\u9898 \u4ee3\u7801\u5757\u80cc\u666f\u548c\u535a\u5ba2\u540c\u6b65 \u4ee3\u7801\u914d\u8272\u65b9\u6848\u548c\u535a\u5ba2\u540c\u6b65 \u81ea\u52a8\u6697\u8272 \u6dfb\u52a0 icons \u548c emojis \u53f3\u4fa7 toc \u6df1\u5ea6\u8c03\u6574 \u5de6\u4fa7 nav \u6df1\u5ea6\u8c03\u6574 \u4e3a\u6bcf\u4e2a\u5206\u533a\u6dfb\u52a0 index \u8bbf\u95ee\u7edf\u8ba1 Google Analytics \u767e\u5ea6\u7edf\u8ba1 \u53c2\u8003\u94fe\u63a5 \u00b6 https://shafish.cn/blog/mkdocs/ pymdownx \u7684\u6587\u6863\u914d\u7f6e \u4ee5\u524d\u5199\u7684\u6587\u7ae0 pymdownx \u6587\u6863","title":"TODO"},{"location":"todo/#_1","text":"nav \u680f\u989c\u8272 \u6697\u8272\u4e3b\u9898 \u5b57\u4f53\u5927\u5c0f h1 h2 \u7684 font-weight\uff08\u8c8c\u4f3c\u624b\u673a\u4e0a\u6ca1\u95ee\u9898\uff1f\uff09 \u884c\u8ddd \u4fee\u516c\u5f0f\u6e32\u67d3 \u4e3b\u9875\u3001\u5173\u4e8e \u9875\u811a\u7248\u6743\u4fe1\u606f \u9875\u811a\u8054\u7cfb\u65b9\u5f0f \u94fe\u63a5 GitHub \u4ed3\u5e93 tasklist \u6837\u5f0f \u642c\u8fd0\u535a\u5ba2 \u4e8c\u7ef4\u7801 Haskell hackergame writeup \u642c\u51e0\u4e2a\u6bd4\u8d5b\u7684 writeup \u5efa\u7acb writeup \u5206\u533a \u5efa\u7acb \u8ba1\u7b97\u673a \u5206\u533a \u90e8\u7f72\u5230\u4e91\u670d\u52a1\u5668 \u5de6\u4e0a\u89d2 logo \u5b8c\u5584 css \u5b8c\u5584\u56fe\u7247\u94fe\u63a5 \u7ed1\u5b9a\u57df\u540d \u516c\u5f00 repo \u663e\u793a\u6700\u540e\u4fee\u6539\u65f6\u95f4 GitHub repo \u6dfb\u52a0 README \u624b\u673a\u7aef\u989c\u8272\u95ee\u9898 \u4ee3\u7801\u5757\u80cc\u666f\u548c\u535a\u5ba2\u540c\u6b65 \u4ee3\u7801\u914d\u8272\u65b9\u6848\u548c\u535a\u5ba2\u540c\u6b65 \u81ea\u52a8\u6697\u8272 \u6dfb\u52a0 icons \u548c emojis \u53f3\u4fa7 toc \u6df1\u5ea6\u8c03\u6574 \u5de6\u4fa7 nav \u6df1\u5ea6\u8c03\u6574 \u4e3a\u6bcf\u4e2a\u5206\u533a\u6dfb\u52a0 index \u8bbf\u95ee\u7edf\u8ba1 Google Analytics \u767e\u5ea6\u7edf\u8ba1","title":"\u4ee3\u529e\u4e8b\u9879"},{"location":"todo/#_2","text":"https://shafish.cn/blog/mkdocs/ pymdownx \u7684\u6587\u6863\u914d\u7f6e \u4ee5\u524d\u5199\u7684\u6587\u7ae0 pymdownx \u6587\u6863","title":"\u53c2\u8003\u94fe\u63a5"},{"location":"cs/pl/haskell/","text":"Haskell \u662f\u4e00\u79cd\u6807\u51c6\u5316\u7684\uff0c\u901a\u7528\u7684\u7eaf\u51fd\u6570\u5f0f\u7f16\u7a0b\u8bed\u8a00\uff0c\u6709\u60f0\u6027\u6c42\u503c\u548c\u5f3a\u9759\u6001\u7c7b\u578b\u3002\u5b83\u7684\u547d\u540d\u6e90\u81ea\u7f8e\u56fd\u903b\u8f91\u5b66\u5bb6\u54c8\u65af\u51ef\u5c14\u00b7\u52a0\u91cc\uff0c\u4ed6\u5728\u6570\u7406\u903b\u8f91\u65b9\u9762\u4e0a\u7684\u5de5\u4f5c\u4f7f\u5f97\u51fd\u6570\u5f0f\u7f16\u7a0b\u8bed\u8a00\u6709\u4e86\u5e7f\u6cdb\u7684\u57fa\u7840\u3002\u5728 Haskell \u4e2d\uff0c\u201c\u51fd\u6570\u662f\u7b2c\u4e00\u7c7b\u5bf9\u8c61\u201d\u3002\u4f5c\u4e3a\u4e00\u95e8\u51fd\u6570\u7f16\u7a0b\u8bed\u8a00\uff0c\u4e3b\u8981\u63a7\u5236\u7ed3\u6784\u662f\u51fd\u6570\u3002Haskell \u8bed\u8a00\u662f1990\u5e74\u5728\u7f16\u7a0b\u8bed\u8a00 Miranda \u7684\u57fa\u7840\u4e0a\u6807\u51c6\u5316\u7684\uff0c\u5e76\u4e14\u4ee5\u03bb\u6f14\u7b97\u4e3a\u57fa\u7840\u53d1\u5c55\u800c\u6765\u3002\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48 Haskell \u8bed\u8a00\u4ee5\u5e0c\u814a\u5b57\u6bcd \u201c\u03bb\u201d\uff08Lambda\uff09\u4f5c\u4e3a\u81ea\u5df1\u7684\u6807\u5fd7\u3002Haskell \u5177\u6709\u201c\u8bc1\u660e\u5373\u7a0b\u5e8f\u3001\u547d\u9898\u4e3a\u7c7b\u578b\u201d\u7684\u7279\u5f81\u3002 \u2014\u2014\u2014\u2014 \u7ef4\u57fa\u767e\u79d1 \u57fa\u7840\u8fd0\u7b97 \u00b6 + - * / () \uff1a\u52a0\u51cf\u4e58\u9664 div \uff1a\u6574\u9664 mod \uff1a\u53d6\u6a21 True False \uff1a\u5e03\u5c14\u503c || && not \uff1a\u6216\u4e14\u975e == \uff1a\u6761\u4ef6\u5224\u65ad\uff0c\u76f8\u7b49 /= \uff1a\u6761\u4ef6\u5224\u65ad\uff0c\u4e0d\u7b49 \u51fd\u6570\u8c03\u7528 \u00b6 Haskell \u4e2d\u8c03\u7528\u51fd\u6570\u4e0d\u52a0\u62ec\u53f7\uff0c\u5148\u5199\u51fa\u51fd\u6570\u540d\uff0c\u7136\u540e\u9010\u4e2a\u5217\u51fa\u53c2\u6570\uff0c\u7528\u7a7a\u683c\u9694\u5f00\uff1a ghci > max 1 2 2 \u524d\u7f00\uff08prefix\uff09\u51fd\u6570\u4e0e\u4e2d\u7f00\uff08infix\uff09\u51fd\u6570\u8f6c\u6362\uff1a \u5bf9\u524d\u7f00\u51fd\u6570\u52a0 `` \u4f7f\u5176\u53d8\u6210\u4e2d\u7f00\u51fd\u6570 \u5bf9\u4e2d\u7f00\u51fd\u6570\u52a0 () \u4f7f\u5176\u53d8\u6210\u524d\u7f00\u51fd\u6570 ghci > 4 ` div ` 2 2 ghci > 1 ` max ` 2 2 ghci > ( + ) 1 2 3 ghci > ( || ) True False True List \u00b6 \u5217\u8868\u662f Haskell \u4e2d\u5f88\u5e38\u89c1\u7684\u6570\u636e\u7c7b\u578b\uff0c\u548c Python \u4e2d\u4e0d\u540c\uff0cHaskell \u4e2d\u7684\u5217\u8868\u4e2d\u7684\u6240\u6709\u5143\u7d20\u5fc5\u987b\u662f\u540c\u4e00\u4e2a\u7c7b\u578b\u3002 \u4ee5\u4e0b\u662f\u5217\u8868\u5e38\u7528\u7684\u51fd\u6570\uff1a (++) :: [a] -> [a] -> [a]\uff1a\u5408\u5e76\u4e24\u4e2a\u5217\u8868 (:) :: a -> [a] -> [a]\uff1a\u5c06\u5355\u4e2a\u5143\u7d20\u5e76\u5165\u5217\u8868\u3002[1, 2, 3] \u662f 1:2:3:[] \u7684\u8bed\u6cd5\u7cd6 (!!) :: [a] -> Int -> a\uff1a\u901a\u8fc7\u7d22\u5f15\u53d6\u51fa\u67d0\u4e2a\u4f4d\u7f6e\u4e0a\u7684\u5143\u7d20\u3002a !! 1 \u76f8\u5f53\u4e8e Python \u4e2d\u7684 a[1] head :: [a] -> a\uff1a\u8fd4\u56de\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20 tail :: [a] -> [a]\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u9664\u53bb\u7b2c\u4e00\u4e2a\u5143\u7d20\u540e\u7684\u5217\u8868\uff08\u82e5\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u5219\u8fd4\u56de\u7a7a\u5217\u8868[]\uff09 last :: [a] -> a\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20 init :: [a] -> [a]\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u9664\u53bb\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u540e\u7684\u5217\u8868 length :: Foldable t => t a -> Int\uff1a\u8fd4\u56de\u5217\u8868\u7684\u957f\u5ea6 null :: Foldable t => t a -> Bool\uff1a\u8fd4\u56de\u5217\u8868\u662f\u5426\u4e3a\u7a7a reverse :: [a] -> [a]\uff1a\u8fd4\u56de\u7ffb\u8f6c\u540e\u7684\u5217\u8868 take :: Int -> [a] -> [a]\uff1a\u8fd4\u56de\u5217\u8868a\u7684\u524dn\u4e2a\u5143\u7d20\u7684\u5217\u8868(take n a) drop :: Int -> [a] -> [a]\uff1a\u8fd4\u56de\u5217\u8868a\u4e2d\u9664\u53bb\u524dn\u4e2a\u5143\u7d20\u540e\u7684\u5217\u8868(drop n a) maximum :: (Foldable t, Ord a) => t a -> a\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u7684\u6700\u5927\u503c minimum :: (Foldable t, Ord a) => t a -> a\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u7684\u6700\u5c0f\u503c sum :: (Foldable t, Num a) => t a -> a\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u6240\u6709\u5143\u7d20\u7684\u548c product :: (Foldable t, Num a) => t a -> a\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u6240\u6709\u5143\u7d20\u7684\u79ef elem :: (Foldable t, Eq a) => t a -> Bool\uff1a\u5224\u65ad\u503cn\u662f\u5426\u5728\u5217\u8868a\u4e2d elem n a -- \u6216 n ` elem ` a --\u7528``\u5305\u4e0a\u53ef\u4ee5\u53d8\u6210\u4e2d\u7f00\u51fd\u6570\u4f7f\u7528 Texas ranges \u00b6 \u4f7f\u7528 .. \u53ef\u4ee5\u8868\u793a\u51fa\u8303\u56f4\u5e76\u81ea\u52a8\u63a8\u5bfc\uff1a ghci > [ 1 .. 10 ] [ 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 ] ghci > [ 'a' .. 'z' ] \"abcdefghijklmnopqrstuvwxyz\" ghci > [ 'K' .. 'Z' ] \"KLMNOPQRSTUVWXYZ\" ghci > [ 2 , 4 .. 20 ] [ 2 , 4 , 6 , 8 , 10 , 12 , 14 , 16 , 18 , 20 ] ghci > [ 3 , 6 .. 20 ] [ 3 , 6 , 9 , 12 , 15 , 18 ] ghci > [ 5 , 4 .. 1 ] [ 5 , 4 , 3 , 2 , 1 ] \u4e5f\u53ef\u4ee5\u7528\u6765\u751f\u6210\u65e0\u7a77\u5217\u8868\uff0c\u5982 [1..]\u3001[1, 3..]\u3002\u540c\u65f6\u4e5f\u6709\u51fd\u6570\u53ef\u4ee5\u751f\u6210\u65e0\u7a77\u5217\u8868\uff1a cycle :: [a] -> [a]\uff1a\u5c06\u539f\u5217\u8868\u4e0d\u65ad\u5faa\u73af\u751f\u6210\u65e0\u7a77\u5217\u8868 repeat :: a -> [a]\uff1a\u5c06\u4f20\u5165\u7684\u503c\u4e0d\u65ad\u91cd\u590d\u751f\u6210\u65e0\u7a77\u5217\u8868 replicate :: Int -> a -> [a]\uff1a\u5c06\u503ca\u91cd\u590dn\u6b21\uff0c\u8fd4\u56de\u751f\u6210\u7684\u5217\u8868(replicate n a) List comprehension \u00b6 Haskell \u4e2d\u4e5f\u6709\u5217\u8868\u63a8\u5bfc\uff0c\u5f62\u5f0f\u662f\u4e00\u4e2a\u4e2d\u62ec\u53f7\uff0c\u5de6\u4fa7\u4e3a\u8868\u8fbe\u5f0f\uff0c\u53f3\u4fa7\u4e3a\u53d8\u91cf\u7684\u8303\u56f4\u548c\u7ea6\u675f\u6761\u4ef6 ghci > [ x * 2 | x <- [ 1 .. 10 ]] [ 2 , 4 , 6 , 8 , 10 , 12 , 14 , 16 , 18 , 20 ] ghci > [ x * 2 | x <- [ 1 .. 10 ], x * 2 >= 12 ] [ 12 , 14 , 16 , 18 , 20 ] ghci > [ x | x <- [ 50 .. 100 ], x ` mod ` 7 == 3 ] [ 52 , 59 , 66 , 73 , 80 , 87 , 94 ] ghci > [ x * y | x <- [ 2 , 5 , 10 ], y <- [ 8 , 10 , 11 ]] [ 16 , 20 , 22 , 40 , 50 , 55 , 80 , 100 , 110 ] Tuple \u00b6 Haskell\u4e2d\u7684\u5143\u7ec4\u53ef\u4ee5\u6709\u4e0d\u540c\u957f\u5ea6\uff0c\u5143\u7d20\u53ef\u4ee5\u6709\u4e0d\u540c\u7c7b\u578b\u3002\u5e76\u4e14\u4e00\u4e2a\u5143\u7ec4\u7684\u7c7b\u578b\u7531\u5176\u4e2d\u6240\u6709\u5143\u7d20\u7684\u7c7b\u578b\u5171\u540c\u51b3\u5b9a\u3002\u5b83\u7684\u5e38\u7528\u51fd\u6570\uff1a fst :: (a, b) -> a\uff1a\u8fd4\u56de\u542b\u6709\u4e24\u4e2a\u5143\u7d20\u5143\u7ec4\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20 snd :: (a, b) -> b\uff1a\u8fd4\u56de\u542b\u6709\u4e24\u4e2a\u5143\u7d20\u5143\u7ec4\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20 zip :: [a] -> [b] -> [(a, b)]\uff1a\u63a5\u6536\u4e24\u4e2a\u5217\u8868\uff0c\u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u6bcf\u4e2a\u5143\u7d20\u662f\u4f9d\u6b21\u5c06\u4e24\u4e2a\u5217\u8868\u4e2d\u5143\u7d20\u914d\u5bf9\u6210\u7684\u4e8c\u5143\u7ec4 Syntax in Functions \u00b6 \u51fd\u6570\u53ef\u4ee5\u76f4\u63a5\u5b9a\u4e49\uff1a plus x y = x + y \u8fd9\u65f6Haskell\u4f1a\u81ea\u52a8\u63a8\u65ad\u51fd\u6570\u7684\u7c7b\u578b\u4e3a(Num a) => a -> a -> a\u3002\u4f46\u662f\u6700\u597d\u5728\u5b9a\u4e49\u51fd\u6570\u524d\u58f0\u660e\u51fd\u6570\u7684\u7c7b\u578b\uff1a plus :: ( Num a ) => a -> a -> a plus x y = x + y Pattern matching \u00b6 \u5b9a\u4e49\u51fd\u6570\u65f6\u53ef\u4ee5\u4f7f\u7528\u6a21\u5f0f\u5339\u914d\u8bed\u6cd5\u3002\u8fd0\u884c\u65f6\u4f9d\u6b21\u5c06\u8f93\u5165\u4e0e\u7ed9\u51fa\u7684\u6a21\u5f0f\u76f8\u5339\u914d\uff0c\u5982\u679c\u5339\u914d\uff0c\u5c31\u6267\u884c\u5bf9\u5e94\u64cd\u4f5c\uff1b\u4e0d\u5339\u914d\uff0c\u5c31\u7ee7\u7eed\u4e0e\u4e0b\u4e00\u4e2a\u6a21\u5f0f\u76f8\u5339\u914d\uff0c\u76f4\u5230\u5339\u914d\u6210\u529f\uff0c\u4e5f\u56e0\u6b64\uff0c\u6700\u540e\u5fc5\u987b\u8981\u7ed9\u51fa\u4e00\u79cd\u901a\u7528\u7684\u5339\u914d\u6765\u63a5\u6536\u4e0e\u7ed9\u51fa\u6a21\u5f0f\u5168\u4e0d\u5339\u914d\u7684\u8f93\u5165\u3002\u5982\uff1a factorial :: ( Integral a ) => a -> a factorial 0 = 1 factorial n = n * factorial ( n - 1 ) first :: ( a , b , c ) -> a first ( x , _ , _ ) = x second :: ( a , b , c ) -> b second ( _ , y , _ ) = y third :: ( a , b , c ) -> c third ( _ , _ , z ) = z \u5176\u4e2d _ \u8868\u793a\u4efb\u4f55\u503c\uff0c\u4e14\u4e0d\u5173\u5fc3\u5b83\u7684\u5185\u5bb9\uff0c\u53ea\u662f\u7528\u6765\u5360\u4f4d \u5217\u8868\u7684 (:) \u64cd\u4f5c\u4e5f\u53ef\u4ee5\u7528\u6765\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\uff1a head' :: [ a ] -> a head' [] = error \"Can't call head on an empty list, dummy!\" head' ( x : _ ) = x sum' :: ( Num a ) => [ a ] -> a sum' [] = 0 sum' ( x : xs ) = x + sum' xs \u4f46 (++) \u64cd\u4f5c\u4e0d\u53ef\u4ee5\u7528\u6765\u6a21\u5f0f\u5339\u914d \u5728\u9488\u5bf9\u5217\u8868\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\u65f6\uff0c\u5982\u679c\u540c\u65f6\u9700\u8981\u6574\u4e2a\u5217\u8868\u3001\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u503c\u3001\u5217\u8868\u9664\u7b2c\u4e00\u4e2a\u503c\u5916\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u4f7f\u7528 xs@(q:qs) \u3002\u6bd4\u5982 [1, 2, 3] \u901a\u8fc7 xs@(q:qs) \u5339\u914d\u540e\uff0cxs \u4e3a [1, 2, 3]\uff0cq \u4e3a 1\uff0cqs \u4e3a [2, 3] Guard syntax \u00b6 \u5728\u51fd\u6570\u7684\u5b9a\u4e49\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5b88\u536b\uff08guard\uff09\u8bed\u6cd5\uff1a max' :: ( Ord a ) => a -> a -> a max' a b | a > b = a | otherwise = b \u5148\u7ed9\u51fa\u4f20\u5165\u7684\u53c2\u6570\u53d8\u91cf\uff0c\u7136\u540e\u4e0b\u4e00\u884c\u7f29\u8fdb\u540e\u52a0 |\uff0c| \u540e\u9762\u7b49\u53f7\u524d\u8868\u793a\u8fdb\u884c\u7684\u5224\u65ad\uff0c\u5982\u679c\u4e3a True \u5219\u8fd4\u56de\u8fd9\u4e2a\u7b49\u53f7\u540e\u9762\u7684\u503c\uff1b\u5982\u679c\u4e3a False \u5219\u7ee7\u7eed\u5224\u65ad\u4e0b\u4e00\u884c\uff0c\u76f4\u5230 otherwise Case expressions \u00b6 \u5728\u51fd\u6570\u7684\u5b9a\u4e49\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 case \u8868\u8fbe\u5f0f\u6765\u914d\u5408\u6a21\u5f0f\u5339\u914d\u4f7f\u7528\uff1a case expression of pattern -> result pattern -> result ... \u4f8b\u5982\uff1a head' :: [ a ] -> a head' [] = error \"No head for empty lists!\" head' ( x : _ ) = x -- \u7b49\u4ef7\u4e8e\uff1a head' :: [ a ] -> a head' xs = case xs of [] -> error \"No head for empty lists!\" ( x : _ ) -> x describeList :: [ a ] -> String describeList xs = \"The list is \" ++ case xs of [] -> \"empty.\" [ x ] -> \"a singleton list.\" xs -> \"a longer list.\" -- \u7b49\u4ef7\u4e8e\uff1a describeList :: [ a ] -> String describeList xs = \"The list is \" ++ what xs where what [] = \"empty.\" what [ x ] = \"a singleton list.\" what xs = \"a longer list.\" where \u00b6 \u58f0\u660e\u5728\u51fd\u6570\u5b9a\u4e49\u4e2d\u8981\u4f7f\u7528\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u53ef\u4ee5\u4f7f\u7528 where \u5173\u952e\u5b57\uff1a initials :: String -> String -> String initials firstname lastname = [ f ] ++ \". \" ++ [ l ] ++ \".\" where ( f : _ ) = firstname ( l : _ ) = lastname \u5728 where \u4e2d\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e0a\u9762\u7684\u6a21\u5f0f\u5339\u914d let \u00b6 let <bindings> in <expression> \u8bed\u6cd5\u53ef\u4ee5\u5728\u51fd\u6570\u7684\u5b9a\u4e49\u4e2d\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5728\u666e\u901a\u7b97\u5f0f\u6216\u5217\u8868\u4e2d\u4f7f\u7528\uff1a cylinder :: ( RealFloat a ) => a -> a -> a cylinder r h = let sideArea = 2 * pi * r * h topArea = pi * r ^ 2 in sideArea + 2 * topArea ghci > 4 * ( let a = 9 in a + 1 ) + 2 42 ghci > [ let square x = x * x in ( square 5 , square 3 , square 2 )] [( 25 , 9 , 4 )] if statement \u00b6 Haskell \u4e2d\u7684 if \u8bed\u53e5\u4e3a\uff1a if ... then ... else ... -- or if ... then ... else ... -- or if ... then ... else if ... then ... else ... \u5176\u4e2d\u6700\u540e\u4e00\u4e2a else \u65e0\u8bba\u5982\u4f55\u4e5f\u4e0d\u53ef\u4ee5\u7701\u53bb Higher Order Functions \u00b6 Currying \u00b6 Haskell \u4e2d\u7684\u51fd\u6570\u662f\u67ef\u91cc\u5316\uff08Currying\uff09\u7684\uff0c\u53ef\u4ee5\u770b\u4f5c\u6240\u6709\u51fd\u6570\u90fd\u53ea\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u800c\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\u7684\u51fd\u6570\u5b9e\u9645\u4e0a\u662f\u8fd9\u4e2a\u51fd\u6570\u63a5\u6536\u4e86\u7b2c\u4e00\u4e2a\u53c2\u6570\u540e\u8fd4\u56de\u4e86\u4e00\u4e2a\u63a5\u6536\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684\u51fd\u6570\uff0c\u7136\u540e\u7528\u8fd9\u4e2a\u51fd\u6570\u63a5\u6536\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u8fd4\u56de\u6700\u7ec8\u7684\u7ed3\u679c\u3002\u6bd4\u5982 max \u51fd\u6570\uff0c\u5b83\u7684\u7c7b\u578b\u7b7e\u540d\u662f\uff1a max :: Ord a => a -> a -> a \u53ef\u4ee5\u770b\u6210 a -> (a -> a)\uff0c\u5373\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u7c7b\u578b\u4e3a a -> a \u7684\u51fd\u6570\u3002\u6bd4\u5982 max 1 \u7684\u7c7b\u578b\u7b7e\u540d\u662f\uff1a max 1 :: (Ord a, Num a) => a -> a \u56e0\u6b64 max 1 2\uff0c\u4e5f\u5c31\u7b49\u540c\u4e8e (max 1) 2\uff0c\u5373\u5c06\u51fd\u6570 max 1 \u5e94\u7528\u5728\u6570\u5b572\u4e0a \u540c\u65f6\uff0c\u51fd\u6570\u4e5f\u53ef\u4ee5\u63a5\u6536\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u53c2\u6570\u6709\u51fd\u6570\u7684\u51fd\u6570\u5c31\u88ab\u79f0\u4e3a\u9ad8\u9636\u51fd\u6570\uff08Higher Order Functions\uff09 \u4e00\u4e9b\u9ad8\u9636\u51fd\u6570 \u00b6 zipWith \u00b6 zipWith :: (a -> b -> c) -> [a] -> [b] -> [c] \u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u4e00\u4e2a\u51fd\u6570\uff0c\u7136\u540e\u63a5\u6536\u4e24\u4e2a\u5217\u8868\uff0c\u5c06\u5176\u5bf9\u5e94\u5143\u7d20\u4f20\u5165\u63a5\u6536\u7684\u51fd\u6570\u4e2d\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u7ec4\u6210\u4e00\u4e2a\u65b0\u7684\u5217\u8868\u3002\u5982\u679c\u4e24\u4e2a\u4f20\u5165\u7684\u5217\u8868\u957f\u5ea6\u4e0d\u540c\uff0c\u4ee5\u6700\u77ed\u7684\u5217\u8868\u4e3a\u51c6\uff0c\u957f\u5217\u8868\u4e2d\u8d85\u51fa\u7684\u5143\u7d20\u7701\u7565\u3002\u7528\u4f8b\uff1a ghci > zipWith ( + ) [ 4 , 2 , 5 , 6 ] [ 2 , 6 , 2 , 3 ] [ 6 , 8 , 7 , 9 ] ghci > zipWith max [ 6 , 3 , 2 , 1 ] [ 7 , 3 , 1 , 5 ] [ 7 , 3 , 2 , 5 ] flip \u00b6 flip :: (a -> b -> c) -> b -> a -> c flip \u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u4e8c\u5143\u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u4e8c\u5143\u51fd\u6570\uff0c\u5c06\u5176\u8f93\u5165\u7684\u4e24\u4e2a\u53c2\u6570\u987a\u5e8f\u53cd\u8fc7\u6765\uff1a ghci > zip [ 1 , 2 , 3 , 4 , 5 ] \"hello\" [( 1 , 'h' ),( 2 , 'e' ),( 3 , 'l' ),( 4 , 'l' ),( 5 , 'o' )] ghci > flip zip [ 1 , 2 , 3 , 4 , 5 ] \"hello\" [( 'h' , 1 ),( 'e' , 2 ),( 'l' , 3 ),( 'l' , 4 ),( 'o' , 5 )] map \u00b6 map :: (a -> b) -> [a] -> [b] map \u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u51fd\u6570 f \u548c\u4e00\u4e2a\u5217\u8868 a\uff0c\u5c06\u51fd\u6570 f \u5e94\u7528\u5728\u5217\u8868 a \u7684\u6bcf\u4e2a\u5143\u7d20\u4e2d\uff0c\u5e76\u8fd4\u56de\u5f97\u5230\u7684\u6240\u6709\u7ed3\u679c\u7ec4\u6210\u7684\u5217\u8868 b\uff1a ghci > map ( + 3 ) [ 1 , 5 , 3 , 1 , 6 ] [ 4 , 8 , 6 , 4 , 9 ] filter \u00b6 filter :: (a -> Bool) -> [a] -> [a] filter \u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u51fd\u6570 f \u548c\u4e00\u4e2a\u5217\u8868 a\uff0c\u5c06\u5217\u8868 a \u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u4f20\u5165\u51fd\u6570 f \u4e2d\uff0c\u5982\u679c\u7ed3\u679c\u4e3a True \u5c31\u4fdd\u7559\uff0c\u7ed3\u679c\u4e3a False \u5c31\u629b\u5f03\uff0c\u8fd4\u56de\u6240\u6709\u4fdd\u7559\u7684\u5143\u7d20\u7ec4\u6210\u7684\u65b0\u5217\u8868\uff1a ghci > filter even [ 1 .. 10 ] [ 2 , 4 , 6 , 8 , 10 ] takeWhile \u00b6 takeWhile :: (a -> Bool) -> [a] -> [a] takeWhile \u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u51fd\u6570 f \u548c\u4e00\u4e2a\u5217\u8868 a\uff0c\u5c06\u5217\u8868 a \u4e2d\u4ece\u5de6\u5411\u53f3\u6bcf\u4e2a\u5143\u7d20\u4f20\u5165\u51fd\u6570 f\uff0c\u76f4\u5230\u7ed3\u679c\u4e3a False \u505c\u6b62\uff0c\u8fd4\u56de\u505c\u6b62\u524d\u4f20\u5165\u7684\u6240\u6709\u5143\u7d20\u7ec4\u6210\u7684\u65b0\u5217\u8868\uff1a ghci > takeWhile ( /= ' ' ) \"word1 word2\" \"word1\" Function application \u00b6 \u51fd\u6570\u5e94\u7528\u53ef\u4ee5\u4f7f\u7528 $ \uff0c $ \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u7684\u7c7b\u578b\u662f\uff1a ($) :: (a -> b) -> a -> b \u5b83\u53ef\u4ee5\u6539\u53d8\u51fd\u6570\u7ed3\u5408\u4f18\u5148\u7ea7\uff0c\u5c06\u5de6\u4fa7\u51fd\u6570\u5e94\u7528\u4e8e\u5168\u90e8\u53f3\u4fa7\u5185\u5bb9\u4e0a\uff0c\u76f8\u5f53\u4e8e\u7ed9\u53f3\u4fa7\u6574\u4f53\u52a0\u4e0a\u4e86\u62ec\u53f7\u3002\u5426\u5219\u51fd\u6570\u9ed8\u8ba4\u5de6\u7ed3\u5408\uff0c\u4f1a\u4f9d\u6b21\u5411\u53f3\u5e94\u7528\u800c\u4e0d\u4f1a\u5e94\u7528\u5728\u6574\u4f53\u4e0a\u3002 f $ g x -- \u7b49\u4ef7\u4e8e f ( g x ) ----- f g x -- \u7b49\u4ef7\u4e8e ( f g ) x Function Composition \u00b6 \u51fd\u6570\u590d\u5408\u53ef\u4ee5\u4f7f\u7528 . \uff0c . \u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u7684\u7c7b\u578b\u662f\uff1a (.) :: (b -> c) -> (a -> b) -> a -> c \u5b9a\u4e49\u662f\uff1a f . g = \\x -> f (g x) \u4f46\u662f\u51fd\u6570\u590d\u5408\u7684\u4f18\u5148\u7ea7\u8981\u6bd4\u51fd\u6570\u6267\u884c\u4f4e\uff0c\u6bd4\u5982\uff1a sum . replicate 5 . max 6.7 8.9 \u4f1a\u5148\u6267\u884c max 6.7 8.9 \u5e76\u8fd4\u56de 8.9\uff0c\u7136\u540e\u5c06 sum\u3001replicate 5\u30018.9 \u590d\u5408\uff0c\u4f46\u4e24\u4e2a\u51fd\u6570\u65e0\u6cd5\u548c\u4e00\u4e2a\u503c (8.9) \u590d\u5408\uff0c\u6240\u4ee5\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\u56e0\u6b64\u8981\u4f7f\u7528 $ \u6765\u89c4\u5b9a\u5148\u590d\u5408\u518d\u6267\u884c\uff1a sum . replicate 5 . max 6.7 $ 8.9 lambda \u00b6 Haskell \u8bed\u8a00\u4e2d\u7684 lambda \u8868\u8fbe\u5f0f\u662f\u7528 \\ \u6765\u8868\u793a\u7684\uff08\u56e0\u4e3a\u770b\u7740\u50cf \\(\\mathtt{\\lambda}\\) \uff1f\uff09 \u5177\u4f53\u8bed\u6cd5\u662f \\ para1 para2 ... -> return \"->\" \u524d\u7684 para1 para2 ... \u662f\u4f20\u5165\u53c2\u6570\uff0c\u5355\u4e2a\u591a\u4e2a\u90fd\u53ef\u4ee5\uff0c\u9700\u8981\u7528\u7a7a\u683c\u9694\u5f00\uff1b\"->\" \u540e\u7684 return \u662f\u8ba1\u7b97\u5f97\u5230\u7684\u8fd4\u56de\u503c\u3002\u4e00\u822c\u9700\u8981\u7528\u62ec\u53f7\u5c06\u6574\u4e2a\u8868\u8fbe\u5f0f\u62ec\u8d77\u6765\uff0c\u9632\u6b62\u8fd4\u56de\u503c\u90e8\u5206\u4e00\u76f4\u5411\u53f3\u5ef6\u4f38\u3002 fold\u548cscan \u00b6 fold \u548c scan \u90fd\u63a5\u6536\u4e09\u4e2a\u53c2\u6570\uff08\u4e00\u4e2a\u4e8c\u5143\u51fd\u6570\uff0c\u4e00\u4e2a\u521d\u59cb\u503c accumulator\uff0c\u4e00\u4e2a\u8981\u6298\u53e0\u7684\u5217\u8868\uff09\uff0cfold \u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u800c scan \u8fd4\u56de\u4e00\u4e2a\u5217\u8868 \u4f20\u5165\u7684\u4e8c\u5143\u51fd\u6570 f :: a -> b -> b \u5c06 accumulator \u548c\u4ece\u5217\u8868\u4e2d\u53d6\u51fa\u7684\u503c\u4e00\u540c\u4f20\u5165\uff08l \u5219 accumulator \u5728\u5de6\u8fb9\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0cr \u5219 accumulator \u5728\u53f3\u8fb9\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff09 foldl \u00b6 \u5de6\u6298\u53e0\uff0c\u6bcf\u6b21\u4ece\u5217\u8868\u6700\u5de6\u4fa7\u53d6\u51fa\u4e00\u4e2a\u503c\uff0c\u548c accumulator \u4e00\u8d77\u4f20\u5165\u4e8c\u5143\u51fd\u6570\uff0c\u5e76\u4e14 accumulator \u5728\u5de6\u8fb9\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u5982\uff1a foldl f a xs \u5b83\u7684\u7ed3\u679c\u8ba1\u7b97\u8fc7\u7a0b\u4e3a > foldl f a [ x1 , x2 , x3 ] [ 1 . ] a = f a x1 [ 2 . ] a = f a x2 = f ( f a x1 ) x2 [ 3 . ] a = f a x3 = f ( f ( f a x1 ) x2 ) x3 \u53ef\u4ee5\u770b\u51fa f (f a x1) x2 \u5176\u5b9e\u5c31\u662f foldl f a [x1, x2] \u800c\u4e14\u56e0\u6b64\uff0cfoldl \u5728\u8ba1\u7b97\u65f6\u6700\u5916\u5c42\u9700\u8981\u627e\u5230 x3\uff0c\u8fd9\u6837\u5982\u679c xs \u662f\u4e00\u4e2a\u65e0\u7a77\u5217\u8868\uff0c\u90a3\u4e48\u5c06\u65e0\u6cd5\u8ba1\u7b97\uff0c\u9677\u5165\u65e0\u7a77\u3002\u6240\u4ee5 foldl \u867d\u7136\u770b\u8d77\u6765\u4ece\u5de6\u8fb9\u53d6\u503c\uff0c\u4f46\u662f\u51fd\u6570\u9700\u8981\u4ece\u53f3\u4fa7\u5c55\u5f00\uff0c\u5e76\u4e0d\u9002\u7528\u4e8e\u65e0\u7a77\u5217\u8868 foldr \u00b6 \u53f3\u6298\u53e0\uff0c\u6bcf\u6b21\u4ece\u5217\u8868\u6700\u53f3\u4fa7\u53d6\u51fa\u4e00\u4e2a\u503c\uff0c\u548c accumulator \u4e00\u8d77\u4f20\u5165\u4e8c\u5143\u51fd\u6570\uff0c\u5e76\u4e14 accumulator \u5728\u53f3\u8fb9\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u5982\uff1a foldr f a xs \u5b83\u7684\u7ed3\u679c\u8ba1\u7b97\u8fc7\u7a0b\u4e3a > foldr f a [ x1 , x2 , x3 ] [ 1 . ] a = f x3 a [ 2 . ] a = f x2 a = f x2 ( f x3 a ) [ 3 . ] a = f x1 a = f x1 ( f x2 ( f x3 a )) \u4ece\u4e2d\u53ef\u4ee5\u770b\u51fa f x2 (f x3 a) \u5c31\u662f foldr f a [x2, x3] \u56e0\u6b64\u53ef\u4ee5\u4f7f\u7528\u9012\u5f52\u6765\u5199\u4e00\u4e2a\u548c foldr \u6548\u679c\u4e00\u6837\u7684\u51fd\u6570: foldr' :: ( a -> b -> b ) -> b -> [ a ] -> b foldr' _ x [] = x foldr' f a ( x : xs ) = f x ( foldr' f a xs ) \u4e5f\u53ef\u4ee5\u770b\u51fa\uff0c\u6700\u5916\u5c42\u8ba1\u7b97\u65f6\u53ea\u9700\u8981 x1 \u5e76\u4e14\u5411\u4e0b\u9012\u5f52\uff0c\u5e76\u4e0d\u4f1a\u63a5\u89e6\u5230\u5217\u8868\u672b\u5c3e\uff0c\u56e0\u6b64\u53ef\u4ee5\u7528\u4e8e\u65e0\u7a77\u5217\u8868\u3002foldr \u5373\u4f7f\u770b\u4e0a\u53bb\u4ece\u53f3\u8fb9\u53d6\u503c\uff0c\u4f46\u662f\u8981\u4ece\u5de6\u5f00\u59cb\u5c55\u5f00\uff0c\u53ef\u4ee5\u7528\u4e8e\u65e0\u7a77\u5217\u8868 \u4f8b\u5982\uff1a ghci > foldr ( || ) False ( repeat True ) True -- \u7531\u4e8e\u903b\u8f91\u8fd0\u7b97\u5b58\u5728\u77ed\u8def\uff0c\u8ba1\u7b97\u503c\u5168\u5e94\u4e3aTrue\uff0c\u6240\u4ee5\u76f4\u63a5\u8fd4\u56de\u4e86 ghci > foldl ( || ) False ( repeat True ) -- \u8fd9\u91cc\u4ec0\u4e48\u90fd\u4e0d\u4f1a\u53d1\u751f\uff0c\u76f4\u5230\u7535\u8111\u5185\u5b58\u88ab\u7206\u6389 -- \u56e0\u4e3a\u51fd\u6570\u521a\u5f00\u59cb\u5c31\u9700\u8981\u5217\u8868\u6700\u53f3\u4fa7\u7684\u503c\uff0c\u6240\u4ee5\u5728\u4e0d\u65ad\u8ba1\u7b97\u8fd9\u4e2a\u65e0\u7a77\u5217\u8868 scanl \u548c scanr \u00b6 scan \u7c7b\u4f3c fold\uff0c\u53ea\u662f\u5c06\u4e2d\u95f4\u5f97\u5230\u7684\u6bcf\u4e00\u4e2a\u503c\u90fd\u6dfb\u52a0\u8fdb\u4e00\u4e2a\u5217\u8868\u4e2d\u5e76\u8fd4\u56de\u8fd9\u4e2a\u5217\u8868 scanl \u5219\u5411\u53f3\u5ef6\u4f38\u8fd9\u4e2a\u5217\u8868\uff0cscanr \u5219\u5411\u5de6\u5ef6\u4f38\u8fd9\u4e2a\u5217\u8868 \u4f46\u662f\u5b83\u548c fold \u6070\u6070\u76f8\u53cd\uff0cscanl \u80fd\u7528\u4e8e\u65e0\u7a77\u5217\u8868\uff0c\u800c scanr \u4e0d\u80fd > scanr f a [ x1 , x2 , x3 ] [ 1 . ] \u6700\u53f3\u4fa7\u5143\u7d20 ( - 1 in python ) : a [ 2 . ] \u53f3\u4fa7\u7b2c\u4e8c\u4e2a\u5143\u7d20 ( - 2 ) : f x3 a [ 3 . ] \u53f3\u4fa7\u7b2c\u4e09\u4e2a\u5143\u7d20 ( - 3 ) : f x2 ( f x3 a ) [ 4 . ] \u53f3\u4fa7\u7b2c\u56db\u4e2a\u5143\u7d20 ( - 4 ) : f x1 ( f x2 ( f x3 a )) \u53ef\u4ee5\u770b\u51fa f x2 (f x3 a) \u662f foldr f a [x2, x3]\uff0c\u4e5f\u662f scanr f a [x2, x3] \u7684\u7b2c\u4e00\u4e2a\u5143\u7d20 \u56e0\u6b64\u53ef\u4ee5\u7528\u9012\u5f52\u6765\u5199\u4e00\u4e2a\u548c scanr \u6548\u679c\u4e00\u6837\u7684\u51fd\u6570\uff1a scanr' :: ( a -> b -> b ) -> b -> [ a ] -> [ b ] scanr' _ x [] = [ x ] -- scanr' f a (x:xs) = f x (foldr f a xs) : scanr' f a xs scanr' f a ( x : xs ) = f x q : qs where qs @ ( q : _ ) = scanr' f a xs scanl \u4e5f\u662f\u540c\u7406\uff1a scanl' :: ( b -> a -> b ) -> b -> [ a ] -> [ b ] scanl' _ x [] = [ x ] scanl' f a ( x : xs ) = a : scanl' f ( f a x ) xs \u4e5f\u53ef\u4ee5\u770b\u51fa\uff0cscanr \u8fd4\u56de\u7684\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f\u6700\u540e\u6dfb\u52a0\u8fdb\u53bb\u7684\uff0c\u6240\u4ee5\u5b83\u65e0\u6cd5\u7528\u4e8e\u65e0\u7a77\u5217\u8868\u3002\u800c scanl \u8fd4\u56de\u7684\u5217\u8868\u4e2d\u7684\u5143\u7d20\u662f\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u6dfb\u52a0\uff0c\u53ef\u4ee5\u7528\u4e8e\u65e0\u7a77\u5217\u8868\u622a\u53d6\u524d\u4e00\u90e8\u5206\u7ed3\u679c\uff1a ghci > take 10 ( scanl ( + ) 0 [ 1 .. ]) [ 0 , 1 , 3 , 6 , 10 , 15 , 21 , 28 , 36 , 45 ] ghci > take 10 ( scanr ( + ) 0 [ 1 .. ]) [ *** Exception: stack overflow \u4f7f\u7528 foldr \u7f16\u5199 foldl \u00b6 pdcxs \u8fd8\u7ed9\u6211\u4ecb\u7ecd\u4e86\u4e00\u4e2a\u795e\u5947\u7684\u64cd\u4f5c\uff0c\u7528 foldl \u6765\u5b9a\u4e49 foldr\uff1a foldl' f z xs = foldr ( \\ x g y -> g ( f y x )) id xs z \u5b83\u5229\u7528 foldr (\\x g y -> g (f y x)) id xs \u751f\u6210\u4e00\u4e2a\u51fd\u6570\uff0c\u4f5c\u7528\u4e8ez\u5f97\u5230\u7ed3\u679c\u3002 \u5148\u6765\u770b\u4e00\u4e0b foldr \u7684\u7c7b\u578b\uff1a foldr :: Foldable t => ( a -> b -> b ) -> b -> t a -> b -- \u53ef\u4ee5\u770b\u6210 (a -> b -> b) -> b -> [a] -> b \u4f46\u662f\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u7c7b\u578b b \u5e76\u4e0d\u662f\u4e00\u4e2a\u6570\u5b57\uff0c\u800c\u662f\u4e00\u4e2a\u51fd\u6570 (b -> b)\u3002 \u6240\u4ee5\u8fd9\u91cc foldr \u7684\u7c7b\u578b\u53ef\u4ee5\u5199\u6210\uff1a (a -> (b -> b) -> (b -> b)) -> (b -> b) -> [a] -> (b -> b) \u5bf9\u5e94\u4e8e\u7528\u6cd5 foldr (\\x g y -> g (f y x)) id xs \uff0c\u5b83\u8fd4\u56de\u7684\u503c\u5e94\u8be5\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u7c7b\u578b\u4e3a b -> b\uff08\u540e\u9762\u8981\u4f5c\u7528\u4e8ez\uff09 \u800c xs \u5bf9\u5e94\u4e8e [a]\uff1bid \u5bf9\u5e94\u4e8e (b -> b) \u6240\u4ee5 (\\x g y -> g (f y x)) \u8981\u5bf9\u5e94\u4e8e\uff1a (a -> (b -> b) -> (b -> b)) \u56e0\u6b64\u53ef\u4ee5\u63a8\u65ad\u51fa x \u7684\u7c7b\u578b\u662f a\uff1by \u7684\u7c7b\u578b\u662f b\uff1b\u800c\u8fd4\u56de\u7684\u503c\u4e3a\u4e00\u4e2a\u7c7b\u578b\u4e3a (b -> b) \u7684\u51fd\u6570\u3002 \u518d\u770b\uff0c\u8fd4\u56de\u7684\u503c\u662f g (f y x) \uff0c\u5176\u4e2d f y x \u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u503c\uff0c\u7c7b\u578b\u4e3a b \u6240\u4ee5 g \u63a5\u6536\u4e00\u4e2a\u7c7b\u578b b\uff0c\u8fd4\u56de\u4e00\u4e2a\u7c7b\u578b b -> b\u3002\u5373 g \u7684\u7c7b\u578b\u4e3a\uff1a b -> (b -> b) \u73b0\u5728\u6839\u636e foldr \u7684\u5b9a\u4e49\uff1a foldr f a (x:xs) = f x (foldr f a xs) \u5e26\u5165\u8ba1\u7b97\u4e00\u4e0b\uff1a xs \u5373\u4e3a [x1..xn]\uff0c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u7528 xs' \u6765\u8868\u793a [x2..xn]\uff0c\u7528 xs'' \u6765\u8868\u793a [x3..xn] \u5b9a\u4e49\u4e2d\u7684 f \u5373\u4e3a (\\x g y -> g (f y x))\uff0ca \u5373\u4e3a id foldr ( \\ x g y -> g ( f y x )) id xs z = ( \\ x g y -> g ( f y x )) x1 ( foldr ( ... ) id xs' ) z \u5199\u5b8c\u7b2c\u4e00\u6b65\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0cx1 (foldr (...) id xs') z \u6b63\u597d\u5206\u522b\u5bf9\u5e94\u4e86 lambda \u8868\u8fbe\u5f0f\u4e2d\u7684 x\u3001g\u3001y\u3002\u53ef\u4ee5\u5c06\u5176\u5e94\u7528\uff0c\u8fdb\u4e00\u6b65\u5c55\u5f00\uff1a ( \\ x g y -> g ( f y x )) x1 ( foldr ( ... ) id xs' ) z = ( foldr ( ... ) id xs' ) ( f z x1 ) \u4e0d\u96be\u53d1\u73b0\uff0c\u539f\u5f0f (foldr (...) id xs) z \u7b49\u4ef7\u4e8e\uff1a (foldr (...) id xs') (f z x1) \u8ddf\u7740\u8fd9\u4e2a\u601d\u8def\uff0cxs \u6bcf\u6b21\u5c11\u4e00\u4e2a\u5f00\u5934\u7684\u5143\u7d20 x'\uff0cz \u6bcf\u6b21\u53d8\u6362\u6210\u4e3a f z x' \u56e0\u6b64\u4e0b\u4e00\u6b65\uff1a ( \\ x g y -> g ( f y x )) x1 ( foldr ( ... ) id xs' ) z = ( foldr ( ... ) id xs' ) ( f z x1 ) = ( foldr ( ... ) id xs'' ) ( f ( f z x1 ) x2 ) = ( foldr ( ... ) id xs''' ) ( f ( f ( f z x1 ) x2 ) x3 ) = ... \u53ef\u4ee5\u53d1\u73b0\uff0c\u5df2\u7ecf\u6709\u4e86\u89c4\u5f8b\u3002\u90a3\u4e48\u6700\u7ec8\u505c\u6b62\u65f6\u662f\u4ec0\u4e48\u6837\u5462\uff1f \u6700\u540e\u5230\u4e86\u4e0d\u80fd\u5728\u5c55\u5f00\u65f6\uff0c\u6700\u524d\u9762\u7684 foldr (...) id xs \u5df2\u7ecf\u53d8\u6210\u4e86 foldr (...) id [] \u800c\u6839\u636e\u524d\u9762 foldr \u7684\u5b9a\u4e49 foldr _ x [] = x \uff0c\u5b83\u5e94\u8be5\u8fd4\u56de id \u6240\u4ee5\u6700\u540e\u7684\u7ed3\u679c\uff1a (id \u7684\u5b9a\u4e49\uff1aid x = x) ... = ( foldr ( ... ) id xs' ) ( f z x1 ) = ( foldr ( ... ) id xs'' ) ( f ( f z x1 ) x2 ) = ... = ( foldr ( ... ) id [] ) ( f ( .. ( f z x1 ) .. ) xn ) = id ( f ( .. ( f z x1 ) .. ) xn ) = f ( .. ( f z x1 ) .. ) xn \u90a3\u4e48\u6700\u540e\u8fd9\u4e2a\u7ed3\u679c\u5c31\u5f88\u719f\u6089\u4e86\uff0c\u5b83\u5c31\u662f foldl f z xs\u3002 \u6240\u4ee5\u6211\u4eec\u63a8\u5bfc\u51fa\u4e86\u8fd9\u4e2a\u7528 foldr \u8868\u793a foldl \u7684\u5199\u6cd5\u662f\u6b63\u786e\u7684\u3002 Modules \u00b6 Haskell \u4f1a\u81ea\u52a8\u52a0\u8f7d Prelude \u6a21\u5757\uff08module\uff09\uff0c\u5982\u679c\u5728 GHCi \u4e2d\u518d\u52a0\u8f7d\u5176\u4ed6\u6a21\u5757\uff0c\u9700\u8981\u4f7f\u7528 :m + ... \uff0c\u6bd4\u5982\u52a0\u8f7d Data.List \u6a21\u5757\uff1a Prelude> :m + Data.List \u800c\u5728 hs \u6587\u4ef6\u4e2d\u5f15\u5165\u6a21\u5757\uff0c\u9700\u8981\u4f7f\u7528 import \u8bed\u53e5\uff0c\u4e0b\u9762\u548c python \u7684\u5bf9\u6bd4\u53ef\u4ee5\u4fbf\u4e8e\u7406\u89e3\uff1a import Data.List -- from Data.List import * import Data.List ( nub , sort ) -- from Data.List import nub, sort import Data.List hiding ( nub ) -- \u4eceData.List\u4e2d\u5f15\u5165\u6240\u6709\uff0c\u4f46\u4e0d\u5f15\u5165nub\u51fd\u6570 import qualified Data.List -- import Data.List import qualified Data.List as Li -- import Data.List as Li \u7f16\u5199 Modules \u00b6 \u6a21\u5757\u4e2d\u8981\u5305\u542b\u5c06\u8981\u4f7f\u7528\u7684\u4e00\u4e9b\u51fd\u6570\uff0c\u50cf\u6b63\u5e38\u7684 hs \u6587\u4ef6\u4e00\u6837\u5199\u5373\u53ef\uff0c\u4f46\u5934\u90e8\u9700\u8981\u6709\u5bfc\u51fa\u8bed\u53e5\uff08export\uff09\u3002\u6bd4\u5982\u4e00\u4e2a\u6a21\u5757\u6587\u4ef6\u540d\u53eb ModuleA.hs \uff0c\u90a3\u5b83\u7684\u5934\u90e8\u9700\u8981\u5199\uff1a module ModuleA ( functionA , functionB , functionC ) where \u800c\u4e14\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u51fd\u6570\u53ea\u5bfc\u51fa\u9700\u8981\u4f7f\u7528\u7684\u5373\u53ef\u3002\u6bd4\u5982\u8be5\u6587\u4ef6\u4e2d\u8fd8\u542b\u6709 functionD \u4f9b\u524d\u4e09\u4e2a\u51fd\u6570\u5185\u90e8\u4f7f\u7528\uff0c\u90a3\u4e48\u5728 import ModuleA \u4e4b\u540e\u4e5f\u65e0\u6cd5\u8c03\u7528 functionD\u3002 Types & Typeclasses \u00b6 Types \u00b6 Haskell \u6709\u4e00\u4e2a\u9759\u6001\u7c7b\u578b\u7cfb\u7edf\uff0c\u4efb\u4f55\u53d8\u91cf\u3001\u51fd\u6570\u90fd\u4f1a\u5177\u6709\u7c7b\u578b\uff0c\u5e76\u4e14\u6709\u7c7b\u578b\u5224\u65ad\u529f\u80fd\uff0c\u6ca1\u7ed9\u51fa\u7684\u7c7b\u578b\u4f1a\u81ea\u52a8\u8bc6\u522b\u3002 Type \u7684\u9996\u5b57\u6bcd\u5168\u4e3a\u5927\u5199\uff0c\u5e38\u7528\u7684\u6709\uff1a Int \uff1a\u6574\u578b\uff0c\u6709\u4e0a\u4e0b\u754c\u8303\u56f4\uff0c-2147483647\uff5e2147483648 Integer \uff1a\u6574\u6570\uff0c\u65e0\u754c\uff0c\u4f46\u662f\u6548\u7387\u6bd4Int\u4f4e Float \uff1a\u5355\u7cbe\u5ea6\u6d6e\u70b9\u578b Double \uff1a\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u578b Bool \uff1a\u5e03\u5c14\u503c Char \uff1a\u5b57\u7b26 String \uff1a\u5b57\u7b26\u4e32\uff0c\u7b49\u540c\u4e8e [Char] Ordering \uff1a\u5927\u5c0f\u5173\u7cfb\uff0c\u5305\u542bLT\u3001EQ\u3001GT\uff0c\u4e14\u5b83\u4eec\u6709\u5927\u5c0f\u5173\u7cfb LT < EQ < GT \u5217\u8868\u7684\u7c7b\u578b\u662f\u7531\u5176\u4e2d\u5143\u7d20\u51b3\u5b9a\u7684\uff0c\u5e76\u4e14\u5217\u8868\u4e2d\u5143\u7d20\u5fc5\u987b\u662f\u540c\u4e00\u7c7b\u578b\uff0c\u6240\u4ee5\u5217\u8868\u7684\u7c7b\u578b\u5c31\u662f\u5176\u5143\u7d20\u7c7b\u578b\u5916\u52a0 [] \u3002 \u5143\u7ec4\u7684\u7c7b\u578b\u7531\u5176\u4e2d\u5404\u4e2a\u5143\u7d20\u7684\u7c7b\u578b\u5171\u540c\u51b3\u5b9a\uff0c\u56e0\u4e3a\u5143\u7ec4\u4e2d\u7684\u5143\u7d20\u53ef\u4ee5\u662f\u4e0d\u540c\u7c7b\u578b\u3002\u5982 (\"abc\", 'a', True) \u7684\u7c7b\u578b\u662f ([Char], Char, Bool)\u3002 Typeclasses \u00b6 \u7c7b\u578b\u7c7b\uff08Typeclass\uff09\u662f\u5b9a\u4e49\u4e00\u7cfb\u5217\u529f\u80fd\u7684\u63a5\u53e3\uff0c\u5982\u679c\u4e00\u4e2a Type \u5c5e\u4e8e\u4e00\u4e2a Typeclass \u7684\u6210\u5458\uff0c\u90a3\u4e48\u5b83\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u4e2a\u7c7b\u578b\u7c7b\u6240\u89c4\u5b9a\u7684\u529f\u80fd\u3002\u4e00\u4e2a Type \u4e5f\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2aTypeclass Typeclass\u7684\u9996\u5b57\u6bcd\u4e5f\u5168\u4e3a\u5927\u5199\uff0c\u5e38\u89c1\u7684\u6709\uff1a Eq \uff1a\u53ef\u5224\u65ad\u662f\u5426\u76f8\u7b49 Ord \uff1a\u53ef\u6bd4\u8f83\u5927\u5c0f Show \uff1a\u53ef\u5c55\u793a\u6210\u5b57\u7b26\u4e32 Read \uff1a\u53ef\u4ece\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u7279\u5b9a\u7c7b\u578b Enum \uff1a\u53ef\u679a\u4e3e\uff08\u8fde\u7eed\uff09\uff0c\u5373\u53ef\u4ee5\u4f7f\u7528 pred \u548c succ \u51fd\u6570\u5f97\u5230\u524d\u9a71\u548c\u540e\u7f00 Bounded : \u6709\u4e0a\u4e0b\u754c\uff0c\u5982\u679c\u5143\u7ec4\u4e2d\u6240\u6709\u5143\u7d20\u90fd\u5c5e\u4e8e Bounded\uff0c\u90a3\u8fd9\u4e2a\u5143\u7ec4\u7684\u7c7b\u578b\u4e5f\u5c5e\u4e8e Bounded Integral \uff1a\u662f\u6574\u6570\uff0c\u5305\u62ec Int \u548c Integer RealFloat \uff1a \u662f\u5b9e\u6d6e\u70b9\u6570\uff0c\u5305\u62ec Float \u548c Double RealFrac \uff1a\u662f\u5b9e\u5206\u6570\uff0c\u5305\u62ec Float\u3001Double \u548c Ratio\uff08\u5728 Data.Ratio \u6a21\u5757\u4e2d\uff09 Floating \uff1a\u662f\u6d6e\u70b9\u6570\uff0c\u5305\u62ec Float\u3001Double \u548c Complex\uff08\u5728 Data.Complex \u6a21\u5757\u4e2d\uff09 Real \uff1a\u662f\u5b9e\u6570\uff0c\u5305\u62ec Integral \u548c RealFrac \u7684\u6210\u5458 Fractional \uff1a\u662f\u5206\u6570\uff0c\u5305\u62ec RealFrac \u548c Floating \u7684\u6210\u5458 Num \uff1a\u662f\u6570\u5b57\uff0c\u5305\u62ec\u4e0a\u8ff0\u6240\u6709\u6570\u5b57\u76f8\u5173\u7684\u7c7b\u578b Type variables \u00b6 \u5982\u679c\u67e5\u770b\u4e00\u4e2a\u51fd\u6570\u7684\u7c7b\u578b\uff0c\u6bd4\u5982 head \uff0c\u90a3\u4e48\u5c06\u4f1a\u8fd4\u56de\u4ee5\u4e0b\u7c7b\u578b\uff1a head :: [a] -> a \u5176\u4e2d\u7684 a \u5c31\u662f\u4e00\u4e2a\u7c7b\u578b\u53d8\u91cf\uff08type variable\uff09\uff0c\u5b83\u5728 head \u4e2d\u53ef\u4ee5\u5c5e\u4e8e\u4efb\u4f55\u7c7b\u578b\uff0c\u5728\u8fd9\u91cc\u53ea\u662f\u8868\u793a\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u548c\u8f93\u5165\u7684\u5217\u8868\u4e2d\u7684\u5143\u7d20\u7684\u7c7b\u578b\u76f8\u4e00\u81f4\u3002 \u5728\u51fd\u6570\u7684\u7c7b\u578b\u8868\u8fbe\u5f0f\u5176\u5b9e\u53ef\u4ee5\u770b\u4f5c \\(\\lambda\\) \u8868\u8fbe\u5f0f\uff0c\u5b83\u9002\u7528\u4e8e \\(\\alpha\\) \u53d8\u6362\uff08 \\(\\alpha\\) -conversion\uff09\u3002\u5373 a \u5728\u8fd9\u91cc\u53ef\u4ee5\u6307 Int\u3001Char \u7b49\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u6307 [Char], (Int, Char), \u751a\u81f3\u51fd\u6570 Int -> Int \u7b49\u3002 \u5728\u5927\u90e8\u5206\u51fd\u6570\u7684\u7c7b\u578b\u4e2d\uff0c\u7c7b\u578b\u53d8\u91cf\u9700\u8981\u4fdd\u8bc1\u662f\u67d0\u4e2a Typeclass \u7684\u6210\u5458\u624d\u80fd\u5b8c\u6210\u64cd\u4f5c\u3002\u6bd4\u5982 (==) \u51fd\u6570\uff0c\u5b83\u9700\u8981\u4f20\u5165\u7684\u53c2\u6570\u662f\u53ef\u5224\u65ad\u76f8\u7b49\u7684\uff0c\u5373\u662f Eq \u7684\u6210\u5458\uff0c\u90a3\u4e48 (==) \u7684\u7c7b\u578b\u5c31\u662f\uff1a (==) :: (Eq a) => a -> a -> Bool \u5176\u4e2d => \u524d\u7684\u90e8\u5206 (Eq a) \u5c31\u662f\u7c7b\u7ea6\u675f\uff08class constraint\uff09\uff0c\u5b83\u89c4\u5b9a\u4e86 a \u662f Eq \u7684\u6210\u5458\uff0c\u6240\u4ee5 (==) \u51fd\u6570\u4f20\u5165\u7684\u4e24\u4e2a\u53c2\u6570\u90fd\u662f a \u7c7b\u578b\uff0c\u4e14\u90fd\u662f Eq \u7684\u6210\u5458\uff0c\u4fdd\u8bc1\u4e86\u5b83\u4eec\u4e4b\u95f4\u662f\u53ef\u4ee5\u6bd4\u8f83\u662f\u5426\u76f8\u7b49\u7684\u3002 \u5b9a\u4e49\u65b0 Type \u00b6 \u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684 Type \u9700\u8981\u4f7f\u7528 data \u5173\u952e\u5b57\uff0c\u6bd4\u5982\u5b9a\u4e49 Bool \u9700\u8981\u4f7f\u7528\uff1a data Bool = False | True \u5176\u4e2d = \u5de6\u4fa7\u7684\u90e8\u5206\u5b9a\u4e49\u4e86\u65b0\u7c7b\u578b\u7684\u540d\u79f0 Bool \uff0c\u53f3\u4fa7\u7684\u90e8\u5206\u53eb\u505a\u503c\u6784\u9020\u5668\uff08value constructors\uff09\uff0c\u8868\u793a\u4e86 Bool \u7c7b\u578b\u7684\u503c\u4e3a False \u6216 True\u3002 \u5e76\u4e14\u540d\u79f0\u548c\u503c\u6784\u9020\u5668\u7684\u9996\u5b57\u6bcd\u90fd\u9700\u8981\u5927\u5199\u3002 \u53e6\u5916\uff0c\u503c\u6784\u9020\u5668\u4e5f\u662f\u51fd\u6570\uff0c\u5b83\u4eec\u53ef\u4ee5\u6709\u53c2\u6570\uff0c\u53eb\u505a\u9879\uff08field\uff09\u3002\u6bd4\u5982\uff1a data Shape = Circle Float Float Float | Rectangle Float Float Float Float \u5b83\u5b9a\u4e49\u4e86\u4e00\u4e2a\u65b0 Type \u53eb Shape\uff0c\u503c\u6784\u9020\u5668\u662f Circle \u548c Rectangle\uff0cCircle \u63a5\u6536\u4e09\u4e2a\u53c2\u6570\u90fd\u662f Float \u7c7b\u578b\uff0cRectangle \u63a5\u6536\u56db\u4e2a Float \u7c7b\u578b\u53c2\u6570\u3002 \u5982\u679c\u67e5\u770b Circle \u7684\u7c7b\u578b\uff0c\u5c06\u8fd4\u56de\uff1a Circle :: Float -> Float -> Float -> Shape \u5982\u679c\u60f3\u8981\u8ba9\u5b83\u80fd\u7ed9\u76f4\u63a5\u663e\u793a\u51fa\u6765\uff0c\u9700\u8981\u8ba9\u5b83\u5c5e\u4e8e Show \u7c7b\u578b\u7c7b\u3002\u5728\u4ee3\u7801\u4e2d\u53ea\u9700\u8981\u5728\u7ed3\u5c3e\u52a0\u4e0a deriving (Show) : data Shape = Circle Float Float Float | Rectangle Float Float Float Float deriving ( Show ) \u7c7b\u578b\u7684\u540d\u79f0\u548c\u503c\u6784\u9020\u5668\u540d\u79f0\u4e5f\u53ef\u4ee5\u76f8\u540c\uff0c\u6bd4\u5982\uff1a data Point = Point Float Float deriving ( Show ) \u5bfc\u51fa Type \u00b6 \u5728\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e86\u65b0\u7684 Type \u4e4b\u540e\uff0c\u5982\u679c\u5728\u522b\u7684\u6587\u4ef6\u4e2d\u5c06\u5176\u4f5c\u4e3a\u6a21\u5757\u5bfc\u5165\uff0c\u5219\u9700\u8981\u5148\u5bfc\u51fa\u3002\u6bd4\u5982\u6587\u4ef6 Shapes.hs \u4e2d\u5b9a\u4e49\u4e86 Shape \u548c Point\uff0c\u4ee5\u53ca\u5176\u4ed6\u7684\u4e00\u4e9b\u51fd\u6570\uff0c\u90a3\u4e48\u6587\u4ef6\u5f00\u5934\u9700\u8981\u5199\uff1a module Shapes ( Shape ( .. ) , Point ( .. ) , functionA , functionB ) where \u5176\u4e2d\u7684 Shape(..) \u5bfc\u51fa\u4e86 Shape \u7c7b\u578b\u548c\u5b83\u6240\u6709\u7684\u503c\u6784\u9020\u5668\uff0c .. \u4ee3\u8868\u4e86\u5b83\u7684\u6240\u6709\u503c\u6784\u9020\u5668\u3002\u56e0\u6b64\uff0c Shape(..) \u76f8\u5f53\u4e8e Shape (Circle, Rectangle) \u3002 \u5982\u679c\u4e0d\u60f3\u8981\u5bfc\u51fa\u503c\u6784\u9020\u5668\uff0c\u5373\u4e0d\u5141\u8bb8\u4f7f\u7528\u503c\u6784\u9020\u5668\u7684\u65b9\u6cd5\u6765\u521b\u5efa Shape \u7c7b\u578b\u7684\u53d8\u91cf\u3002\u90a3\u4e48\u9700\u8981\u5c06 Shape(..) \u66ff\u6362\u4e3a Shape \uff0c\u8fd9\u6837\u5c31\u53ea\u5bfc\u51fa\u4e86 Shape \u7c7b\u578b\uff0c\u800c\u4e0d\u5bfc\u51fa\u5176\u503c\u6784\u9020\u5668\u3002 Record Syntax \u00b6 \u5982\u679c\u60f3\u8981\u65b9\u4fbf\u5730\u53d6\u51fa\u7c7b\u578b\u5b9e\u4f8b\u4e2d\u7684\u53c2\u6570\uff0c\u53ef\u4ee5\u4f7f\u7528 Record \u8bed\u6cd5\uff0c\u5982\uff1a data Point = Point { xcoord :: Float , ycoord :: Float } deriving ( Show ) \u5728\u503c\u6784\u9020\u5668\u7684\u53c2\u6570\u90e8\u5206\u5148\u52a0\u4e00\u4e2a\u5927\u62ec\u53f7\uff0c\u7136\u540e\u6307\u5b9a\u53d6\u51fa\u503c\u7684\u51fd\u6570\u540d\u79f0\uff08xcoord, ycoord\uff09\uff0c\u540e\u9762\u6307\u5b9a\u7c7b\u578b\uff08:: Float\uff09\u3002\u8fd9\u6837 xcoord \u548c ycoord \u5c31\u90fd\u662f\u4e00\u4e2a\u7c7b\u578b\u4e3a Point -> Float \u7684\u51fd\u6570\uff0c\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u65b9\u6cd5\u6765\u8bbf\u95ee\u503c\uff1a ghci > let point = Point 1.0 2.0 ghci > xcoord point 1.0 ghci > ycoord point 2.0 \u540c\u65f6\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u65b9\u6cd5\u6765\u521b\u5efa\u8fd9\u4e2a point\uff1a point = Point { ycoord = 2.0 , xcoord = 1.0 } Type parameters \u00b6 \u503c\u6784\u9020\u5668\u53ef\u4ee5\u63a5\u6536\u53c2\u6570\uff0c\u7c7b\u578b\u4e5f\u53ef\u4ee5\u63a5\u6536\u53c2\u6570\uff0c\u8fd9\u6837\u5b83\u5c31\u6210\u4e3a\u4e86\u7c7b\u578b\u6784\u9020\u5668\uff08type constructors\uff09\u3002\u5982 Maybe \u7684\u5b9a\u4e49\uff1a data Maybe a = Nothing | Just a \u5b83\u7684\u503c\u662f Nothing \u65f6\uff0c\u7c7b\u578b\u4e3a Maybe a\uff0c\u662f\u591a\u6001\u7684\uff08polymorphic\uff09\u3002 \u5b83\u7684\u503c\u4e0d\u662f Nothing \u65f6\uff0c\u7c7b\u578b\u53d6\u51b3\u4e8e\u503c Just a \u4e2d a \u7684\u7c7b\u578b\uff0c\u53ef\u4ee5\u6784\u9020\u51fa Maybe Int\u3001Maybe [Char] \u7b49\u591a\u79cd\u7c7b\u578b\uff1a Nothing :: Maybe a Just 1 :: Num a => Maybe a Just 'a' :: Maybe Char Just \"abc\" :: Maybe [ Char ] \u53ef\u4ee5\u7528\u8fd9\u79cd\u65b9\u6cd5\u6539\u5199 Point\uff1a data Point x y = Point { xcoord :: x , ycoord :: y } deriving ( Show ) \u4f46\u4f7f\u7528\u7c7b\u578b\u53c2\u6570\uff08type parameters\uff09\u5e76\u4e0d\u662f\u603b\u662f\u65b9\u4fbf\uff0c\u6bd4\u5982\u5728\u58f0\u660e\u51fd\u6570\u7c7b\u578b\u7684\u65f6\u5019\u4e0d\u80fd\u53ea\u4f7f\u7528 Point \u6765\u8868\u793a Point \u7c7b\u578b\uff0c\u800c\u662f\u5fc5\u987b\u5199\u6210 Point Float Float\u3002 \u800c\u4e14\u4e0d\u80fd\u5728\u5b9a\u4e49\u7c7b\u578b\u6784\u9020\u5668\u65f6\u6dfb\u52a0\u7c7b\u7ea6\u675f\uff08class constraint\uff09\uff0c\u4e0d\u7136\u5728\u4e4b\u540e\u58f0\u660e\u51fd\u6570\u7c7b\u578b\u7684\u65f6\u5019\u4e5f\u90fd\u9700\u8981\u6dfb\u52a0\u7c7b\u7ea6\u675f\uff0c\u5982\uff1a data ( Ord k ) => Map k v = ... toList :: ( Ord k ) => Map k a -> [( k , a )] Either \u00b6 Either \u662f\u4e00\u4e2a\u7c7b\u578b\u6784\u9020\u5668\uff0c\u5b83\u6709\u4e24\u4e2a\u503c\u6784\u9020\u5668\uff0c\u5b9a\u4e49\u662f\uff1a data Either a b = Left a | Right b deriving ( Eq , Ord , Read , Show ) \u5982\u679c\u4f7f\u7528\u4e86 Left\uff0c\u90a3\u5b83\u7684 a \u7684\u7c7b\u578b\u5c31\u662f\u5177\u4f53\u7684\uff1b\u5982\u679c\u4f7f\u7528\u4e86 Right\uff0c\u90a3\u5b83\u7684 b \u7684\u7c7b\u578b\u5c31\u662f\u5177\u4f53\u7684\uff1a ghci > Right 20 Right 20 ghci > Left \"w00t\" Left \"w00t\" ghci > : t Right 'a' Right 'a' :: Either a Char ghci > : t Left True Left True :: Either Bool b Either \u53ef\u4ee5\u770b\u4f5c Maybe \u7684\u8865\u5145\uff0c\u6bd4\u5982 Maybe \u5728\u4f7f\u7528\u65f6\uff0c\u51fa\u73b0\u5f02\u5e38\u53ef\u4ee5\u8fd4\u56de Nothing\uff0c\u4f46\u53ea\u662f\u4e00\u4e2a Nothing\uff0c\u4e0d\u5305\u542b\u4efb\u4f55\u4fe1\u606f\uff1b\u4f46 Either \u5305\u542b\u5de6\u503c\u548c\u53f3\u503c\uff0c\u6b63\u5e38\u7ed3\u679c\u8fd4\u56de\u53f3\u503c\uff0c\u800c\u51fa\u73b0\u5f02\u5e38\u5c31\u53ef\u4ee5\u8fd4\u56de\u5305\u542b\u9519\u8bef\u4fe1\u606f\u7684\u5de6\u503c\uff0c\u6bd4\u5982\u5b89\u5168\u9664\u6cd5\uff1a safeDiv :: Int -> Int -> Maybe Int safeDiv _ 0 = Nothing safeDiv x y = Just ( x ` div ` y ) ghci > safeDiv 4 2 Just 2 ghci > safeDiv 1 0 Nothing \u800c\u4f7f\u7528 Either\uff1a safeDiv :: Int -> Int -> Either String Int safeDiv _ 0 = Left \"Divided by zero\" safeDiv x y = Right ( x ` div ` y ) ghci > safeDiv 4 2 Right 2 ghci > safeDiv 1 0 Left \"Divided by zero\" Derived instances \u00b6 \u60f3\u8981\u4f7f\u4e00\u4e2a\u5b9a\u4e49\u7684\u7c7b\u6ee1\u8db3\u67d0\u4e9b Typeclass \u7684\u9700\u6c42\uff0c\u9700\u8981\u4ece\u5176\u6d3e\u751f\uff08derive\uff09\uff0c\u6bd4\u5982\uff1a data Day = Monday | Tuesday | Wednesday | Thursday | Friday | Saturday | Sunday deriving ( Eq , Ord , Show , Read , Bounded , Enum ) \u8fd9\u6837 Day \u7c7b\u578b\u7684\u503c\uff08Monday\uff5eSunday\uff09\u4e4b\u95f4\u5c31\u53ef\u4ee5\u6bd4\u8f83\u662f\u5426\u76f8\u7b49\uff08\u4ece Eq \u6d3e\u751f\uff09\uff0c\u6bd4\u8f83\u5927\u5c0f\uff08\u4ece Ord \u6d3e\u751f\uff0c\u5de6\u4fa7\u4e3a\u5c0f\uff0c\u53f3\u4fa7\u4e3a\u5927\uff09\uff0c\u663e\u793a\u6210\u5b57\u7b26\u4e32\uff08\u4ece Show \u6d3e\u751f\uff09\uff0c\u4ece\u5b57\u7b26\u4e32\u4e2d\u8bfb\u53d6\uff08\u4ece Read \u6d3e\u751f\uff09\uff0c\u5305\u542b\u8fb9\u754c\uff08\u4ece Bounded \u6d3e\u751f\uff09\uff0c\u53ef\u4ee5\u679a\u4e3e\uff08\u4ece Enum \u6d3e\u751f\uff0c\u6309\u7167\u503c\u6784\u9020\u5668\u4e2d\u7684\u987a\u5e8f\u4f9d\u6b21\u5411\u53f3\uff09 Type synonyms \u00b6 \u4e3a\u4e86\u9605\u8bfb\u65b9\u4fbf\uff0c\u4e66\u5199\u7b80\u4fbf\uff0c\u53ef\u4ee5\u4f7f\u7528 type \u5173\u952e\u5b57\u4e3a\u5df2\u6709\u7c7b\u578b\u521b\u5efa\u522b\u540d\uff08synonyms\uff09\u3002\u6bd4\u5982 String \u7684\u5b9a\u4e49\uff1a type String = [Char] \u5728\u6240\u6709\u9700\u8981\u4f7f\u7528\u5b57\u7b26\u4e32\uff08\u5373 [Char]\uff09\u7684\u5730\u65b9\u90fd\u53ef\u4ee5\u4f7f\u7528 String \u6765\u4ee3\u66ff\uff0c\u5b83\u4eec\u662f\u5b8c\u5168\u4e00\u81f4\u7684\uff0c\u53ea\u662f String \u66f4\u7b80\u4fbf\u6613\u8bfb\u3002 \u540c\u65f6\uff0c\u7c7b\u578b\u522b\u540d\u4e5f\u53ef\u4ee5\u63a5\u6536\u7c7b\u578b\u53c2\u6570 newtype keyword \u00b6 \u9664\u4e86 data \u3001 type \u5173\u952e\u5b57\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u7528 newtype \u5173\u952e\u5b57\u6765\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684\u7c7b\u578b\uff0c\u6bd4\u5982 Control.Applicative \u6a21\u5757\u4e2d\u7684 ZipList\uff1a newtype ZipList a = { getZipList :: [ a ] } - \u4e0d\u540c\u4e8e type\uff0c\u5b83\u4e0d\u662f\u522b\u540d\uff0c\u53ef\u4ee5\u4f7f\u7528 record \u8bed\u6cd5\u6765\u76f4\u63a5\u5b9a\u4e49\u53d6\u51fa\u503c\u7684\u51fd\u6570 - \u4e0d\u540c\u4e8e data\uff0c\u5b83\u53ea\u80fd\u6709\u4e00\u4e2a\u503c\u6784\u9020\u5668\uff0c\u4f46\u662f\u901f\u5ea6\u8981\u6bd4 data \u5feb\uff0c\u800c\u4e14\u66f4\u52a0\u61d2\u60f0 Recursive data structures \u00b6 \u4e00\u4e2a\u7c7b\u578b\u4e5f\u53ef\u4ee5\u9012\u5f52\u5b9a\u4e49\uff0c\u6bd4\u5982\u4e00\u9897\u4e8c\u53c9\u6811\uff1a data Tree a = EmptyTree | Node a ( Tree a ) ( Tree a ) deriving ( Show , Read , Eq ) \u5b9a\u4e49\u65b0 Typeclass \u00b6 \u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684 Typeclass \u9700\u8981\u4f7f\u7528 class \u5173\u952e\u5b57\uff0c\u4f8b\u5982\u5b9a\u4e49 Eq \u7c7b\u578b\u7c7b\uff1a class Eq a where ( == ) :: a -> a -> Bool ( /= ) :: a -> a -> Bool x == y = not ( x /= y ) x /= y = not ( x == y ) \u5176\u4e2d a \u662f\u4e00\u4e2a\u7c7b\u578b\u53d8\u91cf\uff0c\u524d\u4e24\u884c\u58f0\u660e\u4e86\u9700\u8981\u5b9e\u73b0\u7684\u51fd\u6570\u7684\u540d\u5b57\u53ca\u5176\u7c7b\u578b\uff0c\u540e\u4e24\u884c\u8868\u660e\u4e86\u9700\u8981\u7684\u51fd\u6570\u4e4b\u95f4\u53ef\u4ee5\u76f8\u4e92\u5b9a\u4e49\uff08\u4e0d\u5fc5\u8981\uff09\u3002 \u5305\u542b\u4e86\u540e\u4e24\u884c\u4e4b\u540e\uff0c\u53ea\u5b9a\u4e49 (==) \u51fd\u6570\u6216\u8005 (/=) \u51fd\u6570\u90fd\u53ef\u4ee5\u5b8c\u6210\u5168\u90e8\u5b9a\u4e49\uff0c\u5b83\u4eec\uff08 (==) | (/=) \uff09\u6210\u4e3a\u8fd9\u4e2a\u7c7b\u578b\u7c7b\u7684\u6700\u5c0f\u5b8c\u6574\u5b9a\u4e49\uff08minimal complete definition\uff09 \u67e5\u770b\u4e00\u4e2a\u7c7b\u578b\u7c7b\u7684\u6210\u5458\u9700\u8981\u5b9e\u73b0\u7684\u51fd\u6570\u53ef\u4ee5\u5728 GHCi \u4e2d\u4f7f\u7528 :info \uff1a ghci> :info Eq \u624b\u52a8\u521b\u5efa\u5b9e\u4f8b \u00b6 \u4f7f\u4e00\u4e2a\u7c7b\u578b\u6210\u4e3a\u4e00\u4e2a\u7c7b\u578b\u7c7b\u7684\u5b9e\u4f8b\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 deriving \u6765\u81ea\u52a8\u5b8c\u6210\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 instance \u5173\u952e\u5b57\u6765\u624b\u52a8\u5b8c\u6210\u3002\u6bd4\u5982\u4f7f Point \u6210\u4e3a Show \u7684\u5b9e\u4f8b\uff1a instance Show Point where show ( Point x y ) = \"(\" ++ show x ++ \", \" ++ show y ++ \")\" -- in ghci ghci > Point 1.0 2.0 ( 1.0 , 2.0 ) \u8fd9\u6837\u5c31\u53ef\u4ee5\u81ea\u5b9a\u4e49\u663e\u793a\u7684\u5185\u5bb9\uff0c\u5426\u5219\u4f7f\u7528 deriving \u7684\u8bdd\u53ea\u4f1a\u76f4\u63a5\u5c06\u5176\u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32\u3002 \u540c\u65f6\u4e5f\u8981\u6ce8\u610f\u7c7b\u578b\u548c\u7c7b\u578b\u6784\u9020\u5668\u7684\u533a\u522b\uff0c\u4f20\u5165\u7ed9 instance \u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5e94\u8be5\u4e3a\u7c7b\u578b\u800c\u4e0d\u662f\u7c7b\u578b\u6784\u9020\u5668\uff0c\u6bd4\u5982 Maybe\uff1a instance Eq Maybe where ... -- \u9519\u8bef\u7528\u6cd5\uff0c\u56e0\u4e3aMaybe\u662f\u7c7b\u578b\u6784\u9020\u5668\u800c\u4e0d\u662f\u7c7b\u578b instance Eq ( Maybe m ) where ... -- \u9519\u8bef\u7528\u6cd5\uff0c\u56e0\u4e3am\u4e0d\u4e00\u5b9a\u662fEq\u7684\u6210\u5458 instance ( Eq m ) => Eq ( Maybe m ) where Just x == Just y = x == y Nothing == Nothing = True _ == _ = False Functor Typeclass \u00b6 Functor \u4e5f\u662f\u4e00\u79cd\u7c7b\u578b\u7c7b\uff0c\u5b83\u53ea\u89c4\u5b9a\u4e86\u4e00\u4e2a\u51fd\u6570\uff1a class Functor f where fmap :: ( a -> b ) -> f a -> f b \u5176\u4e2d f \u662f\u4e00\u4e2a\u7c7b\u578b\u6784\u9020\u5668\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b Kinds \u00b6 \u4e00\u4e2a\u503c\u7684\u7c7b\u578b\u53eb\u505a\u7c7b\u578b\uff08Type\uff09\uff0c\u800c\u4e00\u4e2a\u7c7b\u578b\u7684\u7c7b\u578b\u53eb\u505a Kind\u3002\u53ef\u4ee5\u901a\u8fc7 GHCi \u4e2d :k \u6765\u67e5\u770b Kind\uff1a ghci > : k Int Int :: * ghci > : k Maybe Maybe :: * -> * ghci > : k Maybe Int Maybe Int :: * ghci > : k Either Either :: * -> * -> * \u5176\u4e2d\u7684\u661f\u53f7 * \u4ee3\u8868\u4e86\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\uff08concrete type\uff09\u3002Int \u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\uff0c\u6240\u4ee5 Int \u7684 Kind \u662f *\u3002\u800c Maybe \u662f\u4e00\u4e2a\u7c7b\u578b\u6784\u9020\u5668\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u5177\u4f53\u7c7b\u578b\uff0c\u6240\u4ee5 Maybe \u7684 Kind \u662f * -> *\u3002\u5982\u679c\u7ed9 Maybe \u4f20\u5165\u4e86\u4e00\u4e2a Int\uff0c\u90a3\u4e48\u5f97\u5230\u7684 Maybe Int \u5c31\u662f\u4e00\u4e2a\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u5b83\u7684 Kind \u5c31\u662f *\u3002Either \u4e5f\u662f\u4e00\u4e2a\u7c7b\u578b\u6784\u9020\u5668\uff0c\u4f46\u5b83\u63a5\u6536\u4e24\u4e2a\u7c7b\u578b\u624d\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u7c7b\u578b\uff0c\u6240\u4ee5 Either \u7684 Kind \u662f * -> * -> *\u3002 Input/Output \u00b6 \u8fd0\u884c Haskell \u7a0b\u5e8f \u00b6 \u4e0d\u5728 GHCi \u4e2d\u8fd0\u884c\u4e00\u4e2a Haskell \u7a0b\u5e8f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a \u7f16\u8bd1\u8fd0\u884c\uff1a $ ghc --make code $ ./code \u901a\u8fc7 runhaskell \u547d\u4ee4\u76f4\u63a5\u8fd0\u884c\uff1a $ runhaskell code.hs \u8f93\u51fa\u6587\u672c \u00b6 \u5728\u4e00\u4e2a Haskell \u7a0b\u5e8f\u4e2d\u8f93\u51fa\u6587\u5b57\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a main \u51fd\u6570\uff1a main = putStrLn \"Hello World\" \u5176\u4e2d putStrLn \u7684\u7c7b\u578b\u662f\uff1a putStrLn :: String -> IO () putStrLn \u63a5\u6536\u4e00\u4e2a String \u7c7b\u578b\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u7ed3\u679c\u4e3a () \u7c7b\u578b\u7684 IO \u52a8\u4f5c\uff08I/O action\uff09\u3002\u6240\u4ee5 main \u51fd\u6570\u7684\u7c7b\u578b\u4e3a IO ()\u3002\uff08IO \u7684 Kind \u662f* -> *\uff09 \u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u6709\u5176\u4ed6\u9ed8\u8ba4\u63d0\u4f9b\u7684\u8f93\u51fa\u6587\u672c\u7684\u51fd\u6570\uff1a putStr \uff1a\u8f93\u51fa\u6587\u672c\uff0c\u7ed3\u5c3e\u4e0d\u6362\u884c putChar \uff1a\u8f93\u51fa\u5355\u4e2a\u5b57\u7b26\uff0c\u7ed3\u5c3e\u4e0d\u6362\u884c\u3002\u63a5\u6536\u7684\u53c2\u6570\u4e3a\u5355\u4e2a Char\uff0c\u4e0d\u662f String\uff08\u7528\u5355\u5f15\u53f7\u4e0d\u662f\u53cc\u5f15\u53f7\uff09 print \uff1a\u53ef\u4ee5\u63a5\u6536\u4efb\u4f55 Show \u7684\u6210\u5458\uff0c\u5148\u7528 show \u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32\u7136\u540e\u8f93\u51fa\u3002\u7b49\u540c\u4e8e putStrLn . show do block \u00b6 \u5728 main \u51fd\u6570\u4e2d\u4f7f\u7528\u591a\u4e2a putStrLn \u9700\u8981\u4f7f\u7528 do \u8bed\u53e5\uff1a main = do putStrLn \"Line1\" putStrLn \"Line2\" \u5176\u4e2d\u6700\u540e\u4e00\u884c\u4e00\u5b9a\u8981\u8fd4\u56de IO () \u7c7b\u578b\u7684\u503c \u8f93\u5165\u6587\u672c \u00b6 \u8f93\u5165\u6587\u5b57\u9700\u8981\u5728 do \u5757\u4e2d\u4f7f\u7528 getLine\uff1a main = do line <- getLine putStrLn line getLine \u7684\u7c7b\u578b\u662f\uff1a getLine :: IO String \u800c <- \u64cd\u4f5c\u7b26\u5c06 getLine \u4e2d\u7684 String \u63d0\u53d6\u4e86\u51fa\u6765\u7ed9\u5230\u4e86 line\uff0c\u4f7f line \u53d8\u6210\u4e86 String \u7c7b\u578b\u7684\u4e00\u4e2a\u5b57\u7b26\u4e32 \u800c\u4e14\u4f7f\u7528\u8f93\u5165\u7684\u5b57\u7b26\u4e32\u5fc5\u987b\u8981\u7ecf\u8fc7\u4e00\u6b21 <-\uff0c\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528 getLine \u4f5c\u4e3a\u5b57\u7b26\u4e32\uff0c\u56e0\u4e3a getLine \u4e0d\u662f String \u7c7b\u578b\uff0c\u800c\u662f IO String \u7c7b\u578b \u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528 getChar \u6765\u83b7\u53d6\u5355\u4e2a\u5b57\u7b26\uff0c\u4f46\u4ecd\u7136\u9700\u8981\u4f7f\u7528 <- \u64cd\u4f5c\u7b26\u6765\u63d0\u53d6 Char \u5176\u4ed6 IO \u76f8\u5173\u51fd\u6570\u7528\u6cd5 \u00b6 return \u00b6 Haskell \u4e2d\u7684 return \u548c\u5176\u4ed6\u547d\u4ee4\u5f0f\u8bed\u8a00\u4e2d\u7684 return \u5b8c\u5168\u4e0d\u540c\uff0c\u5b83\u4e0d\u4f1a\u4f7f\u51fd\u6570\u76f4\u63a5\u7ed3\u675f\u5e76\u8fd4\u56de\u4e00\u4e2a\u503c\u3002 main \u51fd\u6570\u5fc5\u987b\u5b9a\u4e49\u4e3a\u7c7b\u578b\u4e3a IO () \u7684\u51fd\u6570\uff0c\u6240\u4ee5\u5728 main \u51fd\u6570\u4e2d\u4f7f\u7528 if \u8bed\u53e5\uff0c\u5982\u679c\u4e0d\u8f93\u51fa\u7684\u8bdd\u4e5f\u4e0d\u53ef\u4ee5\u76f4\u63a5\u653e\u4e0b\u4ec0\u4e48\u90fd\u4e0d\u5e72\uff0c\u56e0\u4e3a\u8fd9\u65f6\u5019 main \u51fd\u6570\u7684\u7c7b\u578b\u4e0d\u662f IO ()\u3002\u6240\u4ee5\u8fd9\u65f6\u9700\u8981\u4f7f\u7528 return () \u6765\u4e3a main \u51fd\u6570\u6307\u5b9a\u4e3a IO () \u7c7b\u578b\uff0c\u4f8b\u5982\uff1a main = do line <- getLine if null line then return () -- <-\u8fd9\u91cc else do ... \u4f7f\u7528 <- \u64cd\u4f5c\u7b26\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5c06 return \u8bed\u53e5\u4e2d\u7684\u5185\u5bb9\u63d0\u53d6\u51fa\u6765\uff0c\u6bd4\u5982 a <- return 'A'\uff0c\u6267\u884c\u540e a \u5c31\u662f 'A'\u3002 when \u00b6 when \u5305\u542b\u5728 Control.Monad \u6a21\u5757\u4e2d\uff0c\u5b83\u8868\u793a\u5728\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u6761\u4ef6\u4e0b\u4f1a\u6267\u884c\u7b2c\u4e8c\u4e2a\u51fd\u6570\uff0c\u5426\u5219\u4f1a return ()\u3002\u6bd4\u5982\uff1a import Control.Monad main = do c <- getChar when ( c /= ' ' ) $ do putChar c main \u7b49\u540c\u4e8e\uff1a main = do c <- getChar if c /= ' ' then do putChar c main else return () sequence \u00b6 sequence \u5728 IO \u4e2d\u4f7f\u7528\u65f6\u53ef\u4ee5\u8fbe\u6210 [IO a] -> IO [a] \u7684\u6548\u679c\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u4f5c\uff1a [ a , b , c ] <- sequence [ getLine , getLine , getLine ] mapM & mapM_ \u00b6 \u5728 IO \u76f8\u5173\u7684\u5730\u65b9\u4f7f\u7528 map\uff0c\u53ef\u4ee5\u4f7f\u7528 mapM \u548c mapM_\uff0c\u5176\u4e2d mapM \u6709\u8fd4\u56de\u503c\u800c mapM_ \u76f4\u63a5\u6254\u6389\u4e86\u8fd4\u56de\u503c\uff1a ghci > mapM print [ 1 , 2 , 3 ] 1 2 3 [ () , () , () ] ghci > mapM_ print [ 1 , 2 , 3 ] 1 2 3 forever \u00b6 forever \u51fd\u6570\u5305\u542b\u5728 Control.Monad \u6a21\u5757\u4e2d\u3002\u5728 main \u51fd\u6570\u5f00\u5934\u52a0\u4e0a forever \u51fd\u6570\u53ef\u4ee5\u4f7f\u540e\u9762\u7684 do \u5757\u4e00\u76f4\u91cd\u590d\u6267\u884c\u76f4\u5230\u7a0b\u5e8f\u88ab\u8feb\u7ec8\u6b62\uff0c\u5982\uff1a import Control.Monad main = forever $ do ... forM \u00b6 forM \u51fd\u6570\u5305\u542b\u5728 Control.Monad \u6a21\u5757\u4e2d\uff0c\u5b83\u7684\u529f\u80fd\u548c mapM \u7c7b\u4f3c\uff0c\u4ece\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e2d\u9010\u4e2a\u53d6\u51fa\u5143\u7d20\u4f20\u5165\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff08\u4e00\u4e2a\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\u7684\u51fd\u6570\uff09\u4e2d\uff0c\u5e76\u4e14\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ef\u4ee5\u8fd4\u56de IO a \u7c7b\u578b\u3002\u6bd4\u5982\uff1a import Control.Monad main = do colors <- forM [ 1 , 2 , 3 , 4 ] ( \\ a -> do putStrLn $ \"Which color do you associate with the number \" ++ show a ++ \"?\" color <- getLine return color ) putStrLn \"The colors that you associate with 1, 2, 3 and 4 are: \" mapM putStrLn colors getContents \u00b6 getLine \u83b7\u53d6\u4e00\u6574\u884c\uff0c\u800c getContents \u4ece\u6807\u51c6\u8f93\u5165\u4e2d\u83b7\u53d6\u5168\u90e8\u5185\u5bb9\u76f4\u5230\u9047\u5230 EOF\uff0c\u5e76\u4e14\u5b83\u662f lazy \u7684\uff0c\u5728\u6267\u884c\u4e86 foo <- getContents \u540e\uff0c\u5b83\u5e76\u4e0d\u4f1a\u8bfb\u53d6\u6807\u51c6\u8f93\u5165\u5e76\u4e14\u8d4b\u503c\u5230 foo\uff0c\u800c\u662f\u7b49\u5230\u9700\u8981\u4f7f\u7528 foo \u7684\u65f6\u5019\u518d\u4ece\u6807\u51c6\u8f93\u5165\u8bfb\u53d6\u3002 getContents \u5728\u4f7f\u7528\u7ba1\u9053\u4f20\u5165\u6587\u5b57\u65f6\u5f88\u5e38\u7528\uff0c\u53ef\u4ee5\u4ee3\u66ff forever+getLine \u4f7f\u7528\uff0c\u6bd4\u5982\u4e00\u4e2a Haskell \u7a0b\u5e8f\u6587\u4ef6 code.hs\uff1a import Data.Char main = do contents <- getContents putStr ( map toUpper contents ) \u4f7f\u7528 ghc --make code \u7f16\u8bd1\u540e\uff0c\u901a\u8fc7\u7ba1\u9053\u4f20\u5165\u6587\u5b57\uff1a cat text.txt | ./code \u4f1a\u5c06 text.txt \u4e2d\u7684\u6240\u6709\u5b57\u6bcd\u8f6c\u4e3a\u5927\u5199\u5e76\u8f93\u51fa interact \u00b6 \u4e0a\u8ff0\u529f\u80fd\u8fd8\u53ef\u4ee5\u8f6c\u5316\u4e3a\u4e00\u4e2a String -> String \u7684\u51fd\u6570\uff1a upperStrings = unlines . map ( map toUpper ) . lines \u800c\u5728 main \u4e2d\u4f7f\u7528\u8fd9\u4e2a\u51fd\u6570\u5c31\u9700\u8981\uff1a main = do contents <- getContents putStr ( upperStrings contents ) \u4f46\u662f String -> String \u7c7b\u578b\u7684\u51fd\u6570\u5728\u8f93\u5165\u8f93\u51fa\u4e2d\u7684\u4f7f\u7528\u592a\u5e38\u89c1\u4e86\uff0c\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528 interact \u51fd\u6570\u6765\u7b80\u5316\u3002interact \u7684\u7c7b\u578b\u662f\uff1a interact :: (String -> String) -> IO () \u53ef\u4ee5\u770b\u51fa\u5b83\u63a5\u6536\u4e00\u4e2a String -> String \u7684\u51fd\u6570\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a IO () \u7c7b\u578b\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u7528\u5728 main \u4e0a\u3002 \u4e8e\u662f\u6574\u4e2a\u8f6c\u6362\u4e3a\u5927\u5199\u7684\u7a0b\u5e8f\u5c31\u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a main = interact $ unlines . map ( map toUpper ) . lines \u6587\u4ef6\u548c\u6d41 \u00b6 \u4ee5\u4e0b\u4e0e\u6587\u4ef6\u548c\u6d41\u76f8\u5173\u7684\u51fd\u6570\u90fd\u5305\u542b\u5728 System.IO \u6a21\u5757\u4e2d openFile \u00b6 openFile \u51fd\u6570\u53ef\u4ee5\u7528\u6765\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\uff0c\u5b83\u7684\u7c7b\u578b\u662f\uff1a openFile :: FilePath -> IOMode -> IO Handle \u5176\u4e2d FilePath \u662f String \u7684 type synonyms\uff0c\u7528\u4e00\u4e2a\u5b57\u7b26\u4e32\u6765\u8868\u793a\u9700\u8981\u6253\u5f00\u7684\u6587\u4ef6\u7684\u8def\u5f84 IOMode \u7684\u5b9a\u4e49\u662f\uff1a data IOMode = ReadMode | WriteMode | AppendMode | ReadWriteMode \u6240\u4ee5\u5b83\u4e00\u5171\u53ea\u6709\u56db\u4e2a\u503c\uff0c\u7528\u6765\u8868\u793a\u8fdb\u884c IO \u64cd\u4f5c\u7684\u6a21\u5f0f openFile \u8fd4\u56de\u4e00\u4e2a IO Handle \u7c7b\u578b\u7684\u503c\uff0c\u5c06\u5176\u7528 <- \u64cd\u4f5c\u7b26\u63d0\u53d6\u540e\u4f1a\u51fa\u73b0\u4e00\u4e2a Handle \u7684\u503c\u3002\u4f46\u4e0d\u80fd\u4ece Handle \u4e2d\u76f4\u63a5\u4f7f\u7528\u6587\u5b57\uff0c\u8fd8\u9700\u8981\u4f7f\u7528\u4e00\u7cfb\u5217\u51fd\u6570\uff1a hGetContents :: Handle -> IO String \uff0c\u4ece Handle \u4e2d\u8bfb\u53d6\u5168\u90e8\u5185\u5bb9\uff0c\u8fd4\u56de\u4e00\u4e2a IO String hGetChar :: Handle -> IO Char \uff0c\u4ece Handle \u4e2d\u8bfb\u53d6\u4e00\u4e2a\u5b57\u7b26 hGetLine :: Handle -> IO String \uff0c\u4ece Handle \u4e2d\u8bfb\u53d6\u4e00\u884c\uff0c\u8fd4\u56de\u4e00\u4e2a IO String hPutStr :: Handle -> String -> IO () \uff0c\u5411 Handle \u4e2d\u8f93\u51fa\u5b57\u7b26\u4e32 hPutStrLn :: Handle -> String -> IO () \uff0c\u540c\u4e0a \u5728\u4f7f\u7528 openFile \u8fdb\u884c\u6587\u4ef6\u64cd\u4f5c\u540e\uff0c\u9700\u8981\u4f7f\u7528 hClose \u624b\u52a8\u5173\u95ed Handle\u3002hClose :: Handle -> IO ()\uff0c\u63a5\u6536\u4e00\u4e2a Handle \u5e76\u8fd4\u56de IO ()\uff0c\u53ef\u4ee5\u76f4\u63a5\u653e\u5728 main \u51fd\u6570\u672b\u5c3e \u6240\u4ee5\u4f7f\u7528 openFile \u8bfb\u53d6\u4e00\u4e2a\u6587\u4ef6\u4e2d\u7684\u5168\u90e8\u5185\u5bb9\u5e76\u8f93\u51fa\u7684\u5168\u90e8\u4ee3\u7801\u662f\uff1a import System.IO main = do handle <- openFile \"text.txt\" ReadMode contents <- hGetContents handle putStrLn contents hClose handle withFile \u00b6 withFile \u7c7b\u4f3c Python \u4e2d\u7684 with open\uff0c\u5b83\u5728\u8bfb\u53d6\u6587\u4ef6\u4f7f\u7528\u4e4b\u540e\u4e0d\u9700\u8981\u624b\u52a8 close \u6587\u4ef6\u3002\u5b83\u7684\u7c7b\u578b\u662f\uff1a withFile :: FilePath -> IOMode -> (Handle -> IO a) -> IO a \u53ef\u4ee5\u770b\u51fa\uff0c\u5b83\u63a5\u6536\u4e09\u4e2a\u53c2\u6570\uff1a FilePath \uff1a\u4e00\u4e2a\u8868\u793a\u6587\u4ef6\u8def\u5f84\u7684String IOMode \uff1a\u6253\u5f00\u6587\u4ef6\u7684\u6a21\u5f0f (Handle -> IO a) \uff1a\u4e00\u4e2a\u51fd\u6570\uff0c\u8868\u793a\u5bf9\u8bfb\u53d6\u6587\u4ef6\u540e\u7684Handle\u7d22\u8981\u8fdb\u884c\u7684\u64cd\u4f5c\uff0c\u9700\u8981\u8fd4\u56de\u4e00\u4e2aI/O action\uff1b\u800c\u8fd9\u4e2a\u8fd4\u56de\u503c\u4e5f\u5c06\u4f5c\u4e3awithFile\u7684\u8fd4\u56de\u503c \u73b0\u5728\u4f7f\u7528 withFile \u6765\u6539\u5199\u4e0a\u8ff0\u4ee3\u7801\uff1a import System.IO main = withFile \"text.txt\" ReadMode ( \\ handle -> do contents <- hGetContents handle putStrLn contents ) withFile \u7684\u529f\u80fd\u76f8\u5f53\u4e8e\u4ee5\u4e0b\u51fd\u6570\uff1a withFile' :: FilePath -> IOMode -> ( Handle -> IO a ) -> IO a withFile' path mode f = do handle <- openFile path mode result <- f handle hClose handle return result readFile \u00b6 readFile \u53ef\u4ee5\u66f4\u52a0\u7b80\u5316\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u7684\u64cd\u4f5c\uff0c\u5b83\u7684\u7c7b\u578b\uff1a readFile :: FilePath -> IO String \u5b83\u53ea\u9700\u8981\u8f93\u5165\u4e00\u4e2a\u8868\u793a\u6587\u4ef6\u8def\u5f84\u7684\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u5176\u4e2d\u4ee5\u5176\u4e2d\u5185\u5bb9\u4e3a\u5185\u5bb9\u7684 I/O action\uff1a import System.IO main = do contents <- readFile \"text.txt\" putStrLn contents writeFile \u00b6 writeFile \u7b80\u5316\u4e86\u5199\u5165\u6587\u4ef6\u7684\u64cd\u4f5c\uff0c\u5b83\u7684\u7c7b\u578b\uff1a writeFile :: FilePath -> String -> IO () \u4f20\u5165\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u8981\u5199\u5165\u7684\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u8981\u5199\u5165\u7684\u5b57\u7b26\u4e32\uff0c\u8fd4\u56de\u4e00\u4e2aIO () appendFile \u00b6 appendFile \u7c7b\u4f3c writeFile\uff0c\u4f46\u4f7f\u7528\u5b83\u4e0d\u4f1a\u8986\u76d6\u6587\u4ef6\u4e2d\u539f\u6765\u5185\u5bb9\uff0c\u800c\u662f\u76f4\u63a5\u628a\u5b57\u7b26\u4e32\u6dfb\u52a0\u5230\u6587\u4ef6\u672b\u5c3e buffer \u00b6 \u6587\u4ef6\u4ee5\u6d41\u7684\u5f62\u5f0f\u88ab\u8bfb\u53d6\uff0c\u9ed8\u8ba4\u6587\u5b57\u6587\u4ef6\u7684\u7f13\u51b2\u533a\uff08buffer\uff09\u5927\u5c0f\u662f\u4e00\u884c\uff0c\u5373\u6bcf\u6b21\u8bfb\u53d6\u4e00\u884c\u5185\u5bb9\uff1b\u9ed8\u8ba4\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u7f13\u51b2\u533a\u5927\u5c0f\u662f\u4ee5\u5757\u4e3a\u5355\u4f4d\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u5219\u6839\u636e\u7cfb\u7edf\u9ed8\u8ba4\u6765\u9009\u62e9\u3002 \u4e5f\u53ef\u4ee5\u901a\u8fc7 hSetBuffering \u51fd\u6570\u6765\u624b\u52a8\u8bbe\u7f6e\u7f13\u51b2\u533a\u5927\u5c0f\uff0c\u8fd9\u4e2a\u51fd\u6570\u7684\u7c7b\u578b\uff1a hSetBuffering :: Handle -> BufferMode -> IO () \u5b83\u63a5\u6536\u4e00\u4e2a handle\uff0c\u548c\u4e00\u4e2a BufferMode\uff0c\u5e76\u8fd4\u56de IO ()\u3002\u5176\u4e2d BufferMode \u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a NoBuffering \uff1a\u6ca1\u6709\u7f13\u51b2\u533a\uff0c\u4e00\u6b21\u8bfb\u5165\u4e00\u4e2a\u5b57\u7b26 LineBuffering \uff1a\u7f13\u51b2\u533a\u5927\u5c0f\u662f\u4e00\u884c\uff0c\u5373\u6bcf\u6b21\u8bfb\u5165\u4e00\u884c\u5185\u5bb9 BlockBuffering (Maybe Int) \uff1a\u7f13\u51b2\u533a\u5927\u5c0f\u662f\u4e00\u5757\uff0c\u5757\u7684\u5927\u5c0f\u7531 Maybe Int \u6307\u5b9a\uff1a BlockBuffering (Nothing) \uff1a\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u7684\u5757\u5927\u5c0f BlockBuffering (Just 2048) \uff1a\u4e00\u5757\u7684\u5927\u5c0f\u662f 2048 \u5b57\u8282\uff0c\u5373\u6bcf\u6b21\u8bfb\u5165 2048 bytes \u7684\u5185\u5bb9 \u7f13\u51b2\u533a\u7684\u5237\u65b0\u662f\u81ea\u52a8\u7684\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 hFlush \u6765\u624b\u52a8\u5237\u65b0 hFlush :: Handle -> IO () \u4f20\u5165\u4e00\u4e2a handle\uff0c\u8fd4\u56de IO ()\uff0c\u5373\u5237\u65b0\u5bf9\u5e94 handle \u7684\u7f13\u51b2\u533a openTempFile \u00b6 openTempFile \u53ef\u4ee5\u65b0\u5efa\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\uff1a openTempFile :: FilePath -> String -> IO (FilePath, Handle) FilePath \u6307\u4e34\u65f6\u6587\u4ef6\u8981\u521b\u5efa\u7684\u4f4d\u7f6e\u8def\u5f84\uff0c String \u6307\u4e34\u65f6\u6587\u4ef6\u540d\u5b57\u7684\u524d\u7f00\uff0c\u8fd4\u56de\u4e00\u4e2a I/O action\uff0c\u5176\u5185\u5bb9\u7b2c\u4e00\u4e2a FilePath \u662f\u521b\u5efa\u5f97\u5230\u7684\u4e34\u65f6\u6587\u4ef6\u7684\u8def\u5f84\uff0c Handle \u662f\u4e34\u65f6\u6587\u4ef6\u7684 handle \u4f8b\u5982\uff1a import System.IO main = do ( tempFile , tempHandle ) <- openTempFile \".\" \"temp\" ... hClose tempHandle \".\" \u6307\u4e34\u65f6\u6587\u4ef6\u8981\u5728\u5f53\u524d\u76ee\u5f55\u521b\u5efa\uff0c \"temp\" \u6307\u4e34\u65f6\u6587\u4ef6\u540d\u5b57\u4ee5 temp \u5f00\u5934\u3002\u6700\u7ec8\u5f97\u5230\u7684 tempFile \u5c31\u662f ./temp.......\uff0ctemp \u540e\u4e3a\u968f\u673a\u6570\u5b57\uff0c\u5982 ./temp43620-0 \u8def\u5f84\u64cd\u4f5c \u00b6 \u76f8\u5173\u51fd\u6570\u90fd\u5305\u542b\u5728 System.Directory \u6a21\u5757\u4e2d\uff0c\u5168\u90e8\u5185\u5bb9\u89c1 System.Directory getCurrentDirectory \u00b6 getCurrentDirectory :: IO FilePath \u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a I/O action\uff0c\u5176\u5185\u5bb9\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u8868\u793a\u5f53\u524d\u8def\u5f84\u7684\u7edd\u5bf9\u8def\u5f84 removeFile \u00b6 removeFile :: FilePath -> IO () \u8f93\u5165\u4e00\u4e2a\u6587\u4ef6\u8def\u5f84\uff0c\u5e76\u5220\u9664\u6389\u5b83 renameFile \u00b6 renameFile :: FilePath -> FilePath -> IO () \u8f93\u5165\u4e00\u4e2a\u539f\u8def\u5f84\uff0c\u4e00\u4e2a\u65b0\u8def\u5f84\uff0c\u4e3a\u539f\u8def\u5f84\u7684\u6587\u4ef6\u91cd\u547d\u540d\u4e3a\u65b0\u8def\u5f84\u7684\u540d doesFileExist \u00b6 doesFileExist :: FilePath -> IO Bool \u68c0\u67e5\u6587\u4ef6\u662f\u5426\u5b58\u5728\uff0c\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u5e03\u5c14\u503c\u7684 I/O action Command line arguments \u00b6 System.Environment \u6a21\u5757\u4e2d\u63d0\u4f9b\u4e86\u4e24\u4e2a\u51fd\u6570\u53ef\u4ee5\u7528\u6765\u5904\u7406\u4f20\u5165\u547d\u4ee4\u884c\u7684\u53c2\u6570 getArgs \u00b6 getArgs :: IO [String] \u4e0d\u9700\u8981\u8f93\u5165\u53c2\u6570\uff0c\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a I/O action\uff0c\u5185\u5bb9\u4e3a\u4f20\u5165\u547d\u4ee4\u884c\u7684\u53c2\u6570\uff08\u4e00\u4e2a\u7531String\u7ec4\u6210\u7684\u5217\u8868\uff09\u3002\u76f8\u5f53\u4e8e C \u8bed\u8a00\u4e2d\u7684 argv[1:] getProgName \u00b6 getProgName :: IO String \u8fd4\u56de I/O action\uff0c\u5185\u5bb9\u4e3a\u7a0b\u5e8f\u7684\u540d\u5b57\uff0c\u76f8\u5f53\u4e8e C \u8bed\u8a00\u4e2d\u7684 argv[0] Randomness \u00b6 \u548c\u968f\u673a\u6570\u6709\u5173\u7684\u51fd\u6570\u90fd\u5305\u542b\u5728 System.Random \u6a21\u5757\u4e2d\u3002GHCi \u542f\u52a8\u65f6\u53ef\u80fd\u4e0d\u4f1a\u5305\u542b System.Random \u7684\u914d\u7f6e\uff0c\u5bfc\u81f4\u65e0\u6cd5\u627e\u5230\u6a21\u5757\u3002\u9700\u8981\u901a\u8fc7 stack \u6253\u5f00: stack ghci --package random Haskell \u8981\u6c42\u540c\u6837\u7684\u7a0b\u5e8f\u9700\u8981\u8fd0\u884c\u51fa\u540c\u6837\u7684\u7ed3\u679c\uff0c\u9664\u4e86\u7528\u5230\u4e86 I/O action\uff0c\u6240\u6709\u4f1a\u9020\u6210\u4e0d\u540c\u7ed3\u679c\u7684\u51fd\u6570\u90fd\u8981\u4ea4\u7ed9 I/O action \u6765\u5b8c\u6210 \u90a3\u8981\u4f7f\u968f\u673a\u6570\u8131\u79bb IO \u5b58\u5728\uff0c\u5c31\u8981\u7528\u5230\u968f\u673a\u751f\u6210\u5668\uff08random generator\uff09 System.Random \u6a21\u5757\u63d0\u4f9b\u4e86\u51e0\u4e2a\u751f\u6210\u968f\u673a\u6570\u7684\u51fd\u6570\uff1a random \u00b6 random :: (Random a, RandomGen g) => g -> (a, g) \u5176\u4e2d\u53c8\u6709\u4e24\u4e2a\u65b0\u7684 typeclass\uff0cRandom \u8868\u793a\u53ef\u4ee5\u53d6\u968f\u673a\uff0cRandomGen \u8868\u793a\u968f\u673a\u6570\u751f\u6210\u5668\u3002random \u51fd\u6570\u63a5\u6536\u4e00\u4e2a\u968f\u673a\u6570\u751f\u6210\u5668\uff0c\u8fd4\u56de\u4e00\u4e2a\u5143\u7ec4\uff0c\u5176\u4e2d\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f\u751f\u6210\u7684\u968f\u673a\u6570\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u662f\u4e00\u4e2a\u65b0\u7684\u968f\u673a\u6570\u751f\u6210\u5668 \u83b7\u53d6\u968f\u673a\u6570\u751f\u6210\u5668\u53ef\u4ee5\u4f7f\u7528 mkStdGen \u51fd\u6570\uff1a mkStdGen :: Int -> StdGen \u5176\u4e2d StdGen \u662f\u4e00\u4e2a RandomGen \u7684\u5b9e\u4f8b \u8fd0\u7528 random \u751f\u6210\u968f\u673a\u6570\u9700\u8981\u6307\u5b9a\u7c7b\u578b\uff0c\u4e0d\u7136\u7a0b\u5e8f\u65e0\u6cd5\u786e\u5b9a a \u662f\u4ec0\u4e48\u7c7b\u578b\u3002\u4f8b\u5982\uff1a ghci > random ( mkStdGen 100 ) :: ( Int , StdGen ) ( 9216477508314497915 , StdGen { unStdGen = SMGen 712633246999323047 2532601429470541125 }) ghci > random ( mkStdGen 100 ) :: ( Char , StdGen ) ( '\\ 537310 ' ,StdGen {unStdGen = SMGen 712633246999323047 2532601429470541125}) ghci > random ( mkStdGen 100 ) :: ( Bool , StdGen ) ( True , StdGen { unStdGen = SMGen 712633246999323047 2532601429470541125 }) \u518d\u6b21\u8fd0\u884c\u540c\u6837\u7684\u51fd\u6570\uff0c\u4f1a\u5f97\u5230\u540c\u6837\u7684\u7ed3\u679c\u3002\u6240\u4ee5\u5982\u679c\u9700\u8981\u751f\u6210\u5176\u4ed6\u7684\u968f\u673a\u6570\uff0c\u9700\u8981\u66f4\u6362\u751f\u6210\u5668\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e0a\u4e00\u6b21\u8c03\u7528\u7ed3\u679c\u8fd4\u56de\u7684\u65b0\u968f\u673a\u6570\u751f\u6210\u5668\uff1a threeCoins :: StdGen -> ( Bool , Bool , Bool ) threeCoins gen = let ( firstCoin , newGen ) = random gen ( secondCoin , newGen' ) = random newGen ( thirdCoin , newGen'' ) = random newGen' in ( firstCoin , secondCoin , thirdCoin ) randoms \u00b6 randoms :: (Random a, RandomGen g) => g -> [a] randoms \u63a5\u6536\u4e00\u4e2a RandomGen\uff0c\u8fd4\u56de\u4e00\u4e2a\u968f\u673a\u7684\u65e0\u7a77\u5217\u8868\u3002\u56e0\u4e3a\u5b83\u662f\u65e0\u7a77\u7684\uff0c\u6240\u4ee5\u4e0d\u4f1a\u8fd4\u56de\u65b0\u7684\u968f\u673a\u6570\u751f\u6210\u5668 randomR \u00b6 randomR :: (Random a, RandomGen g) => (a, a) -> g -> (a, g) \u53ef\u4ee5\u7528\u6765\u751f\u6210\u6709\u8303\u56f4\u7684\u968f\u673a\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\u8868\u793a\u751f\u6210\u968f\u673a\u6570\u7684\u8303\u56f4(\u95ed\u533a\u95f4) randomRs \u00b6 randomRs :: (Random a, RandomGen g) => (a, a) -> g -> [a] \u540c\u4e0a\u4e24\u4e2a\uff0c\u751f\u6210\u6709\u8303\u56f4\u7684\u65e0\u7a77\u968f\u673a\u6570\u5217\u8868 getStdGen \u00b6 \u5982\u679c\u60f3\u8981\u8ba9\u7a0b\u5e8f\u6bcf\u6b21\u8fd0\u884c\u5f97\u5230\u4e0d\u540c\u7684\u968f\u673a\u7ed3\u679c\uff0c\u9700\u8981\u4f7f\u7528 getStdGen \u6765\u83b7\u53d6\u5168\u5c40\u968f\u673a\u6570\u751f\u6210\u5668\uff0c\u5b83\u4f1a\u5728\u6bcf\u6b21\u8fd0\u884c\u7684\u65f6\u5019\u4ea7\u751f\u4e0d\u540c\u7684\u503c\uff0c\u4e5f\u56e0\u6b64\uff0c\u5b83\u8fd4\u56de\u7684\u662f\u4e00\u4e2a I/O action\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u76f4\u63a5\u7684 StdGen getStdGen :: Control.Monad.IO.Class.MonadIO m => m StdGen \u5373\u53ef\u4ee5\u770b\u6210 getStdGen :: IO StdGen\uff0c\u9700\u8981\u4f7f\u7528 <- \u64cd\u4f5c\u7b26\u5c06 StdGen \u63d0\u53d6\u51fa\u6765 \u4f46\u662f\u5728\u540c\u4e00\u4e2a\u7a0b\u5e8f\u4e2d\uff0cgetStdGen \u7684\u7ed3\u679c\u662f\u76f8\u540c\u7684\uff0c\u5168\u5c40\u968f\u673a\u6570\u751f\u6210\u5668\u4e0d\u4f1a\u81ea\u52a8\u66f4\u65b0\uff0c\u6240\u4ee5\u5c31\u9700\u8981\u53e6\u4e00\u4e2a\u51fd\u6570 newStdGen newStdGen \u00b6 newStdGen :: Control.Monad.IO.Class.MonadIO m => m StdGen \u6267\u884c newStdGen \u4f1a\u8fdb\u884c\u4e24\u4e2a\u64cd\u4f5c\uff1a \u66f4\u65b0\u5168\u5c40\u968f\u673a\u6570\u751f\u6210\u5668\uff0c\u4e0b\u6b21\u6267\u884c getStdGen \u4f1a\u83b7\u5f97\u4e0d\u540c\u7684\u7ed3\u679c \u8fd4\u56de\u4e00\u4e2a I/O action\uff0c\u5305\u542b\u4e00\u4e2a\u65b0\u7684 StdGen\uff08\u4f46\u662f\u8fd9\u4e2a\u751f\u6210\u5668\u548c\u5168\u5c40\u751f\u6210\u5668\u4e5f\u4e0d\u540c\uff09 Exceptions \u00b6 \u7a0b\u5e8f\u5728\u8fd0\u884c\u5931\u8d25\u65f6\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u53ef\u4ee5\u901a\u8fc7 Control.Exception \u6a21\u5757\u4e2d\u7684 catch \u51fd\u6570\u6765\u6355\u83b7\u5f02\u5e38\uff1a catch :: Exception e => IO a -> (e -> IO a) -> IO a \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u8981\u8fdb\u884c\u7684\u64cd\u4f5c\uff0c\u4ee5 IO a \u4e3a\u8fd4\u56de\u503c\u7684\u7c7b\u578b\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u63a5\u6536\u5f02\u5e38\u5e76\u8fdb\u884c\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a import Control.Exception main = main' ` catch ` handler main' :: IO () main' = do ... handler :: Exception e => e -> IO () handler e = putStrLn \"...\" \u4e5f\u53ef\u4ee5\u5229\u7528\u5b88\u536b\uff08guard\uff09\u8bed\u6cd5\u548c System.IO.Error \u4e2d\u7684\u51fd\u6570\u6765\u5224\u65ad IO \u5f02\u5e38\u7684\u7c7b\u578b\u6765\u8fdb\u884c\u4e0d\u540c\u64cd\u4f5c\uff1a import System.Environment import System.IO.Error import Control.Exception main = toTry ` catch ` handler toTry :: IO () toTry = do ( fileName : _ ) <- getArgs contents <- readFile fileName putStrLn $ \"The file has \" ++ show ( length ( lines contents )) ++ \" lines!\" handler :: IOError -> IO () handler e | isDoesNotExistError e = putStrLn \"The file doesn't exist!\" | otherwise = ioError e \u5177\u4f53\u76f8\u5173\u5168\u90e8\u51fd\u6570\u89c1\u6587\u6863\uff1a System.IO.Error \u3001 Control.Exception Functors \u00b6 \u51fd\u5b50\uff08Functor\uff09\u662f\u4e00\u4e2a\u7c7b\u578b\u7c7b\uff08typeclass\uff09\uff0c\u548c\u5176\u4ed6\u7c7b\u578b\u7c7b\u4e00\u6837\uff0c\u5b83\u89c4\u5b9a\u4e86\u5176\u5b9e\u4f8b\u7c7b\u5fc5\u987b\u5b9e\u73b0\u7684\u529f\u80fd\uff08\u4f8b\u5982 Eq \u7c7b\u578b\u7c7b\u89c4\u5b9a\u4e86\u5b83\u7684\u5b9e\u4f8b\u5fc5\u987b\u662f\u53ef\u4ee5\u6bd4\u8f83\u662f\u5426\u76f8\u7b49\u7684\uff09\uff0cFunctor \u89c4\u5b9a\u7c7b\u5b83\u7684\u5b9e\u4f8b\u5fc5\u987b\u662f\u53ef\u4ee5\u8fdb\u884c\u6620\u5c04\u7684\u3002Functor \u8981\u6c42\u4f7f\u7528 fmap :: (a -> b) -> f a -> f b \u51fd\u6570\u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a a -> b \u7c7b\u578b\u7684\u51fd\u6570\u3001\u4e00\u4e2a\u5185\u90e8\u5143\u7d20\u4e3a a \u7c7b\u578b\u7684\u51fd\u5b50\uff0c\u8fd4\u56de\u4e00\u4e2a\u5185\u90e8\u5143\u7d20\u4e3a b \u7c7b\u578b\u7684\u51fd\u5b50 Functor \u53ef\u4ee5\u6bd4\u4f5c\u76d2\u5b50\uff0c\u90a3 fmap \u51fd\u6570\u5c31\u76f8\u5f53\u4e8e\u7ed9\u5b9a\u4e00\u4e2a\u51fd\u6570\u548c\u4e00\u4e2a\u76d2\u5b50\uff0c\u5c06\u76d2\u5b50\u4e2d\u7684\u5168\u90e8\u5143\u7d20\u90fd\u5e94\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u518d\u8fd4\u56de\u5e94\u7528\u51fd\u6570\u540e\u7684\u76d2\u5b50 \u51fd\u5b50\u7684\u5b9e\u4f8b\u5fc5\u987b\u662f\u4e00\u4e2a Kind \u4e3a * -> * \u7684\u7c7b\u578b\u6784\u9020\u5668\uff0c\u56e0\u4e3a\u5b83\u8981\u6c42\u5176\u662f\u4e00\u4e2a\u76d2\u5b50\uff0c\u76d2\u5b50\u5728\u63a5\u6536\u5185\u5bb9\u540e\u624d\u4f1a\u6210\u4e3a\u4e00\u4e2a\u5177\u4f53\u7684\u7c7b\u578b\u3002fmap \u4e2d\u7684 f a \u548c f b \u4e5f\u662f\u56e0\u4e3a f \u662f\u4e00\u4e2a\u7c7b\u578b\u6784\u9020\u5668\uff0c\u5728\u63a5\u6536\u7c7b\u578b a/b \u540e\u624d\u4f1a\u53d8\u6210\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\uff08f a \u548c f b\uff09\u51fa\u73b0\u5728\u51fd\u6570\u7c7b\u578b\u58f0\u660e\u4e2d Functor \u7684\u5b9a\u4e49\u662f: class Functor f where fmap :: ( a -> b ) -> f a -> f b ( <$ ) :: a -> f a -> f b ( <$ ) = fmap . const \u53ef\u4ee5\u53d1\u73b0 Functor \u4e0d\u4ec5\u9700\u8981 fmap \u51fd\u6570\uff0c\u8fd8\u9700\u8981\u4e00\u4e2a <$ \u51fd\u6570\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a a \u7c7b\u578b\u7684\u53d8\u91cf\u548c\u4e00\u4e2a\u5185\u5bb9\u4e3a b \u7c7b\u578b\u7684\u51fd\u5b50\uff0c\u8fd4\u56de\u4e00\u4e2a\u5185\u5bb9\u4e3a a \u7c7b\u578b\u7684\u51fd\u5b50\uff1b\u4f5c\u7528\u5c31\u662f\u5c06\u4f20\u5165\u7684\u51fd\u5b50\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u66ff\u6362\u4e3a\u4f20\u5165\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u6bd4\u5982\uff1a ghci > 'a' <$ [ 1 , 2 , 3 ] \"aaa\" \u4f46\u5b83\u4e0d\u662f\u58f0\u660e\u4e00\u4e2a\u51fd\u5b50\u5b9e\u4f8b\u5fc5\u987b\u7684\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u4f7f\u7528 fmap \u548c const \u51fd\u6570\u590d\u5408\u6765\u5b9e\u73b0\uff0c\u5176\u4e2d const \u7684\u7c7b\u578b\u7b7e\u540d\uff1a const :: a -> b -> a \u5373\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u4f46\u59cb\u7ec8\u53ea\u8fd4\u56de\u7b2c\u4e00\u4e2a\u53c2\u6570 Functor \u5b9e\u4f8b \u00b6 [] \u00b6 \u5217\u8868 [] \u662f\u4e00\u4e2a\u51fd\u5b50\uff0c\u5b83\u901a\u8fc7 map \u51fd\u6570\u6765\u5b9e\u73b0 fmap \u7684\u529f\u80fd\uff1a instance Functor [] where fmap = map map :: (a -> b) -> [a] -> [b] map \u548c fmap \u8981\u6c42\u7684\u76f8\u540c\uff0c\u8fbe\u6210\u7684\u76ee\u7684\u4e5f\u4e00\u81f4\u3002map \u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u548c\u4e00\u4e2a\u5217\u8868\uff0c\u5b83\u4f1a\u5c06\u5217\u8868\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u5e94\u7528\u8fd9\u4e2a\u51fd\u6570\u540e\u518d\u8fd4\u56de\u8fd9\u4e2a\u5217\u8868 Maybe \u00b6 Maybe \u4e5f\u5177\u6709 kind * -> *\uff0c\u5b83\u4e5f\u662f\u4e00\u4e2a\u51fd\u5b50\uff1a instance Functor Maybe where fmap f Nothing = Nothing fmap f ( Just x ) = Just ( f x ) ghci > fmap ( * 2 ) Nothing Nothing ghci > fmap ( * 2 ) ( Just 2 ) Just 4 Either a \u00b6 Either \u7684 kind \u662f* -> * -> *\uff0c\u663e\u7136\u5b83\u4e0d\u662f\u51fd\u5b50\uff0c\u4f46\u662f\u56fa\u5b9a\u4e86\u4e00\u4e2a\u4f20\u5165\u7c7b\u578b\u7684 Either a \u7684 kind \u662f* -> *\uff0c\u4e5f\u662f\u4e00\u4e2a\u51fd\u5b50\uff1a instance Functor ( Either a ) where fmap f ( Left x ) = Left x fmap f ( Right x ) = Right ( f x ) ghci > fmap ( * 2 ) ( Left 4 ) Left 4 ghci > fmap ( * 2 ) ( Right 4 ) Right 8 \u56e0\u4e3a\u4f7f\u7528 Either \u65f6\u4e00\u822c\u7528\u53f3\u503c\u8868\u793a\u6b63\u5e38\u7ed3\u679c\uff0c\u5de6\u503c\u8868\u793a\u5f02\u5e38\u4fe1\u606f\uff0c\u6240\u4ee5\u4f7f\u7528 fmap \u65f6\u53ea\u5bf9\u53f3\u503c\u8fdb\u884c\u64cd\u4f5c\uff0c\u5982\u679c\u65f6\u5de6\u503c\u5219\u4fdd\u6301\u4e0d\u53d8\uff08\u800c\u4e14\u5de6\u503c\u6b64\u65f6\u4e5f\u4f5c\u4e3a\u786e\u5b9a\u7c7b\u578b\u786e\u5b9a\u503c\u5b58\u5728\uff09 IO \u00b6 IO \u4e5f\u662f\u4e00\u4e2a\u51fd\u5b50\uff0c\u4f7f\u7528 fmap \u5bf9 IO \u4e2d\u5185\u5bb9\u5e94\u7528\u51fd\u6570\uff1a instance Functor IO where fmap f action = do result <- action return ( f result ) ghci > fmap ( \"input: \" ++ ) getLine test \"input: test\" (,) a \u00b6 (,) \u8868\u793a\u4e00\u4e2a\u4e8c\u5143\u7ec4\u7684\u7c7b\u578b\u6784\u9020\u5668\uff0c(,) :: * -> * -> *\uff0c\u800c\u786e\u5b9a\u4e86\u7b2c\u4e00\u4e2a\u5143\u7d20\u7684\u7c7b\u578b\u540e\u5c31\u53d8\u6210\u4e86 (,) a\uff0c\u5b83\u7684 kind \u662f * -> *\u3002\u4e5f\u662f\u4e00\u4e2a\u51fd\u5b50\uff0c\u8fdb\u884c fmap \u51fd\u6570\u65f6\u53ea\u5bf9\u7b2c\u4e8c\u4e2a\u5143\u7d20\u5e94\u7528\uff1a instance Functor ((,) a ) where fmap f ( x , y ) = ( x , f y ) \u53ea\u5269\u4e00\u4e2a\u5143\u7d20\u7684\u4e09\u5143\u7ec4\u548c\u56db\u5143\u7ec4\u4e5f\u90fd\u662f\u51fd\u5b50\uff0cfmap \u4e5f\u53ea\u5bf9\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u5e94\u7528\uff1a instance Functor ((,,) a b ) where fmap f ( a , b , c ) = ( a , b , f c ) instance Functor ((,,,) a b c ) where fmap f ( a , b , c , d ) = ( a , b , c , f d ) (->) r \u00b6 -> \u4e5f\u662f\u4e00\u4e2a\u7c7b\u578b\u6784\u9020\u5668\uff0c\u5b83\u7684 kind\uff1a (->) :: * -> * -> * \u4e00\u4e2a\u6620\u5c04\uff08\u4e00\u5143\u51fd\u6570\uff09\u7684\u7c7b\u578b a -> b \u4e5f\u53ef\u4ee5\u5199\u6210 (->) a b\uff0c\u5b83\u662f\u7531\u7c7b\u578b a \u548c\u7c7b\u578b b \u8f93\u5165\u5230\u7c7b\u578b\u6784\u9020\u5668 -> \u4e2d\u540e\u5f62\u6210\u7684\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\u3002\u6240\u4ee5\u786e\u5b9a\u4e86\u8f93\u5165\u7c7b\u578b\u540e\u7684\u4e00\u5143\u51fd\u6570\u7684\u7c7b\u578b\u5c31\u662f (->) r\uff08\u5176\u4e2d r \u662f\u8f93\u5165\u7684\u7c7b\u578b\uff09 \u89c4\u5b9a\u7684 fmap \u7684\u7c7b\u578b\u7b7e\u540d\u662f\uff1a fmap :: (a -> b) -> f a -> f b \u5176\u4e2d\u7684 f \u662f\u51fd\u5b50\uff0c\u800c\u5728\u8fd9\u4e2a\u5b9e\u4f8b\u4e2d (->) r \u5c31\u662f\u51fd\u5b50\uff0c\u5c06\u5176\u5e26\u5165 f \u53ef\u4ee5\u5f97\u5230\uff1a fmap :: (a -> b) -> ((-> r) a) -> ((-> r) b) \u628a\u5176\u4e2d\u7684 (->) \u6362\u6210\u4e2d\u7f00\u53ef\u4ee5\u5f97\u5230\uff1a fmap :: (a -> b) -> (r -> a) -> (r -> b) \u4f20\u5165\u4e24\u4e2a\u51fd\u6570\uff0c\u4e00\u4e2a\u7c7b\u578b\u4e3a a -> b\uff0c\u4e00\u4e2a\u7c7b\u578b\u4e3a r -> a\uff0c\u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\uff0c\u7c7b\u578b\u4e3a r -> b\u3002 \u4e0d\u96be\u63a8\u6d4b\u8fd9\u4e2a fmap \u662f\u5c06\u8fd9\u4e24\u4e2a\u51fd\u6570\u590d\u5408\u4e86\uff0c\u5148\u5bf9\u8f93\u5165\u5bf9 r \u5e94\u7528\u7b2c\u4e8c\u4e2a\u51fd\u6570\u4ea7\u751f\u7c7b\u578b a \u7684\u7ed3\u679c\uff0c\u7136\u540e\u5728\u5e94\u7528\u7b2c\u4e00\u4e2a\u51fd\u6570\u4ea7\u751f\u7c7b\u578b b \u7684\u7ed3\u679c\uff0c\u6240\u4ee5 (->) r \u5b9a\u4e49\u7684 fmap \u662f\uff1a instance Functor (( -> ) r ) where fmap f g = ( \\ x -> f ( g x )) \u6240\u4ee5 (->) r \u7684 fmap \u5176\u5b9e\u5c31\u662f\u51fd\u6570\u590d\u5408 (.)\uff1a instance Functor (( -> ) r ) where fmap = ( . ) ghci > : t fmap ( * 3 ) ( + 100 ) fmap ( * 3 ) ( + 100 ) :: ( Num a ) => a -> a ghci > fmap ( * 3 ) ( + 100 ) 1 303 ghci > ( * 3 ) ` fmap ` ( + 100 ) $ 1 303 ghci > ( * 3 ) . ( + 100 ) $ 1 303 Functor Laws \u00b6 \u6240\u6709\u7684\u51fd\u5b50\u90fd\u5e94\u8be5\u6ee1\u8db3\u4e24\u4e2a\u5b9a\u5f8b\u3002\u8fd9\u4e24\u4e2a\u5b9a\u5f8b\u4e0d\u662f Haskell \u5f3a\u5236\u8981\u6c42\u7684\uff0c\u4f46\u5e94\u8be5\u786e\u4fdd\u4e00\u4e2a\u51fd\u5b50\u6ee1\u8db3\u8fd9\u4e24\u4e2a\u5b9a\u5f8b\uff1a fmap id = id \uff08\u5176\u4e2d id \u4e3a\u51fd\u6570 (\\x -> x) \uff09\uff1a\u5373\u5bf9\u4e00\u4e2a\u51fd\u5b50 fmap id\uff0c\u90a3\u5b83\u5e94\u8be5\u8fd4\u56de\u672c\u8eab\uff08fmap id a = id a = a\uff0ca \u4e3a\u4e00\u4e2a\u51fd\u5b50\uff09\uff0c\u6bd4\u5982\uff1a ghci > fmap id [ 1 , 2 , 3 ] [ 1 , 2 , 3 ] ghci > fmap id ( Just 2 ) Just 2 fmap (f . g) = fmap f . fmap g \uff1a\u5373\u51fd\u5b50\u7684 fmap \u652f\u6301\u7ed3\u5408\u5f8b fmap (f . g) a = fmap f . fmap g $ a = fmap f (fmap g a)\uff0c\u5176\u4e2d a \u4e3a\u4e00\u4e2a\u51fd\u5b50 fmap (f . g) (Just x) = fmap f (fmap g (Just x)) = fmap f (Just (g x)) = Just (f (g x)) ghci > fmap (( * 3 ) . ( + 100 )) ( Just 1 ) Just 303 \u6ee1\u8db3\u7b2c\u4e00\u4e2a\u5b9a\u5f8b\u7684\u51fd\u5b50\u4e00\u5b9a\u6ee1\u8db3\u7b2c\u4e8c\u4e2a\u5b9a\u5f8b\uff0c\u6240\u4ee5\u53ea\u8981\u68c0\u67e5\u51fd\u5b50\u662f\u5426\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u5b9a\u5f8b\u5373\u53ef Intuition \u00b6 \u5bf9\u4e8e\u51fd\u5b50\u548c fmap\uff0c\u6709\u4e24\u79cd\u7406\u89e3\u65b9\u6cd5 \u51fd\u5b50\u662f\u4e00\u79cd\u5bb9\u5668\uff08container\uff09\uff1bfmap \u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u548c\u4e00\u4e2a\u5bb9\u5668\uff0c\u5728\u5bb9\u5668\u5185\u90e8\u5e94\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u8fd4\u56de\u5e94\u7528\u540e\u7684\u65b0\u5bb9\u5668 \u51fd\u5b50\u662f\u4e00\u79cd\u8ba1\u7b97\u4e0a\u4e0b\u6587\uff08context\uff09\uff1bfmap \u662f\u67ef\u91cc\u5316\u7684\uff0c\u628a\u5176\u7c7b\u578b\u7b7e\u540d\u770b\u4f5c fmap :: (a -> b) -> (f a -> f b) \u2003\u2003\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u8fd4\u56de\u53e6\u4e00\u4e2a\u51fd\u6570\uff0c\u4f20\u5165\u51fd\u6570 g :: a -> b\uff0cfmap \u5c06\u5176\u8f6c\u6362\u4e3a\u65b0\u7684\u51fd\u6570 fmap g :: f a -> f b \u2003\u2003\u4f7f\u666e\u901a\u7684\u51fd\u6570 g \u53ef\u4ee5\u5728\u8ba1\u7b97\u4e0a\u4e0b\u6587 f \u4e2d\u4f7f\u7528\uff0c\u8fd9\u79cd\u8f6c\u6362\u4e5f\u88ab\u79f0\u4e3a\u63d0\u5347\uff08lift\uff09 \u5e38\u7528\u51fd\u6570 \u00b6 <$> \u00b6 <$> \u51fd\u6570\u662f fmap \u7684\u4e2d\u7f00\u5f62\u5f0f\uff08\u5b83\u770b\u7740\u7c7b\u4f3c $ \uff0c f $ 3 \u5c06 f \u5e94\u7528\u5728\u5355\u4e2a\u503c 3 \u4e0a\uff0c\u800c f <$> [1, 2, 3] \u5c06 f \u5e94\u7528\u5728\u4e00\u4e2a\u51fd\u5b50\u4e0a\uff0c\u4e5f\u5c31\u662f\u5e94\u7528\u5728\u4e00\u4e2a\u51fd\u5b50\u5185\u90e8\u7684\u6240\u6709\u503c\u4e0a\uff09\uff1a ghci > fmap ( * 2 ) ( Just 2 ) 4 ghci > ( * 2 ) <$> Just 2 4 $> \u00b6 $> \u51fd\u6570\u5305\u542b\u5728 Data.Functor \u6a21\u5757\u4e2d ($>) :: Functor f => f a -> b -> f b Functor \u5b9a\u4e49\u65f6\u8981\u6c42\u4e86 <$ \u51fd\u6570\uff0c\u5c06\u51fd\u5b50\u5185\u90e8\u7684\u5143\u7d20\u5168\u90e8\u66ff\u6362\u4e3a\u6307\u5b9a\u7684\u67d0\u4e2a\u503c\uff0c\u800c $> \u6b63\u597d\u5c06 <$ \u51fd\u6570\u7684\u4e24\u4e2a\u53c2\u6570\u53cd\u4e86\u8fc7\u6765\uff0c\u76f8\u5f53\u4e8e flip (<$) \uff1a ghci > 'a' <$ [ 1 , 2 , 3 ] \"aaa\" ghci > [ 1 , 2 , 3 ] $> 'a' \"aaa\" void \u00b6 void \u51fd\u6570\u4e5f\u5305\u542b\u5728 Data.Functor \u6a21\u5757\u4e2d void :: Functor f => f a -> f () void \u51fd\u6570\u628a\u4e00\u4e2a\u51fd\u5b50\u5185\u90e8\u7684\u5168\u90e8\u5143\u7d20\u90fd\u53d8\u6210\u7a7a\uff08 () \uff09\uff0c void x \u76f8\u5f53\u4e8e () <$ x \uff1a ghci > void [ 1 , 2 , 3 ] [ () , () , () ] ghci > void ( Just 2 ) Just () Applicative Functor \u00b6 \u5e94\u7528\u51fd\u5b50\uff08Applicative Functor\uff09\u662f\u51fd\u5b50\u7684\u5347\u7ea7\u7248\uff0c\u5b83\u5305\u542b\u5728 Control.Applicative \u6a21\u5757\u4e2d\u3002 fmap \u8fdb\u884c\u7684\u64cd\u4f5c\u662f\u5c06\u4e00\u4e2a\u666e\u901a\u4e00\u5143\u51fd\u6570\u5e94\u7528\u5728\u4e00\u4e2a\u51fd\u5b50\u5185\u90e8\u3002\u800c\u5982\u679c\u8981\u5c06\u4e00\u4e2a\u5305\u542b\u51fd\u6570\u7684\u51fd\u5b50\u5e94\u7528\u5728\u53e6\u4e00\u4e2a\u51fd\u5b50\u4e0a\uff0cfmap \u5c31\u5904\u7406\u4e0d\u4e86\u4e86\uff0c\u4f46\u662f\u5e94\u7528\u51fd\u5b50\u7684\u65b9\u6cd5\u53ef\u4ee5\u5904\u7406\u3002\u5e94\u7528\u51fd\u5b50\u7684\u5b9a\u4e49\uff1a class Functor f => Applicative f where pure :: a -> f a ( <*> ) :: f ( a -> b ) -> f a -> f b \u5e94\u7528\u51fd\u5b50\u8981\u6c42\u5b9e\u73b0\u4e24\u4e2a\u51fd\u6570\uff1a pure :: a -> f a\uff0c\u4e0d\u96be\u7406\u89e3\uff0cpure \u63a5\u6536\u4e00\u4e2a\u503c\uff0c\u5e76\u5c06\u5176\u653e\u5728\u9ed8\u8ba4\u7684\u4e0a\u4e0b\u6587/\u5bb9\u5668\u4e2d\u3002\u5bf9\u4e8e\u5217\u8868\uff0cpure = []\uff1b\u5bf9\u4e8e Maybe\uff0cpure = Just <*> :: f (a -> b) -> f a -> f b\uff0c\u7c7b\u4f3c\u4e8e fmap :: (a -> b) -> f a -> f b\uff0c\u4f46\u4e0d\u540c\u7684\u662f <*> \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u7c7b\u578b\u662f f (a -> b) \u4e0d\u662f a -> b\u3002\u6240\u4ee5 <*> \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u666e\u901a\u51fd\u6570\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c<*> \u63a5\u6536\u4e00\u4e2a\u88c5\u6709\u51fd\u6570\u7684\u51fd\u5b50\u548c\u53e6\u4e00\u4e2a\u51fd\u5b50\uff0c\u5e94\u7528\u51fd\u6570\u540e\u8fd4\u56de\u65b0\u7684\u51fd\u5b50\u3002 Applicative Functor \u5b9e\u4f8b \u00b6 Maybe \u00b6 Maybe \u662f\u4e00\u4e2a\u5e94\u7528\u51fd\u5b50\uff1a instance Applicative Maybe where pure = Just Nothing <*> _ = Nothing ( Just f ) <*> something = fmap f something pure \u51fd\u6570\uff1a\u5c06\u4e00\u4e2a\u503c\u653e\u5728\u9ed8\u8ba4\u7684\u4e0a\u4e0b\u6587\u4e2d\uff0c\u800c\u5bf9\u4e8e Maybe\uff0c\u9ed8\u8ba4\u7684\u4e0a\u4e0b\u6587\u5c31\u662f Just\uff0c\u6240\u4ee5 pure x = Just x <*> \u51fd\u6570\uff1a\u5c06\u88c5\u6709\u51fd\u6570\u7684\u51fd\u5b50\u4e2d\u7684\u51fd\u6570\u5e94\u7528\u53e6\u4e00\u4e2a\u51fd\u5b50\u4e2d \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f Nothing\uff0c\u5373\u7b2c\u4e00\u4e2a\u51fd\u5b50\u4e0d\u5305\u542b\u51fd\u6570\uff0c\u90a3\u8fd4\u56de\u7684\u7ed3\u679c\u5c31\u4e5f\u4f1a\u662f Nothing \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u88c5\u6709\u51fd\u6570f\u7684\u51fd\u5b50 Just f\uff0c\u5c06\u5176\u4e2d\u7684\u51fd\u6570f\u5e94\u7528\u5728\u51fd\u5b50 something \u4e2d\uff0c\u53ea\u9700\u8981\u5c06 f \u63d0\u53d6\u51fa\u6765\u4f7f\u7528 fmap \u5e94\u7528\u5728\u51fd\u5b50 something \u4e2d\u5373\u53ef \u5b9e\u9645\u5e94\u7528\u7684\u4f8b\u5b50\uff1a ghci > Just ( + 3 ) <*> Just 9 Just 12 ghci > pure ( + 3 ) <*> Just 9 Just 12 ghci > ( + 3 ) <$> Just 9 Just 12 ghci > Nothing <*> Just 9 Nothing \u7b2c\u4e00\u4e2a\u4f8b\u5b50\uff0cJust (+3) \u662f\u4e00\u4e2a\u5305\u542b\u51fd\u6570 (+3) \u7684\u51fd\u5b50\uff0c\u5c06\u5176\u5e94\u7528\u5728\u51fd\u5b50 Just 9 \u4e2d\uff0c\u5c06 Just (+3) \u4e2d\u7684\u51fd\u6570 (+3) \u63d0\u53d6\u51fa\u6765\uff0c\u5e94\u7528\u5728 Just 9 \u4e2d\uff0c\u5f97\u5230\u4e86 Just 12 \u7b2c\u4e8c\u4e2a\u4f8b\u5b50\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728\u8fd9\u91cc pure (+3) \u548c Just (+3) \u7b49\u6548\uff0c\u56e0\u4e3a pure \u5c06\u51fd\u6570 (+3) \u653e\u5728\u9ed8\u8ba4\u4e0a\u4e0b\u6587\u4e2d\uff0c\u4e5f\u5c31\u662f Just \u4e2d\u4e86 \u800c <*> \u80fd\u505a\u7684\u4e0d\u6b62\u8fd9\u4e9b\uff0c\u4ed6\u53ef\u4ee5\u8fde\u7eed\u4f20\u5165\u66f4\u591a\u51fd\u5b50\u4f5c\u4e3a\u53c2\u6570\uff0c\u6bd4\u5982\uff1a ghci > pure ( + ) <*> Just 3 <*> Just 9 Just 12 ghci > pure ( \\ x y z -> x + y + z ) <*> Just 3 <*> Just 4 <*> Just 5 Just 12 <*> \u51fd\u6570\u4e00\u6837\u662f\u9ed8\u8ba4\u5de6\u7ed3\u5408\u7684\uff0cpure (+) < > Just 3 < > Just 9 \u76f8\u5f53\u4e8e (pure (+) < > Just 3) < > Just 9\uff0c\u800c pure (+) < > Just 3 \u5c06 (+) \u5e94\u7528\u5728Just 3 \u4e0a\uff0c\u5f97\u5230\u7684\u5c31\u662f Just (+3) \u4e00\u4e2a\u5305\u542b\u51fd\u6570\u7684\u51fd\u5b50\uff0c\u53c8\u5c06\u5176\u901a\u8fc7 < > \u5e94\u7528\u5728\u4e86 Just 9 \u4e0a\uff0c\u5f97\u5230\u4e86 Just 12: pure ( \\ x y z -> x + y + z ) <*> Just 3 <*> Just 4 <*> Just 5 = ( pure ( \\ x y z -> x + y + z ) <*> Just 3 ) <*> Just 4 <*> Just 5 = ( Just ( \\ y z -> 3 + y + z ) <*> Just 4 ) <*> Just 5 = Just ( \\ z -> 3 + 4 + z ) <*> Just 5 = Just ( + 7 ) <*> Just 5 = Just 12 \u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528\u7c7b\u4f3c pure f < > x < > y <*> ... \u6765\u5c06\u4e00\u4e2a\u666e\u901a\u591a\u5143\u51fd\u6570f\u5e94\u7528\u5728\u591a\u4e2a\u51fd\u5b50\u4e0a\u3002 \u800c\u4e14 pure f < > x \u5b9e\u9645\u4e0a\u5148\u5c06\u666e\u901a\u51fd\u6570f\u653e\u5728\u4e0a\u4e0b\u6587\u4e2d\uff0c\u7136\u540e\u6267\u884c < > \u65f6\u518d\u5c06\u5176\u63d0\u53d6\u51fa\u6765\u6267\u884c fmap\uff0c\u6240\u4ee5\u5b83\u5c31\u76f8\u5f53\u4e8e\u5c06\u666e\u901a\u51fd\u6570\u5e94\u7528\u5728\u51fd\u5b50 x \u4e0a\uff0c\u5373 fmap f x\uff0c\u4e5f\u53ef\u4ee5\u5199\u6210 f <$> x\u3002\u6240\u4ee5\u5e38\u7528\u7684\u5199\u6cd5\u5c31\u662f\uff1a f < $> x < *> y < *> ... [] \u00b6 \u5217\u8868\u4e5f\u662f\u4e00\u4e2a\u5e94\u7528\u51fd\u5b50\uff1a instance Applicative [] where pure x = [ x ] fs <*> xs = [ f x | f <- fs , x <- xs ] - pure \u51fd\u6570\uff1a\u5bf9\u4e8e\u5217\u8868\u800c\u8a00\uff0c\u4e00\u4e2a\u503c\u7684\u6700\u5c0f\u4e0a\u4e0b\u6587\u5c31\u662f\u53ea\u5305\u542b\u8fd9\u4e2a\u503c\u7684\u5217\u8868 [x] - <*> \u51fd\u6570\uff1a\u5217\u8868\u7684 <*> \u51fd\u6570\u662f\u901a\u8fc7\u5217\u8868\u63a8\u5bfc\u6765\u5b9e\u73b0\u7684\u3002\u56e0\u4e3a\u4e0d\u540c\u4e8e Maybe \u7684 Just \u53ea\u5305\u542b\u4e00\u4e2a\u503c\uff0c\u5217\u8868\u53ef\u4ee5\u5305\u542b\u5f88\u591a\u503c\uff0c\u7b2c\u4e00\u4e2a\u4f20\u5165\u7684\u5217\u8868\u4e2d\u53ef\u80fd\u4f1a\u5305\u542b\u5f88\u591a\u51fd\u6570\uff0c\u7b2c\u4e8c\u4e2a\u4f20\u5165\u7684\u5217\u8868\u4e5f\u4f1a\u5305\u542b\u5f88\u591a\u503c\uff0c\u6240\u4ee5\u5c31\u9700\u8981\u5148\u4ece\u7b2c\u4e00\u4e2a\u5217\u8868\u4e2d\u53d6\u51fa\u4e00\u4e2a\u51fd\u6570\u7136\u540e\u4f9d\u6b21\u5e94\u7528\u5728\u7b2c\u4e8c\u4e2a\u5217\u8868\u7684\u6bcf\u4e2a\u503c\u4e2d\uff0c\u518d\u53d6\u51fa\u7b2c\u4e00\u4e2a\u5217\u8868\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u51fd\u6570\u5e94\u7528\u5728\u7b2c\u4e8c\u4e2a\u5217\u8868\u7684\u6bcf\u4e2a\u503c\u4e2d\u2026\u2026\u6700\u7ec8\u8fd4\u56de\u5f97\u5230\u7684\u6240\u6709\u7ed3\u679c\u7684\u5217\u8868 \u4f7f\u7528\u4f8b\u5b50\uff1a ghci > [( + 3 ), ( * 2 )] <*> [ 1 , 2 ] [ 4 , 5 , 2 , 4 ] ghci > [( + ), ( * )] <*> [ 1 , 2 ] <*> [ 3 , 4 ] [ 4 , 5 , 5 , 6 , 3 , 4 , 6 , 8 ] IO \u00b6 instance Applicative IO where pure = return a <*> b = do f <- a x <- b return ( f x ) \u4e5f\u4e0d\u96be\u7406\u89e3\uff0cpure \u51fd\u6570\u76f4\u63a5\u5c06\u4f20\u5165\u7684\u503c return\uff0c\u76f8\u5f53\u4e8e\u653e\u5728\u4e86 IO \u7684\u4e0a\u4e0b\u6587\u4e2d\u3002\u800c <*> \u51fd\u6570\u5148\u5c06\u4e24\u4e2a IO \u4e2d\u5185\u5bb9\u63d0\u53d6\u51fa\u6765\uff0c\u7136\u540e\u5e94\u7528\u51fd\u6570\u540e return\uff0c\u5f62\u6210\u65b0\u7684 IO \u51fd\u5b50 ghci > ( ++ ) <$> getLine <*> getLine Line1 Line2 \"Line1Line2\" (->) r \u00b6 (->) r \u540c\u6837\u4e5f\u662f\u4e00\u4e2a\u5e94\u7528\u51fd\u5b50\uff0c\u548c\u51fd\u5b50\u7684\u5206\u6790\u4e00\u6837\uff0c\u5148\u6765\u5206\u6790\u5b83\u7684 <*> \u51fd\u6570\u7684\u7c7b\u578b\u7b7e\u540d\uff1a < *> :: f (a -> b) -> f a -> f b \u5176\u4e2d f \u4e3a (->) r\uff0c\u5c06\u5176\u4ee3\u5165\u5e76\u66ff\u6362\u4e3a\u4e2d\u7f00\uff1a < *> :: (r -> a -> b) -> (r -> a) -> (r -> b) \u53ef\u4ee5\u770b\u51fa\u5b83\u63a5\u6536\u4e24\u4e2a\u51fd\u6570 f :: r -> a -> b\u3001g :: r -> a\uff0c\u8fd4\u56de\u53e6\u4e00\u4e2a\u51fd\u6570 h :: (r -> b) \u90a3\u4e48\u8fd4\u56de\u7684\u51fd\u6570\u7684\u8f93\u5165\u4e3a r\uff0c\u8f93\u51fa\u4e3a b\uff0c\u6240\u4ee5\u5148\u5bf9\u8f93\u5165\u5e94\u7528\u51fd\u6570 g \u5f97\u5230 a\uff0c\u7136\u540e\u5728\u5bf9 r \u548c a \u5e94\u7528 f \u5f97\u5230 b\uff0c\u6240\u4ee5\u63a8\u6d4b <*> \u51fd\u6570\u7684\u64cd\u4f5c\u5c31\u662f\uff1a \\x -> f x (g x) \u4e8e\u662f\uff1a instance Applicative (( -> ) r ) where pure x = ( \\ _ -> x ) f <*> g = \\ x -> f x ( g x ) \u5c06\u4e00\u4e2a\u503c\u653e\u5728\u51fd\u6570\u7684\u4e0a\u4e0b\u6587\u4e2d\uff0c\u6700\u5c0f\u4e0a\u4e0b\u6587\u5c31\u5e94\u8be5\u8fd4\u56de\u8fd9\u4e2a\u503c\u672c\u8eab\uff0c\u6240\u4ee5 pure \u51fd\u6570\u5b9a\u4e49\u4e3a (_ -> x)\uff0c\u5373\u65e0\u8bba\u8f93\u5165\u4ec0\u4e48\uff0c\u90fd\u8fd4\u56de x \u5e94\u7528\u51fd\u5b50\u7684 <*> \u51fd\u6570\u63a5\u6536\u4e24\u4e2a\u51fd\u5b50\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u51fd\u5b50\u3002\u5bf9\u4e8e (->) r\uff0c\u5b83\u63a5\u6536\u4e24\u4e2a\u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\u3002\u5177\u4f53\u4f8b\u5b50\uff1a ghci > ( + ) <$> ( + 3 ) <*> ( * 100 ) $ 5 508 \u6267\u884c\u8fd9\u53e5\u65f6\u53d1\u751f\u4e86\u4ec0\u4e48\uff1f\uff1a ( + ) <$> ( + 3 ) <*> ( * 100 ) $ 5 = (( + ) <$> ( + 3 )) <*> ( * 100 ) $ 5 = (( + ) . ( + 3 )) <*> ( * 100 ) $ 5 = ( \\ a -> ( + ) (( + 3 ) a )) <*> ( * 100 ) $ 5 = ( \\ a b -> ( a + 3 + b )) <*> ( * 100 ) $ 5 = ( \\ x -> x + 3 + (( * 100 ) x )) $ 5 = ( \\ x -> x + 3 + x * 100 ) $ 5 = 5 + 3 + 5 * 100 = 508 = ( 5 + 3 ) + ( 5 * 100 ) \u6240\u4ee5\u5c31\u76f8\u5f53\u4e8e\u5148\u5bf9\u8f93\u5165\u5206\u522b\u6267\u884c (+3) \u548c (*100)\uff0c\u7136\u540e\u5c06\u4e24\u4e2a\u7ed3\u679c\u6267\u884c\u4e86 (+) \u540c\u6837\uff1a ghci > ( \\ x y z -> [ x , y , z ]) <$> ( + 3 ) <*> ( * 2 ) <*> ( / 2 ) $ 5 [ 8.0 , 10.0 , 2.5 ] \u5148\u5bf9 5 \u5206\u522b\u6267\u884c (+3)\u3001(*2)\u3001(/2)\uff0c\u7136\u540e\u5c06\u5f97\u5230\u7684\u4e09\u4e2a\u7ed3\u679c\u4f20\u5165 (\\x y z -> [x,y,z]) \u5f97\u5230\u4e86\u6700\u7ec8\u7684\u7ed3\u679c f <$> g <*> h <*> i = ( \\ x -> f ( g x ) ( h x ) ( i x )) ZipList \u00b6 \u666e\u901a\u5217\u8868\u5b9e\u73b0\u7684 <*> \u51fd\u6570\u662f\u5c06\u6bcf\u4e2a\u51fd\u6570\u5e94\u7528\u5728\u6240\u6709\u503c\u4e0a\uff0c\u4f46\u8fd8\u6709\u4e00\u79cd\u5b9e\u73b0\u65b9\u6cd5\u662f\u5c06\u6bcf\u4e2a\u51fd\u6570\u5e94\u7528\u5728\u5bf9\u5e94\u503c\u4e0a\uff0c\u56e0\u4e3a\u540c\u4e00\u4e2a\u7c7b\u578b\u4e0d\u80fd\u5b58\u5728\u540c\u4e00\u51fd\u6570\u7684\u4e24\u79cd\u5b9e\u73b0\u5f62\u5f0f\uff0c\u6240\u4ee5\u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u7684\u5217\u8868 ZipList\uff0c\u5305\u542b\u5728 Control.Applicative \u6a21\u5757\u4e2d instance Applicative ZipList where pure x = ZipList ( repeat x ) ZipList fs <*> ZipList xs = ZipList ( zipWith ( $ ) fs xs ) \u4f46\u662f ZipList \u5e76\u4e0d\u662f Show \u7684\u5b9e\u4f8b\uff0c\u6240\u4ee5\u4e0d\u80fd\u76f4\u63a5\u663e\u793a\u51fa\u6765\uff0c\u8981\u4f7f\u7528 getZipList \u6765\u83b7\u53d6\u5b83\u5185\u90e8\u7684\u5217\u8868\uff1a ghci > getZipList $ ( + ) <$> ZipList [ 1 , 2 , 3 ] <*> ZipList [ 100 , 100 .. ] [ 101 , 102 , 103 ] ghci > getZipList $ (,,) <$> ZipList \"dog\" <*> ZipList \"cat\" <*> ZipList \"rat\" [( 'd' , 'c' , 'r' ),( 'o' , 'a' , 'a' ),( 'g' , 't' , 't' )] Applicative Functor Laws \u00b6 \u5e94\u7528\u51fd\u5b50\u4e00\u822c\u6709\u56db\u4e2a\u5b9a\u5f8b\uff0c\u90fd\u662f\u4fdd\u8bc1 pure \u7684\u6b63\u786e\u6027\u7684\uff1a Identity law \uff1apure id <*> v = v Homomorphism \uff1apure f <*> pure x = pure (f x) Interchange \uff1au < > pure v = pure ($ v) < > u Composition \uff1au < > (v < > w) = pure (.) < > u < > v <*> w Intuition \u00b6 \u7406\u89e3\u5e94\u7528\u51fd\u5b50\u7684\u65b9\u5f0f\u4e5f\u662f\u5c06\u5176\u770b\u4f5c\u662f\u8ba1\u7b97\u4e0a\u4e0b\u6587\uff08context\uff09\uff0c\u6bd4\u5982\u8981\u8ba1\u7b97\uff1a \\[ [[\\ \\ g\\ x_1\\ x_2\\ \\cdots\\ x_n\\ \\ ]] \\] \u5176\u4e2d \\(x_i\\) \u7684\u7c7b\u578b\u662f \\(f\\ t_i\\) \uff0c \\(f\\) \u662f\u5e94\u7528\u51fd\u5b50\uff08\u770b\u4f5c\u4e0a\u4e0b\u6587\uff09\u3002\u800c\u51fd\u6570 \\(g\\) \u7684\u7c7b\u578b\u662f\uff1a \\[ t_1\\to t_2\\to\\cdots\\to t_n\\to t \\] \u6240\u4ee5\u53cc\u62ec\u53f7\uff08idiom brackets\uff09\u7684\u4f5c\u7528\u662f\u5c06\u4e00\u4e2a\u666e\u901a\u51fd\u6570\u5e94\u7528\u5728\u5305\u542b\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u53c2\u6570\u4e0a\u3002 \\(g\\ x_1\\) \u53ef\u4ee5\u901a\u8fc7 fmap \u6765\u6267\u884c\uff0c\u5c06 \\(g\\) \u63d0\u5347\uff08lift\uff09\u5230 \\(x_1\\) \u7684\u4e0a\u4e0b\u6587\u4e2d\uff0c\u7136\u540e\u5e94\u7528\u5728 \\(x_1\\) \u4e0a\u3002\u4f46\u662f fmap \u8fd4\u56de\u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u51fd\u5b50\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c \\(g\\ x_1\\) \u7ed3\u679c\u7684\u7c7b\u578b\u662f\uff1a \\[ f\\ \\ (t_2\\to t_3\\to\\cdots\\to t_n\\to t) \\] \u4f46\u662f fmap \u5e76\u4e0d\u80fd\u5c06\u4e0a\u4e0b\u6587\u4e2d\u7684\u51fd\u6570\u5e94\u7528\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u53c2\u6570\u4e0a\uff0c\u4e8e\u662f\u5e94\u7528\u51fd\u5b50\u7684 <*> \u51fd\u6570\u63d0\u4f9b\u4e86\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u6240\u4ee5\u8ba1\u7b97 \\([[\\ g\\ x_1\\ x_2\\ \\cdots\\ x_n\\ ]]\\) \uff0c\u53ea\u9700\u8981\uff1a g < $> x1 < *> x2 < *> ... < *> xn \u800c pure \u51fd\u6570\u7684\u4f5c\u7528\u5c31\u662f\u5c06\u4e00\u4e2a\u4e0d\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u503c\uff08\u51fd\u6570\u6216\u53c2\u6570\uff09\u63d0\u5347\u5230\u4e0a\u4e0b\u6587\u4e2d\uff0c\u4f46\u4e0d\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c\u3002\u6bd4\u5982\u53c2\u6570 \\(x_2\\) \u5982\u679c\u4e0d\u5728\u4e0a\u4e0b\u6587\u4e2d\uff0c\u9700\u8981\u7528 pure \u63d0\u5347\u5230\u4e0a\u4e0b\u6587\u4e2d\u624d\u80fd\u6309\u4e0a\u9762\u8ba1\u7b97\uff1a g < $> x1 < *> pure x2 < *> ... < *> xn \u5e38\u7528\u51fd\u6570 \u00b6 liftA & liftA2 & liftA3 \u00b6 liftA :: Applicative f => (a -> b) -> f a -> f b liftA2 :: Applicative f => (a -> b -> c) -> f a -> f b -> f c liftA3 :: Applicative f => (a -> b -> c -> d) -> f a -> f b -> f c -> f d \u4e0d\u96be\u63a8\u6d4b liftA \u5c31\u662f fmap\uff0c liftA2 f x1 x2 \u76f8\u5f53\u4e8e f <$> x1 <*> x2 \uff0c liftA3 f x1 x2 x3 \u76f8\u5f53\u4e8e f <$> x1 <*> x2 <*> x3 <* & *> \u00b6 \u7c7b\u578b\u7c7b\u4f3c\u51fd\u5b50\u7684 <$ \u548c $> \uff1a (<*) :: Applicative f => f a -> f b -> f a (*>) :: Applicative f => f a -> f b -> f b <* \u63a5\u6536\u4e24\u4e2a\u51fd\u5b50\uff0c\u5982\u679c\u4e24\u4e2a\u51fd\u5b50\u4e2d\u53c8\u4e00\u4e2a\u4e3a\u7a7a\uff0c\u5c31\u8fd4\u56de\u7a7a\uff0c\u5426\u5219\u8fd4\u56de\u7684\u7c7b\u578b\u4e0e\u7b2c\u4e00\u4e2a\u51fd\u5b50\u76f8\u540c\u3002*> \u53cd\u8fc7\u6765 ghci > Just 3 <* Just 4 Just 3 ghci > Just 3 *> Just 4 Just 4 ghci > Nothing <* Just 3 Nothing ghci > Nothing *> Just 3 Nothing ghci > [ 1 , 2 , 3 ] <* [ 3 , 4 ] [ 1 , 1 , 2 , 2 , 3 , 3 ] ghci > [ 1 , 2 , 3 ] *> [ 3 , 4 ] [ 3 , 4 , 3 , 4 , 3 , 4 ] ghci > [] <* [ 1 , 2 , 3 ] [] ghci > [] *> [ 1 , 2 , 3 ] [] <**> \u00b6 ( < **>) :: Applicative f => f a -> f (a -> b) -> f b \u63a5\u6536\u7684\u53c2\u6570\u662f <*> \u53cd\u8f6c\u8fc7\u6765\u7684\uff0c\u5373\u5148\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\u51fd\u5b50\uff0c\u7136\u540e\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u51fd\u5b50\uff0c\u5728\u5c06\u5176\u5e94\u7528\u8fd4\u56de\u3002\u4f46\u662f\u548c flip(<*>) \u4e0d\u540c\uff0c\u5b83\u5148\u53d6\u53c2\u6570\u51fd\u5b50\u7684\u6bcf\u4e2a\u53c2\u6570\uff0c\u7136\u540e\u518d\u53d6\u51fd\u6570\u51fd\u5b50\u4e2d\u7684\u51fd\u6570\u9010\u4e2a\u5e94\u7528\uff1a ghci > [( + 1 ), ( + 2 ), ( + 3 )] <*> [ 1 , 2 ] [ 2 , 3 , 3 , 4 , 4 , 5 ] ghci > [ 1 , 2 ] <**> [( + 1 ), ( + 2 ), ( + 3 )] [ 2 , 3 , 4 , 3 , 4 , 5 ] ghci > flip ( <*> ) [ 1 , 2 ] [( + 1 ), ( + 2 ), ( + 3 )] [ 2 , 3 , 3 , 4 , 4 , 5 ] when & unless \u00b6 when :: Applicative f => Bool -> f () -> f () \u4f20\u5165\u7684\u7b2c\u4e00\u4e2a\u662f\u4e00\u4e2a\u7ed3\u679c\u4e3a Bool \u7c7b\u578b\u7684\u6d4b\u8bd5\uff0c\u5982\u679c\u6d4b\u8bd5\u4e3a True\uff0c\u5219\u8c03\u7528\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u5426\u5219\u8fd4\u56de pure ()\u3002\uff08when \u51fd\u6570\u5728\u4e0a\u6587 IO \u64cd\u4f5c\u4e2d\u4f7f\u7528\u8fc7\uff09 unless \u5219\u4e0e when \u76f8\u53cd\uff0c\u6d4b\u8bd5\u4e3a True \u8fd4\u56de pure () sequenceA \u00b6 sequenceA :: (Traversable t, Applicative f) => t (f a) -> f (t a) \u5e94\u7528\u5728\u5217\u8868\u4e0a\u65f6\uff0c\u5b83\u7684\u7c7b\u578b\u76f8\u5f53\u4e8e\uff1a [f a] -> f [a] \u6240\u4ee5\u5728\u5217\u8868\u4e0a\u5b83\u7684\u4f7f\u7528\u65b9\u6cd5\uff1a ghci > sequenceA [ Just 3 , Just 2 , Just 1 ] Just [ 3 , 2 , 1 ] ghci > sequenceA [ Just 3 , Nothing , Just 1 ] Nothing ghci > sequenceA [( + 3 ),( + 2 ),( + 1 )] 3 [ 6 , 5 , 4 ] ghci > sequenceA [[ 1 , 2 , 3 ],[ 4 , 5 , 6 ]] [[ 1 , 4 ],[ 1 , 5 ],[ 1 , 6 ],[ 2 , 4 ],[ 2 , 5 ],[ 2 , 6 ],[ 3 , 4 ],[ 3 , 5 ],[ 3 , 6 ]] ghci > sequenceA [[ 1 , 2 , 3 ],[ 4 , 5 , 6 ],[ 3 , 4 , 4 ], [] ] [] \u5b83\u5728\u5bf9\u540c\u4e00\u4e2a\u53c2\u6570\u5e94\u7528\u4e0d\u540c\u51fd\u6570\u65f6\u5f88\u6709\u7528\uff1a ghci > map ( \\ f -> f 7 ) [( > 4 ), ( < 10 ), odd ] [ True , True , True ] ghci > sequenceA [( > 4 ), ( < 10 ), odd ] 7 [ True , True , True ] Monad \u00b6 \u5355\u5b50\uff08Monad\uff09\u662f\u5bf9 Applicative Functor \u7684\u6269\u5c55\uff08\u4f46\u662f\u8bde\u751f\u6bd4 Applicative \u65e9\uff09\uff0cFunctor \u7684 <$> \u51fd\u6570\u5b9e\u73b0\u4e86\u5c06\u666e\u901a\u51fd\u6570\u5e94\u7528\u5728\u4e0a\u4e0b\u6587\u503c\u4e0a\uff0cApplicative \u7684 <*> \u51fd\u6570\u5c06\u4e0a\u4e0b\u6587\u4e2d\u51fd\u6570\u5e94\u7528\u5728\u4e0a\u4e0b\u6587\u503c\u4e0a\u3002\u800c Monad \u63d0\u4f9b\u4e86\u4e00\u4e2a\u51fd\u6570 >>= \uff08bind\uff09\uff0c\u5c06\u4e00\u4e2a\u63a5\u6536\u666e\u901a\u503c\u8fd4\u56de\u4e0a\u4e0b\u6587\u503c\u7684\u51fd\u6570\u5e94\u7528\u5728\u4e0a\u4e0b\u6587\u503c\u4e0a\uff1a class Applicative m => Monad m where ( >>= ) :: m a -> ( a -> m b ) -> m b ( >> ) :: m a -> m b -> m b return :: a -> m a m >> n = m >>= \\ _ -> n return = pure return \u51fd\u6570\uff1a\u548c pure \u4e00\u6837\uff0c\u53ea\u662f\u6709\u53e6\u4e00\u4e2a\u540d\u5b57 >> \u51fd\u6570\uff1a\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u7684\u5b9e\u73b0\u65b9\u6cd5\uff0c\u5b83\u7684\u4f5c\u7528\u548c Applicative \u7684 *> \u51fd\u6570\u4e00\u6837 >>= \u51fd\u6570\uff08bind\uff09\uff1a\u6bd4 Applicative \u5347\u7ea7\u7684\u51fd\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u5355\u5b50\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u63a5\u6536\u503c\u8fd4\u56de\u5355\u5b50\u7684\u51fd\u6570\uff0c\u5c06\u8fd9\u4e2a\u51fd\u6570\u5e94\u7528\u5728\u7b2c\u4e00\u4e2a\u53c2\u6570\u5355\u5b50\u4e2d\u7684\u503c\u4e0a\uff0c\u5e76\u8fd4\u56de\u5f97\u5230\u7684\u65b0\u5355\u5b50 Monad \u5b9e\u4f8b \u00b6 Maybe \u00b6 Maybe \u662f\u4e00\u4e2a\u5355\u5b50\u5b9e\u4f8b\uff0cApplicative \u5df2\u7ecf\u4e3a\u5b83\u5b9e\u73b0\u4e86 return\uff0c\u56e0\u6b64\u53ea\u9700\u8981 >>= \u51fd\u6570\uff1a instance Monad Maybe where ( Just x ) >>= f = f x Nothing >>= _ = Nothing \u6839\u636e\u5b9a\u4e49\u5c31\u5f88\u5bb9\u6613\u5b9e\u73b0 Maybe \u7684 >>= \u51fd\u6570\u4e86\uff0c\u800c\u4e14\u4e5f\u5f88\u597d\u7406\u89e3 ghci > Just 1 >>= \\ x -> Just ( x + 1 ) Just 2 ghci > Just 1 >>= \\ x -> return ( x + 1 ) Just 2 ghci > Nothing >>= \\ x -> Just ( x + 1 ) Nothing ghci > Just 1 >>= \\ x -> Just ( x + 1 ) >> Nothing >>= \\ y -> Just ( y + 1 ) Nothing \u6700\u540e\u4e00\u4e2a\u4f8b\u5b50\u4e2d\u51fa\u73b0\u4e86 >> Nothing\uff0c\u8fd9\u65f6 Nothing \u524d\u7684\u90e8\u5206\u5168\u90fd\u76f8\u5f53\u4e8e\u6ca1\u7528\uff0c\u56e0\u4e3a >> \u64cd\u4f5c\u7b26\u7684\u5de6\u53f3\u4e24\u8fb9\u53ea\u8981\u6709\u4e00\u4e2a\u51fa\u73b0 Nothing\uff0c\u90a3\u6574\u4f53\u5c31\u4f1a\u662f Nothing\u3002\u8fd9\u4e2a\u7279\u6027\u53ef\u4ee5\u7528\u4e8e\u5728\u4e2d\u9014\u968f\u65f6\u5224\u65ad\u5931\u8bef\uff0c\u53ea\u8981\u6709\u4e00\u5904\u5931\u8bef\uff0c\u7ed3\u679c\u5c31\u4f1a\u662f Nothing [] \u00b6 \u5217\u8868\u4e5f\u662f\u4e00\u4e2a\u5355\u5b50\uff1a instance Monad [] where xs >>= f = concat ( map f xs ) \u5c06\u8fd9\u4e2a\u51fd\u6570\u5e94\u7528\u5728 xs \u7684\u6bcf\u4e2a\u503c\u4e0a\uff0c\u5c06\u8fd4\u56de\u7684\u6240\u6709\u5217\u8868\u5e73\u94fa\u6210\u4e00\u4e2a\u5217\u8868\uff1a ghci > [ 3 , 4 , 5 ] >>= \\ x -> [ x , - x ] [ 3 , - 3 , 4 , - 4 , 5 , - 5 ] ghci > [ 1 , 2 ] >>= \\ n -> [ 'a' , 'b' ] >>= \\ ch -> return ( n , ch ) [( 1 , 'a' ),( 1 , 'b' ),( 2 , 'a' ),( 2 , 'b' )] IO \u00b6 IO \u4e5f\u662f\u4e00\u4e2a\u5355\u5b50\uff0c\u4f46\u662f\u5b9e\u73b0\u65b9\u6cd5\u6bd4\u8f83\u6df1\u5965\uff08\u9003 (->) r \u00b6 (->) r \u4e5f\u662f\u4e00\u4e2a\u5355\u5b50\uff0c\u548c Functor\u3001Applicative \u4e00\u6837\uff0c\u5148\u5206\u6790\u5b83\u7684 >>= \u7c7b\u578b\u7b7e\u540d\uff1a (>>=) :: (-> r) a -> (a -> (-> r) b) -> (-> r) b (>>=) :: (r -> a) -> (a -> r -> b) -> (r -> b) \u4e5f\u53ef\u4ee5\u770b\u51fa\u6765\uff0c\u5b83\u63a5\u6536\u4e24\u4e2a\u51fd\u6570 f :: r -> a\u3001g :: a -> r -> b\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u51fd\u6570 h :: r -> b \u90a3\u4e48\u51fd\u6570 h \u63a5\u6536\u4e00\u4e2a\u7c7b\u578b\u4e3a r \u7684\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u7c7b\u578b\u4e3a b \u7684\u503c\u3002\u6240\u4ee5\u5148\u5bf9\u8f93\u5165\u5e94\u7528 f \u5f97\u5230\u7c7b\u578b\u4e3a a \u7684\u4e2d\u95f4\u503c\uff0c\u7136\u540e\u518d\u5c06\u8fd9\u4e2a\u503c\u548c\u8f93\u5165\u53c2\u6570\u4e00\u8d77\u4f20\u5165\u51fd\u6570 g \u5f97\u5230\u7ed3\u679c\u3002\u6240\u4ee5\u51fd\u6570 h \u7684\u5b9a\u4e49\u5e94\u8be5\u662f\uff1a \\x -> g (f x) x instance Monad (( -> ) r ) where f >>= g = \\ x -> g ( f x ) x ghci > ( + 3 ) >>= ( + ) $ 1 5 ghci > ( + ) <$> ( + 3 ) <*> id $ 1 5 do-notation \u00b6 Haskell \u7684 do \u8bed\u53e5\u4e3a\u94fe\u5f0f\u7684 >>= \u5e94\u7528\u63d0\u4f9b\u4e86\u7c7b\u4f3c\u547d\u4ee4\u5f0f\uff08imperative style\uff09\u7684\u8bed\u6cd5\u7cd6\u3002\u6bd4\u5982 a >>= \\x -> b >> c >>= \\y -> d \uff1a a >>= \\ x -> b >> c >>= \\ y -> d \u5176\u4e2d\u6709 abcd \u56db\u4e2a\u503c\uff0c\u53ef\u4ee5\u770b\u51fa a \u4e2d\u5185\u5bb9\u7ed1\u5b9a\u5230\u4e86 x \u4e0a\uff0cc \u4e2d\u5185\u5bb9\u7ed1\u5b9a\u5230\u4e86 y \u4e0a\u3002\u4f7f\u7528 do \u8bed\u53e5\u6765\u8868\u793a\u8fd9\u4e2a\u64cd\u4f5c\u53ef\u4ee5\u5199\u6210\uff1a do { x <- a ; b ; y <- c ; d } \u5176\u4e2d\u7684\u5927\u62ec\u53f7\u548c\u5206\u53f7\u53ef\u4ee5\u7701\u7565\u4e0d\u5199\uff08\u6324\u5728\u4e00\u884c\u65f6\u4e0d\u80fd\u7701\u7565\uff09\u3002do \u8bed\u53e5\u4e5f\u53ea\u662f\u4e00\u4e2a\u8bed\u6cd5\u7cd6\uff0c\u5b83\u53ef\u4ee5\u9012\u5f52\u5730\u8f6c\u6362\u6210\u666e\u901a\u7684 Monad \u64cd\u4f5c\u8bed\u53e5\uff1a do e \uff1ae do { e; ... } \uff1ae >> do { ... } do { v <- e; ... } \uff1ae >>= \\v -> do { ... } do { let ...; ... } \uff1alet ... in do { ... } ApplicativeDo \u00b6 \u6bd4\u5982\u5982\u4e0b\u4e00\u4e2a do \u8bed\u53e5\uff1a do x <- a y <- b z <- c return ( f x y z ) \u5b83\u53ef\u4ee5\u8f6c\u5316\u6210\uff1a a >>= \\x -> b >>= \\y -> c >>= \\z -> return (f x y z) \u4f46\u662f\u7ecf\u8fc7\u89c2\u5bdf\u53ef\u4ee5\u53d1\u73b0\uff0c\u6574\u4e2a\u8bed\u53e5\u5b9e\u9645\u4e0a\u5c06\u51fd\u6570 f \u5e94\u7528\u5728\u4e86\u4e09\u4e2a\u4e0a\u4e0b\u6587\u4e2d\u7684\u503c\u4e0a\uff0c\u6240\u4ee5\u4ec5\u7528 Applicative \u7684 <$> \u548c <*> \u5b8c\u5168\u53ef\u4ee5\u5b9e\u73b0\uff1a f < $> a < *> b < *> c \u800c\u4e14\u5728\u8fd0\u884c\u7684\u65f6\u5019 Applicative \u7684\u6548\u7387\u4f1a\u6bd4 Monad \u9ad8\uff0c\u6240\u4ee5 Haskell \u4f1a\u5c06 do \u8bed\u53e5\u5c3d\u53ef\u80fd\u4f18\u5148\u8f6c\u6362\u4e3a Applicative \u7684\u8868\u793a\u65b9\u6cd5\u7136\u540e\u518d\u8ba1\u7b97 Monad Laws \u00b6 Left identity \uff1areturn a >>= k = k a Right identity \uff1am >>= return = m Associativity \uff1a(m >>= g) >>= h = m >>= (\\x -> g x >>= h) \u524d\u4e24\u4e2a\u5b9a\u5f8b\u5f88\u597d\u7406\u89e3\uff1a \u5c06 a \u6ce8\u5165\u4e0a\u4e0b\u6587\u4e4b\u540e\u7ed1\u5b9a\uff08bind\uff09\u7ed9\u51fd\u6570 k(:: a -> m a)\uff0c\u76f8\u5f53\u4e8e\u76f4\u63a5\u5c06 a \u76f4\u63a5\u4f20\u5165\u51fd\u6570 k \u5c06\u5df2\u7ecf\u5305\u542b\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u503c\u7ed1\u5b9a\u7ed9 return \u51fd\u6570\uff0c\u76f8\u5f53\u4e8e\u4fdd\u6301\u4e0d\u53d8 \u7b2c\u4e09\u4e2a\u5b9a\u5f8b\u662f\u7ed3\u5408\u5f8b\uff0c\u628a\u5b83\u5199\u6210\u66f4\u50cf\u7ed3\u5408\u5f8b\u7684\u8868\u793a\u65b9\u6cd5\u662f\uff1a (m >>= (\\x -> g x)) >>= h = m >>= (\\x -> g x >>= h) \u7ec4\u5408\u8fd0\u7b97\u7b26\uff08>=>\uff09\u5f62\u5f0f \u00b6 Control.Monad \u6a21\u5757\u4e2d\u8fd8\u5b9a\u4e49\u4e86\u51fd\u6570 >=> \uff08Kleisli-composition operator\uff09\uff1a infixr 1 >=> ( >=> ) :: Monad m => ( a -> m b ) -> ( b -> m c ) -> ( a -> m c ) f >=> g = \\ x -> f x >>= g \u4f7f\u7528 >=> \u8fd0\u7b97\u7b26\u53ef\u4ee5\u5c06\u4e24\u4e2a\u7528\u4e8e\u7ed1\u5b9a\u7684\u51fd\u6570\u7ed3\u5408\u5728\u4e00\u8d77\u3002\u7528\u5b83\u8868\u793a\u7684 Monad \u5b9a\u5f8b\u66f4\u52a0\u6e05\u6670\u76f4\u89c2\uff1a Left identity \uff1areturn >=> f = f Right identity \uff1af >=> return = f Associativity \uff1a(f >=> g) >=> h = f >=> (g >=> h) do-notation \u5f62\u5f0f \u00b6 Monad \u7684\u8fd9\u4e09\u4e2a\u5b9a\u5f8b\u8fd8\u53ef\u4ee5\u4f7f\u7528 do \u8bed\u53e5\u6765\u63cf\u8ff0\uff1a Left identity \uff1a do { x' <- return x ; f x' = do { f x } } Right identity \uff1a do { x <- m ; return x = do { m } } Associativity \uff1a do { y <- do { x <- m ; do { x <- m ; do { x <- m ; f x do { y <- f x ; y <- f x ; } = g y = g y g y } } } } Intuition \u00b6 Monad \u4e5f\u53ef\u4ee5\u5f88\u81ea\u7136\u5730\u770b\u6210 Applicative \u7684\u5347\u7ea7\u7248\uff0c\u6bd4\u5982 Applicative \u7684\u64cd\u4f5c\u5168\u90e8\u662f\u56fa\u5b9a\u7684\uff0c\u800c Monad \u7684\u64cd\u4f5c\u53ef\u4ee5\u5728\u4e2d\u9014\u7a81\u7136\u6539\u53d8 \u540c\u65f6 Monad \u4e5f\u5b8c\u6210\u4e86 Functor \u548c Applicative \u65e0\u6cd5\u5b8c\u6210\u7684\u64cd\u4f5c\u3002\u6bd4\u5982\u8981\u7528 fmap \u548c\u5b9e\u73b0 >>= \u51fd\u6570\uff08\u5373\u8fbe\u6210\u64cd\u4f5c m a -> (a -> m b) -> m b\uff09\uff0c\u5148\u5047\u8bbe f :: a -> m b\uff0c\u90a3\u4e48 fmap f \u7684\u7c7b\u578b\u5c31\u4f1a\u662f m a -> m (m b)\uff0c\u5c06 m a \u5e94\u7528\u5728 fmap f \u4e0a\u4f1a\u5f97\u5230\u7ed3\u679c m (m b)\uff0c\u800c\u4e0d\u662f m b\u3002\u4f46\u662f\u76ee\u524d\u53ea\u53ef\u4ee5\u4f7f\u7528 pure \u5c06\u4e00\u4e2a\u503c\u88c5\u5165\u4e0a\u4e0b\u6587\u4e2d\uff08a -> m a\uff09\uff0c\u800c\u6ca1\u6709\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u4ece\u4e0a\u4e0b\u6587\u4e2d\u63d0\u53d6\u503c\uff08m a -> a\uff09\u3002\u90a3\u4e48\u5c31\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\u6765\u5b9e\u73b0\u8fd9\u4e2a\u64cd\u4f5c\u7684\u6548\u679c\uff08m (m b) -> m b\uff09\u3002\u56e0\u6b64 Monad \u7684\u53e6\u4e00\u4e2a\u7b49\u6548\u7684\u5b9a\u4e49\u65b9\u6cd5\u662f\uff1a class Applicative m => Monad' m where join :: m ( m a ) -> m a ( >>= ) :: m a -> ( a -> m b ) -> m b x >>= f = join $ fmap f x \u4f46\u662f\u5b9a\u4e49 >>= \u51fd\u6570\u4f1a\u66f4\u4e3a\u76f4\u89c2\u65b9\u4fbf\uff0c\u6240\u4ee5 Haskell \u91c7\u7528\u4e86\u7528 >>= \u51fd\u6570\u5b9a\u4e49 Monad \u7684\u65b9\u6cd5 \u540c\u65f6 Haskell \u8fd8\u63d0\u4f9b\u4e86 join \u51fd\u6570\u7684\u5b9a\u4e49\uff1a join :: Monad m => m ( m a ) -> m a join x = x >>= id \u5e38\u7528\u51fd\u6570 \u00b6 liftM & ap \u00b6 liftM :: Monad m => (a -> b) -> m a -> m b ap :: Monad m => m (a -> b) -> m a -> m b \u6240\u4ee5 liftM \u5176\u5b9e\u5c31\u662f fmap\u3001ap \u5c31\u662f <*>\uff0c\u4f46\u662f\u8001\u7248\u672c\u7684 GHC \u5b9a\u4e49 Monad \u5e76\u6ca1\u6709 Functor\u3001Applicative \u7684\u7ea6\u675f\uff0c\u6240\u4ee5\u5b9e\u73b0\u4e86 liftM\u3001ap\uff0c\u5e76\u4e14\u4fdd\u7559\u4e86\u8fd9\u4e2a\u540d\u5b57 \u56e0\u6b64\u4e00\u4e2a\u5355\u5b50\u4e5f\u53ef\u4ee5\u901a\u8fc7 pure = return \u3001 (<*>) = ap \u76f4\u63a5\u6210\u4e3a\u5e94\u7528\u51fd\u5b50\u7684\u5b9e\u4f8b sequence \u00b6 sequence :: Monad m => [m a] -> m [a] sequence \u7684\u4f5c\u7528\u663e\u800c\u6613\u89c1\uff0c\u800c\u4e14\u5728 IO \u90e8\u5206\u4e5f\u4f7f\u7528\u5230\u4e86\u3002\u4f46\u662f\u8fd9\u4e2a\u7248\u672c\u662f\u5728 GHC.Base \u6a21\u5757\u4e2d\u5b9a\u4e49\u7684\uff0c\u8fd8\u6709\u4e00\u4e2a\u66f4\u5e7f\u6cdb\u7684\u4f7f\u7528 Traversable \u7684\u5b9a\u4e49\u5728 Data.Traversable \u6a21\u5757\u4e2d replicateM \u00b6 replicateM :: Applicative m => Int -> m a -> m [a] mapM & forM \u00b6 mapM :: Monad m => (a -> m b) -> [a] -> m [b] forM :: Monad m => [a] -> (a -> m b) -> m [b] forM \u7684\u7528\u6cd5\u5728 IO \u90e8\u5206\u5df2\u7ecf\u8bf4\u8fc7\uff0cmapM \u548c forM \u90fd\u5728 Data.Traversable \u6a21\u5757\u4e2d\u6709\u5e7f\u6cdb\u7248\u672c \u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u51fd\u6570\uff1afilterM\u3001zipWithM\u3001foldM\u3001forever\uff0c\u901a\u8fc7\u540d\u5b57\u5c31\u53ef\u4ee5\u770b\u51fa\u7528\u6cd5\uff0c\u662f\u5c06\u539f\u6765\u4ec5\u4f7f\u7528\u4e0e\u5217\u8868\u7684\u51fd\u6570\u63d0\u5347\u81f3\u53ef\u4ee5\u9002\u7528\u4e8e\u6240\u6709\u5355\u5b50 \u5e76\u4e14\u5728\u51fd\u6570\u540d\u540e\u52a0\u4e0b\u5212\u7ebf\uff0c\u6bd4\u5982 sequence_\u3001mapM_\uff0c\u4f1a\u5ffd\u7565\u8fd4\u56de\u503c\uff08\u6700\u7ec8\u7ed3\u679c\u4e3a m () \uff09 =<< & >=> & <=< \u00b6 \uff08 >=> \u64cd\u4f5c\u7b26\u5728\u4e0a\u9762 Monad Laws \u90e8\u5206\u5df2\u7ecf\u7ed9\u51fa\u4e86\u5b9a\u4e49\uff09 - x >>= f = f =<< x - f >=> g = g <=< f MonadFail \u00b6 MonadFail \u5b9a\u4e49\u5728 Control.Monad.Fail \u6a21\u5757\u4e2d\uff1a class Monad m => MonadFail m where fail :: String -> m a \u5b83\u53ea\u8981\u6c42\u5728 Monad \u7684\u57fa\u7840\u4e0a\u5b9e\u73b0 fail \u51fd\u6570\uff0c\u63a5\u6536\u4e00\u4e2a\u5b57\u7b26\u4e32\u8fd4\u56de\u4e00\u4e2a\u5355\u5b50\u3002\u8fd9\u4f1a\u4f7f\u5728 do \u8bed\u53e5\u4e2d\u4ea7\u751f\u9519\u8bef\u65f6\u76f4\u63a5\u53d8\u4e3a\u9519\u8bef\u503c\uff08\u7a7a\u503c\uff09\u4f7f\u6700\u7ec8\u7684\u8fd4\u56de\u503c\u4e3a\u9519\u8bef\u503c MonadFail \u5b9e\u4f8b \u00b6 instance MonadFail Maybe where fail _ = Nothing instance MonadFail [] where fail _ = [] instance MonadFail IO where fail = failIO Maybe \u548c [] \u7684 fail \u51fd\u6570\u90fd\u4e0e\u7b2c\u4e00\u4e2a\u53c2\u6570\u65e0\u5173\uff0c\u76f4\u63a5\u8fd4\u56de\u7a7a\u503c\uff08Nothing\u3001[]\uff09\uff1b\u800c IO \u7684 fail \u51fd\u6570\u76f4\u63a5\u4f7f\u7528 failIO\uff0c\u5b9e\u73b0\u65b9\u6cd5\u4e5f\u662f\u6df1\u5965\uff08\u63a5\u7740\u9003 exampleFail :: Maybe Char exampleFail = do ( x : xs ) <- Just \"\" return x ghci > exampleFail Nothing \u5728\u8fd9\u4e2a\u4f8b\u5b50\u7684 do \u8bed\u53e5\u4e2d\uff0c\u5728\u63d0\u53d6 Just \"\" \u4e2d\u7684\u503c\u65f6\u7528\u4e86\u6a21\u5f0f\u5339\u914d\uff0c\u4f46\u662f\u56e0\u4e3a\u5176\u5185\u5bb9\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0cx:xs \u5339\u914d\u4f1a\u51fa\u73b0\u9519\u8bef\uff0c\u8fd9\u65f6\u5c31\u4f1a\u89e6\u53d1 fail \u51fd\u6570\u76f4\u63a5\u8fd4\u56de Nothing MonadFail Law \u00b6 fail s >>= m = fail s Semigroup \u00b6 \u534a\u7fa4\uff08semigroup\uff09\u662f\u4e00\u4e2a\u96c6\u5408 \\(S\\) \uff0c\u5b83\u9700\u8981\u6307\u5b9a\u4e00\u4e2a\u4e8c\u5143\u8fd0\u7b97\u7b26 \\(\\oplus\\) \uff0c\u5e76\u4e14\u6ee1\u8db3 \\[ a\\oplus b \\in S\\quad a, b\\in S \\] \u4ee5\u53ca\u7ed3\u5408\uff08associative\uff09\u5f8b\uff1a \\[ (a\\oplus b)\\oplus c = a\\oplus (b\\oplus c) \\] \u8fd9\u4e2a\u4e8c\u5143\u8fd0\u7b97\u7b26\u5728 Haskell \u7684 Semigroup \u4e2d\u88ab\u5b9a\u4e49\u4e3a <> \u51fd\u6570\uff1a class Semigroup a where ( <> ) :: a -> a -> a sconcat :: NonEmpty a -> a sconcat ( a :| as ) = go a as where go b ( c : cs ) = b <> go c cs go b [] = b stimes :: Integarl b => b -> a -> a stimes = ... \u9664\u6b64\u4e4b\u5916\u8fd8\u6709 sconcat \u548c stimes \u51fd\u6570\uff0c\u90fd\u7ed9\u51fa\u4e86\u9ed8\u8ba4\u5b9e\u73b0\u3002\u5bf9\u4e8e\u5217\u8868\uff0c<> \u76f8\u5f53\u4e8e (++)\uff0cstimes \u76f8\u5f53\u4e8e concat . replicate\uff1a ghci > [ 1 , 2 ] <> [ 3 , 4 ] [ 1 , 2 , 3 , 4 ] ghci > sconcat $ fromList [[ 1 , 2 ], [ 3 , 4 ]] [ 1 , 2 , 3 , 4 ] ghci > stimes 3 [ 1 , 2 ] [ 1 , 2 , 1 , 2 , 1 , 2 ] Semigroup Law \u00b6 (x <> y) <> z = x <> (y <> z) \u8865\uff1aNonEmpty \u00b6 NonEmpty \u8868\u793a\u975e\u7a7a\u5217\u8868\uff0c\u5b9a\u4e49\u662f\uff1a data NonEmpty a = a :| [ a ] deriving ( Eq , Ord ) \u4f7f\u7528\u4e00\u4e2a\u5143\u7d20\u548c\u4e00\u4e2a\u5217\u8868\u7528 :| \u8fde\u63a5\u5c31\u53ef\u4ee5\u751f\u6210\u4e00\u4e2a NonEmpty \u7c7b\u578b\u7684\u5217\u8868 Data.List.NonEmpty \u6a21\u5757\u4e2d\u5b9e\u73b0\u4e86\u5f88\u591a\u666e\u901a\u5217\u8868\u6709\u7684\u51fd\u6570\uff0c\u9700\u8981 qualified import \u540e\u8c03\u7528\uff0c\u4f7f\u7528 fromList\u3001toList \u51fd\u6570\u53ef\u4ee5\u5728\u666e\u901a\u5217\u8868\u548c\u975e\u7a7a\u5217\u8868\u4e4b\u95f4\u8f6c\u6362 ghci > import qualified Data.List.NonEmpty as NE ghci > arr = NE . fromList [ 1 , 2 , 3 ] ghci > arr 1 :| [ 2 , 3 ] ghci > NE . head arr 1 ghci > NE . tail arr [ 2 , 3 ] Monoid \u00b6 \u5e7a\u534a\u7fa4\uff08Monoid\uff09\u662f\u4e00\u4e2a\u6709\u5355\u4f4d\u5143\u7d20 \\(e\\) \u7684\u534a\u7fa4\uff0c\u5373 \\(e\\) \u6ee1\u8db3\uff1a \\[ e\\oplus x = x\\oplus e = x \\] class Semigroup a => Monoid a where mempty :: a mappend :: a -> a -> a mappend = ( <> ) mconcat :: [ a ] -> a mconcat = foldr mappend mempty \u53ef\u4ee5\u770b\u51fa Monoid \u8981\u6c42\u4e86\u4e09\u4e2a\u51fd\u6570\uff0c\u5176\u4e2d\u6700\u5c11\u53ea\u9700\u8981 mempty \uff0c\u5b83\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u8868\u793a\u5355\u4f4d\u5143\u7d20\u3002 mappend \u5373 Semigroup \u4e2d\u7684 <> \u8fd0\u7b97\u7b26\uff0c mconcat \u4e5f\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u5b9e\u73b0 Monoid \u5b9e\u4f8b \u00b6 [a] \u00b6 \u56e0\u4e3a Monoid \u7684\u5b9e\u4f8b\u662f\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\uff0c\u800c\u4e0d\u662f\u50cf Functor \u7b49\u4e00\u6837\u7b49\u7c7b\u578b\u6784\u9020\u5668\uff0c\u6240\u4ee5 [] \u5e76\u4e0d\u662f Monoid \u7684\u5b9e\u4f8b\uff0c\u4f46\u662f\u5177\u4f53\u7c7b\u578b [a] \u662f\u4e00\u4e2a\u5e7a\u534a\u7fa4\uff1a instance Semigroup [ a ] where ( <> ) = ( ++ ) instance Monoid [ a ] where mempty = [] mconcat xss = [ x | xs <- xss , x <- xs ] \u5217\u8868\u7684\u5355\u4f4d\u5143\u7d20\uff08mempty\uff09\u5c31\u662f\u7a7a\u5217\u8868 []\uff0c\u8fd0\u7b97\u7b26\u5c31\u662f\u5408\u5e76\u5217\u8868 (++)\uff0cmconcat \u4e5f\u7528\u5217\u8868\u63a8\u5bfc\u91cd\u65b0\u5b9e\u73b0\u63d0\u9ad8\u6548\u7387 ghci > mempty :: [ Int ] [] ghci > [ 1 , 2 ] <> [ 3 , 4 ] [ 1 , 2 , 3 , 4 ] ghci > [ 1 , 2 ] ` mappend ` [ 3 , 4 ] [ 1 , 2 , 3 , 4 ] ghci > mconcat [[ 1 , 2 ], [ 3 , 4 ]] [ 1 , 2 , 3 , 4 ] Ordering \u00b6 instance Semigroup Ordering where LT <> _ = LT EQ <> y = y GT <> _ = GT instance Monoid Ordering where mempty = EQ \u4e3b\u8981\u53ef\u4ee5\u7528\u4e8e\u6bd4\u8f83\u5b57\u5178\u5e8f\uff1a ghci > mconcat ( zipWith compare \"abcd\" \"acbd\" ) LT Sum & Product \u00b6 \u5bf9\u4e8e\u6570\u5b57\uff0c\u52a0\u6cd5\u548c\u4e58\u6cd5\u90fd\u6ee1\u8db3\u7ed3\u5408\u5f8b\uff0c\u6240\u4ee5\u5bf9\u4e8e Num\uff0c\u6709\u4e24\u79cd\u5b9e\u73b0 Monoid \u7684\u65b9\u5f0f\uff0c\u4f46\u662f\u4e0d\u80fd\u4e3a\u540c\u4e00\u7c7b\u578b\u8bbe\u7f6e\u4e24\u79cd\u5b9e\u4f8b\u65b9\u5f0f\uff0c\u6240\u4ee5 Data.Monoid \u4e2d\u63d0\u4f9b\u4e86\u4e24\u4e2a\u5305\u88c5\u5668\u2014\u2014\u2014\u2014 Sum \u548c Product\uff1a newtype Sum a = Sum { getSum :: a } deriving ( ... ) newtype Product a = Product { getProduct :: a } deriving ( ... ) \u5b83\u4eec\u4f7f\u7528 Sum \u6216 Product \u6765\u5305\u88c5\u8d77\u4e00\u4e2a\u6570\u5b57\uff0c\u53ef\u4ee5\u901a\u8fc7 getSum \u6216 getProduct \u6765\u83b7\u53d6\u5176\u4e2d\u7684\u503c \u5bf9\u4e8e\u52a0\u6cd5\uff0c\u4e8c\u5143\u64cd\u4f5c\u4e3a (+)\uff0c\u5355\u4f4d\u5143\u7d20\u4e3a 0\uff1b\u5bf9\u4e8e\u4e58\u6cd5\uff0c\u4e8c\u5143\u64cd\u4f5c\u4e3a (*)\uff0c\u5355\u4f4d\u5143\u7d20\u4e3a 1: instance Num a => Semigroup ( Sum a ) where ( <> ) = coerce (( + ) :: a -> a -> a ) instance Num a => Monoid ( Sum a ) where mempty = Sum 0 instance Num a => Semigroup ( Product a ) where ( <> ) = coerce (( * ) :: a -> a -> a ) instance Num a => Monoid ( Product a ) where mempty = Product 1 ghci > Sum 5 <> Sum 6 <> Sum 10 Sum { getSum = 21 } ghci > getSum . mconcat . fmap Sum $ [ 5 , 6 , 10 ] 21 ghci > Product 5 <> Product 6 <> Product 10 Product { getProduct = 300 } ghci > getProduct . mconcat . fmap Product $ [ 5 , 6 , 10 ] 300 All & Any \u00b6 \u548c\u6570\u5b57\u4e00\u6837\uff0c\u5e03\u5c14\u503c\u4e5f\u6709\u4e24\u79cd\u5b9e\u73b0 Monoid \u7684\u65b9\u5f0f\uff0c\u56e0\u6b64 Data.Monoid \u6a21\u5757\u4e2d\u4e5f\u63d0\u4f9b\u4e86\u4e24\u4e2a\u5305\u88c5\u5668\uff0c\u5206\u522b\u5b9e\u73b0\u4e86\u8fd9\u4e24\u79cd Monoid\uff1a newtype All = All { getAll :: Bool } deriving ( ... ) instance Semigroup All where ( <> ) = coerce ( && ) instance Monoid All where mempty = All True newtype Any = Any { getAny :: Bool } deriving ( ... ) instance Semigroup Any where ( <> ) = coerce ( || ) instance Monoid Any where mempty = Any False ghci > getAll ( All True <> mempty <> All False ) False ghci > getAll ( mconcat ( map ( \\ x -> All ( even x )) [ 2 , 4 , 6 , 7 , 8 ])) False ghci > getAny ( Any True <> mempty <> Any False ) True ghci > getAny ( mconcat ( map ( \\ x -> Any ( even x )) [ 2 , 4 , 6 , 7 , 8 ])) True Monoid a => Maybe a \u00b6 \u5982\u679c a \u662f\u4e00\u4e2a(\u5e7a)\u534a\u7fa4\uff0c\u90a3\u4e48 Maybe a \u4e5f\u662f\u4e00\u4e2a\u5e7a\u534a\u7fa4\uff0c\u5355\u4f4d\u5143\u5c31\u662f Nothing\uff1a instance Semigroup a => Semigroup ( Maybe a ) where Nothing <> b = b a <> Nothing = a Just a <> Just b = Just ( a <> b ) instance Semigroup a => Monoid ( Maybe a ) where mempty = Nothing ghci > Nothing <> Just \"andy\" Just \"andy\" ghci > Just LT <> Nothing Just LT ghci > Just ( Sum 3 ) <> Just ( Sum 4 ) Just ( Sum { getSum = 7 }) First & Last \u00b6 \u5bf9\u4e8e Maybe \u4e5f\u6709\u4e24\u79cd\u5b9e\u73b0 Monoid \u7684\u65b9\u6cd5\uff0c\u5373 <> \u64cd\u4f5c\u6bcf\u6b21\u6052\u53d6\u5de6\u8fb9\u548c\u6bcf\u6b21\u6052\u53d6\u53f3\u8fb9\uff08\u5728\u6ca1\u6709 Nothing \u7684\u60c5\u51b5\u4e0b\uff09\uff0c\u6240\u4ee5 Data.Monoid \u6a21\u5757\u4e2d\u4e5f\u63d0\u4f9b\u4e86\u4e24\u4e2a\u65b0\u7684\u5305\u88c5\u5668\uff1aFirst \u548c Last\uff1a newtype First a = First { getFirst :: Maybe a } deriving ( ... ) instance Semigroup ( First a ) where First Nothing <> b = b a <> _ = a instance Monoid ( First a ) where mempty = First Nothing newtype Last a = Last { getLast :: Maybe a } deriving ( ... ) instance Semigroup ( Last a ) where a <> Last Nothing = a _ <> b = b instance Monoid ( Last a ) where mempty = Last Nothing ghci > getFirst ( First ( Just \"hello\" ) <> First Nothing <> First ( Just \"world\" )) Just \"hello\" ghci > getLast ( Last ( Just \"hello\" ) <> Last Nothing <> Last ( Just \"world\" )) Just \"world\" ghci > getFirst . mconcat . map First $ [ Nothing , Just 9 , Just 10 ] Just 9 ghci > getLast . mconcat . map Last $ [ Nothing , Just 9 , Just 10 ] Just 10 Min & Max \u00b6 \u5bf9\u4e8e\u6709\u754c\u7684\u7c7b\u578b\uff0c\u4e5f\u6709\u4e24\u79cd\u5b9e\u73b0 Monoid \u7684\u65b9\u5f0f\uff0c\u6bcf\u6b21\u4e8c\u5143\u64cd\u4f5c\u90fd\u53d6\u6700\u5c0f\u6216\u6700\u5927\u3002 Data.Semigroup \u6a21\u5757\u4e2d\u63d0\u4f9b\u4e86\u4e24\u4e2a\u5305\u88c5\u5176\u5668\uff1aMin \u548c Max\uff1a newtype Min a = Min { getMin :: a } deriving ( ... ) instance Ord a => Semigroup ( Min a ) where ( <> ) = coerce ( min :: a -> a -> a ) instance ( Ord a , Bounded a ) => Monoid ( Min a ) where mempty = maxBound newtype Max a = Max { getMax :: a } deriving ( ... ) instance Ord a => Semigroup ( Max a ) where ( <> ) = coerce ( max :: a -> a -> a ) instance ( Ord a , Bounded a ) => Monoid ( Max a ) where mempty = minBound ghci > Min 3 <> Min 5 Min { getMin = 3 } ghci > Max 3 <> Max 5 Max { getMax = 5 } ghci > getMin . mconcat . map Min $ [ 1 , 2 , 3 ] :: Int 1 ghci > getMax . mconcat . map Max $ [ 1 , 2 , 3 ] :: Int 3 \u5143\u7ec4 \u00b6 \u5f53\u5143\u7ec4\u5185\u7684\u6240\u6709\u5143\u7d20\u90fd\u662f\u5e7a\u534a\u7fa4\u65f6\uff0c\u6574\u4e2a\u5143\u7ec4\u4e5f\u662f\u4e00\u4e2a\u5e7a\u534a\u7fa4\uff1a instance ( Semigroup a , Semigroup b ) => Semigroup ( a , b ) where ( a , b ) <> ( a' , b' ) = ( a <> a' , b <> b' ) stimes n ( a , b ) = ( stimes n a , stimes n b ) instance ( Monoid a , Monoid b ) => Monoid ( a , b ) where mempty = ( mempty , mempty ) ghci > mconcat $ map ( \\ x -> ( Min x , Max x )) [ 1 .. 10 ] :: ( Min Int , Max Int ) ( Min { getMin = 1 }, Max { getMax = 10 }) Monoid Laws \u00b6 mempty <> x = x x <> mempty = x (x <> y) <> z = x <> (y <> z) Monoidal classes \u00b6 Applicative\u3001Monad\u3001Arrow \u90fd\u6709\u6709\u5e7a\u534a\u7fa4\u6027\u8d28\u7684\u5b50\u7c7b\u578b\u7c7b\uff0c\u5206\u522b\u662f Alternative\u3001MonadPlus\u3001ArrowPlus Alternative \u00b6 class Applicative f => Alternative f where -- | The identity of '<|>' empty :: f a -- | An associative binary operation ( <|> ) :: f a -> f a -> f a some :: f a -> f [ a ] some v = ( : ) <$> v <*> many v many :: f a -> f [ a ] many v = some v <|> pure [] \u5176\u4e2d empty \u662f\u5e7a\u534a\u7fa4\u4e2d\u7684\u5355\u4f4d\u5143\u7d20\uff0c<|> \u662f\u5e7a\u534a\u7fa4\u4e2d\u7684\u4e8c\u5143\u8fd0\u7b97\u7b26\u3002some \u548c many \u662f\u4e24\u4e2a\u51fd\u6570\uff08 \u610f\u4e49\u8fd8\u4e0d\u61c2 \uff09 Alternative \u5b9e\u4f8b \u00b6 [] \u00b6 instance Alternative [] where empty = [] ( <|> ) = ( ++ ) \u548c Monoid \u4e00\u6837\uff0c\u5355\u4f4d\u5143\u7d20\u662f\u7a7a\u5217\u8868\uff0c\u4e8c\u5143\u8fd0\u7b97\u662f\u5217\u8868\u5408\u5e76 ghci > [ 1 , 2 , 3 ] <|> empty <|> [ 4 , 5 ] [ 1 , 2 , 3 , 4 , 5 ] ghci > some [] [] ghci > many [] [ [] ] Maybe \u00b6 instance Alternative Maybe where empty = Nothing Nothing <|> r = r l <|> _ = l Maybe \u4f5c\u4e3a Alternative \u7684\u5355\u4f4d\u5143\u7d20\u662f Nothing\uff0c\u4e8c\u5143\u8fd0\u7b97\u662f\u59cb\u7ec8\u53d6\u5de6\u8fb9\uff08\u5f53\u5de6\u8fb9\u4e0d\u4e3a Nothing \u65f6\uff09 ghci > Nothing <|> Just 1 <|> Just 2 Just 1 ghci > some Nothing Nothing ghci > many Nothing Just [] ZipList \u00b6 instance Alternative ZipList where empty = ZipList [] ZipList xs <|> ZipList ys = ZipList ( xs ++ drop ( length xs ) ys ) <> getZipList $ ZipList [ 1 , 2 ] <|> ZipList [ 3 , 4 , 5 , 6 ] [ 1 , 2 , 5 , 6 ] <> getZipList $ ZipList [ 1 , 2 , 3 , 4 ] <|> ZipList [ 3 , 4 , 5 , 6 ] [ 1 , 2 , 3 , 4 ] Alternative Laws \u00b6 Monoid laws : empty <|> x = x x <|> empty = x ( x <|> y ) <|> z = x <|> ( y <|> z ) Left zero law \uff1aempty <*> f = empty \u4ee5\u4e0a\u7684\u5b9a\u5f8b\u662f\u90fd\u6ee1\u8db3\u90fd\uff0c\u4e0b\u9762\u7684\u5b9a\u5f8b\u53ea\u6709\u90e8\u5206\u6ee1\u8db3\uff1a Right zero law \uff1af <*> empty = empty \uff08\u5927\u90e8\u5206\u5305\u62ec Maybe\u3001[] \u6ee1\u8db3\uff0cIO \u4e0d\u6ee1\u8db3\uff09 Left distribution \uff1a(a <|> b) < > c = (a < > c) <|> (b <*> c) \uff08Maybe\u3001[] \u6ee1\u8db3\uff0cIO \u53ca\u5927\u90e8\u5206 parsers \u4e0d\u6ee1\u8db3\uff09 Right distribution \uff1aa < > (b <|> c) = (a < > b) <|> (a <*> c) \uff08\u5927\u90e8\u5206\u4e0d\u6ee1\u8db3\uff0c\u4f46 Maybe \u6ee1\u8db3\uff09 Left catch \uff1a(pure a) <|> x = pure a \uff08Maybe\u3001IO\u3001parsers \u6ee1\u8db3\uff0c\u4f46 [] \u4e0d\u6ee1\u8db3\uff09 \u5e38\u7528\u51fd\u6570 \u00b6 asum :: (Foldable t, Alternative f) => t (f a) -> f a\uff0c\u76f8\u5f53\u4e8e foldr (<|>) empty\uff1a ghci > asum [ Nothing , Just 5 , Just 3 ] Just 5 ghci > asum [[ 2 ],[ 3 ],[ 4 , 5 ]] [ 2 , 3 , 4 , 5 ] guard :: (Alternative f) => Bool -> f ()\uff1a guard True = pure () guard False = empty MonadPlus \u00b6 class ( Alternative m , Monad m ) => MonadPlus m where mzero :: m a mzero = empty mplus :: m a -> m a -> m a mplus = ( <|> ) MonadPlus\u5b9e\u4f8b \u00b6 []\u3001Maybe \u90fd\u662f MonadPlus \u7684\u5b9e\u4f8b\uff0cmzero \u548c mplus \u90fd\u7531 Alternative \u5b9e\u73b0 MonadPlus Laws \u00b6 Monoid laws Left zero \uff1amzero >>= f = mzero Right zero \uff1am >> mzero = mzero \u5e38\u7528\u51fd\u6570 \u00b6 msum = asum mfilter \uff1a mfilter p ma = do a <- ma if p a then return a else mzero ArrowPlus \u00b6 ArrowZero \u548c ArrowPlus \u5206\u522b\u4e3a Arrow \u8bbe\u7f6e\u4e86 Monoid \u4e2d\u7684\u5355\u4f4d\u5143\u7d20\u548c\u4e8c\u5143\u8fd0\u7b97\u7b26\uff0c\u4f7f\u4e4b\u6210\u4e3a\u4e86\u4e00\u4e2a\u5e7a\u534a\u7fa4\uff1a class Arrow arr => ArrowZero arr where zeroArrow :: b ` arr ` c class ArrowZero arr => ArrowPlus arr where ( <+> ) :: ( b ` arr ` c ) -> ( b ` arr ` c ) -> ( b ` arr ` c ) \u4e00\u4e9b\u5176\u5b83 Typeclasses \u00b6 Foldable \u00b6 Foldable \u662f\u8868\u793a\u53ef\u4ee5\u6298\u53e0\uff08fold\uff09\u7684\u7c7b\u578b\u7c7b\uff0c\u5728 Data.Foldable \u4e2d\u5b9a\u4e49\uff0c\u8fd9\u4f7f\u5f97\u548c fold \u76f8\u5173\u7684\u51fd\u6570\u53ef\u4ee5\u7528\u5728\u4efb\u610f Foldable \u7684\u5b9e\u4f8b\u7c7b\u578b\u4e0a\u3002\u5b83\u7684\u5b9a\u4e49\u662f\uff1a class Foldable t where fold :: Monoid m => t m -> m foldMap :: Monoid m => ( a -> m ) -> t a -> m foldMap' :: Monoid m => ( a -> m ) -> t a -> m foldr :: ( a -> b -> b ) -> b -> t a -> b foldr' :: ( a -> b -> b ) -> b -> t a -> b foldl :: ( b -> a -> b ) -> b -> t a -> b foldl' :: ( b -> a -> b ) -> b -> t a -> b foldr1 :: ( a -> a -> a ) -> t a -> a foldl1 :: ( a -> a -> a ) -> t a -> a toList :: t a -> [ a ] null :: t a -> Bool length :: t a -> Int elem :: Eq a => a -> t a -> Bool maximum :: Ord a => t a -> a minimum :: Ord a => t a -> a sum :: Num a => t a -> a product :: Num a => t a -> a {-# MINIMAL foldMap | foldr #-} \u6700\u5c11\u53ea\u8981\u5b9e\u73b0 foldr \u548c foldMap \u5176\u4e2d\u4e4b\u4e00\u5c31\u53ef\u4ee5\u4f7f\u4e00\u4e2a\u7c7b\u578b\u6210\u4e3a Foldable \u7684\u5b9e\u4f8b\uff0c\u5176\u5b83\u7684\u51fd\u6570\u90fd\u6709\u7531\u8fd9\u4e24\u4e2a\u51fd\u6570\u63d0\u4f9b\u7684\u9ed8\u8ba4\u5b9e\u73b0\uff0c\u800c\u4e14\u8fd9\u4e24\u4e2a\u51fd\u6570\u4e4b\u95f4\u4e5f\u6709\u76f8\u4e92\u5b9e\u73b0\u3002\u56e0\u6b64\u53ea\u8981\u5b9e\u73b0 foldr \u6216 foldMap \u4e00\u4e2a\u51fd\u6570\u5c31\u53ef\u4ee5\u4f7f\u7528\u6240\u6709\u5176\u5b83 Foldable \u4e2d\u7684\u51fd\u6570\u3002foldr \u51fd\u6570\u5728\u524d\u9762\u5df2\u7ecf\u6709\u5b66\u8fc7\uff0cfoldMap \u7684\u4f8b\u5b50\u662f\uff1a ghci > foldMap Sum [ 1 , 3 , 5 ] Sum { getSum = 9 } ghci > foldMap Product [ 1 , 3 , 5 ] Product { getProduct = 15 } ghci > foldMap ( replicate 3 ) [ 1 , 2 , 3 ] [ 1 , 1 , 1 , 2 , 2 , 2 , 3 , 3 , 3 ] Foldable \u5b9e\u4f8b \u00b6 []\u3001Maybe\u3001Either a\u3001(,) a \u90fd\u662f Foldable \u7684\u5b9e\u4f8b\uff0c\u6807\u51c6\u5bb9\u5668\u5e93\u4e2d\u7684 Map\u3001Set \u7b49\u4e5f\u90fd\u662f Foldable \u7684\u5b9e\u4f8b\u3002\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e8c\u53c9\u6811\u7c7b\u578b\uff0c\u5e76\u4f7f\u5176\u6210\u4e3a Foldable \u7684\u5b9e\u4f8b\uff1a data Tree a = Empty | Leaf a | Node ( Tree a ) a ( Tree a ) instance Foldable Tree where foldMap :: Monoid m => ( a -> m ) -> Tree a -> m foldMap f Empty = mempty foldMap f ( Leaf x ) = f x foldMap f ( Node l k r ) = foldMap f l ` mappend ` f k ` mappend ` foldMap f r \u5e38\u7528\u51fd\u6570 \u00b6 asum :: (Alternative f, Foldable t) => t (f a) -> f a\uff0c\u7528 <|> \u9010\u4e2a\u8fde\u63a5\u6240\u6709\u5143\u7d20 sequenceA_ :: (Applicative f, Foldable t) => t (f a) -> f ()\uff0c\u7531\u4e8e\u4e22\u5f03\u7ed3\u679c\uff0c\u6240\u4ee5 Foldable t \u5c31\u53ef\u4ee5\u6ee1\u8db3\uff1b\u56e0\u6b64\u4e0d\u540c\u4e8e sequenceA \u9700\u8981 Traversable traverse_ :: (Applicative f, Foldable t) => (a -> f b) -> t a -> f () for_ :: (Applicative f, Foldable t) => t a -> (a -> f b) -> f () Traversable \u00b6 Traversable \u662f\u8868\u793a\u53ef\u904d\u5386\u7684\u7c7b\u578b\u7c7b\uff0c\u5728 Data.Traversable \u6a21\u5757\u4e2d\u5b9a\u4e49\uff0c\u5b83\u662f Foldable \u7684\u5347\u7ea7\u7248\uff0c\u540c\u65f6\u4e5f\u662f\u4e00\u4e2a Functor\uff0c\u5b83\u7684\u5b9a\u4e49\u662f\uff1a class ( Functor t , Foldable t ) => Traversable t where traverse :: Applicative f => ( a -> f b ) -> t a -> f ( t b ) sequenceA :: Applicative f => t ( f a ) -> f ( t a ) mapM :: Monad m => ( a -> m b ) -> t a -> m ( t b ) sequence :: Monad m => t ( m a ) -> m ( t a ) {-# MINIMAL traverse | sequenceA #-} \u6700\u5c11\u53ea\u9700\u8981\u5b9e\u73b0 traverse \u51fd\u6570\u6216\u8005 sequenceA \u51fd\u6570\u3002\u5176\u4e2d\u5404\u4e2a\u51fd\u6570\u7684\u529f\u80fd\u901a\u8fc7\u7c7b\u578b\u7b7e\u540d\u4e5f\u90fd\u80fd\u63a8\u6d4b\u51fa\u6765\u3002\u4f46\u662f\u5176\u4e2d mapM \u5c31\u662f traverse\uff0csequence \u5c31\u662f sequenceA\uff0c\u5b83\u4eec\u5b58\u5728\u53ea\u662f\u5386\u53f2\u9057\u7559 Traversable \u5b9e\u4f8b \u00b6 instance Traversable Maybe where traverse _ Nothing = pure Nothing traverse f ( Just x ) = Just <$> f x instance Traversable [] where {-# INLINE traverse #-} traverse f = foldr cons_f ( pure [] ) where cons_f x ys = liftA2 ( : ) ( f x ) ys instance Traversable ( Either a ) where traverse _ ( Left x ) = pure ( Left x ) traverse f ( Right y ) = Right <$> f y instance Traversable ((,) a ) where traverse f ( x , y ) = (,) x <$> f y ... \u4e0a\u9762\u7684 Tree \u4e5f\u53ef\u4ee5\u6210\u4e3a Traversable \u7684\u5b9e\u4f8b\uff1a instance Functor Tree where fmap :: ( a -> b ) -> Tree a -> Tree b fmap g Empty = Empty fmap g ( Leaf x ) = Leaf $ g x fmap g ( Node l x r ) = Node ( fmap g l ) ( g x ) ( fmap g r ) instance Traversable Tree where traverse :: Applicative f => ( a -> f b ) -> Tree a -> f ( Tree b ) traverse g Empty = pure Empty traverse g ( Leaf x ) = Leaf <$> g x traverse g ( Node l x r ) = Node <$> traverse g l <*> g x <*> traverse g r Traversable Laws \u00b6 Traversable \u4e5f\u6709\u4e24\u6761\u5b9a\u5f8b\uff1a 1. traverse Identity = Identity 2. traverse (Compose . fmap g . f) = Compose . fmap (traverse g) . traverse f \u5176\u4e2d Identity \u548c Compose \u5206\u522b\u5b9a\u4e49\u5728 Data.Functor.Identity \u548c Data.Functor.Compose \u4e24\u4e2a\u6a21\u5757\u4e2d\uff1a newtype Identity a = Identity { runIdentity :: a } deriving ( ... ) newtype Compose f g a = Compose { getCompose :: f ( g a ) } deriving ( ... ) Bifunctor \u00b6 Functor \u7684\u5b9e\u4f8b\u7684 kind \u90fd\u662f * -> *\uff0c\u56e0\u6b64 fmap \u53ea\u80fd\u5c06\u4e00\u4e2a\u51fd\u6570\u6620\u5c04\u5230\u4e00\u4e2a\u503c\u4e0a\u3002\u800c Bifunctor\uff08\u5728 Data.Bifunctor \u6a21\u5757\u4e2d\u5b9a\u4e49\uff09\u7684\u5b9e\u4f8b\u7684 kind \u662f * -> * -> *\uff0c\u800c\u4e14\u5b83\u7684 bimap \u53ef\u4ee5\u540c\u65f6\u5c06\u4e24\u4e2a\u51fd\u6570\u6620\u5c04\u5230\u4e24\u4e2a\u503c\u4e0a\uff1a class Bifunctor p where bimap :: ( a -> b ) -> ( c -> d ) -> p a c -> p b d first :: ( a -> b ) -> p a c -> p b c second :: ( b -> c ) -> p a b -> p a c {-# MINIMAL bimap | first, second #-} \u540c\u65f6 bimap \u548c first,second \u4e4b\u95f4\u4e5f\u53ef\u4ee5\u76f8\u4e92\u8f6c\u6362\uff1a bimap f g = first f . second g first f = bimap f id second g = bimap id g \u5bf9\u4e8e Functor\uff0c((,) e) \u548c Either e \u624d\u662f Functor \u7684\u5b9e\u4f8b\uff0c\u56e0\u4e3a\u4ed6\u4eec\u662f * -> *\u3002\u4f46\u662f\u5bf9\u4e8e Bifunctor\uff0c(,) \u548c Either \u5c31\u662f Bifunctor \u7684\u5b9e\u4f8b\uff1a ghci > bimap ( + 1 ) length ( 4 , [ 1 , 2 , 3 ]) ( 5 , 3 ) Bifunctor Laws \u00b6 bimap id id = id first id = id second id = id bimap (f . g) (h . i) = bimap f h . bimap g i first (f . g) = first f . first g second (f . g) = second f . second g Category \u00b6 Haskell \u4e2d\u7684 Category \u5c06\u4e00\u822c\u7684\u51fd\u6570\u63a8\u5e7f\u5230\u4e86\u666e\u904d\u7684\u6001\u5c04\u4e0a\uff0c\u5b83\u5728 Control.Category \u6a21\u5757\u4e2d\uff0c\u5b9a\u4e49\u662f\uff1a class Category cat where id :: cat a a ( . ) :: cat b c -> cat a b -> cat a c \u5b83\u7684\u5b9e\u4f8b\u6709 (->) \u548c Kleisli m \uff1a instance Category ( -> ) where id = GHC . Base . id ( . ) = ( GHC . Base .. ) Kleisli \u662f\u4e00\u4e2a\u8303\u7574\uff0c\u7528\u6765\u8868\u793a\u51fd\u6570 a -> m b\uff0cHaskell \u4e2d\uff0c\u5b83\u5728 Control.Arrow \u6a21\u5757\u4e2d\u5b9a\u4e49\uff1a newtype Kleisli m a b = Kleisli { runKleisli :: a -> m b } instance Monad m => Category ( Kleisli m ) where id :: Kleisli m a a id = Kleisli return ( . ) :: Kleisli m b c -> Kleisli m a b -> Kleisli m a c Kleisli g . Kleisli h = Kleisli ( h >=> g ) Category \u8981\u6ee1\u8db3\u7684\u5b9a\u5f8b\u53ea\u6709 id \u662f (.) \u64cd\u4f5c\u7684\u5355\u4f4d\u5143\uff0c\u4ee5\u53ca (.) \u64cd\u4f5c\u662f\u53ef\u7ed3\u5408\u7684 \u540c\u65f6 Category \u8fd8\u63d0\u4f9b\u4e86\u4e24\u4e2a\u51fd\u6570 <<< \u548c >>> \uff1a ( <<< ) :: Category cat => cat b c -> cat a b -> cat a c ( <<< ) = ( . ) ( >>> ) :: Category cat => cat a b -> cat b c -> cat a c f >>> g = g . f Arrow \u00b6 Arrow \u5c06\u51fd\u6570\u8fdb\u4e00\u6b65\u62bd\u8c61\u5316\uff0c\u5b83\u5b9a\u4e49\u5728 Control.Arrow \u6a21\u5757\u4e2d\uff1a class Category a => Arrow a where arr :: ( b -> c ) -> a b c first :: a b c -> a ( b , d ) ( c , d ) second :: a b c -> a ( d , b ) ( d , c ) ( *** ) :: a b c -> a b' c' -> a ( b , b' ) ( c , c' ) ( &&& ) :: a b c -> a b c' -> a b ( c , c' ) {-# MINIMAL arr, (first | (***)) #-} \u5176\u4e2d\uff1a arr \u51fd\u6570\u5c06\u4e00\u4e2a\u51fd\u6570\u53d8\u6210\u4e00\u4e2a Arrow first \u51fd\u6570\u5c06\u4e00\u4e2a Arrow \u53d8\u6210\u4e00\u4e2a\u4e8c\u5143\u7ec4\u95f4\u7684 Arrow\uff0c\u4e14\u53ea\u4f1a\u5bf9\u4e00\u4e2a\u5143\u7d20\u8fdb\u884c\u64cd\u4f5c\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u4fdd\u6301\u4e0d\u53d8 second \u51fd\u6570\u4e0e first \u76f8\u53cd\uff0c\u7b2c\u4e00\u4e2a\u5143\u7d20\u4fdd\u6301\u4e0d\u53d8 *** \u51fd\u6570\u662f Arrow \u4e4b\u95f4\u7684 parallel composition\uff0c\u5bf9\u4e8e\u51fd\u6570: (g *** h) (x, y) = (g x, h y) &&& \u51fd\u6570\u662f Arrow \u4e4b\u95f4\u7684 fanout composition\uff0c\u5bf9\u4e8e\u51fd\u6570: (g &&& h) x = (g x, h x) \u5b83\u7684\u5b9e\u4f8b\u4e5f\u6709 (->) \u548c Kleisli\uff1a instance Arrow ( -> ) where arr :: ( b -> c ) -> ( b -> c ) arr g = g first :: ( b -> c ) -> (( b , d ) -> ( c , d )) first g ( x , y ) = ( g x , y ) instance Monad m => Arrow ( Kleisli m ) where arr :: ( b -> c ) -> Kleisli m b c arr f = Kleisli ( return . f ) first :: Kleisli m b c -> Kleisli m ( b , d ) ( c , d ) first ( Kleisli f ) = Kleisli ( \\ ~ ( b , d ) -> do c <- f b return ( c , d ) ) \u5e38\u7528\u51fd\u6570\uff1a returnA :: Arrow a => a b b returnA = arr id ( ^>> ) :: Arrow a => ( b -> c ) -> a c d -> a b d f ^>> a = arr f >>> a ( >>^ ) :: Arrow a => a b c -> ( c -> d ) -> a b d a >>^ f = a >>> arr f ( <<^ ) :: Arrow a => a c d -> ( b -> c ) -> a b d a <<^ f = a <<< arr f ( ^<< ) :: Arrow a => ( c -> d ) -> a b c -> a b d f ^<< a = arr f <<< a Arrow notation \u00b6 \u7c7b\u4f3c do-notation\uff0cArrow \u4e5f\u63d0\u4f9b\u4e86\u4e00\u5957\u65b9\u4fbf\u7684\u8bed\u53e5\uff1a proc x -> do y <- action1 -< ... z <- action2 -< ... returnA -< ... \u5176\u4e2d proc \u4ee3\u66ff\u4e86 lambda \u8868\u8fbe\u5f0f\u4e2d\u7684\u659c\u6760 \\\uff0c-< \u53f3\u8fb9\u7684\u4e3a\u8f93\u5165\uff0c\u5de6\u8fb9\u7684\u4e3a\u63a5\u6536\u8f93\u5165\u7684\u51fd\u6570\u3002\u6bd4\u5982\uff0c\u4e0b\u9762\u4e09\u79cd\u5199\u6cd5\u8fbe\u6210\u7684\u6548\u679c\u662f\u4e00\u6837\u7684\uff1a f :: Int -> ( Int , Int ) f = \\ x -> let y = 2 * x z1 = y + 3 z2 = y - 5 in ( z1 , z2 ) -- ghci> f 10 -- (23,15) fM :: Int -> Identity ( Int , Int ) fM = \\ x -> do y <- return ( 2 * x ) z1 <- return ( y + 3 ) z2 <- return ( y - 5 ) return ( z1 , z2 ) -- ghci> runIdentity (fM 10) -- (23,15) fA :: Int -> ( Int , Int ) fA = proc x -> do y <- ( 2 * ) -< x z1 <- ( + 3 ) -< y z2 <- ( subtract 5 ) -< y returnA -< ( z1 , z2 ) -- ghci> fA 10 -- (23,15) ArrowChoice \u00b6 class Arrow a => ArrowChoice a where left :: a b c -> a ( Either b d ) ( Either c d ) left = ( +++ id ) right :: a b c -> a ( Either d b ) ( Either d c ) right = ( id +++ ) ( +++ ) :: a b c -> a b' c' -> a ( Either b b' ) ( Either c c' ) f +++ g = left f >>> arr mirror >>> left g >>> arr mirror where mirror :: Either x y -> Either y x mirror ( Left x ) = Right x mirror ( Right y ) = Left y ( ||| ) :: a b d -> a c d -> a ( Either b c ) d f ||| g = f +++ g >>> arr untag where untag ( Left x ) = x untag ( Right y ) = y instance ArrowChoice ( -> ) where left f = f +++ id right f = id +++ f f +++ g = ( Left . f ) ||| ( Right . g ) ( ||| ) = either instance Monad m => ArrowChoice ( Kleisli m ) where left f = f +++ arr id right f = arr id +++ f f +++ g = ( f >>> arr Left ) ||| ( g >>> arr Right ) Kleisli f ||| Kleisli g = Kleisli ( either f g ) ArrowZero & ArrowPlus \u00b6 class Arrow a => ArrowZero a where zeroArrow :: a b c class ArrowZero a => ArrowPlus a where ( <+> ) :: a b c -> a b c -> a b c instance MonadPlus m => ArrowZero ( Kleisli m ) where zeroArrow = Kleisli ( \\ _ -> mzero ) instance MonadPlus m => ArrowPlus ( Kleisli m ) where Kleisli f <+> Kleisli g = Kleisli ( \\ x -> f x ` mplus ` g x ) \u4f8b\u5b50 \u00b6 ghci > runKleisli (( Kleisli ( \\ x -> [ x * 2 ])) <+> ( Kleisli ( \\ x -> [ x , - x ]))) 2 [ 4 , 2 , - 2 ] ghci > either ( + 2 ) ( * 3 ) ( Left 3 ) 5 ghci > either ( + 2 ) ( * 3 ) ( Right 3 ) 9 ghci > ( + 2 ) ||| ( * 3 ) $ ( Left 3 ) 5 ghci > ( + 2 ) +++ ( * 3 ) $ ( Left 3 ) Left 5 ghci > ( + 2 ) ||| ( * 3 ) $ ( Right 3 ) 9 ghci > ( + 2 ) +++ ( * 3 ) $ ( Right 3 ) Right 9 ghci > left ( + 2 ) ( Left 3 ) Left 5 ghci > right ( * 3 ) ( Right 3 ) Right 9 ghci > left ( + 2 ) ( Right 3 ) Right 3 ghci > right ( * 3 ) ( Left 3 ) Left 3 ghci > runKleisli (( Kleisli ( \\ x -> [ x * 2 ])) ||| ( Kleisli ( \\ x -> [ x , - x ]))) ( Left 3 ) [ 6 ] ghci > runKleisli (( Kleisli ( \\ x -> [ x * 2 ])) ||| ( Kleisli ( \\ x -> [ x , - x ]))) ( Right 3 ) [ 3 , - 3 ] ghci > runKleisli (( Kleisli ( \\ x -> [ x * 2 ])) +++ ( Kleisli ( \\ x -> [ x , - x ]))) ( Left 3 ) [ Left 6 ] ghci > runKleisli (( Kleisli ( \\ x -> [ x * 2 ])) +++ ( Kleisli ( \\ x -> [ x , - x ]))) ( Right 3 ) [ Right 3 , Right ( - 3 )] Haskell \u4e0e\u8303\u7574\u8bba \u00b6 Haskell \u4e2d\u7684\u51fd\u5b50\u5355\u5b50\u7b49\u90fd\u4e0e\u8303\u7574\u8bba\uff08category theory\uff09\u6709\u5f88\u591a\u8054\u7cfb\uff0c\u6240\u4ee5\u6253\u7b97\u7b80\u5355\u4e86\u89e3\u4e00\u4e0b\u8303\u7574\u8bba\u7684\u76f8\u5173\u5185\u5bb9\u3002 \u8303\u7574\u8bba \u662f\u6570\u5b66\u7684\u4e00\u95e8\u5b66\u79d1\uff0c\u4ee5\u62bd\u8c61\u7684\u65b9\u6cd5\u5904\u7406\u6570\u5b66\u6982\u5ff5\uff0c\u5c06\u8fd9\u4e9b\u6982\u5ff5\u5f62\u5f0f\u5316\u6210\u4e00\u7ec4\u7ec4\u7684\u201c\u7269\u4ef6\u201d\u53ca\u201c\u6001\u5c04\u201d\u3002\u6570\u5b66\u4e2d\u8bb8\u591a\u91cd\u8981\u7684\u9886\u57df\u53ef\u4ee5\u5f62\u5f0f\u5316\u4e3a\u8303\u7574\u3002\u4f7f\u7528\u8303\u7574\u8bba\u53ef\u4ee5\u4ee4\u8fd9\u4e9b\u9886\u57df\u4e2d\u8bb8\u591a\u96be\u7406\u89e3\u3001\u96be\u6349\u6478\u7684\u6570\u5b66\u7ed3\u8bba\u66f4\u5bb9\u6613\u53d9\u8ff0\u8bc1\u660e\u3002 \u2014\u2014\u2014\u2014 \u7ef4\u57fa\u767e\u79d1 \u8303\u7574\uff08Category\uff09 \u00b6 \u8303\u7574\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u96c6\u5408\uff0c\u4e00\u4e2a\u8303\u7574 \\(\\mathbf{C}\\) \u5305\u542b\u4e09\u4e2a\u7ec4\u6210\u6210\u5206\uff1a \u4e00\u4e2a\u7c7b \\(\\mathrm{ob}(\\mathbf{C})\\) \uff1a\u5176\u4e2d\u5143\u7d20\u79f0\u4e3a \u5bf9\u8c61\uff08objects\uff09 \u4e00\u4e2a\u7c7b \\(\\mathrm{hom}(\\mathbf{C})\\) \uff1a\u5176\u4e2d\u5143\u7d20\u79f0\u4e3a \u6001\u5c04\uff08morphisms\uff09 \uff08\u6216 \u7bad\u53f7\uff08arrows\uff09 \uff09\uff1a\u6bcf\u4e2a\u6001\u5c04\u8fde\u63a5\u4e86\u4e24\u4e2a\u5bf9\u8c61\uff1a\u6e90\u5bf9\u8c61\uff08source object\uff09\u3001\u76ee\u6807\u5bf9\u8c61\uff08target object\uff09\u3002\u5982\u679c \\(f\\) \u662f\u4ece\u6e90\u5bf9\u8c61 \\(A\\) \u5230\u76ee\u6807\u5bf9\u8c61 \\(B\\) \uff08 \\(A, B\\in \\mathrm{ob}(\\mathbf{C})\\) \uff09\u7684\u6001\u5c04\uff0c\u90a3\u4e48\u8bb0\u4e3a \\(f : A\\to B\\) \u4e00\u4e2a\u4e8c\u5143\u8fd0\u7b97\uff0c\u79f0\u4e3a\u6001\u5c04 \u590d\u5408\uff08composition\uff09 \uff1a\u4e24\u4e2a\u6001\u5c04 \\(g : A\\to B\\) \u3001 \\(f : B\\to C\\) \u7684\u590d\u5408\u8bb0\u4e3a \\(f\\circ g : A\\to C\\) \u5728 Haskell \u548c\u5927\u90e8\u5206\u6570\u5b66\u7406\u8bba\u4e2d\u90fd\u662f\u4ece\u53f3\u5411\u5de6\u8ba1\u7b97\uff0c\u5373 \\(f\\circ g\\) \u4e2d\u662f\u5148\u8ba1\u7b97 \\(g : A\\to B\\) \u518d\u8ba1\u7b97 \\(f : B\\to C\\) \u8bb8\u591a\u4e1c\u897f\u90fd\u53ef\u4ee5\u7ec4\u6210\u8303\u7574\u3002\u6bd4\u5982: \u4f8b \u2003 \\(\\mathbf{Set}\\) \u662f\u4e00\u4e2a\u8303\u7574\uff0c\u5bf9\u8c61\u4e3a\u6240\u6709\u96c6\u5408\uff0c\u6001\u5c04\u4e3a\u96c6\u5408\u4e4b\u95f4\u7684\u51fd\u6570\uff0c\u590d\u5408\u5373\u51fd\u6570\u4e4b\u95f4\u7684\u590d\u5408 \u2003 \\(\\mathbf{Grp}\\) \u662f\u4e00\u4e2a\u8303\u7574\uff0c\u5bf9\u8c61\u4e3a\u6240\u6709\u7fa4\uff0c\u6001\u5c04\u4e3a\u7fa4\u540c\u6001\uff08group homomorphisms\uff09\uff0c\u4f8b\u5982\u5bf9\u4e8e\u7fa4 \\((G,*)\\) \u548c \\((H,\\cdot )\\) \uff0c\u6709\u7fa4\u540c\u6001 \\(h : (G,*)\\to (H,\\cdot )\\) \uff0c\u5219\u9700\u8981\u5bf9\u4e8e \\(G\\) \u4e2d\u7684\u4efb\u610f\u5143\u7d20 \\(u,v\\) \u6ee1\u8db3 \\[h(u*v)=h(u)\\cdot h(v)\\] \u6ce8\u610f \u6001\u5c04\u4e0d\u5fc5\u987b\u4e3a\u51fd\u6570\uff1b\u800c\u4e14\u53ef\u4ee5\u5b58\u5728\u6e90\u5bf9\u8c61\u548c\u76ee\u6807\u5bf9\u8c61\u90fd\u76f8\u540c\u7684\u4e0d\u540c\u6001\u5c04 \u8303\u7574\u516c\u7406 \u00b6 \u6bcf\u4e2a\u8303\u7574\u90fd\u9700\u8981\u6ee1\u8db3\u4e09\u6761\u5b9a\u5f8b\uff1a \u6001\u5c04\u590d\u5408\u9700\u8981\u6ee1\u8db3 \u7ed3\u5408\u5f8b\uff08associativity\uff09 \uff1a \\(f\\circ (g\\circ h) = (f\\circ g)\\circ h\\) \u8303\u7574\u5728\u590d\u5408\u64cd\u4f5c\u4e0b\u662f \u95ed\u5408\u7684\uff08closed\uff09 \uff1a \u2003\u2003\u2003\u5982\u679c\u8303\u7574 \\(\\mathbf{C}\\) \u4e2d\u5b58\u5728\u6001\u5c04 \\(f : B\\to C\\) \u3001 \\(g : A\\to B\\) \uff0c\u90a3\u4e48\u8303\u7574 \\(\\mathbf{C}\\) \u4e2d\u4e5f\u4e00\u5b9a\u5b58\u5728\u6001\u5c04 \\(h : A\\to C\\) \uff0c\u4e14 \\(h=f\\circ g\\) \u6bcf\u4e2a\u5bf9\u8c61\u90fd\u9700\u8981\u6709 \u5355\u4f4d\u6001\u5c04\uff08identity morphisms\uff09 \uff1a \u2003\u2003\u2003\u5bf9\u4e8e\u8303\u7574 \\(\\mathbf{C}\\) \u4e2d\u7684\u5bf9\u8c61 \\(A\\) \uff0c\u4e00\u5b9a\u5b58\u5728\u5355\u4f4d\u6001\u5c04 \\(\\mathrm{id}_A : A\\to A\\) \uff0c\u4e14\u5bf9\u4e8e\u6bcf\u4e2a\u6001\u5c04 \\(g : A\\to B\\) \uff0c\u4e00\u5b9a\u6709\uff1a \\(g\\circ\\mathrm{id}_A = \\mathrm{id}_B\\circ g = g\\) \\(\\mathbf{Hask}\\) \u8303\u7574 \u00b6 \u8303\u7574 \\(\\mathbf{Hask}\\) \u7684\u5bf9\u8c61\u4e3a Haskell \u4e2d\u7684\u7c7b\u578b\uff08types\uff09\uff0c\u6001\u5c04\u662f Haskell \u4e2d\u7684\u51fd\u6570\uff0c\u590d\u5408\u8fd0\u7b97\u662f (.) \u3002\u5373\u4ece\u7c7b\u578b A \u5230\u7c7b\u578b B \u7684\u51fd\u6570 f :: A -> B \u5c31\u662f \\(\\mathbf{Hask}\\) \u8303\u7574\u4e2d\u7684\u4e00\u4e2a\u6001\u5c04\u3002\u800c\u51fd\u6570 f :: B -> C \u3001g :: A -> B \u7684\u7ec4\u5408 f . g \u5c31\u662f\u4e00\u4e2a\u65b0\u7684\u51fd\u6570 h :: A -> C\u3002 \u5bf9\u4e8e\u4e09\u6761\u5b9a\u5f8b\uff1a \u7b2c\u4e00\u6761\u663e\u7136\u6ee1\u8db3\uff1af . (g . h) = (f . g) . h \u7b2c\u4e8c\u6761\u4e5f\u663e\u7136\u6ee1\u8db3\uff0c\u5982\u679c\u6709\u51fd\u6570 f :: B -> C \u3001g :: A -> B\uff0c\u4e00\u5b9a\u6709\u51fd\u6570 h = (f . g) :: A -> C \u5bf9\u4e8e\u7b2c\u4e09\u6761\u5b9a\u5f8b\uff0cHaskell \u4e2d\u5b58\u5728\u5355\u4f4d\u51fd\u6570 id \uff0c\u4f46 id \u662f\u591a\u6001\uff08polymorphic\uff09\u7684\uff0c\u8981\u4e3a\u5176\u6307\u5b9a\u7c7b\u578b\u4f7f\u5176\u53d8\u6210\u5355\u6001\uff08monomorphic\uff09\u7684\u3002\u6bd4\u5982\u6001\u5c04 \\(\\mathrm{id}_A\\) \u5728 Haskell \u4e2d\u5c31\u53ef\u4ee5\u8868\u793a\u4e3a id :: A -> A\u3002\u5e76\u4e14\u663e\u7136\u6ee1\u8db3\u7b2c\u4e09\u6761\u5b9a\u5f8b\uff08\u5176\u4e2d f :: A -> B\uff09\uff1a (id :: B -> B) . f = f . (id :: A -> A) = f \u51fd\u5b50\uff08Functors\uff09 \u00b6 \u4e00\u4e2a\u8303\u7574\u4e2d\u7684\u6001\u5c04\u5c06\u4e24\u4e2a\u5bf9\u8c61\u8054\u7cfb\u8d77\u6765\uff0c\u800c\u51fd\u5b50\u5219\u4f1a\u5c06\u4e24\u4e2a\u8303\u7574\u8054\u7cfb\u8d77\u6765\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u51fd\u5b50\u5c31\u662f\u4ece\u4e00\u4e2a\u8303\u7574\u5230\u53e6\u4e00\u4e2a\u8303\u7574\u7684\u53d8\u6362\u3002\u6bd4\u5982\u5bf9\u4e8e\u8303\u7574 \\(\\mathbf{C}\\) \u3001 \\(\\mathbf{D}\\) \uff0c\u5b9a\u4e49\u51fd\u5b50 \\(F : \\mathbf{C}\\to\\mathbf{D}\\) \u6ee1\u8db3\uff1a \u5bf9\u4e8e \\(\\mathbf{C}\\) \u4e2d\u7684\u4efb\u610f\u5bf9\u8c61 \\(A\\) \uff0c\u5728 \\(\\mathbf{D}\\) \u4e2d\u90fd\u6709\u5bf9\u8c61 \\(F(A)\\) \u5bf9\u4e8e \\(\\mathbf{C}\\) \u4e2d\u7684\u4efb\u610f\u6001\u5c04 \\(f : A\\to B\\) \uff0c\u5728 \\(\\mathbf{D}\\) \u4e2d\u90fd\u6709\u6001\u5c04 \\(F(f) : F(A)\\to F(B)\\) \u4f8b \u9057\u5fd8\u51fd\u5b50\uff08forgetful functor\uff09 \\(U : \\mathbf{Grp}\\to\\mathbf{Set}\\) \uff0c\u5c06\u4e00\u4e2a\u7fa4\u6620\u5c04\u5230\u4e00\u4e2a\u96c6\u5408\u4e2d\uff0c\u5c06\u7fa4\u540c\u6001\u6620\u5c04\u5230\u96c6\u5408\u95f4\u7684\u51fd\u6570 \u5e42\u96c6\u51fd\u5b50\uff08power set functor\uff09 \\(P : \\mathbf{Set}\\to\\mathbf{Set}\\) \uff0c\u5c06\u4e00\u4e2a\u96c6\u5408\u6620\u5c04\u5230\u5b83\u7684\u5e42\u96c6\uff0c\u5c06\u539f\u96c6\u5408\u4e2d\u7684\u51fd\u6570 \\(f : A\\to B\\) \u6620\u5c04\u5230\u51fd\u6570 \\(P(f) : \\mathcal{P}(A)\\to\\mathcal{P}(B)\\) \uff0c\u5373\u4ece \\(U\\subseteq A\\) \u5230\u503c\u57df \\(f(U)\\subseteq B\\) \u7684\u6620\u5c04 \u81ea\u51fd\u5b50\uff08endofunctor\uff09 \\(1_{\\mathbf{C}} : \\mathbf{C}\\to\\mathbf{C}\\) \uff0c\u5c06\u4e00\u4e2a\u8303\u7574\u6620\u5c04\u5230\u5b83\u672c\u8eab \u51fd\u5b50\u516c\u7406 \u00b6 \u51fd\u5b50 \\(F : \\mathbf{C}\\to\\mathbf{D}\\) \u4e5f\u9700\u8981\u6ee1\u8db3\u4e24\u4e2a\u516c\u7406\uff1a \u5bf9\u4e8e\u4efb\u610f\u5bf9\u8c61 \\(X\\in\\mathbf{C}\\) \uff0c\u6052\u6709 \\(F(\\mathrm{id}_X)=\\mathrm{id}_{F(X)}\\) \u5bf9\u4e8e\u6001\u5c04 \\(f : Y\\to Z\\) \u3001 \\(g : X\\to Y\\) \uff0c\u6052\u6709 \\(F(f\\circ g) = F(f)\\circ F(g)\\) \\(\\mathbf{Hask}\\) \u8303\u7574\u4e0a\u7684\u51fd\u5b50 \u00b6 Haskell \u4e2d\u7684 Functor \u5b9a\u4e49\u662f\uff1a class Functor ( f :: * -> * ) where fmap :: ( a -> b ) -> f a -> f b \u5bf9\u4e8e Haskell \u4e2d\u7684 Functor\uff0c\u5b83\u5b9e\u9645\u4e0a\u662f\u4ece \\(\\mathbf{Hask}\\) \u8303\u7574\uff08types\uff09\u5230\u5b83\u5b50\u8303\u7574\u7684\u53d8\u6362\u3002\u6bd4\u5982\u5217\u8868\u51fd\u5b50 \\(\\texttt{[]} : \\mathbf{Hask}\\to\\mathbf{Lst}\\) \uff08\u5176\u4e2d \\(\\mathbf{Lst}\\) \u662f\u6240\u6709 Haskell \u4e2d\u5217\u8868\u7c7b\u578b\u6784\u6210\u7684\u8303\u7574\uff09 \u5b83\u4e5f\u8fbe\u6210\u4e86\u8303\u7574\u8bba\u4e2d\u5bf9\u4e8e\u51fd\u5b50\u7684\u8981\u6c42\u3002\u51fd\u5b50\u9700\u8981\u8fdb\u884c\u4e24\u4e2a\u64cd\u4f5c\uff1a\u5c06\u4e00\u4e2a\u8303\u7574\u4e2d\u7684\u5bf9\u8c61\u6620\u5c04\u5230\u53e6\u4e00\u4e2a\u8303\u7574\u4e2d\u3001\u5c06\u4e00\u4e2a\u8303\u7574\u4e2d\u7684\u6001\u5c04\u6620\u5c04\u5230\u53e6\u4e00\u4e2a\u8303\u7574\u4e2d\u3002\u4ee5 Maybe \u4e3a\u4f8b\uff0c\u5b83\u5b9e\u73b0\u4e86\u51fd\u5b50\u7684\u8981\u6c42\uff1a Maybe \u662f\u4e00\u4e2a\u7c7b\u578b\u6784\u9020\u5668\uff0c\u4ed6\u53ef\u4ee5\u5c06\u4efb\u610f\u7c7b\u578b T \u53d8\u6210\u65b0\u7c7b\u578b Maybe T\uff0c\u76f8\u5f53\u4e8e\u4ece \\(\\mathbf{Hask}\\) \u8303\u7574\u7684\u5bf9\u8c61\u53d8\u6210\u4e86 \\(\\mathbf{Maybe}\\) \u8303\u7574\u7684\u5bf9\u8c61 fmap \u51fd\u6570\u63a5\u6536\u4e00\u4e2a a -> b \u7c7b\u578b\u7684\u51fd\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a Maybe a -> Maybe b \u7c7b\u578b\u7684\u51fd\u6570\uff0c\u76f8\u5f53\u4e8e\u5c06 \\(\\mathbf{Hask}\\) \u8303\u7574\u4e2d\u7684\u6001\u5c04 \\(f : A\\to B\\) \u6620\u5c04\u6210\u4e86 \\(\\mathbf{Maybe}\\) \u8303\u7574\u4e2d\u7684\u6001\u5c04 \\(\\mathbf{Maybe}(f) : \\mathbf{Maybe}(A)\\to\\mathbf{Maybe}(B)\\) \u6ce8\u610f \u65f6\u523b\u8bb0\u4f4f\u8fd9\u91cc\u7814\u7a76\u7684\u662f \\(\\mathbf{Hask}\\) \u8303\u7574\u548c\u5b83\u7684\u5b50\u8303\u7574\uff0c\u5bf9\u8c61\u662f\u7c7b\u578b\u800c\u4e0d\u662f\u503c\uff0c\u6001\u5c04\u662f\u51fd\u6570\u4e5f\u6307\u7684\u662f\u4ece\u7c7b\u578b\u5230\u7c7b\u578b \u540c\u65f6\uff0cHaskell \u4e2d\u7684 Functor \u4e5f\u6ee1\u8db3\u51fd\u5b50\u516c\u7406\uff1a fmap id = id \u5373 fmap (id :: A -> A) = (id :: f A -> f A) fmap (f . g) = fmap f . fmap g \u5355\u5b50\uff08Monads\uff09 \u00b6 \u4e00\u4e2a\u5355\u5b50\u8bf4\u767d\u4e86\u4e0d\u8fc7\u5c31\u662f\u81ea\u51fd\u5b50\u8303\u7574\u4e0a\u7684\u4e00\u4e2a\u5e7a\u534a\u7fa4\u800c\u5df2 _(:\u0437\u300d\u2220)_ \u81ea\u51fd\u5b50\u5728\u524d\u9762\u8bf4\u5230\u8fc7\u662f\u4ece\u4e00\u4e2a\u8303\u7574\u5230\u81ea\u8eab\u7684\u4e00\u4e2a\u51fd\u5b50\uff0c\u5982\u8303\u7574 \\(\\mathbf{C}\\) \u4e0a\u7684\u81ea\u51fd\u5b50\u662f \\(F : \\mathbf{C}\\to\\mathbf{C}\\) \u3002\u81ea\u51fd\u5b50\u8303\u7574\u5c31\u662f\u5bf9\u8c61\u90fd\u662f\u81ea\u51fd\u5b50\u7684\u8303\u7574\u3002\u5e7a\u534a\u7fa4\u548c Haskell \u4e2d\u5b66\u5230\u7684 Monoid \u7c7b\u578b\u7c7b\u4e00\u6837\uff0c\u662f\u4e00\u4e2a\u6709\u53ef\u7ed3\u5408\u4e8c\u5143\u8fd0\u7b97\u548c\u5355\u4f4d\u5143\u7684\u4ee3\u6570\u7ed3\u6784\u3002\u56e0\u6b64\u5355\u5b50\u5c31\u662f\u4e00\u4e2a\u81ea\u51fd\u5b50\uff0c\u800c\u4e14\u5b83\u6709\u53ef\u7ed3\u5408\u4e8c\u5143\u8fd0\u7b97\uff08Haskell \u4e2d >=> \uff09\u548c\u5355\u4f4d\u5143\uff08Haskell \u4e2d return \uff09\u3002 \u4e00\u4e2a\u5355\u5b50 \\(M : \\mathbf{C}\\to\\mathbf{C}\\) \u8fd8\u5305\u542b\u4e24\u4e2a\u6001\u5c04\uff08\u5bf9\u4e8e\u8303\u7574 \\(\\mathbf{C}\\) \u4e2d\u7684\u6240\u6709\u5bf9\u8c61 \\(X\\) \uff09\uff1a \\(\\mathrm{unit}_X^M : X\\to M(X)\\) \\(\\mathrm{join}_X^M : M(M(X))\\to M(X)\\) \uff08\u5f53\u5f0f\u5b50\u4e2d\u7684\u5355\u5b50\u660e\u663e\u662f \\(M\\) \u65f6\uff0c\u53ef\u4ee5\u7701\u7565\u4e0a\u6807 \\({}^M\\) \uff09 Haskell \u4e2d Monad \u7684\u5b9a\u4e49\u662f\uff1a class Functor m => Monad m where return :: a -> m a ( >>= ) :: m a -> ( a -> m b ) -> m b \u5176\u4e2d\u5f88\u663e\u7136\u591a\u6001\u51fd\u6570 return \u5bf9\u5e94\u4e86\u5b9a\u4e49\u4e2d\u7684 \\(\\mathrm{unit}\\) \uff0c\u4f46\u662f >>= \u548c \\(\\mathrm{join}\\) \u7684\u5bf9\u5e94\u5173\u7cfb\u5e76\u4e0d\u660e\u663e\u3002\u56e0\u6b64 Haskell \u4e2d\u6709\u4e00\u4e2a\u5de5\u5177\u51fd\u6570 join \uff0c\u5b83\u7684\u6548\u679c\u5c31\u662f\u5b9a\u4e49\u4e2d\u7684 \\(\\mathrm{join}\\) \uff0c\u800c\u4e14\u5b83\u53ef\u4ee5\u548c >>= \u4e92\u76f8\u5b9a\u4e49\uff1a join :: Monad m => m ( m a ) -> m a join x = x >>= id ( >>= ) :: m a -> ( a -> m b ) -> m b x >>= f = join $ fmap f x \u6240\u4ee5 Haskell \u4e2d\u4e3a Monad \u8981\u6c42\u5b9a\u4e49 >>= \u5c31\u76f8\u5f53\u4e8e\u5b9a\u4e49\u4e86 \\(\\mathrm{join}\\) \u4f8b\u5982\uff0c\u5e42\u96c6\u51fd\u5b50 \\(P : \\mathbf{Set}\\to\\mathbf{Set}\\) \u4e5f\u662f\u4e00\u4e2a\u5355\u5b50\uff0c\u53ef\u4ee5\u4e3a\u5b83\u5b9a\u4e49 \\(\\mathrm{unit}\\) \u548c \\(\\mathrm{join}\\) \u4e24\u4e2a\u6001\u5c04\u3002Haskell \u4e2d\u7684\u5217\u8868\u4e5f\u53ef\u4ee5\u8fd1\u4f3c\u770b\u4f5c\u5e42\u96c6\u51fd\u5b50\u3002 \u6001\u5c04/\u51fd\u6570\u7684\u7c7b\u578b \u5e42\u96c6\u51fd\u5b50 Haskell \u4e2d\u5217\u8868 \u4e00\u4e2a\u96c6\u5408 \\(S\\) \u548c\u4e00\u4e2a\u6001\u5c04 \\(f : A\\to B\\) \u4e00\u4e2a\u7c7b\u578b T \u548c\u4e00\u4e2a\u51fd\u6570 f :: A -> B \\(P(f) : \\mathcal{P}(A)\\to\\mathcal{P}(B)\\) fmap f :: [A] -> [B] \\(\\mathrm{unit}_S : S\\to\\mathcal{P}(S)\\) return :: T -> [T] \\(\\mathrm{join}_S : \\mathcal{P}(\\mathcal{P}(S))\\to\\mathcal{P}(S)\\) join :: [[T]] -> [T] \u6001\u5c04/\u51fd\u6570\u7684\u5b9a\u4e49 \u5e42\u96c6\u51fd\u5b50 Haskell \u4e2d\u5217\u8868 \\((\\mathcal{P}(f))(S) = \\\\{f(a):a\\in S\\\\}\\) fmap f xs = [ f a | a <- xs ] \\(\\mathrm{unit}_S(x) = \\\\{x\\\\}\\) return x = [x] \\(\\mathrm{join}_S(L) = \\bigcup L\\) join xs = concat xs \u5355\u5b50\u516c\u7406 \u00b6 \u7ed9\u5b9a\u4e00\u4e2a\u5355\u5b50 \\(M : \\mathbf{C}\\to\\mathbf{C}\\) \uff0c\u548c\u4e00\u4e2a\u6001\u5c04 \\(f : A\\to B\\) \uff08\u5176\u4e2d \\(A,B\\in \\mathbf{C}\\) \uff09\uff0c\u90a3\u4e48\u6ee1\u8db3\u4e0b\u9762\u56db\u6761\u5b9a\u5f8b\uff1a \\(\\mathrm{join}\\circ M(\\mathrm{join})=\\mathrm{join}\\circ\\mathrm{join}\\) \\(\\mathrm{join}\\circ M(\\mathrm{unit})=\\mathrm{join}\\circ\\mathrm{unit}=\\mathrm{id}\\) \\(\\mathrm{unit}\\circ f = M(f)\\circ\\mathrm{unit}\\) \\(\\mathrm{join}\\circ M(M(f)) = M(f)\\circ\\mathrm{join}\\) \u4e5f\u53ef\u4ee5\u5f88\u81ea\u7136\u5730\u5c06\u5176\u8f6c\u5316\u4e3a Haskell \u4e2d\u7684\u8868\u8ff0\uff1a join . fmap join = join . join join . fmap return = join . return = id return . f = fmap f . return join . fmap (fmap f) = fmap f . join \u5728 Haskell \u4e2d\uff0c\u4f7f\u7528 >>= \u4e5f\u6709\u4e09\u4e2a\u5b9a\u5f8b\u548c\u8fd9\u56db\u4e2a\u5b9a\u5f8b\u662f\u7b49\u4ef7\u7684\uff1a return x >>= f = f x return x >>= f = join ( fmap f ( return x )) = join ( fmap f . return $ x ) = join ( return ( f x )) = join ( return . f $ x ) = join . return $ ( f x ) = id ( f x ) = f x m >>= return = m m >>= return = join ( fmap return m ) = join . fmap return $ m = id m = m (m >>= f) >>= g = m >>= (\\x -> f x >>= g) ( m >>= f ) >>= g = ( join ( fmap f m )) >>= g = join ( fmap g ( join ( fmap f m ))) = join . fmap g . join $ fmap f m = join . join . fmap ( fmap g ) $ fmap f m = join . join . fmap ( fmap g ) . fmap f $ m = join . join . fmap ( fmap g . f ) $ m = join . fmap join . fmap ( fmap g . f ) $ m = join . fmap ( join . ( fmap g . f )) $ m = join . fmap ( \\ x -> join ( fmap g ( f x ))) $ m = join . fmap ( \\ x -> f x >>= g ) $ m = join ( fmap ( \\ x -> f x >>= g ) m ) = m >>= ( \\ x -> f x >>= g ) \u6709\u5173 do \u8bed\u53e5\u548c >=> \u7684\u516c\u7406\u8868\u8ff0\u5728\u4e0a\u6587\u4e2d\u5df2\u7ecf\u8bf4\u8fc7 \u540e\u8bb0 \u00b6 \u5543\u4e86\u5c06\u8fd1\u4e00\u4e2a\u6708\uff0c\u7b97\u662f\u628a Haskell \u7684\u4e3b\u8981\u5185\u5bb9\u90fd\u5543\u5b8c\u4e86\u3002\u4e3b\u8981\u5c31\u662f\u524d\u671f\u770b Learn You a Haskell \uff0c\u540e\u671f\u770b Typeclassopedia \uff0c\u90fd\u662f pdcxs \u63a8\u8350\u7ed9\u7684\u6559\u7a0b\u3002\u4f46\u662f\u4e00\u5806\u89c6\u9891\u4e00\u4e2a\u90fd\u6ca1\u6709\u8010\u5fc3\u770b\u8fdb\u53bbqwq \u540e\u9762\u7684\u90e8\u5206\u7684\u7406\u89e3\u611f\u89c9\u4e5f\u6ca1\u5230\u4f4d\uff0cCategory\u3001Arrow \u7b49\u8fd9\u4e9b\u7c7b\u578b\u7c7b\u4e5f\u5c31\u662f\u5927\u81f4\u5730\u770b\u4e86\u4e00\u773c\uff0c\u751a\u81f3\u6709\u4ec0\u4e48\u7528\u90fd\u4e0d\u592a\u6e05\u695a_(:\u0437\u300d\u2220)_ \u611f\u89c9 Haskell \u8fd9\u95e8\u8bed\u8a00\u786e\u5b9e\u5f88\u795e\u5947\uff0c\u5f88\u591a\u8bed\u6cd5\u90fd\u5f88\u6709\u610f\u601d\uff0c\u800c\u4e14\u53ef\u4ee5\u505a\u5230\u975e\u5e38\u8d34\u8fd1\u6570\u5b66\u3001\u8d34\u8fd1\u6570\u5b66\u6982\u5ff5\u3002\u5b66\u7684\u65f6\u5019\u4e5f\u662f\u8d8a\u5b66\u5751\u8d8a\u591a\uff0c\u5148\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u5f15\u7533\u5230\u4e86 lambda \u6f14\u7b97\uff0c\u7136\u540e\u662f\u51fd\u5b50\u7b49\u4e00\u7cfb\u5217\u6982\u5ff5\u5f15\u7533\u5230\u4e86\u8303\u7574\u8bba\uff0c\u76ee\u524d\u8303\u7574\u8bba\u7b80\u5355\u5730\u770b\u4e86\u4e00\u90e8\u5206\uff0clambda \u6f14\u7b97\u4e5f\u6ca1\u6df1\u5165\u7814\u7a76\uff0c\u4ee5\u540e\u6709\u65f6\u95f4\u518d\u8bf4\u4e86\uff08\u5495\u5495\u5495\uff09 \u73b0\u5728\u611f\u89c9\u6211\u5b66\u5230\u7684 Haskell \u7b80\u76f4\u662f\u76ae\u6bdb\uff0c\u8fd8\u6709\u4e00\u5806\u6e90\u7801\u91cc\u7684\u4e1c\u897f\u4e0d\u77e5\u9053\u662f\u600e\u4e48\u56de\u4e8b\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e#\uff0c~\uff09\uff0c\u4e5f\u8fd8\u6709\u4e00\u5806\u7c7b\u578b\u7c7b\u548c\u7528\u6cd5\u6ca1\u6709\u5b66\u5230\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e Monad Transformer\u3001Writer\u3001Reader\u3001State\u3001Comonad\u3001MonadFix\u3001Lens\u3001Parsec\u3001\u2026\u2026\uff09 md\uff0c\u8fd9\u4e48\u4e00\u770b\u5dee\u7684\u8fd8\u771f\u591a \uff0c\u4ee5\u540e\u6709\u65f6\u95f4\u518d\u6162\u6162\u5b66\u4e86\uff0c\u8fd9\u4e2a\u5047\u671f\u8fd8\u6709\u597d\u591a\u5176\u5b83\u4e8b\u8981\u5e72\u5462\uff0cHaskell \u8fd9\u8fb9\u5148\u6478\u4e86_(:\u0437\u300d\u2220)_ Reference \u00b6 Learn You a Haskell Writing foldl using foldr - StackOverflow Haskell\uff1a\u7528foldr\u5b9a\u4e49foldl Typeclassopedia - Haskell wiki Hoogle Functors, Applicatives, And Monads In Pictures Haskell\u5b66\u4e60 - functor Haskell\u8bed\u8a00\u5b66\u4e60\u7b14\u8bb0\uff088\uff09Monoid - zwvista Haskell\u8bed\u8a00\u5b66\u4e60\u7b14\u8bb0\uff0816\uff09Alternative - zwvista Haskell\u8bed\u8a00\u5b66\u4e60\u7b14\u8bb0\uff0840\uff09Arrow\uff081\uff09 - zwvista 24 Days of GHC Extensions: Arrows - Tom Ellis Haskell\u8bed\u8a00\u5b66\u4e60\u7b14\u8bb0\uff0847\uff09Arrow\uff082\uff09 - zwvista Haskell/Category theory - wikibooks Category theory - wikipedia \u8303\u7574\u8bba - \u7ef4\u57fa\u767e\u79d1 Monad (category theory) - wikipedia Functor - wikipedia \"The End?\"","title":"Haskell"},{"location":"cs/pl/haskell/#_1","text":"+ - * / () \uff1a\u52a0\u51cf\u4e58\u9664 div \uff1a\u6574\u9664 mod \uff1a\u53d6\u6a21 True False \uff1a\u5e03\u5c14\u503c || && not \uff1a\u6216\u4e14\u975e == \uff1a\u6761\u4ef6\u5224\u65ad\uff0c\u76f8\u7b49 /= \uff1a\u6761\u4ef6\u5224\u65ad\uff0c\u4e0d\u7b49","title":"\u57fa\u7840\u8fd0\u7b97"},{"location":"cs/pl/haskell/#_2","text":"Haskell \u4e2d\u8c03\u7528\u51fd\u6570\u4e0d\u52a0\u62ec\u53f7\uff0c\u5148\u5199\u51fa\u51fd\u6570\u540d\uff0c\u7136\u540e\u9010\u4e2a\u5217\u51fa\u53c2\u6570\uff0c\u7528\u7a7a\u683c\u9694\u5f00\uff1a ghci > max 1 2 2 \u524d\u7f00\uff08prefix\uff09\u51fd\u6570\u4e0e\u4e2d\u7f00\uff08infix\uff09\u51fd\u6570\u8f6c\u6362\uff1a \u5bf9\u524d\u7f00\u51fd\u6570\u52a0 `` \u4f7f\u5176\u53d8\u6210\u4e2d\u7f00\u51fd\u6570 \u5bf9\u4e2d\u7f00\u51fd\u6570\u52a0 () \u4f7f\u5176\u53d8\u6210\u524d\u7f00\u51fd\u6570 ghci > 4 ` div ` 2 2 ghci > 1 ` max ` 2 2 ghci > ( + ) 1 2 3 ghci > ( || ) True False True","title":"\u51fd\u6570\u8c03\u7528"},{"location":"cs/pl/haskell/#list","text":"\u5217\u8868\u662f Haskell \u4e2d\u5f88\u5e38\u89c1\u7684\u6570\u636e\u7c7b\u578b\uff0c\u548c Python \u4e2d\u4e0d\u540c\uff0cHaskell \u4e2d\u7684\u5217\u8868\u4e2d\u7684\u6240\u6709\u5143\u7d20\u5fc5\u987b\u662f\u540c\u4e00\u4e2a\u7c7b\u578b\u3002 \u4ee5\u4e0b\u662f\u5217\u8868\u5e38\u7528\u7684\u51fd\u6570\uff1a (++) :: [a] -> [a] -> [a]\uff1a\u5408\u5e76\u4e24\u4e2a\u5217\u8868 (:) :: a -> [a] -> [a]\uff1a\u5c06\u5355\u4e2a\u5143\u7d20\u5e76\u5165\u5217\u8868\u3002[1, 2, 3] \u662f 1:2:3:[] \u7684\u8bed\u6cd5\u7cd6 (!!) :: [a] -> Int -> a\uff1a\u901a\u8fc7\u7d22\u5f15\u53d6\u51fa\u67d0\u4e2a\u4f4d\u7f6e\u4e0a\u7684\u5143\u7d20\u3002a !! 1 \u76f8\u5f53\u4e8e Python \u4e2d\u7684 a[1] head :: [a] -> a\uff1a\u8fd4\u56de\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20 tail :: [a] -> [a]\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u9664\u53bb\u7b2c\u4e00\u4e2a\u5143\u7d20\u540e\u7684\u5217\u8868\uff08\u82e5\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u5219\u8fd4\u56de\u7a7a\u5217\u8868[]\uff09 last :: [a] -> a\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u5143\u7d20 init :: [a] -> [a]\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u9664\u53bb\u6700\u540e\u4e00\u4e2a\u5143\u7d20\u540e\u7684\u5217\u8868 length :: Foldable t => t a -> Int\uff1a\u8fd4\u56de\u5217\u8868\u7684\u957f\u5ea6 null :: Foldable t => t a -> Bool\uff1a\u8fd4\u56de\u5217\u8868\u662f\u5426\u4e3a\u7a7a reverse :: [a] -> [a]\uff1a\u8fd4\u56de\u7ffb\u8f6c\u540e\u7684\u5217\u8868 take :: Int -> [a] -> [a]\uff1a\u8fd4\u56de\u5217\u8868a\u7684\u524dn\u4e2a\u5143\u7d20\u7684\u5217\u8868(take n a) drop :: Int -> [a] -> [a]\uff1a\u8fd4\u56de\u5217\u8868a\u4e2d\u9664\u53bb\u524dn\u4e2a\u5143\u7d20\u540e\u7684\u5217\u8868(drop n a) maximum :: (Foldable t, Ord a) => t a -> a\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u7684\u6700\u5927\u503c minimum :: (Foldable t, Ord a) => t a -> a\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u7684\u6700\u5c0f\u503c sum :: (Foldable t, Num a) => t a -> a\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u6240\u6709\u5143\u7d20\u7684\u548c product :: (Foldable t, Num a) => t a -> a\uff1a\u8fd4\u56de\u5217\u8868\u4e2d\u6240\u6709\u5143\u7d20\u7684\u79ef elem :: (Foldable t, Eq a) => t a -> Bool\uff1a\u5224\u65ad\u503cn\u662f\u5426\u5728\u5217\u8868a\u4e2d elem n a -- \u6216 n ` elem ` a --\u7528``\u5305\u4e0a\u53ef\u4ee5\u53d8\u6210\u4e2d\u7f00\u51fd\u6570\u4f7f\u7528","title":"List"},{"location":"cs/pl/haskell/#texas-ranges","text":"\u4f7f\u7528 .. \u53ef\u4ee5\u8868\u793a\u51fa\u8303\u56f4\u5e76\u81ea\u52a8\u63a8\u5bfc\uff1a ghci > [ 1 .. 10 ] [ 1 , 2 , 3 , 4 , 5 , 6 , 7 , 8 , 9 , 10 ] ghci > [ 'a' .. 'z' ] \"abcdefghijklmnopqrstuvwxyz\" ghci > [ 'K' .. 'Z' ] \"KLMNOPQRSTUVWXYZ\" ghci > [ 2 , 4 .. 20 ] [ 2 , 4 , 6 , 8 , 10 , 12 , 14 , 16 , 18 , 20 ] ghci > [ 3 , 6 .. 20 ] [ 3 , 6 , 9 , 12 , 15 , 18 ] ghci > [ 5 , 4 .. 1 ] [ 5 , 4 , 3 , 2 , 1 ] \u4e5f\u53ef\u4ee5\u7528\u6765\u751f\u6210\u65e0\u7a77\u5217\u8868\uff0c\u5982 [1..]\u3001[1, 3..]\u3002\u540c\u65f6\u4e5f\u6709\u51fd\u6570\u53ef\u4ee5\u751f\u6210\u65e0\u7a77\u5217\u8868\uff1a cycle :: [a] -> [a]\uff1a\u5c06\u539f\u5217\u8868\u4e0d\u65ad\u5faa\u73af\u751f\u6210\u65e0\u7a77\u5217\u8868 repeat :: a -> [a]\uff1a\u5c06\u4f20\u5165\u7684\u503c\u4e0d\u65ad\u91cd\u590d\u751f\u6210\u65e0\u7a77\u5217\u8868 replicate :: Int -> a -> [a]\uff1a\u5c06\u503ca\u91cd\u590dn\u6b21\uff0c\u8fd4\u56de\u751f\u6210\u7684\u5217\u8868(replicate n a)","title":"Texas ranges"},{"location":"cs/pl/haskell/#list-comprehension","text":"Haskell \u4e2d\u4e5f\u6709\u5217\u8868\u63a8\u5bfc\uff0c\u5f62\u5f0f\u662f\u4e00\u4e2a\u4e2d\u62ec\u53f7\uff0c\u5de6\u4fa7\u4e3a\u8868\u8fbe\u5f0f\uff0c\u53f3\u4fa7\u4e3a\u53d8\u91cf\u7684\u8303\u56f4\u548c\u7ea6\u675f\u6761\u4ef6 ghci > [ x * 2 | x <- [ 1 .. 10 ]] [ 2 , 4 , 6 , 8 , 10 , 12 , 14 , 16 , 18 , 20 ] ghci > [ x * 2 | x <- [ 1 .. 10 ], x * 2 >= 12 ] [ 12 , 14 , 16 , 18 , 20 ] ghci > [ x | x <- [ 50 .. 100 ], x ` mod ` 7 == 3 ] [ 52 , 59 , 66 , 73 , 80 , 87 , 94 ] ghci > [ x * y | x <- [ 2 , 5 , 10 ], y <- [ 8 , 10 , 11 ]] [ 16 , 20 , 22 , 40 , 50 , 55 , 80 , 100 , 110 ]","title":"List comprehension"},{"location":"cs/pl/haskell/#tuple","text":"Haskell\u4e2d\u7684\u5143\u7ec4\u53ef\u4ee5\u6709\u4e0d\u540c\u957f\u5ea6\uff0c\u5143\u7d20\u53ef\u4ee5\u6709\u4e0d\u540c\u7c7b\u578b\u3002\u5e76\u4e14\u4e00\u4e2a\u5143\u7ec4\u7684\u7c7b\u578b\u7531\u5176\u4e2d\u6240\u6709\u5143\u7d20\u7684\u7c7b\u578b\u5171\u540c\u51b3\u5b9a\u3002\u5b83\u7684\u5e38\u7528\u51fd\u6570\uff1a fst :: (a, b) -> a\uff1a\u8fd4\u56de\u542b\u6709\u4e24\u4e2a\u5143\u7d20\u5143\u7ec4\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20 snd :: (a, b) -> b\uff1a\u8fd4\u56de\u542b\u6709\u4e24\u4e2a\u5143\u7d20\u5143\u7ec4\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20 zip :: [a] -> [b] -> [(a, b)]\uff1a\u63a5\u6536\u4e24\u4e2a\u5217\u8868\uff0c\u8fd4\u56de\u4e00\u4e2a\u5217\u8868\uff0c\u6bcf\u4e2a\u5143\u7d20\u662f\u4f9d\u6b21\u5c06\u4e24\u4e2a\u5217\u8868\u4e2d\u5143\u7d20\u914d\u5bf9\u6210\u7684\u4e8c\u5143\u7ec4","title":"Tuple"},{"location":"cs/pl/haskell/#syntax-in-functions","text":"\u51fd\u6570\u53ef\u4ee5\u76f4\u63a5\u5b9a\u4e49\uff1a plus x y = x + y \u8fd9\u65f6Haskell\u4f1a\u81ea\u52a8\u63a8\u65ad\u51fd\u6570\u7684\u7c7b\u578b\u4e3a(Num a) => a -> a -> a\u3002\u4f46\u662f\u6700\u597d\u5728\u5b9a\u4e49\u51fd\u6570\u524d\u58f0\u660e\u51fd\u6570\u7684\u7c7b\u578b\uff1a plus :: ( Num a ) => a -> a -> a plus x y = x + y","title":"Syntax in Functions"},{"location":"cs/pl/haskell/#pattern-matching","text":"\u5b9a\u4e49\u51fd\u6570\u65f6\u53ef\u4ee5\u4f7f\u7528\u6a21\u5f0f\u5339\u914d\u8bed\u6cd5\u3002\u8fd0\u884c\u65f6\u4f9d\u6b21\u5c06\u8f93\u5165\u4e0e\u7ed9\u51fa\u7684\u6a21\u5f0f\u76f8\u5339\u914d\uff0c\u5982\u679c\u5339\u914d\uff0c\u5c31\u6267\u884c\u5bf9\u5e94\u64cd\u4f5c\uff1b\u4e0d\u5339\u914d\uff0c\u5c31\u7ee7\u7eed\u4e0e\u4e0b\u4e00\u4e2a\u6a21\u5f0f\u76f8\u5339\u914d\uff0c\u76f4\u5230\u5339\u914d\u6210\u529f\uff0c\u4e5f\u56e0\u6b64\uff0c\u6700\u540e\u5fc5\u987b\u8981\u7ed9\u51fa\u4e00\u79cd\u901a\u7528\u7684\u5339\u914d\u6765\u63a5\u6536\u4e0e\u7ed9\u51fa\u6a21\u5f0f\u5168\u4e0d\u5339\u914d\u7684\u8f93\u5165\u3002\u5982\uff1a factorial :: ( Integral a ) => a -> a factorial 0 = 1 factorial n = n * factorial ( n - 1 ) first :: ( a , b , c ) -> a first ( x , _ , _ ) = x second :: ( a , b , c ) -> b second ( _ , y , _ ) = y third :: ( a , b , c ) -> c third ( _ , _ , z ) = z \u5176\u4e2d _ \u8868\u793a\u4efb\u4f55\u503c\uff0c\u4e14\u4e0d\u5173\u5fc3\u5b83\u7684\u5185\u5bb9\uff0c\u53ea\u662f\u7528\u6765\u5360\u4f4d \u5217\u8868\u7684 (:) \u64cd\u4f5c\u4e5f\u53ef\u4ee5\u7528\u6765\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\uff1a head' :: [ a ] -> a head' [] = error \"Can't call head on an empty list, dummy!\" head' ( x : _ ) = x sum' :: ( Num a ) => [ a ] -> a sum' [] = 0 sum' ( x : xs ) = x + sum' xs \u4f46 (++) \u64cd\u4f5c\u4e0d\u53ef\u4ee5\u7528\u6765\u6a21\u5f0f\u5339\u914d \u5728\u9488\u5bf9\u5217\u8868\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\u65f6\uff0c\u5982\u679c\u540c\u65f6\u9700\u8981\u6574\u4e2a\u5217\u8868\u3001\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u503c\u3001\u5217\u8868\u9664\u7b2c\u4e00\u4e2a\u503c\u5916\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u4f7f\u7528 xs@(q:qs) \u3002\u6bd4\u5982 [1, 2, 3] \u901a\u8fc7 xs@(q:qs) \u5339\u914d\u540e\uff0cxs \u4e3a [1, 2, 3]\uff0cq \u4e3a 1\uff0cqs \u4e3a [2, 3]","title":"Pattern matching"},{"location":"cs/pl/haskell/#guard-syntax","text":"\u5728\u51fd\u6570\u7684\u5b9a\u4e49\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5b88\u536b\uff08guard\uff09\u8bed\u6cd5\uff1a max' :: ( Ord a ) => a -> a -> a max' a b | a > b = a | otherwise = b \u5148\u7ed9\u51fa\u4f20\u5165\u7684\u53c2\u6570\u53d8\u91cf\uff0c\u7136\u540e\u4e0b\u4e00\u884c\u7f29\u8fdb\u540e\u52a0 |\uff0c| \u540e\u9762\u7b49\u53f7\u524d\u8868\u793a\u8fdb\u884c\u7684\u5224\u65ad\uff0c\u5982\u679c\u4e3a True \u5219\u8fd4\u56de\u8fd9\u4e2a\u7b49\u53f7\u540e\u9762\u7684\u503c\uff1b\u5982\u679c\u4e3a False \u5219\u7ee7\u7eed\u5224\u65ad\u4e0b\u4e00\u884c\uff0c\u76f4\u5230 otherwise","title":"Guard syntax"},{"location":"cs/pl/haskell/#case-expressions","text":"\u5728\u51fd\u6570\u7684\u5b9a\u4e49\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 case \u8868\u8fbe\u5f0f\u6765\u914d\u5408\u6a21\u5f0f\u5339\u914d\u4f7f\u7528\uff1a case expression of pattern -> result pattern -> result ... \u4f8b\u5982\uff1a head' :: [ a ] -> a head' [] = error \"No head for empty lists!\" head' ( x : _ ) = x -- \u7b49\u4ef7\u4e8e\uff1a head' :: [ a ] -> a head' xs = case xs of [] -> error \"No head for empty lists!\" ( x : _ ) -> x describeList :: [ a ] -> String describeList xs = \"The list is \" ++ case xs of [] -> \"empty.\" [ x ] -> \"a singleton list.\" xs -> \"a longer list.\" -- \u7b49\u4ef7\u4e8e\uff1a describeList :: [ a ] -> String describeList xs = \"The list is \" ++ what xs where what [] = \"empty.\" what [ x ] = \"a singleton list.\" what xs = \"a longer list.\"","title":"Case expressions"},{"location":"cs/pl/haskell/#where","text":"\u58f0\u660e\u5728\u51fd\u6570\u5b9a\u4e49\u4e2d\u8981\u4f7f\u7528\u7684\u5c40\u90e8\u53d8\u91cf\uff0c\u53ef\u4ee5\u4f7f\u7528 where \u5173\u952e\u5b57\uff1a initials :: String -> String -> String initials firstname lastname = [ f ] ++ \". \" ++ [ l ] ++ \".\" where ( f : _ ) = firstname ( l : _ ) = lastname \u5728 where \u4e2d\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4e0a\u9762\u7684\u6a21\u5f0f\u5339\u914d","title":"where"},{"location":"cs/pl/haskell/#let","text":"let <bindings> in <expression> \u8bed\u6cd5\u53ef\u4ee5\u5728\u51fd\u6570\u7684\u5b9a\u4e49\u4e2d\u4f7f\u7528\uff0c\u4e5f\u53ef\u4ee5\u5728\u666e\u901a\u7b97\u5f0f\u6216\u5217\u8868\u4e2d\u4f7f\u7528\uff1a cylinder :: ( RealFloat a ) => a -> a -> a cylinder r h = let sideArea = 2 * pi * r * h topArea = pi * r ^ 2 in sideArea + 2 * topArea ghci > 4 * ( let a = 9 in a + 1 ) + 2 42 ghci > [ let square x = x * x in ( square 5 , square 3 , square 2 )] [( 25 , 9 , 4 )]","title":"let"},{"location":"cs/pl/haskell/#if-statement","text":"Haskell \u4e2d\u7684 if \u8bed\u53e5\u4e3a\uff1a if ... then ... else ... -- or if ... then ... else ... -- or if ... then ... else if ... then ... else ... \u5176\u4e2d\u6700\u540e\u4e00\u4e2a else \u65e0\u8bba\u5982\u4f55\u4e5f\u4e0d\u53ef\u4ee5\u7701\u53bb","title":"if statement"},{"location":"cs/pl/haskell/#higher-order-functions","text":"","title":"Higher Order Functions"},{"location":"cs/pl/haskell/#currying","text":"Haskell \u4e2d\u7684\u51fd\u6570\u662f\u67ef\u91cc\u5316\uff08Currying\uff09\u7684\uff0c\u53ef\u4ee5\u770b\u4f5c\u6240\u6709\u51fd\u6570\u90fd\u53ea\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u800c\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\u7684\u51fd\u6570\u5b9e\u9645\u4e0a\u662f\u8fd9\u4e2a\u51fd\u6570\u63a5\u6536\u4e86\u7b2c\u4e00\u4e2a\u53c2\u6570\u540e\u8fd4\u56de\u4e86\u4e00\u4e2a\u63a5\u6536\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684\u51fd\u6570\uff0c\u7136\u540e\u7528\u8fd9\u4e2a\u51fd\u6570\u63a5\u6536\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u8fd4\u56de\u6700\u7ec8\u7684\u7ed3\u679c\u3002\u6bd4\u5982 max \u51fd\u6570\uff0c\u5b83\u7684\u7c7b\u578b\u7b7e\u540d\u662f\uff1a max :: Ord a => a -> a -> a \u53ef\u4ee5\u770b\u6210 a -> (a -> a)\uff0c\u5373\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2a\u7c7b\u578b\u4e3a a -> a \u7684\u51fd\u6570\u3002\u6bd4\u5982 max 1 \u7684\u7c7b\u578b\u7b7e\u540d\u662f\uff1a max 1 :: (Ord a, Num a) => a -> a \u56e0\u6b64 max 1 2\uff0c\u4e5f\u5c31\u7b49\u540c\u4e8e (max 1) 2\uff0c\u5373\u5c06\u51fd\u6570 max 1 \u5e94\u7528\u5728\u6570\u5b572\u4e0a \u540c\u65f6\uff0c\u51fd\u6570\u4e5f\u53ef\u4ee5\u63a5\u6536\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u53c2\u6570\u6709\u51fd\u6570\u7684\u51fd\u6570\u5c31\u88ab\u79f0\u4e3a\u9ad8\u9636\u51fd\u6570\uff08Higher Order Functions\uff09","title":"Currying"},{"location":"cs/pl/haskell/#_3","text":"","title":"\u4e00\u4e9b\u9ad8\u9636\u51fd\u6570"},{"location":"cs/pl/haskell/#function-application","text":"\u51fd\u6570\u5e94\u7528\u53ef\u4ee5\u4f7f\u7528 $ \uff0c $ \u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u7684\u7c7b\u578b\u662f\uff1a ($) :: (a -> b) -> a -> b \u5b83\u53ef\u4ee5\u6539\u53d8\u51fd\u6570\u7ed3\u5408\u4f18\u5148\u7ea7\uff0c\u5c06\u5de6\u4fa7\u51fd\u6570\u5e94\u7528\u4e8e\u5168\u90e8\u53f3\u4fa7\u5185\u5bb9\u4e0a\uff0c\u76f8\u5f53\u4e8e\u7ed9\u53f3\u4fa7\u6574\u4f53\u52a0\u4e0a\u4e86\u62ec\u53f7\u3002\u5426\u5219\u51fd\u6570\u9ed8\u8ba4\u5de6\u7ed3\u5408\uff0c\u4f1a\u4f9d\u6b21\u5411\u53f3\u5e94\u7528\u800c\u4e0d\u4f1a\u5e94\u7528\u5728\u6574\u4f53\u4e0a\u3002 f $ g x -- \u7b49\u4ef7\u4e8e f ( g x ) ----- f g x -- \u7b49\u4ef7\u4e8e ( f g ) x","title":"Function application"},{"location":"cs/pl/haskell/#function-composition","text":"\u51fd\u6570\u590d\u5408\u53ef\u4ee5\u4f7f\u7528 . \uff0c . \u4e5f\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u7684\u7c7b\u578b\u662f\uff1a (.) :: (b -> c) -> (a -> b) -> a -> c \u5b9a\u4e49\u662f\uff1a f . g = \\x -> f (g x) \u4f46\u662f\u51fd\u6570\u590d\u5408\u7684\u4f18\u5148\u7ea7\u8981\u6bd4\u51fd\u6570\u6267\u884c\u4f4e\uff0c\u6bd4\u5982\uff1a sum . replicate 5 . max 6.7 8.9 \u4f1a\u5148\u6267\u884c max 6.7 8.9 \u5e76\u8fd4\u56de 8.9\uff0c\u7136\u540e\u5c06 sum\u3001replicate 5\u30018.9 \u590d\u5408\uff0c\u4f46\u4e24\u4e2a\u51fd\u6570\u65e0\u6cd5\u548c\u4e00\u4e2a\u503c (8.9) \u590d\u5408\uff0c\u6240\u4ee5\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\u56e0\u6b64\u8981\u4f7f\u7528 $ \u6765\u89c4\u5b9a\u5148\u590d\u5408\u518d\u6267\u884c\uff1a sum . replicate 5 . max 6.7 $ 8.9","title":"Function Composition"},{"location":"cs/pl/haskell/#lambda","text":"Haskell \u8bed\u8a00\u4e2d\u7684 lambda \u8868\u8fbe\u5f0f\u662f\u7528 \\ \u6765\u8868\u793a\u7684\uff08\u56e0\u4e3a\u770b\u7740\u50cf \\(\\mathtt{\\lambda}\\) \uff1f\uff09 \u5177\u4f53\u8bed\u6cd5\u662f \\ para1 para2 ... -> return \"->\" \u524d\u7684 para1 para2 ... \u662f\u4f20\u5165\u53c2\u6570\uff0c\u5355\u4e2a\u591a\u4e2a\u90fd\u53ef\u4ee5\uff0c\u9700\u8981\u7528\u7a7a\u683c\u9694\u5f00\uff1b\"->\" \u540e\u7684 return \u662f\u8ba1\u7b97\u5f97\u5230\u7684\u8fd4\u56de\u503c\u3002\u4e00\u822c\u9700\u8981\u7528\u62ec\u53f7\u5c06\u6574\u4e2a\u8868\u8fbe\u5f0f\u62ec\u8d77\u6765\uff0c\u9632\u6b62\u8fd4\u56de\u503c\u90e8\u5206\u4e00\u76f4\u5411\u53f3\u5ef6\u4f38\u3002","title":"lambda"},{"location":"cs/pl/haskell/#foldscan","text":"fold \u548c scan \u90fd\u63a5\u6536\u4e09\u4e2a\u53c2\u6570\uff08\u4e00\u4e2a\u4e8c\u5143\u51fd\u6570\uff0c\u4e00\u4e2a\u521d\u59cb\u503c accumulator\uff0c\u4e00\u4e2a\u8981\u6298\u53e0\u7684\u5217\u8868\uff09\uff0cfold \u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u800c scan \u8fd4\u56de\u4e00\u4e2a\u5217\u8868 \u4f20\u5165\u7684\u4e8c\u5143\u51fd\u6570 f :: a -> b -> b \u5c06 accumulator \u548c\u4ece\u5217\u8868\u4e2d\u53d6\u51fa\u7684\u503c\u4e00\u540c\u4f20\u5165\uff08l \u5219 accumulator \u5728\u5de6\u8fb9\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0cr \u5219 accumulator \u5728\u53f3\u8fb9\u4e3a\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff09","title":"fold\u548cscan"},{"location":"cs/pl/haskell/#modules","text":"Haskell \u4f1a\u81ea\u52a8\u52a0\u8f7d Prelude \u6a21\u5757\uff08module\uff09\uff0c\u5982\u679c\u5728 GHCi \u4e2d\u518d\u52a0\u8f7d\u5176\u4ed6\u6a21\u5757\uff0c\u9700\u8981\u4f7f\u7528 :m + ... \uff0c\u6bd4\u5982\u52a0\u8f7d Data.List \u6a21\u5757\uff1a Prelude> :m + Data.List \u800c\u5728 hs \u6587\u4ef6\u4e2d\u5f15\u5165\u6a21\u5757\uff0c\u9700\u8981\u4f7f\u7528 import \u8bed\u53e5\uff0c\u4e0b\u9762\u548c python \u7684\u5bf9\u6bd4\u53ef\u4ee5\u4fbf\u4e8e\u7406\u89e3\uff1a import Data.List -- from Data.List import * import Data.List ( nub , sort ) -- from Data.List import nub, sort import Data.List hiding ( nub ) -- \u4eceData.List\u4e2d\u5f15\u5165\u6240\u6709\uff0c\u4f46\u4e0d\u5f15\u5165nub\u51fd\u6570 import qualified Data.List -- import Data.List import qualified Data.List as Li -- import Data.List as Li","title":"Modules"},{"location":"cs/pl/haskell/#modules_1","text":"\u6a21\u5757\u4e2d\u8981\u5305\u542b\u5c06\u8981\u4f7f\u7528\u7684\u4e00\u4e9b\u51fd\u6570\uff0c\u50cf\u6b63\u5e38\u7684 hs \u6587\u4ef6\u4e00\u6837\u5199\u5373\u53ef\uff0c\u4f46\u5934\u90e8\u9700\u8981\u6709\u5bfc\u51fa\u8bed\u53e5\uff08export\uff09\u3002\u6bd4\u5982\u4e00\u4e2a\u6a21\u5757\u6587\u4ef6\u540d\u53eb ModuleA.hs \uff0c\u90a3\u5b83\u7684\u5934\u90e8\u9700\u8981\u5199\uff1a module ModuleA ( functionA , functionB , functionC ) where \u800c\u4e14\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u51fd\u6570\u53ea\u5bfc\u51fa\u9700\u8981\u4f7f\u7528\u7684\u5373\u53ef\u3002\u6bd4\u5982\u8be5\u6587\u4ef6\u4e2d\u8fd8\u542b\u6709 functionD \u4f9b\u524d\u4e09\u4e2a\u51fd\u6570\u5185\u90e8\u4f7f\u7528\uff0c\u90a3\u4e48\u5728 import ModuleA \u4e4b\u540e\u4e5f\u65e0\u6cd5\u8c03\u7528 functionD\u3002","title":"\u7f16\u5199 Modules"},{"location":"cs/pl/haskell/#types-typeclasses","text":"","title":"Types &amp; Typeclasses"},{"location":"cs/pl/haskell/#types","text":"Haskell \u6709\u4e00\u4e2a\u9759\u6001\u7c7b\u578b\u7cfb\u7edf\uff0c\u4efb\u4f55\u53d8\u91cf\u3001\u51fd\u6570\u90fd\u4f1a\u5177\u6709\u7c7b\u578b\uff0c\u5e76\u4e14\u6709\u7c7b\u578b\u5224\u65ad\u529f\u80fd\uff0c\u6ca1\u7ed9\u51fa\u7684\u7c7b\u578b\u4f1a\u81ea\u52a8\u8bc6\u522b\u3002 Type \u7684\u9996\u5b57\u6bcd\u5168\u4e3a\u5927\u5199\uff0c\u5e38\u7528\u7684\u6709\uff1a Int \uff1a\u6574\u578b\uff0c\u6709\u4e0a\u4e0b\u754c\u8303\u56f4\uff0c-2147483647\uff5e2147483648 Integer \uff1a\u6574\u6570\uff0c\u65e0\u754c\uff0c\u4f46\u662f\u6548\u7387\u6bd4Int\u4f4e Float \uff1a\u5355\u7cbe\u5ea6\u6d6e\u70b9\u578b Double \uff1a\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u578b Bool \uff1a\u5e03\u5c14\u503c Char \uff1a\u5b57\u7b26 String \uff1a\u5b57\u7b26\u4e32\uff0c\u7b49\u540c\u4e8e [Char] Ordering \uff1a\u5927\u5c0f\u5173\u7cfb\uff0c\u5305\u542bLT\u3001EQ\u3001GT\uff0c\u4e14\u5b83\u4eec\u6709\u5927\u5c0f\u5173\u7cfb LT < EQ < GT \u5217\u8868\u7684\u7c7b\u578b\u662f\u7531\u5176\u4e2d\u5143\u7d20\u51b3\u5b9a\u7684\uff0c\u5e76\u4e14\u5217\u8868\u4e2d\u5143\u7d20\u5fc5\u987b\u662f\u540c\u4e00\u7c7b\u578b\uff0c\u6240\u4ee5\u5217\u8868\u7684\u7c7b\u578b\u5c31\u662f\u5176\u5143\u7d20\u7c7b\u578b\u5916\u52a0 [] \u3002 \u5143\u7ec4\u7684\u7c7b\u578b\u7531\u5176\u4e2d\u5404\u4e2a\u5143\u7d20\u7684\u7c7b\u578b\u5171\u540c\u51b3\u5b9a\uff0c\u56e0\u4e3a\u5143\u7ec4\u4e2d\u7684\u5143\u7d20\u53ef\u4ee5\u662f\u4e0d\u540c\u7c7b\u578b\u3002\u5982 (\"abc\", 'a', True) \u7684\u7c7b\u578b\u662f ([Char], Char, Bool)\u3002","title":"Types"},{"location":"cs/pl/haskell/#typeclasses","text":"\u7c7b\u578b\u7c7b\uff08Typeclass\uff09\u662f\u5b9a\u4e49\u4e00\u7cfb\u5217\u529f\u80fd\u7684\u63a5\u53e3\uff0c\u5982\u679c\u4e00\u4e2a Type \u5c5e\u4e8e\u4e00\u4e2a Typeclass \u7684\u6210\u5458\uff0c\u90a3\u4e48\u5b83\u53ef\u4ee5\u5b9e\u73b0\u8fd9\u4e2a\u7c7b\u578b\u7c7b\u6240\u89c4\u5b9a\u7684\u529f\u80fd\u3002\u4e00\u4e2a Type \u4e5f\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2aTypeclass Typeclass\u7684\u9996\u5b57\u6bcd\u4e5f\u5168\u4e3a\u5927\u5199\uff0c\u5e38\u89c1\u7684\u6709\uff1a Eq \uff1a\u53ef\u5224\u65ad\u662f\u5426\u76f8\u7b49 Ord \uff1a\u53ef\u6bd4\u8f83\u5927\u5c0f Show \uff1a\u53ef\u5c55\u793a\u6210\u5b57\u7b26\u4e32 Read \uff1a\u53ef\u4ece\u5b57\u7b26\u4e32\u8f6c\u6362\u6210\u7279\u5b9a\u7c7b\u578b Enum \uff1a\u53ef\u679a\u4e3e\uff08\u8fde\u7eed\uff09\uff0c\u5373\u53ef\u4ee5\u4f7f\u7528 pred \u548c succ \u51fd\u6570\u5f97\u5230\u524d\u9a71\u548c\u540e\u7f00 Bounded : \u6709\u4e0a\u4e0b\u754c\uff0c\u5982\u679c\u5143\u7ec4\u4e2d\u6240\u6709\u5143\u7d20\u90fd\u5c5e\u4e8e Bounded\uff0c\u90a3\u8fd9\u4e2a\u5143\u7ec4\u7684\u7c7b\u578b\u4e5f\u5c5e\u4e8e Bounded Integral \uff1a\u662f\u6574\u6570\uff0c\u5305\u62ec Int \u548c Integer RealFloat \uff1a \u662f\u5b9e\u6d6e\u70b9\u6570\uff0c\u5305\u62ec Float \u548c Double RealFrac \uff1a\u662f\u5b9e\u5206\u6570\uff0c\u5305\u62ec Float\u3001Double \u548c Ratio\uff08\u5728 Data.Ratio \u6a21\u5757\u4e2d\uff09 Floating \uff1a\u662f\u6d6e\u70b9\u6570\uff0c\u5305\u62ec Float\u3001Double \u548c Complex\uff08\u5728 Data.Complex \u6a21\u5757\u4e2d\uff09 Real \uff1a\u662f\u5b9e\u6570\uff0c\u5305\u62ec Integral \u548c RealFrac \u7684\u6210\u5458 Fractional \uff1a\u662f\u5206\u6570\uff0c\u5305\u62ec RealFrac \u548c Floating \u7684\u6210\u5458 Num \uff1a\u662f\u6570\u5b57\uff0c\u5305\u62ec\u4e0a\u8ff0\u6240\u6709\u6570\u5b57\u76f8\u5173\u7684\u7c7b\u578b","title":"Typeclasses"},{"location":"cs/pl/haskell/#type-variables","text":"\u5982\u679c\u67e5\u770b\u4e00\u4e2a\u51fd\u6570\u7684\u7c7b\u578b\uff0c\u6bd4\u5982 head \uff0c\u90a3\u4e48\u5c06\u4f1a\u8fd4\u56de\u4ee5\u4e0b\u7c7b\u578b\uff1a head :: [a] -> a \u5176\u4e2d\u7684 a \u5c31\u662f\u4e00\u4e2a\u7c7b\u578b\u53d8\u91cf\uff08type variable\uff09\uff0c\u5b83\u5728 head \u4e2d\u53ef\u4ee5\u5c5e\u4e8e\u4efb\u4f55\u7c7b\u578b\uff0c\u5728\u8fd9\u91cc\u53ea\u662f\u8868\u793a\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u548c\u8f93\u5165\u7684\u5217\u8868\u4e2d\u7684\u5143\u7d20\u7684\u7c7b\u578b\u76f8\u4e00\u81f4\u3002 \u5728\u51fd\u6570\u7684\u7c7b\u578b\u8868\u8fbe\u5f0f\u5176\u5b9e\u53ef\u4ee5\u770b\u4f5c \\(\\lambda\\) \u8868\u8fbe\u5f0f\uff0c\u5b83\u9002\u7528\u4e8e \\(\\alpha\\) \u53d8\u6362\uff08 \\(\\alpha\\) -conversion\uff09\u3002\u5373 a \u5728\u8fd9\u91cc\u53ef\u4ee5\u6307 Int\u3001Char \u7b49\u7c7b\u578b\uff0c\u4e5f\u53ef\u4ee5\u6307 [Char], (Int, Char), \u751a\u81f3\u51fd\u6570 Int -> Int \u7b49\u3002 \u5728\u5927\u90e8\u5206\u51fd\u6570\u7684\u7c7b\u578b\u4e2d\uff0c\u7c7b\u578b\u53d8\u91cf\u9700\u8981\u4fdd\u8bc1\u662f\u67d0\u4e2a Typeclass \u7684\u6210\u5458\u624d\u80fd\u5b8c\u6210\u64cd\u4f5c\u3002\u6bd4\u5982 (==) \u51fd\u6570\uff0c\u5b83\u9700\u8981\u4f20\u5165\u7684\u53c2\u6570\u662f\u53ef\u5224\u65ad\u76f8\u7b49\u7684\uff0c\u5373\u662f Eq \u7684\u6210\u5458\uff0c\u90a3\u4e48 (==) \u7684\u7c7b\u578b\u5c31\u662f\uff1a (==) :: (Eq a) => a -> a -> Bool \u5176\u4e2d => \u524d\u7684\u90e8\u5206 (Eq a) \u5c31\u662f\u7c7b\u7ea6\u675f\uff08class constraint\uff09\uff0c\u5b83\u89c4\u5b9a\u4e86 a \u662f Eq \u7684\u6210\u5458\uff0c\u6240\u4ee5 (==) \u51fd\u6570\u4f20\u5165\u7684\u4e24\u4e2a\u53c2\u6570\u90fd\u662f a \u7c7b\u578b\uff0c\u4e14\u90fd\u662f Eq \u7684\u6210\u5458\uff0c\u4fdd\u8bc1\u4e86\u5b83\u4eec\u4e4b\u95f4\u662f\u53ef\u4ee5\u6bd4\u8f83\u662f\u5426\u76f8\u7b49\u7684\u3002","title":"Type variables"},{"location":"cs/pl/haskell/#type","text":"\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684 Type \u9700\u8981\u4f7f\u7528 data \u5173\u952e\u5b57\uff0c\u6bd4\u5982\u5b9a\u4e49 Bool \u9700\u8981\u4f7f\u7528\uff1a data Bool = False | True \u5176\u4e2d = \u5de6\u4fa7\u7684\u90e8\u5206\u5b9a\u4e49\u4e86\u65b0\u7c7b\u578b\u7684\u540d\u79f0 Bool \uff0c\u53f3\u4fa7\u7684\u90e8\u5206\u53eb\u505a\u503c\u6784\u9020\u5668\uff08value constructors\uff09\uff0c\u8868\u793a\u4e86 Bool \u7c7b\u578b\u7684\u503c\u4e3a False \u6216 True\u3002 \u5e76\u4e14\u540d\u79f0\u548c\u503c\u6784\u9020\u5668\u7684\u9996\u5b57\u6bcd\u90fd\u9700\u8981\u5927\u5199\u3002 \u53e6\u5916\uff0c\u503c\u6784\u9020\u5668\u4e5f\u662f\u51fd\u6570\uff0c\u5b83\u4eec\u53ef\u4ee5\u6709\u53c2\u6570\uff0c\u53eb\u505a\u9879\uff08field\uff09\u3002\u6bd4\u5982\uff1a data Shape = Circle Float Float Float | Rectangle Float Float Float Float \u5b83\u5b9a\u4e49\u4e86\u4e00\u4e2a\u65b0 Type \u53eb Shape\uff0c\u503c\u6784\u9020\u5668\u662f Circle \u548c Rectangle\uff0cCircle \u63a5\u6536\u4e09\u4e2a\u53c2\u6570\u90fd\u662f Float \u7c7b\u578b\uff0cRectangle \u63a5\u6536\u56db\u4e2a Float \u7c7b\u578b\u53c2\u6570\u3002 \u5982\u679c\u67e5\u770b Circle \u7684\u7c7b\u578b\uff0c\u5c06\u8fd4\u56de\uff1a Circle :: Float -> Float -> Float -> Shape \u5982\u679c\u60f3\u8981\u8ba9\u5b83\u80fd\u7ed9\u76f4\u63a5\u663e\u793a\u51fa\u6765\uff0c\u9700\u8981\u8ba9\u5b83\u5c5e\u4e8e Show \u7c7b\u578b\u7c7b\u3002\u5728\u4ee3\u7801\u4e2d\u53ea\u9700\u8981\u5728\u7ed3\u5c3e\u52a0\u4e0a deriving (Show) : data Shape = Circle Float Float Float | Rectangle Float Float Float Float deriving ( Show ) \u7c7b\u578b\u7684\u540d\u79f0\u548c\u503c\u6784\u9020\u5668\u540d\u79f0\u4e5f\u53ef\u4ee5\u76f8\u540c\uff0c\u6bd4\u5982\uff1a data Point = Point Float Float deriving ( Show )","title":"\u5b9a\u4e49\u65b0 Type"},{"location":"cs/pl/haskell/#typeclass","text":"\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684 Typeclass \u9700\u8981\u4f7f\u7528 class \u5173\u952e\u5b57\uff0c\u4f8b\u5982\u5b9a\u4e49 Eq \u7c7b\u578b\u7c7b\uff1a class Eq a where ( == ) :: a -> a -> Bool ( /= ) :: a -> a -> Bool x == y = not ( x /= y ) x /= y = not ( x == y ) \u5176\u4e2d a \u662f\u4e00\u4e2a\u7c7b\u578b\u53d8\u91cf\uff0c\u524d\u4e24\u884c\u58f0\u660e\u4e86\u9700\u8981\u5b9e\u73b0\u7684\u51fd\u6570\u7684\u540d\u5b57\u53ca\u5176\u7c7b\u578b\uff0c\u540e\u4e24\u884c\u8868\u660e\u4e86\u9700\u8981\u7684\u51fd\u6570\u4e4b\u95f4\u53ef\u4ee5\u76f8\u4e92\u5b9a\u4e49\uff08\u4e0d\u5fc5\u8981\uff09\u3002 \u5305\u542b\u4e86\u540e\u4e24\u884c\u4e4b\u540e\uff0c\u53ea\u5b9a\u4e49 (==) \u51fd\u6570\u6216\u8005 (/=) \u51fd\u6570\u90fd\u53ef\u4ee5\u5b8c\u6210\u5168\u90e8\u5b9a\u4e49\uff0c\u5b83\u4eec\uff08 (==) | (/=) \uff09\u6210\u4e3a\u8fd9\u4e2a\u7c7b\u578b\u7c7b\u7684\u6700\u5c0f\u5b8c\u6574\u5b9a\u4e49\uff08minimal complete definition\uff09 \u67e5\u770b\u4e00\u4e2a\u7c7b\u578b\u7c7b\u7684\u6210\u5458\u9700\u8981\u5b9e\u73b0\u7684\u51fd\u6570\u53ef\u4ee5\u5728 GHCi \u4e2d\u4f7f\u7528 :info \uff1a ghci> :info Eq","title":"\u5b9a\u4e49\u65b0 Typeclass"},{"location":"cs/pl/haskell/#kinds","text":"\u4e00\u4e2a\u503c\u7684\u7c7b\u578b\u53eb\u505a\u7c7b\u578b\uff08Type\uff09\uff0c\u800c\u4e00\u4e2a\u7c7b\u578b\u7684\u7c7b\u578b\u53eb\u505a Kind\u3002\u53ef\u4ee5\u901a\u8fc7 GHCi \u4e2d :k \u6765\u67e5\u770b Kind\uff1a ghci > : k Int Int :: * ghci > : k Maybe Maybe :: * -> * ghci > : k Maybe Int Maybe Int :: * ghci > : k Either Either :: * -> * -> * \u5176\u4e2d\u7684\u661f\u53f7 * \u4ee3\u8868\u4e86\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\uff08concrete type\uff09\u3002Int \u672c\u8eab\u5c31\u662f\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\uff0c\u6240\u4ee5 Int \u7684 Kind \u662f *\u3002\u800c Maybe \u662f\u4e00\u4e2a\u7c7b\u578b\u6784\u9020\u5668\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684\u5177\u4f53\u7c7b\u578b\uff0c\u6240\u4ee5 Maybe \u7684 Kind \u662f * -> *\u3002\u5982\u679c\u7ed9 Maybe \u4f20\u5165\u4e86\u4e00\u4e2a Int\uff0c\u90a3\u4e48\u5f97\u5230\u7684 Maybe Int \u5c31\u662f\u4e00\u4e2a\u5177\u4f53\u7684\u7c7b\u578b\uff0c\u5b83\u7684 Kind \u5c31\u662f *\u3002Either \u4e5f\u662f\u4e00\u4e2a\u7c7b\u578b\u6784\u9020\u5668\uff0c\u4f46\u5b83\u63a5\u6536\u4e24\u4e2a\u7c7b\u578b\u624d\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u7c7b\u578b\uff0c\u6240\u4ee5 Either \u7684 Kind \u662f * -> * -> *\u3002","title":"Kinds"},{"location":"cs/pl/haskell/#inputoutput","text":"","title":"Input/Output"},{"location":"cs/pl/haskell/#haskell","text":"\u4e0d\u5728 GHCi \u4e2d\u8fd0\u884c\u4e00\u4e2a Haskell \u7a0b\u5e8f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a \u7f16\u8bd1\u8fd0\u884c\uff1a $ ghc --make code $ ./code \u901a\u8fc7 runhaskell \u547d\u4ee4\u76f4\u63a5\u8fd0\u884c\uff1a $ runhaskell code.hs","title":"\u8fd0\u884c Haskell \u7a0b\u5e8f"},{"location":"cs/pl/haskell/#_5","text":"\u5728\u4e00\u4e2a Haskell \u7a0b\u5e8f\u4e2d\u8f93\u51fa\u6587\u5b57\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a main \u51fd\u6570\uff1a main = putStrLn \"Hello World\" \u5176\u4e2d putStrLn \u7684\u7c7b\u578b\u662f\uff1a putStrLn :: String -> IO () putStrLn \u63a5\u6536\u4e00\u4e2a String \u7c7b\u578b\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u7ed3\u679c\u4e3a () \u7c7b\u578b\u7684 IO \u52a8\u4f5c\uff08I/O action\uff09\u3002\u6240\u4ee5 main \u51fd\u6570\u7684\u7c7b\u578b\u4e3a IO ()\u3002\uff08IO \u7684 Kind \u662f* -> *\uff09 \u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u6709\u5176\u4ed6\u9ed8\u8ba4\u63d0\u4f9b\u7684\u8f93\u51fa\u6587\u672c\u7684\u51fd\u6570\uff1a putStr \uff1a\u8f93\u51fa\u6587\u672c\uff0c\u7ed3\u5c3e\u4e0d\u6362\u884c putChar \uff1a\u8f93\u51fa\u5355\u4e2a\u5b57\u7b26\uff0c\u7ed3\u5c3e\u4e0d\u6362\u884c\u3002\u63a5\u6536\u7684\u53c2\u6570\u4e3a\u5355\u4e2a Char\uff0c\u4e0d\u662f String\uff08\u7528\u5355\u5f15\u53f7\u4e0d\u662f\u53cc\u5f15\u53f7\uff09 print \uff1a\u53ef\u4ee5\u63a5\u6536\u4efb\u4f55 Show \u7684\u6210\u5458\uff0c\u5148\u7528 show \u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32\u7136\u540e\u8f93\u51fa\u3002\u7b49\u540c\u4e8e putStrLn . show","title":"\u8f93\u51fa\u6587\u672c"},{"location":"cs/pl/haskell/#_6","text":"\u8f93\u5165\u6587\u5b57\u9700\u8981\u5728 do \u5757\u4e2d\u4f7f\u7528 getLine\uff1a main = do line <- getLine putStrLn line getLine \u7684\u7c7b\u578b\u662f\uff1a getLine :: IO String \u800c <- \u64cd\u4f5c\u7b26\u5c06 getLine \u4e2d\u7684 String \u63d0\u53d6\u4e86\u51fa\u6765\u7ed9\u5230\u4e86 line\uff0c\u4f7f line \u53d8\u6210\u4e86 String \u7c7b\u578b\u7684\u4e00\u4e2a\u5b57\u7b26\u4e32 \u800c\u4e14\u4f7f\u7528\u8f93\u5165\u7684\u5b57\u7b26\u4e32\u5fc5\u987b\u8981\u7ecf\u8fc7\u4e00\u6b21 <-\uff0c\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528 getLine \u4f5c\u4e3a\u5b57\u7b26\u4e32\uff0c\u56e0\u4e3a getLine \u4e0d\u662f String \u7c7b\u578b\uff0c\u800c\u662f IO String \u7c7b\u578b \u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528 getChar \u6765\u83b7\u53d6\u5355\u4e2a\u5b57\u7b26\uff0c\u4f46\u4ecd\u7136\u9700\u8981\u4f7f\u7528 <- \u64cd\u4f5c\u7b26\u6765\u63d0\u53d6 Char","title":"\u8f93\u5165\u6587\u672c"},{"location":"cs/pl/haskell/#io","text":"","title":"\u5176\u4ed6 IO \u76f8\u5173\u51fd\u6570\u7528\u6cd5"},{"location":"cs/pl/haskell/#_7","text":"\u4ee5\u4e0b\u4e0e\u6587\u4ef6\u548c\u6d41\u76f8\u5173\u7684\u51fd\u6570\u90fd\u5305\u542b\u5728 System.IO \u6a21\u5757\u4e2d","title":"\u6587\u4ef6\u548c\u6d41"},{"location":"cs/pl/haskell/#_8","text":"\u76f8\u5173\u51fd\u6570\u90fd\u5305\u542b\u5728 System.Directory \u6a21\u5757\u4e2d\uff0c\u5168\u90e8\u5185\u5bb9\u89c1 System.Directory","title":"\u8def\u5f84\u64cd\u4f5c"},{"location":"cs/pl/haskell/#command-line-arguments","text":"System.Environment \u6a21\u5757\u4e2d\u63d0\u4f9b\u4e86\u4e24\u4e2a\u51fd\u6570\u53ef\u4ee5\u7528\u6765\u5904\u7406\u4f20\u5165\u547d\u4ee4\u884c\u7684\u53c2\u6570","title":"Command line arguments"},{"location":"cs/pl/haskell/#randomness","text":"\u548c\u968f\u673a\u6570\u6709\u5173\u7684\u51fd\u6570\u90fd\u5305\u542b\u5728 System.Random \u6a21\u5757\u4e2d\u3002GHCi \u542f\u52a8\u65f6\u53ef\u80fd\u4e0d\u4f1a\u5305\u542b System.Random \u7684\u914d\u7f6e\uff0c\u5bfc\u81f4\u65e0\u6cd5\u627e\u5230\u6a21\u5757\u3002\u9700\u8981\u901a\u8fc7 stack \u6253\u5f00: stack ghci --package random Haskell \u8981\u6c42\u540c\u6837\u7684\u7a0b\u5e8f\u9700\u8981\u8fd0\u884c\u51fa\u540c\u6837\u7684\u7ed3\u679c\uff0c\u9664\u4e86\u7528\u5230\u4e86 I/O action\uff0c\u6240\u6709\u4f1a\u9020\u6210\u4e0d\u540c\u7ed3\u679c\u7684\u51fd\u6570\u90fd\u8981\u4ea4\u7ed9 I/O action \u6765\u5b8c\u6210 \u90a3\u8981\u4f7f\u968f\u673a\u6570\u8131\u79bb IO \u5b58\u5728\uff0c\u5c31\u8981\u7528\u5230\u968f\u673a\u751f\u6210\u5668\uff08random generator\uff09 System.Random \u6a21\u5757\u63d0\u4f9b\u4e86\u51e0\u4e2a\u751f\u6210\u968f\u673a\u6570\u7684\u51fd\u6570\uff1a","title":"Randomness"},{"location":"cs/pl/haskell/#exceptions","text":"\u7a0b\u5e8f\u5728\u8fd0\u884c\u5931\u8d25\u65f6\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u53ef\u4ee5\u901a\u8fc7 Control.Exception \u6a21\u5757\u4e2d\u7684 catch \u51fd\u6570\u6765\u6355\u83b7\u5f02\u5e38\uff1a catch :: Exception e => IO a -> (e -> IO a) -> IO a \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u8981\u8fdb\u884c\u7684\u64cd\u4f5c\uff0c\u4ee5 IO a \u4e3a\u8fd4\u56de\u503c\u7684\u7c7b\u578b\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u5b83\u63a5\u6536\u5f02\u5e38\u5e76\u8fdb\u884c\u64cd\u4f5c\uff0c\u4f8b\u5982\uff1a import Control.Exception main = main' ` catch ` handler main' :: IO () main' = do ... handler :: Exception e => e -> IO () handler e = putStrLn \"...\" \u4e5f\u53ef\u4ee5\u5229\u7528\u5b88\u536b\uff08guard\uff09\u8bed\u6cd5\u548c System.IO.Error \u4e2d\u7684\u51fd\u6570\u6765\u5224\u65ad IO \u5f02\u5e38\u7684\u7c7b\u578b\u6765\u8fdb\u884c\u4e0d\u540c\u64cd\u4f5c\uff1a import System.Environment import System.IO.Error import Control.Exception main = toTry ` catch ` handler toTry :: IO () toTry = do ( fileName : _ ) <- getArgs contents <- readFile fileName putStrLn $ \"The file has \" ++ show ( length ( lines contents )) ++ \" lines!\" handler :: IOError -> IO () handler e | isDoesNotExistError e = putStrLn \"The file doesn't exist!\" | otherwise = ioError e \u5177\u4f53\u76f8\u5173\u5168\u90e8\u51fd\u6570\u89c1\u6587\u6863\uff1a System.IO.Error \u3001 Control.Exception","title":"Exceptions"},{"location":"cs/pl/haskell/#functors","text":"\u51fd\u5b50\uff08Functor\uff09\u662f\u4e00\u4e2a\u7c7b\u578b\u7c7b\uff08typeclass\uff09\uff0c\u548c\u5176\u4ed6\u7c7b\u578b\u7c7b\u4e00\u6837\uff0c\u5b83\u89c4\u5b9a\u4e86\u5176\u5b9e\u4f8b\u7c7b\u5fc5\u987b\u5b9e\u73b0\u7684\u529f\u80fd\uff08\u4f8b\u5982 Eq \u7c7b\u578b\u7c7b\u89c4\u5b9a\u4e86\u5b83\u7684\u5b9e\u4f8b\u5fc5\u987b\u662f\u53ef\u4ee5\u6bd4\u8f83\u662f\u5426\u76f8\u7b49\u7684\uff09\uff0cFunctor \u89c4\u5b9a\u7c7b\u5b83\u7684\u5b9e\u4f8b\u5fc5\u987b\u662f\u53ef\u4ee5\u8fdb\u884c\u6620\u5c04\u7684\u3002Functor \u8981\u6c42\u4f7f\u7528 fmap :: (a -> b) -> f a -> f b \u51fd\u6570\u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a a -> b \u7c7b\u578b\u7684\u51fd\u6570\u3001\u4e00\u4e2a\u5185\u90e8\u5143\u7d20\u4e3a a \u7c7b\u578b\u7684\u51fd\u5b50\uff0c\u8fd4\u56de\u4e00\u4e2a\u5185\u90e8\u5143\u7d20\u4e3a b \u7c7b\u578b\u7684\u51fd\u5b50 Functor \u53ef\u4ee5\u6bd4\u4f5c\u76d2\u5b50\uff0c\u90a3 fmap \u51fd\u6570\u5c31\u76f8\u5f53\u4e8e\u7ed9\u5b9a\u4e00\u4e2a\u51fd\u6570\u548c\u4e00\u4e2a\u76d2\u5b50\uff0c\u5c06\u76d2\u5b50\u4e2d\u7684\u5168\u90e8\u5143\u7d20\u90fd\u5e94\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u518d\u8fd4\u56de\u5e94\u7528\u51fd\u6570\u540e\u7684\u76d2\u5b50 \u51fd\u5b50\u7684\u5b9e\u4f8b\u5fc5\u987b\u662f\u4e00\u4e2a Kind \u4e3a * -> * \u7684\u7c7b\u578b\u6784\u9020\u5668\uff0c\u56e0\u4e3a\u5b83\u8981\u6c42\u5176\u662f\u4e00\u4e2a\u76d2\u5b50\uff0c\u76d2\u5b50\u5728\u63a5\u6536\u5185\u5bb9\u540e\u624d\u4f1a\u6210\u4e3a\u4e00\u4e2a\u5177\u4f53\u7684\u7c7b\u578b\u3002fmap \u4e2d\u7684 f a \u548c f b \u4e5f\u662f\u56e0\u4e3a f \u662f\u4e00\u4e2a\u7c7b\u578b\u6784\u9020\u5668\uff0c\u5728\u63a5\u6536\u7c7b\u578b a/b \u540e\u624d\u4f1a\u53d8\u6210\u4e00\u4e2a\u5177\u4f53\u7c7b\u578b\uff08f a \u548c f b\uff09\u51fa\u73b0\u5728\u51fd\u6570\u7c7b\u578b\u58f0\u660e\u4e2d Functor \u7684\u5b9a\u4e49\u662f: class Functor f where fmap :: ( a -> b ) -> f a -> f b ( <$ ) :: a -> f a -> f b ( <$ ) = fmap . const \u53ef\u4ee5\u53d1\u73b0 Functor \u4e0d\u4ec5\u9700\u8981 fmap \u51fd\u6570\uff0c\u8fd8\u9700\u8981\u4e00\u4e2a <$ \u51fd\u6570\uff0c\u5b83\u63a5\u6536\u4e00\u4e2a a \u7c7b\u578b\u7684\u53d8\u91cf\u548c\u4e00\u4e2a\u5185\u5bb9\u4e3a b \u7c7b\u578b\u7684\u51fd\u5b50\uff0c\u8fd4\u56de\u4e00\u4e2a\u5185\u5bb9\u4e3a a \u7c7b\u578b\u7684\u51fd\u5b50\uff1b\u4f5c\u7528\u5c31\u662f\u5c06\u4f20\u5165\u7684\u51fd\u5b50\u4e2d\u7684\u6240\u6709\u5143\u7d20\u90fd\u66ff\u6362\u4e3a\u4f20\u5165\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u6bd4\u5982\uff1a ghci > 'a' <$ [ 1 , 2 , 3 ] \"aaa\" \u4f46\u5b83\u4e0d\u662f\u58f0\u660e\u4e00\u4e2a\u51fd\u5b50\u5b9e\u4f8b\u5fc5\u987b\u7684\uff0c\u56e0\u4e3a\u5b83\u53ef\u4ee5\u4f7f\u7528 fmap \u548c const \u51fd\u6570\u590d\u5408\u6765\u5b9e\u73b0\uff0c\u5176\u4e2d const \u7684\u7c7b\u578b\u7b7e\u540d\uff1a const :: a -> b -> a \u5373\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u4f46\u59cb\u7ec8\u53ea\u8fd4\u56de\u7b2c\u4e00\u4e2a\u53c2\u6570","title":"Functors"},{"location":"cs/pl/haskell/#functor","text":"","title":"Functor \u5b9e\u4f8b"},{"location":"cs/pl/haskell/#functor-laws","text":"\u6240\u6709\u7684\u51fd\u5b50\u90fd\u5e94\u8be5\u6ee1\u8db3\u4e24\u4e2a\u5b9a\u5f8b\u3002\u8fd9\u4e24\u4e2a\u5b9a\u5f8b\u4e0d\u662f Haskell \u5f3a\u5236\u8981\u6c42\u7684\uff0c\u4f46\u5e94\u8be5\u786e\u4fdd\u4e00\u4e2a\u51fd\u5b50\u6ee1\u8db3\u8fd9\u4e24\u4e2a\u5b9a\u5f8b\uff1a fmap id = id \uff08\u5176\u4e2d id \u4e3a\u51fd\u6570 (\\x -> x) \uff09\uff1a\u5373\u5bf9\u4e00\u4e2a\u51fd\u5b50 fmap id\uff0c\u90a3\u5b83\u5e94\u8be5\u8fd4\u56de\u672c\u8eab\uff08fmap id a = id a = a\uff0ca \u4e3a\u4e00\u4e2a\u51fd\u5b50\uff09\uff0c\u6bd4\u5982\uff1a ghci > fmap id [ 1 , 2 , 3 ] [ 1 , 2 , 3 ] ghci > fmap id ( Just 2 ) Just 2 fmap (f . g) = fmap f . fmap g \uff1a\u5373\u51fd\u5b50\u7684 fmap \u652f\u6301\u7ed3\u5408\u5f8b fmap (f . g) a = fmap f . fmap g $ a = fmap f (fmap g a)\uff0c\u5176\u4e2d a \u4e3a\u4e00\u4e2a\u51fd\u5b50 fmap (f . g) (Just x) = fmap f (fmap g (Just x)) = fmap f (Just (g x)) = Just (f (g x)) ghci > fmap (( * 3 ) . ( + 100 )) ( Just 1 ) Just 303 \u6ee1\u8db3\u7b2c\u4e00\u4e2a\u5b9a\u5f8b\u7684\u51fd\u5b50\u4e00\u5b9a\u6ee1\u8db3\u7b2c\u4e8c\u4e2a\u5b9a\u5f8b\uff0c\u6240\u4ee5\u53ea\u8981\u68c0\u67e5\u51fd\u5b50\u662f\u5426\u6ee1\u8db3\u7b2c\u4e00\u4e2a\u5b9a\u5f8b\u5373\u53ef","title":"Functor Laws"},{"location":"cs/pl/haskell/#intuition","text":"\u5bf9\u4e8e\u51fd\u5b50\u548c fmap\uff0c\u6709\u4e24\u79cd\u7406\u89e3\u65b9\u6cd5 \u51fd\u5b50\u662f\u4e00\u79cd\u5bb9\u5668\uff08container\uff09\uff1bfmap \u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u548c\u4e00\u4e2a\u5bb9\u5668\uff0c\u5728\u5bb9\u5668\u5185\u90e8\u5e94\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u8fd4\u56de\u5e94\u7528\u540e\u7684\u65b0\u5bb9\u5668 \u51fd\u5b50\u662f\u4e00\u79cd\u8ba1\u7b97\u4e0a\u4e0b\u6587\uff08context\uff09\uff1bfmap \u662f\u67ef\u91cc\u5316\u7684\uff0c\u628a\u5176\u7c7b\u578b\u7b7e\u540d\u770b\u4f5c fmap :: (a -> b) -> (f a -> f b) \u2003\u2003\u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u8fd4\u56de\u53e6\u4e00\u4e2a\u51fd\u6570\uff0c\u4f20\u5165\u51fd\u6570 g :: a -> b\uff0cfmap \u5c06\u5176\u8f6c\u6362\u4e3a\u65b0\u7684\u51fd\u6570 fmap g :: f a -> f b \u2003\u2003\u4f7f\u666e\u901a\u7684\u51fd\u6570 g \u53ef\u4ee5\u5728\u8ba1\u7b97\u4e0a\u4e0b\u6587 f \u4e2d\u4f7f\u7528\uff0c\u8fd9\u79cd\u8f6c\u6362\u4e5f\u88ab\u79f0\u4e3a\u63d0\u5347\uff08lift\uff09","title":"Intuition"},{"location":"cs/pl/haskell/#_10","text":"","title":"\u5e38\u7528\u51fd\u6570"},{"location":"cs/pl/haskell/#applicative-functor","text":"\u5e94\u7528\u51fd\u5b50\uff08Applicative Functor\uff09\u662f\u51fd\u5b50\u7684\u5347\u7ea7\u7248\uff0c\u5b83\u5305\u542b\u5728 Control.Applicative \u6a21\u5757\u4e2d\u3002 fmap \u8fdb\u884c\u7684\u64cd\u4f5c\u662f\u5c06\u4e00\u4e2a\u666e\u901a\u4e00\u5143\u51fd\u6570\u5e94\u7528\u5728\u4e00\u4e2a\u51fd\u5b50\u5185\u90e8\u3002\u800c\u5982\u679c\u8981\u5c06\u4e00\u4e2a\u5305\u542b\u51fd\u6570\u7684\u51fd\u5b50\u5e94\u7528\u5728\u53e6\u4e00\u4e2a\u51fd\u5b50\u4e0a\uff0cfmap \u5c31\u5904\u7406\u4e0d\u4e86\u4e86\uff0c\u4f46\u662f\u5e94\u7528\u51fd\u5b50\u7684\u65b9\u6cd5\u53ef\u4ee5\u5904\u7406\u3002\u5e94\u7528\u51fd\u5b50\u7684\u5b9a\u4e49\uff1a class Functor f => Applicative f where pure :: a -> f a ( <*> ) :: f ( a -> b ) -> f a -> f b \u5e94\u7528\u51fd\u5b50\u8981\u6c42\u5b9e\u73b0\u4e24\u4e2a\u51fd\u6570\uff1a pure :: a -> f a\uff0c\u4e0d\u96be\u7406\u89e3\uff0cpure \u63a5\u6536\u4e00\u4e2a\u503c\uff0c\u5e76\u5c06\u5176\u653e\u5728\u9ed8\u8ba4\u7684\u4e0a\u4e0b\u6587/\u5bb9\u5668\u4e2d\u3002\u5bf9\u4e8e\u5217\u8868\uff0cpure = []\uff1b\u5bf9\u4e8e Maybe\uff0cpure = Just <*> :: f (a -> b) -> f a -> f b\uff0c\u7c7b\u4f3c\u4e8e fmap :: (a -> b) -> f a -> f b\uff0c\u4f46\u4e0d\u540c\u7684\u662f <*> \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u7c7b\u578b\u662f f (a -> b) \u4e0d\u662f a -> b\u3002\u6240\u4ee5 <*> \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u51fd\u6570\uff0c\u800c\u4e0d\u662f\u4e00\u4e2a\u666e\u901a\u51fd\u6570\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c<*> \u63a5\u6536\u4e00\u4e2a\u88c5\u6709\u51fd\u6570\u7684\u51fd\u5b50\u548c\u53e6\u4e00\u4e2a\u51fd\u5b50\uff0c\u5e94\u7528\u51fd\u6570\u540e\u8fd4\u56de\u65b0\u7684\u51fd\u5b50\u3002","title":"Applicative Functor"},{"location":"cs/pl/haskell/#applicative-functor_1","text":"","title":"Applicative Functor \u5b9e\u4f8b"},{"location":"cs/pl/haskell/#applicative-functor-laws","text":"\u5e94\u7528\u51fd\u5b50\u4e00\u822c\u6709\u56db\u4e2a\u5b9a\u5f8b\uff0c\u90fd\u662f\u4fdd\u8bc1 pure \u7684\u6b63\u786e\u6027\u7684\uff1a Identity law \uff1apure id <*> v = v Homomorphism \uff1apure f <*> pure x = pure (f x) Interchange \uff1au < > pure v = pure ($ v) < > u Composition \uff1au < > (v < > w) = pure (.) < > u < > v <*> w","title":"Applicative Functor Laws"},{"location":"cs/pl/haskell/#intuition_1","text":"\u7406\u89e3\u5e94\u7528\u51fd\u5b50\u7684\u65b9\u5f0f\u4e5f\u662f\u5c06\u5176\u770b\u4f5c\u662f\u8ba1\u7b97\u4e0a\u4e0b\u6587\uff08context\uff09\uff0c\u6bd4\u5982\u8981\u8ba1\u7b97\uff1a \\[ [[\\ \\ g\\ x_1\\ x_2\\ \\cdots\\ x_n\\ \\ ]] \\] \u5176\u4e2d \\(x_i\\) \u7684\u7c7b\u578b\u662f \\(f\\ t_i\\) \uff0c \\(f\\) \u662f\u5e94\u7528\u51fd\u5b50\uff08\u770b\u4f5c\u4e0a\u4e0b\u6587\uff09\u3002\u800c\u51fd\u6570 \\(g\\) \u7684\u7c7b\u578b\u662f\uff1a \\[ t_1\\to t_2\\to\\cdots\\to t_n\\to t \\] \u6240\u4ee5\u53cc\u62ec\u53f7\uff08idiom brackets\uff09\u7684\u4f5c\u7528\u662f\u5c06\u4e00\u4e2a\u666e\u901a\u51fd\u6570\u5e94\u7528\u5728\u5305\u542b\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u53c2\u6570\u4e0a\u3002 \\(g\\ x_1\\) \u53ef\u4ee5\u901a\u8fc7 fmap \u6765\u6267\u884c\uff0c\u5c06 \\(g\\) \u63d0\u5347\uff08lift\uff09\u5230 \\(x_1\\) \u7684\u4e0a\u4e0b\u6587\u4e2d\uff0c\u7136\u540e\u5e94\u7528\u5728 \\(x_1\\) \u4e0a\u3002\u4f46\u662f fmap \u8fd4\u56de\u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u51fd\u5b50\uff0c\u6362\u53e5\u8bdd\u8bf4\uff0c \\(g\\ x_1\\) \u7ed3\u679c\u7684\u7c7b\u578b\u662f\uff1a \\[ f\\ \\ (t_2\\to t_3\\to\\cdots\\to t_n\\to t) \\] \u4f46\u662f fmap \u5e76\u4e0d\u80fd\u5c06\u4e0a\u4e0b\u6587\u4e2d\u7684\u51fd\u6570\u5e94\u7528\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u53c2\u6570\u4e0a\uff0c\u4e8e\u662f\u5e94\u7528\u51fd\u5b50\u7684 <*> \u51fd\u6570\u63d0\u4f9b\u4e86\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u6240\u4ee5\u8ba1\u7b97 \\([[\\ g\\ x_1\\ x_2\\ \\cdots\\ x_n\\ ]]\\) \uff0c\u53ea\u9700\u8981\uff1a g < $> x1 < *> x2 < *> ... < *> xn \u800c pure \u51fd\u6570\u7684\u4f5c\u7528\u5c31\u662f\u5c06\u4e00\u4e2a\u4e0d\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u503c\uff08\u51fd\u6570\u6216\u53c2\u6570\uff09\u63d0\u5347\u5230\u4e0a\u4e0b\u6587\u4e2d\uff0c\u4f46\u4e0d\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c\u3002\u6bd4\u5982\u53c2\u6570 \\(x_2\\) \u5982\u679c\u4e0d\u5728\u4e0a\u4e0b\u6587\u4e2d\uff0c\u9700\u8981\u7528 pure \u63d0\u5347\u5230\u4e0a\u4e0b\u6587\u4e2d\u624d\u80fd\u6309\u4e0a\u9762\u8ba1\u7b97\uff1a g < $> x1 < *> pure x2 < *> ... < *> xn","title":"Intuition"},{"location":"cs/pl/haskell/#_14","text":"","title":"\u5e38\u7528\u51fd\u6570"},{"location":"cs/pl/haskell/#monad","text":"\u5355\u5b50\uff08Monad\uff09\u662f\u5bf9 Applicative Functor \u7684\u6269\u5c55\uff08\u4f46\u662f\u8bde\u751f\u6bd4 Applicative \u65e9\uff09\uff0cFunctor \u7684 <$> \u51fd\u6570\u5b9e\u73b0\u4e86\u5c06\u666e\u901a\u51fd\u6570\u5e94\u7528\u5728\u4e0a\u4e0b\u6587\u503c\u4e0a\uff0cApplicative \u7684 <*> \u51fd\u6570\u5c06\u4e0a\u4e0b\u6587\u4e2d\u51fd\u6570\u5e94\u7528\u5728\u4e0a\u4e0b\u6587\u503c\u4e0a\u3002\u800c Monad \u63d0\u4f9b\u4e86\u4e00\u4e2a\u51fd\u6570 >>= \uff08bind\uff09\uff0c\u5c06\u4e00\u4e2a\u63a5\u6536\u666e\u901a\u503c\u8fd4\u56de\u4e0a\u4e0b\u6587\u503c\u7684\u51fd\u6570\u5e94\u7528\u5728\u4e0a\u4e0b\u6587\u503c\u4e0a\uff1a class Applicative m => Monad m where ( >>= ) :: m a -> ( a -> m b ) -> m b ( >> ) :: m a -> m b -> m b return :: a -> m a m >> n = m >>= \\ _ -> n return = pure return \u51fd\u6570\uff1a\u548c pure \u4e00\u6837\uff0c\u53ea\u662f\u6709\u53e6\u4e00\u4e2a\u540d\u5b57 >> \u51fd\u6570\uff1a\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u7684\u5b9e\u73b0\u65b9\u6cd5\uff0c\u5b83\u7684\u4f5c\u7528\u548c Applicative \u7684 *> \u51fd\u6570\u4e00\u6837 >>= \u51fd\u6570\uff08bind\uff09\uff1a\u6bd4 Applicative \u5347\u7ea7\u7684\u51fd\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u5355\u5b50\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u4e00\u4e2a\u63a5\u6536\u503c\u8fd4\u56de\u5355\u5b50\u7684\u51fd\u6570\uff0c\u5c06\u8fd9\u4e2a\u51fd\u6570\u5e94\u7528\u5728\u7b2c\u4e00\u4e2a\u53c2\u6570\u5355\u5b50\u4e2d\u7684\u503c\u4e0a\uff0c\u5e76\u8fd4\u56de\u5f97\u5230\u7684\u65b0\u5355\u5b50","title":"Monad"},{"location":"cs/pl/haskell/#monad_1","text":"","title":"Monad \u5b9e\u4f8b"},{"location":"cs/pl/haskell/#do-notation","text":"Haskell \u7684 do \u8bed\u53e5\u4e3a\u94fe\u5f0f\u7684 >>= \u5e94\u7528\u63d0\u4f9b\u4e86\u7c7b\u4f3c\u547d\u4ee4\u5f0f\uff08imperative style\uff09\u7684\u8bed\u6cd5\u7cd6\u3002\u6bd4\u5982 a >>= \\x -> b >> c >>= \\y -> d \uff1a a >>= \\ x -> b >> c >>= \\ y -> d \u5176\u4e2d\u6709 abcd \u56db\u4e2a\u503c\uff0c\u53ef\u4ee5\u770b\u51fa a \u4e2d\u5185\u5bb9\u7ed1\u5b9a\u5230\u4e86 x \u4e0a\uff0cc \u4e2d\u5185\u5bb9\u7ed1\u5b9a\u5230\u4e86 y \u4e0a\u3002\u4f7f\u7528 do \u8bed\u53e5\u6765\u8868\u793a\u8fd9\u4e2a\u64cd\u4f5c\u53ef\u4ee5\u5199\u6210\uff1a do { x <- a ; b ; y <- c ; d } \u5176\u4e2d\u7684\u5927\u62ec\u53f7\u548c\u5206\u53f7\u53ef\u4ee5\u7701\u7565\u4e0d\u5199\uff08\u6324\u5728\u4e00\u884c\u65f6\u4e0d\u80fd\u7701\u7565\uff09\u3002do \u8bed\u53e5\u4e5f\u53ea\u662f\u4e00\u4e2a\u8bed\u6cd5\u7cd6\uff0c\u5b83\u53ef\u4ee5\u9012\u5f52\u5730\u8f6c\u6362\u6210\u666e\u901a\u7684 Monad \u64cd\u4f5c\u8bed\u53e5\uff1a do e \uff1ae do { e; ... } \uff1ae >> do { ... } do { v <- e; ... } \uff1ae >>= \\v -> do { ... } do { let ...; ... } \uff1alet ... in do { ... }","title":"do-notation"},{"location":"cs/pl/haskell/#monad-laws","text":"Left identity \uff1areturn a >>= k = k a Right identity \uff1am >>= return = m Associativity \uff1a(m >>= g) >>= h = m >>= (\\x -> g x >>= h) \u524d\u4e24\u4e2a\u5b9a\u5f8b\u5f88\u597d\u7406\u89e3\uff1a \u5c06 a \u6ce8\u5165\u4e0a\u4e0b\u6587\u4e4b\u540e\u7ed1\u5b9a\uff08bind\uff09\u7ed9\u51fd\u6570 k(:: a -> m a)\uff0c\u76f8\u5f53\u4e8e\u76f4\u63a5\u5c06 a \u76f4\u63a5\u4f20\u5165\u51fd\u6570 k \u5c06\u5df2\u7ecf\u5305\u542b\u5728\u4e0a\u4e0b\u6587\u4e2d\u7684\u503c\u7ed1\u5b9a\u7ed9 return \u51fd\u6570\uff0c\u76f8\u5f53\u4e8e\u4fdd\u6301\u4e0d\u53d8 \u7b2c\u4e09\u4e2a\u5b9a\u5f8b\u662f\u7ed3\u5408\u5f8b\uff0c\u628a\u5b83\u5199\u6210\u66f4\u50cf\u7ed3\u5408\u5f8b\u7684\u8868\u793a\u65b9\u6cd5\u662f\uff1a (m >>= (\\x -> g x)) >>= h = m >>= (\\x -> g x >>= h)","title":"Monad Laws"},{"location":"cs/pl/haskell/#intuition_2","text":"Monad \u4e5f\u53ef\u4ee5\u5f88\u81ea\u7136\u5730\u770b\u6210 Applicative \u7684\u5347\u7ea7\u7248\uff0c\u6bd4\u5982 Applicative \u7684\u64cd\u4f5c\u5168\u90e8\u662f\u56fa\u5b9a\u7684\uff0c\u800c Monad \u7684\u64cd\u4f5c\u53ef\u4ee5\u5728\u4e2d\u9014\u7a81\u7136\u6539\u53d8 \u540c\u65f6 Monad \u4e5f\u5b8c\u6210\u4e86 Functor \u548c Applicative \u65e0\u6cd5\u5b8c\u6210\u7684\u64cd\u4f5c\u3002\u6bd4\u5982\u8981\u7528 fmap \u548c\u5b9e\u73b0 >>= \u51fd\u6570\uff08\u5373\u8fbe\u6210\u64cd\u4f5c m a -> (a -> m b) -> m b\uff09\uff0c\u5148\u5047\u8bbe f :: a -> m b\uff0c\u90a3\u4e48 fmap f \u7684\u7c7b\u578b\u5c31\u4f1a\u662f m a -> m (m b)\uff0c\u5c06 m a \u5e94\u7528\u5728 fmap f \u4e0a\u4f1a\u5f97\u5230\u7ed3\u679c m (m b)\uff0c\u800c\u4e0d\u662f m b\u3002\u4f46\u662f\u76ee\u524d\u53ea\u53ef\u4ee5\u4f7f\u7528 pure \u5c06\u4e00\u4e2a\u503c\u88c5\u5165\u4e0a\u4e0b\u6587\u4e2d\uff08a -> m a\uff09\uff0c\u800c\u6ca1\u6709\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u4ece\u4e0a\u4e0b\u6587\u4e2d\u63d0\u53d6\u503c\uff08m a -> a\uff09\u3002\u90a3\u4e48\u5c31\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684\u51fd\u6570\u6765\u5b9e\u73b0\u8fd9\u4e2a\u64cd\u4f5c\u7684\u6548\u679c\uff08m (m b) -> m b\uff09\u3002\u56e0\u6b64 Monad \u7684\u53e6\u4e00\u4e2a\u7b49\u6548\u7684\u5b9a\u4e49\u65b9\u6cd5\u662f\uff1a class Applicative m => Monad' m where join :: m ( m a ) -> m a ( >>= ) :: m a -> ( a -> m b ) -> m b x >>= f = join $ fmap f x \u4f46\u662f\u5b9a\u4e49 >>= \u51fd\u6570\u4f1a\u66f4\u4e3a\u76f4\u89c2\u65b9\u4fbf\uff0c\u6240\u4ee5 Haskell \u91c7\u7528\u4e86\u7528 >>= \u51fd\u6570\u5b9a\u4e49 Monad \u7684\u65b9\u6cd5 \u540c\u65f6 Haskell \u8fd8\u63d0\u4f9b\u4e86 join \u51fd\u6570\u7684\u5b9a\u4e49\uff1a join :: Monad m => m ( m a ) -> m a join x = x >>= id","title":"Intuition"},{"location":"cs/pl/haskell/#_19","text":"","title":"\u5e38\u7528\u51fd\u6570"},{"location":"cs/pl/haskell/#monadfail","text":"MonadFail \u5b9a\u4e49\u5728 Control.Monad.Fail \u6a21\u5757\u4e2d\uff1a class Monad m => MonadFail m where fail :: String -> m a \u5b83\u53ea\u8981\u6c42\u5728 Monad \u7684\u57fa\u7840\u4e0a\u5b9e\u73b0 fail \u51fd\u6570\uff0c\u63a5\u6536\u4e00\u4e2a\u5b57\u7b26\u4e32\u8fd4\u56de\u4e00\u4e2a\u5355\u5b50\u3002\u8fd9\u4f1a\u4f7f\u5728 do \u8bed\u53e5\u4e2d\u4ea7\u751f\u9519\u8bef\u65f6\u76f4\u63a5\u53d8\u4e3a\u9519\u8bef\u503c\uff08\u7a7a\u503c\uff09\u4f7f\u6700\u7ec8\u7684\u8fd4\u56de\u503c\u4e3a\u9519\u8bef\u503c","title":"MonadFail"},{"location":"cs/pl/haskell/#monadfail_1","text":"instance MonadFail Maybe where fail _ = Nothing instance MonadFail [] where fail _ = [] instance MonadFail IO where fail = failIO Maybe \u548c [] \u7684 fail \u51fd\u6570\u90fd\u4e0e\u7b2c\u4e00\u4e2a\u53c2\u6570\u65e0\u5173\uff0c\u76f4\u63a5\u8fd4\u56de\u7a7a\u503c\uff08Nothing\u3001[]\uff09\uff1b\u800c IO \u7684 fail \u51fd\u6570\u76f4\u63a5\u4f7f\u7528 failIO\uff0c\u5b9e\u73b0\u65b9\u6cd5\u4e5f\u662f\u6df1\u5965\uff08\u63a5\u7740\u9003 exampleFail :: Maybe Char exampleFail = do ( x : xs ) <- Just \"\" return x ghci > exampleFail Nothing \u5728\u8fd9\u4e2a\u4f8b\u5b50\u7684 do \u8bed\u53e5\u4e2d\uff0c\u5728\u63d0\u53d6 Just \"\" \u4e2d\u7684\u503c\u65f6\u7528\u4e86\u6a21\u5f0f\u5339\u914d\uff0c\u4f46\u662f\u56e0\u4e3a\u5176\u5185\u5bb9\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0cx:xs \u5339\u914d\u4f1a\u51fa\u73b0\u9519\u8bef\uff0c\u8fd9\u65f6\u5c31\u4f1a\u89e6\u53d1 fail \u51fd\u6570\u76f4\u63a5\u8fd4\u56de Nothing","title":"MonadFail \u5b9e\u4f8b"},{"location":"cs/pl/haskell/#monadfail-law","text":"fail s >>= m = fail s","title":"MonadFail Law"},{"location":"cs/pl/haskell/#semigroup","text":"\u534a\u7fa4\uff08semigroup\uff09\u662f\u4e00\u4e2a\u96c6\u5408 \\(S\\) \uff0c\u5b83\u9700\u8981\u6307\u5b9a\u4e00\u4e2a\u4e8c\u5143\u8fd0\u7b97\u7b26 \\(\\oplus\\) \uff0c\u5e76\u4e14\u6ee1\u8db3 \\[ a\\oplus b \\in S\\quad a, b\\in S \\] \u4ee5\u53ca\u7ed3\u5408\uff08associative\uff09\u5f8b\uff1a \\[ (a\\oplus b)\\oplus c = a\\oplus (b\\oplus c) \\] \u8fd9\u4e2a\u4e8c\u5143\u8fd0\u7b97\u7b26\u5728 Haskell \u7684 Semigroup \u4e2d\u88ab\u5b9a\u4e49\u4e3a <> \u51fd\u6570\uff1a class Semigroup a where ( <> ) :: a -> a -> a sconcat :: NonEmpty a -> a sconcat ( a :| as ) = go a as where go b ( c : cs ) = b <> go c cs go b [] = b stimes :: Integarl b => b -> a -> a stimes = ... \u9664\u6b64\u4e4b\u5916\u8fd8\u6709 sconcat \u548c stimes \u51fd\u6570\uff0c\u90fd\u7ed9\u51fa\u4e86\u9ed8\u8ba4\u5b9e\u73b0\u3002\u5bf9\u4e8e\u5217\u8868\uff0c<> \u76f8\u5f53\u4e8e (++)\uff0cstimes \u76f8\u5f53\u4e8e concat . replicate\uff1a ghci > [ 1 , 2 ] <> [ 3 , 4 ] [ 1 , 2 , 3 , 4 ] ghci > sconcat $ fromList [[ 1 , 2 ], [ 3 , 4 ]] [ 1 , 2 , 3 , 4 ] ghci > stimes 3 [ 1 , 2 ] [ 1 , 2 , 1 , 2 , 1 , 2 ]","title":"Semigroup"},{"location":"cs/pl/haskell/#semigroup-law","text":"(x <> y) <> z = x <> (y <> z)","title":"Semigroup Law"},{"location":"cs/pl/haskell/#nonempty","text":"NonEmpty \u8868\u793a\u975e\u7a7a\u5217\u8868\uff0c\u5b9a\u4e49\u662f\uff1a data NonEmpty a = a :| [ a ] deriving ( Eq , Ord ) \u4f7f\u7528\u4e00\u4e2a\u5143\u7d20\u548c\u4e00\u4e2a\u5217\u8868\u7528 :| \u8fde\u63a5\u5c31\u53ef\u4ee5\u751f\u6210\u4e00\u4e2a NonEmpty \u7c7b\u578b\u7684\u5217\u8868 Data.List.NonEmpty \u6a21\u5757\u4e2d\u5b9e\u73b0\u4e86\u5f88\u591a\u666e\u901a\u5217\u8868\u6709\u7684\u51fd\u6570\uff0c\u9700\u8981 qualified import \u540e\u8c03\u7528\uff0c\u4f7f\u7528 fromList\u3001toList \u51fd\u6570\u53ef\u4ee5\u5728\u666e\u901a\u5217\u8868\u548c\u975e\u7a7a\u5217\u8868\u4e4b\u95f4\u8f6c\u6362 ghci > import qualified Data.List.NonEmpty as NE ghci > arr = NE . fromList [ 1 , 2 , 3 ] ghci > arr 1 :| [ 2 , 3 ] ghci > NE . head arr 1 ghci > NE . tail arr [ 2 , 3 ]","title":"\u8865\uff1aNonEmpty"},{"location":"cs/pl/haskell/#monoid","text":"\u5e7a\u534a\u7fa4\uff08Monoid\uff09\u662f\u4e00\u4e2a\u6709\u5355\u4f4d\u5143\u7d20 \\(e\\) \u7684\u534a\u7fa4\uff0c\u5373 \\(e\\) \u6ee1\u8db3\uff1a \\[ e\\oplus x = x\\oplus e = x \\] class Semigroup a => Monoid a where mempty :: a mappend :: a -> a -> a mappend = ( <> ) mconcat :: [ a ] -> a mconcat = foldr mappend mempty \u53ef\u4ee5\u770b\u51fa Monoid \u8981\u6c42\u4e86\u4e09\u4e2a\u51fd\u6570\uff0c\u5176\u4e2d\u6700\u5c11\u53ea\u9700\u8981 mempty \uff0c\u5b83\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u503c\uff0c\u8868\u793a\u5355\u4f4d\u5143\u7d20\u3002 mappend \u5373 Semigroup \u4e2d\u7684 <> \u8fd0\u7b97\u7b26\uff0c mconcat \u4e5f\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u5b9e\u73b0","title":"Monoid"},{"location":"cs/pl/haskell/#monoid_1","text":"","title":"Monoid \u5b9e\u4f8b"},{"location":"cs/pl/haskell/#monoid-laws","text":"mempty <> x = x x <> mempty = x (x <> y) <> z = x <> (y <> z)","title":"Monoid Laws"},{"location":"cs/pl/haskell/#monoidal-classes","text":"Applicative\u3001Monad\u3001Arrow \u90fd\u6709\u6709\u5e7a\u534a\u7fa4\u6027\u8d28\u7684\u5b50\u7c7b\u578b\u7c7b\uff0c\u5206\u522b\u662f Alternative\u3001MonadPlus\u3001ArrowPlus","title":"Monoidal classes"},{"location":"cs/pl/haskell/#alternative","text":"class Applicative f => Alternative f where -- | The identity of '<|>' empty :: f a -- | An associative binary operation ( <|> ) :: f a -> f a -> f a some :: f a -> f [ a ] some v = ( : ) <$> v <*> many v many :: f a -> f [ a ] many v = some v <|> pure [] \u5176\u4e2d empty \u662f\u5e7a\u534a\u7fa4\u4e2d\u7684\u5355\u4f4d\u5143\u7d20\uff0c<|> \u662f\u5e7a\u534a\u7fa4\u4e2d\u7684\u4e8c\u5143\u8fd0\u7b97\u7b26\u3002some \u548c many \u662f\u4e24\u4e2a\u51fd\u6570\uff08 \u610f\u4e49\u8fd8\u4e0d\u61c2 \uff09","title":"Alternative"},{"location":"cs/pl/haskell/#monadplus","text":"class ( Alternative m , Monad m ) => MonadPlus m where mzero :: m a mzero = empty mplus :: m a -> m a -> m a mplus = ( <|> )","title":"MonadPlus"},{"location":"cs/pl/haskell/#arrowplus","text":"ArrowZero \u548c ArrowPlus \u5206\u522b\u4e3a Arrow \u8bbe\u7f6e\u4e86 Monoid \u4e2d\u7684\u5355\u4f4d\u5143\u7d20\u548c\u4e8c\u5143\u8fd0\u7b97\u7b26\uff0c\u4f7f\u4e4b\u6210\u4e3a\u4e86\u4e00\u4e2a\u5e7a\u534a\u7fa4\uff1a class Arrow arr => ArrowZero arr where zeroArrow :: b ` arr ` c class ArrowZero arr => ArrowPlus arr where ( <+> ) :: ( b ` arr ` c ) -> ( b ` arr ` c ) -> ( b ` arr ` c )","title":"ArrowPlus"},{"location":"cs/pl/haskell/#typeclasses_1","text":"","title":"\u4e00\u4e9b\u5176\u5b83 Typeclasses"},{"location":"cs/pl/haskell/#foldable","text":"Foldable \u662f\u8868\u793a\u53ef\u4ee5\u6298\u53e0\uff08fold\uff09\u7684\u7c7b\u578b\u7c7b\uff0c\u5728 Data.Foldable \u4e2d\u5b9a\u4e49\uff0c\u8fd9\u4f7f\u5f97\u548c fold \u76f8\u5173\u7684\u51fd\u6570\u53ef\u4ee5\u7528\u5728\u4efb\u610f Foldable \u7684\u5b9e\u4f8b\u7c7b\u578b\u4e0a\u3002\u5b83\u7684\u5b9a\u4e49\u662f\uff1a class Foldable t where fold :: Monoid m => t m -> m foldMap :: Monoid m => ( a -> m ) -> t a -> m foldMap' :: Monoid m => ( a -> m ) -> t a -> m foldr :: ( a -> b -> b ) -> b -> t a -> b foldr' :: ( a -> b -> b ) -> b -> t a -> b foldl :: ( b -> a -> b ) -> b -> t a -> b foldl' :: ( b -> a -> b ) -> b -> t a -> b foldr1 :: ( a -> a -> a ) -> t a -> a foldl1 :: ( a -> a -> a ) -> t a -> a toList :: t a -> [ a ] null :: t a -> Bool length :: t a -> Int elem :: Eq a => a -> t a -> Bool maximum :: Ord a => t a -> a minimum :: Ord a => t a -> a sum :: Num a => t a -> a product :: Num a => t a -> a {-# MINIMAL foldMap | foldr #-} \u6700\u5c11\u53ea\u8981\u5b9e\u73b0 foldr \u548c foldMap \u5176\u4e2d\u4e4b\u4e00\u5c31\u53ef\u4ee5\u4f7f\u4e00\u4e2a\u7c7b\u578b\u6210\u4e3a Foldable \u7684\u5b9e\u4f8b\uff0c\u5176\u5b83\u7684\u51fd\u6570\u90fd\u6709\u7531\u8fd9\u4e24\u4e2a\u51fd\u6570\u63d0\u4f9b\u7684\u9ed8\u8ba4\u5b9e\u73b0\uff0c\u800c\u4e14\u8fd9\u4e24\u4e2a\u51fd\u6570\u4e4b\u95f4\u4e5f\u6709\u76f8\u4e92\u5b9e\u73b0\u3002\u56e0\u6b64\u53ea\u8981\u5b9e\u73b0 foldr \u6216 foldMap \u4e00\u4e2a\u51fd\u6570\u5c31\u53ef\u4ee5\u4f7f\u7528\u6240\u6709\u5176\u5b83 Foldable \u4e2d\u7684\u51fd\u6570\u3002foldr \u51fd\u6570\u5728\u524d\u9762\u5df2\u7ecf\u6709\u5b66\u8fc7\uff0cfoldMap \u7684\u4f8b\u5b50\u662f\uff1a ghci > foldMap Sum [ 1 , 3 , 5 ] Sum { getSum = 9 } ghci > foldMap Product [ 1 , 3 , 5 ] Product { getProduct = 15 } ghci > foldMap ( replicate 3 ) [ 1 , 2 , 3 ] [ 1 , 1 , 1 , 2 , 2 , 2 , 3 , 3 , 3 ]","title":"Foldable"},{"location":"cs/pl/haskell/#traversable","text":"Traversable \u662f\u8868\u793a\u53ef\u904d\u5386\u7684\u7c7b\u578b\u7c7b\uff0c\u5728 Data.Traversable \u6a21\u5757\u4e2d\u5b9a\u4e49\uff0c\u5b83\u662f Foldable \u7684\u5347\u7ea7\u7248\uff0c\u540c\u65f6\u4e5f\u662f\u4e00\u4e2a Functor\uff0c\u5b83\u7684\u5b9a\u4e49\u662f\uff1a class ( Functor t , Foldable t ) => Traversable t where traverse :: Applicative f => ( a -> f b ) -> t a -> f ( t b ) sequenceA :: Applicative f => t ( f a ) -> f ( t a ) mapM :: Monad m => ( a -> m b ) -> t a -> m ( t b ) sequence :: Monad m => t ( m a ) -> m ( t a ) {-# MINIMAL traverse | sequenceA #-} \u6700\u5c11\u53ea\u9700\u8981\u5b9e\u73b0 traverse \u51fd\u6570\u6216\u8005 sequenceA \u51fd\u6570\u3002\u5176\u4e2d\u5404\u4e2a\u51fd\u6570\u7684\u529f\u80fd\u901a\u8fc7\u7c7b\u578b\u7b7e\u540d\u4e5f\u90fd\u80fd\u63a8\u6d4b\u51fa\u6765\u3002\u4f46\u662f\u5176\u4e2d mapM \u5c31\u662f traverse\uff0csequence \u5c31\u662f sequenceA\uff0c\u5b83\u4eec\u5b58\u5728\u53ea\u662f\u5386\u53f2\u9057\u7559","title":"Traversable"},{"location":"cs/pl/haskell/#bifunctor","text":"Functor \u7684\u5b9e\u4f8b\u7684 kind \u90fd\u662f * -> *\uff0c\u56e0\u6b64 fmap \u53ea\u80fd\u5c06\u4e00\u4e2a\u51fd\u6570\u6620\u5c04\u5230\u4e00\u4e2a\u503c\u4e0a\u3002\u800c Bifunctor\uff08\u5728 Data.Bifunctor \u6a21\u5757\u4e2d\u5b9a\u4e49\uff09\u7684\u5b9e\u4f8b\u7684 kind \u662f * -> * -> *\uff0c\u800c\u4e14\u5b83\u7684 bimap \u53ef\u4ee5\u540c\u65f6\u5c06\u4e24\u4e2a\u51fd\u6570\u6620\u5c04\u5230\u4e24\u4e2a\u503c\u4e0a\uff1a class Bifunctor p where bimap :: ( a -> b ) -> ( c -> d ) -> p a c -> p b d first :: ( a -> b ) -> p a c -> p b c second :: ( b -> c ) -> p a b -> p a c {-# MINIMAL bimap | first, second #-} \u540c\u65f6 bimap \u548c first,second \u4e4b\u95f4\u4e5f\u53ef\u4ee5\u76f8\u4e92\u8f6c\u6362\uff1a bimap f g = first f . second g first f = bimap f id second g = bimap id g \u5bf9\u4e8e Functor\uff0c((,) e) \u548c Either e \u624d\u662f Functor \u7684\u5b9e\u4f8b\uff0c\u56e0\u4e3a\u4ed6\u4eec\u662f * -> *\u3002\u4f46\u662f\u5bf9\u4e8e Bifunctor\uff0c(,) \u548c Either \u5c31\u662f Bifunctor \u7684\u5b9e\u4f8b\uff1a ghci > bimap ( + 1 ) length ( 4 , [ 1 , 2 , 3 ]) ( 5 , 3 )","title":"Bifunctor"},{"location":"cs/pl/haskell/#category","text":"Haskell \u4e2d\u7684 Category \u5c06\u4e00\u822c\u7684\u51fd\u6570\u63a8\u5e7f\u5230\u4e86\u666e\u904d\u7684\u6001\u5c04\u4e0a\uff0c\u5b83\u5728 Control.Category \u6a21\u5757\u4e2d\uff0c\u5b9a\u4e49\u662f\uff1a class Category cat where id :: cat a a ( . ) :: cat b c -> cat a b -> cat a c \u5b83\u7684\u5b9e\u4f8b\u6709 (->) \u548c Kleisli m \uff1a instance Category ( -> ) where id = GHC . Base . id ( . ) = ( GHC . Base .. ) Kleisli \u662f\u4e00\u4e2a\u8303\u7574\uff0c\u7528\u6765\u8868\u793a\u51fd\u6570 a -> m b\uff0cHaskell \u4e2d\uff0c\u5b83\u5728 Control.Arrow \u6a21\u5757\u4e2d\u5b9a\u4e49\uff1a newtype Kleisli m a b = Kleisli { runKleisli :: a -> m b } instance Monad m => Category ( Kleisli m ) where id :: Kleisli m a a id = Kleisli return ( . ) :: Kleisli m b c -> Kleisli m a b -> Kleisli m a c Kleisli g . Kleisli h = Kleisli ( h >=> g ) Category \u8981\u6ee1\u8db3\u7684\u5b9a\u5f8b\u53ea\u6709 id \u662f (.) \u64cd\u4f5c\u7684\u5355\u4f4d\u5143\uff0c\u4ee5\u53ca (.) \u64cd\u4f5c\u662f\u53ef\u7ed3\u5408\u7684 \u540c\u65f6 Category \u8fd8\u63d0\u4f9b\u4e86\u4e24\u4e2a\u51fd\u6570 <<< \u548c >>> \uff1a ( <<< ) :: Category cat => cat b c -> cat a b -> cat a c ( <<< ) = ( . ) ( >>> ) :: Category cat => cat a b -> cat b c -> cat a c f >>> g = g . f","title":"Category"},{"location":"cs/pl/haskell/#arrow","text":"Arrow \u5c06\u51fd\u6570\u8fdb\u4e00\u6b65\u62bd\u8c61\u5316\uff0c\u5b83\u5b9a\u4e49\u5728 Control.Arrow \u6a21\u5757\u4e2d\uff1a class Category a => Arrow a where arr :: ( b -> c ) -> a b c first :: a b c -> a ( b , d ) ( c , d ) second :: a b c -> a ( d , b ) ( d , c ) ( *** ) :: a b c -> a b' c' -> a ( b , b' ) ( c , c' ) ( &&& ) :: a b c -> a b c' -> a b ( c , c' ) {-# MINIMAL arr, (first | (***)) #-} \u5176\u4e2d\uff1a arr \u51fd\u6570\u5c06\u4e00\u4e2a\u51fd\u6570\u53d8\u6210\u4e00\u4e2a Arrow first \u51fd\u6570\u5c06\u4e00\u4e2a Arrow \u53d8\u6210\u4e00\u4e2a\u4e8c\u5143\u7ec4\u95f4\u7684 Arrow\uff0c\u4e14\u53ea\u4f1a\u5bf9\u4e00\u4e2a\u5143\u7d20\u8fdb\u884c\u64cd\u4f5c\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u4fdd\u6301\u4e0d\u53d8 second \u51fd\u6570\u4e0e first \u76f8\u53cd\uff0c\u7b2c\u4e00\u4e2a\u5143\u7d20\u4fdd\u6301\u4e0d\u53d8 *** \u51fd\u6570\u662f Arrow \u4e4b\u95f4\u7684 parallel composition\uff0c\u5bf9\u4e8e\u51fd\u6570: (g *** h) (x, y) = (g x, h y) &&& \u51fd\u6570\u662f Arrow \u4e4b\u95f4\u7684 fanout composition\uff0c\u5bf9\u4e8e\u51fd\u6570: (g &&& h) x = (g x, h x) \u5b83\u7684\u5b9e\u4f8b\u4e5f\u6709 (->) \u548c Kleisli\uff1a instance Arrow ( -> ) where arr :: ( b -> c ) -> ( b -> c ) arr g = g first :: ( b -> c ) -> (( b , d ) -> ( c , d )) first g ( x , y ) = ( g x , y ) instance Monad m => Arrow ( Kleisli m ) where arr :: ( b -> c ) -> Kleisli m b c arr f = Kleisli ( return . f ) first :: Kleisli m b c -> Kleisli m ( b , d ) ( c , d ) first ( Kleisli f ) = Kleisli ( \\ ~ ( b , d ) -> do c <- f b return ( c , d ) ) \u5e38\u7528\u51fd\u6570\uff1a returnA :: Arrow a => a b b returnA = arr id ( ^>> ) :: Arrow a => ( b -> c ) -> a c d -> a b d f ^>> a = arr f >>> a ( >>^ ) :: Arrow a => a b c -> ( c -> d ) -> a b d a >>^ f = a >>> arr f ( <<^ ) :: Arrow a => a c d -> ( b -> c ) -> a b d a <<^ f = a <<< arr f ( ^<< ) :: Arrow a => ( c -> d ) -> a b c -> a b d f ^<< a = arr f <<< a","title":"Arrow"},{"location":"cs/pl/haskell/#haskell_1","text":"Haskell \u4e2d\u7684\u51fd\u5b50\u5355\u5b50\u7b49\u90fd\u4e0e\u8303\u7574\u8bba\uff08category theory\uff09\u6709\u5f88\u591a\u8054\u7cfb\uff0c\u6240\u4ee5\u6253\u7b97\u7b80\u5355\u4e86\u89e3\u4e00\u4e0b\u8303\u7574\u8bba\u7684\u76f8\u5173\u5185\u5bb9\u3002 \u8303\u7574\u8bba \u662f\u6570\u5b66\u7684\u4e00\u95e8\u5b66\u79d1\uff0c\u4ee5\u62bd\u8c61\u7684\u65b9\u6cd5\u5904\u7406\u6570\u5b66\u6982\u5ff5\uff0c\u5c06\u8fd9\u4e9b\u6982\u5ff5\u5f62\u5f0f\u5316\u6210\u4e00\u7ec4\u7ec4\u7684\u201c\u7269\u4ef6\u201d\u53ca\u201c\u6001\u5c04\u201d\u3002\u6570\u5b66\u4e2d\u8bb8\u591a\u91cd\u8981\u7684\u9886\u57df\u53ef\u4ee5\u5f62\u5f0f\u5316\u4e3a\u8303\u7574\u3002\u4f7f\u7528\u8303\u7574\u8bba\u53ef\u4ee5\u4ee4\u8fd9\u4e9b\u9886\u57df\u4e2d\u8bb8\u591a\u96be\u7406\u89e3\u3001\u96be\u6349\u6478\u7684\u6570\u5b66\u7ed3\u8bba\u66f4\u5bb9\u6613\u53d9\u8ff0\u8bc1\u660e\u3002 \u2014\u2014\u2014\u2014 \u7ef4\u57fa\u767e\u79d1","title":"Haskell \u4e0e\u8303\u7574\u8bba"},{"location":"cs/pl/haskell/#category_1","text":"\u8303\u7574\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u96c6\u5408\uff0c\u4e00\u4e2a\u8303\u7574 \\(\\mathbf{C}\\) \u5305\u542b\u4e09\u4e2a\u7ec4\u6210\u6210\u5206\uff1a \u4e00\u4e2a\u7c7b \\(\\mathrm{ob}(\\mathbf{C})\\) \uff1a\u5176\u4e2d\u5143\u7d20\u79f0\u4e3a \u5bf9\u8c61\uff08objects\uff09 \u4e00\u4e2a\u7c7b \\(\\mathrm{hom}(\\mathbf{C})\\) \uff1a\u5176\u4e2d\u5143\u7d20\u79f0\u4e3a \u6001\u5c04\uff08morphisms\uff09 \uff08\u6216 \u7bad\u53f7\uff08arrows\uff09 \uff09\uff1a\u6bcf\u4e2a\u6001\u5c04\u8fde\u63a5\u4e86\u4e24\u4e2a\u5bf9\u8c61\uff1a\u6e90\u5bf9\u8c61\uff08source object\uff09\u3001\u76ee\u6807\u5bf9\u8c61\uff08target object\uff09\u3002\u5982\u679c \\(f\\) \u662f\u4ece\u6e90\u5bf9\u8c61 \\(A\\) \u5230\u76ee\u6807\u5bf9\u8c61 \\(B\\) \uff08 \\(A, B\\in \\mathrm{ob}(\\mathbf{C})\\) \uff09\u7684\u6001\u5c04\uff0c\u90a3\u4e48\u8bb0\u4e3a \\(f : A\\to B\\) \u4e00\u4e2a\u4e8c\u5143\u8fd0\u7b97\uff0c\u79f0\u4e3a\u6001\u5c04 \u590d\u5408\uff08composition\uff09 \uff1a\u4e24\u4e2a\u6001\u5c04 \\(g : A\\to B\\) \u3001 \\(f : B\\to C\\) \u7684\u590d\u5408\u8bb0\u4e3a \\(f\\circ g : A\\to C\\) \u5728 Haskell \u548c\u5927\u90e8\u5206\u6570\u5b66\u7406\u8bba\u4e2d\u90fd\u662f\u4ece\u53f3\u5411\u5de6\u8ba1\u7b97\uff0c\u5373 \\(f\\circ g\\) \u4e2d\u662f\u5148\u8ba1\u7b97 \\(g : A\\to B\\) \u518d\u8ba1\u7b97 \\(f : B\\to C\\) \u8bb8\u591a\u4e1c\u897f\u90fd\u53ef\u4ee5\u7ec4\u6210\u8303\u7574\u3002\u6bd4\u5982: \u4f8b \u2003 \\(\\mathbf{Set}\\) \u662f\u4e00\u4e2a\u8303\u7574\uff0c\u5bf9\u8c61\u4e3a\u6240\u6709\u96c6\u5408\uff0c\u6001\u5c04\u4e3a\u96c6\u5408\u4e4b\u95f4\u7684\u51fd\u6570\uff0c\u590d\u5408\u5373\u51fd\u6570\u4e4b\u95f4\u7684\u590d\u5408 \u2003 \\(\\mathbf{Grp}\\) \u662f\u4e00\u4e2a\u8303\u7574\uff0c\u5bf9\u8c61\u4e3a\u6240\u6709\u7fa4\uff0c\u6001\u5c04\u4e3a\u7fa4\u540c\u6001\uff08group homomorphisms\uff09\uff0c\u4f8b\u5982\u5bf9\u4e8e\u7fa4 \\((G,*)\\) \u548c \\((H,\\cdot )\\) \uff0c\u6709\u7fa4\u540c\u6001 \\(h : (G,*)\\to (H,\\cdot )\\) \uff0c\u5219\u9700\u8981\u5bf9\u4e8e \\(G\\) \u4e2d\u7684\u4efb\u610f\u5143\u7d20 \\(u,v\\) \u6ee1\u8db3 \\[h(u*v)=h(u)\\cdot h(v)\\] \u6ce8\u610f \u6001\u5c04\u4e0d\u5fc5\u987b\u4e3a\u51fd\u6570\uff1b\u800c\u4e14\u53ef\u4ee5\u5b58\u5728\u6e90\u5bf9\u8c61\u548c\u76ee\u6807\u5bf9\u8c61\u90fd\u76f8\u540c\u7684\u4e0d\u540c\u6001\u5c04","title":"\u8303\u7574\uff08Category\uff09"},{"location":"cs/pl/haskell/#functors_1","text":"\u4e00\u4e2a\u8303\u7574\u4e2d\u7684\u6001\u5c04\u5c06\u4e24\u4e2a\u5bf9\u8c61\u8054\u7cfb\u8d77\u6765\uff0c\u800c\u51fd\u5b50\u5219\u4f1a\u5c06\u4e24\u4e2a\u8303\u7574\u8054\u7cfb\u8d77\u6765\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u51fd\u5b50\u5c31\u662f\u4ece\u4e00\u4e2a\u8303\u7574\u5230\u53e6\u4e00\u4e2a\u8303\u7574\u7684\u53d8\u6362\u3002\u6bd4\u5982\u5bf9\u4e8e\u8303\u7574 \\(\\mathbf{C}\\) \u3001 \\(\\mathbf{D}\\) \uff0c\u5b9a\u4e49\u51fd\u5b50 \\(F : \\mathbf{C}\\to\\mathbf{D}\\) \u6ee1\u8db3\uff1a \u5bf9\u4e8e \\(\\mathbf{C}\\) \u4e2d\u7684\u4efb\u610f\u5bf9\u8c61 \\(A\\) \uff0c\u5728 \\(\\mathbf{D}\\) \u4e2d\u90fd\u6709\u5bf9\u8c61 \\(F(A)\\) \u5bf9\u4e8e \\(\\mathbf{C}\\) \u4e2d\u7684\u4efb\u610f\u6001\u5c04 \\(f : A\\to B\\) \uff0c\u5728 \\(\\mathbf{D}\\) \u4e2d\u90fd\u6709\u6001\u5c04 \\(F(f) : F(A)\\to F(B)\\) \u4f8b \u9057\u5fd8\u51fd\u5b50\uff08forgetful functor\uff09 \\(U : \\mathbf{Grp}\\to\\mathbf{Set}\\) \uff0c\u5c06\u4e00\u4e2a\u7fa4\u6620\u5c04\u5230\u4e00\u4e2a\u96c6\u5408\u4e2d\uff0c\u5c06\u7fa4\u540c\u6001\u6620\u5c04\u5230\u96c6\u5408\u95f4\u7684\u51fd\u6570 \u5e42\u96c6\u51fd\u5b50\uff08power set functor\uff09 \\(P : \\mathbf{Set}\\to\\mathbf{Set}\\) \uff0c\u5c06\u4e00\u4e2a\u96c6\u5408\u6620\u5c04\u5230\u5b83\u7684\u5e42\u96c6\uff0c\u5c06\u539f\u96c6\u5408\u4e2d\u7684\u51fd\u6570 \\(f : A\\to B\\) \u6620\u5c04\u5230\u51fd\u6570 \\(P(f) : \\mathcal{P}(A)\\to\\mathcal{P}(B)\\) \uff0c\u5373\u4ece \\(U\\subseteq A\\) \u5230\u503c\u57df \\(f(U)\\subseteq B\\) \u7684\u6620\u5c04 \u81ea\u51fd\u5b50\uff08endofunctor\uff09 \\(1_{\\mathbf{C}} : \\mathbf{C}\\to\\mathbf{C}\\) \uff0c\u5c06\u4e00\u4e2a\u8303\u7574\u6620\u5c04\u5230\u5b83\u672c\u8eab","title":"\u51fd\u5b50\uff08Functors\uff09"},{"location":"cs/pl/haskell/#monads","text":"\u4e00\u4e2a\u5355\u5b50\u8bf4\u767d\u4e86\u4e0d\u8fc7\u5c31\u662f\u81ea\u51fd\u5b50\u8303\u7574\u4e0a\u7684\u4e00\u4e2a\u5e7a\u534a\u7fa4\u800c\u5df2 _(:\u0437\u300d\u2220)_ \u81ea\u51fd\u5b50\u5728\u524d\u9762\u8bf4\u5230\u8fc7\u662f\u4ece\u4e00\u4e2a\u8303\u7574\u5230\u81ea\u8eab\u7684\u4e00\u4e2a\u51fd\u5b50\uff0c\u5982\u8303\u7574 \\(\\mathbf{C}\\) \u4e0a\u7684\u81ea\u51fd\u5b50\u662f \\(F : \\mathbf{C}\\to\\mathbf{C}\\) \u3002\u81ea\u51fd\u5b50\u8303\u7574\u5c31\u662f\u5bf9\u8c61\u90fd\u662f\u81ea\u51fd\u5b50\u7684\u8303\u7574\u3002\u5e7a\u534a\u7fa4\u548c Haskell \u4e2d\u5b66\u5230\u7684 Monoid \u7c7b\u578b\u7c7b\u4e00\u6837\uff0c\u662f\u4e00\u4e2a\u6709\u53ef\u7ed3\u5408\u4e8c\u5143\u8fd0\u7b97\u548c\u5355\u4f4d\u5143\u7684\u4ee3\u6570\u7ed3\u6784\u3002\u56e0\u6b64\u5355\u5b50\u5c31\u662f\u4e00\u4e2a\u81ea\u51fd\u5b50\uff0c\u800c\u4e14\u5b83\u6709\u53ef\u7ed3\u5408\u4e8c\u5143\u8fd0\u7b97\uff08Haskell \u4e2d >=> \uff09\u548c\u5355\u4f4d\u5143\uff08Haskell \u4e2d return \uff09\u3002 \u4e00\u4e2a\u5355\u5b50 \\(M : \\mathbf{C}\\to\\mathbf{C}\\) \u8fd8\u5305\u542b\u4e24\u4e2a\u6001\u5c04\uff08\u5bf9\u4e8e\u8303\u7574 \\(\\mathbf{C}\\) \u4e2d\u7684\u6240\u6709\u5bf9\u8c61 \\(X\\) \uff09\uff1a \\(\\mathrm{unit}_X^M : X\\to M(X)\\) \\(\\mathrm{join}_X^M : M(M(X))\\to M(X)\\) \uff08\u5f53\u5f0f\u5b50\u4e2d\u7684\u5355\u5b50\u660e\u663e\u662f \\(M\\) \u65f6\uff0c\u53ef\u4ee5\u7701\u7565\u4e0a\u6807 \\({}^M\\) \uff09 Haskell \u4e2d Monad \u7684\u5b9a\u4e49\u662f\uff1a class Functor m => Monad m where return :: a -> m a ( >>= ) :: m a -> ( a -> m b ) -> m b \u5176\u4e2d\u5f88\u663e\u7136\u591a\u6001\u51fd\u6570 return \u5bf9\u5e94\u4e86\u5b9a\u4e49\u4e2d\u7684 \\(\\mathrm{unit}\\) \uff0c\u4f46\u662f >>= \u548c \\(\\mathrm{join}\\) \u7684\u5bf9\u5e94\u5173\u7cfb\u5e76\u4e0d\u660e\u663e\u3002\u56e0\u6b64 Haskell \u4e2d\u6709\u4e00\u4e2a\u5de5\u5177\u51fd\u6570 join \uff0c\u5b83\u7684\u6548\u679c\u5c31\u662f\u5b9a\u4e49\u4e2d\u7684 \\(\\mathrm{join}\\) \uff0c\u800c\u4e14\u5b83\u53ef\u4ee5\u548c >>= \u4e92\u76f8\u5b9a\u4e49\uff1a join :: Monad m => m ( m a ) -> m a join x = x >>= id ( >>= ) :: m a -> ( a -> m b ) -> m b x >>= f = join $ fmap f x \u6240\u4ee5 Haskell \u4e2d\u4e3a Monad \u8981\u6c42\u5b9a\u4e49 >>= \u5c31\u76f8\u5f53\u4e8e\u5b9a\u4e49\u4e86 \\(\\mathrm{join}\\) \u4f8b\u5982\uff0c\u5e42\u96c6\u51fd\u5b50 \\(P : \\mathbf{Set}\\to\\mathbf{Set}\\) \u4e5f\u662f\u4e00\u4e2a\u5355\u5b50\uff0c\u53ef\u4ee5\u4e3a\u5b83\u5b9a\u4e49 \\(\\mathrm{unit}\\) \u548c \\(\\mathrm{join}\\) \u4e24\u4e2a\u6001\u5c04\u3002Haskell \u4e2d\u7684\u5217\u8868\u4e5f\u53ef\u4ee5\u8fd1\u4f3c\u770b\u4f5c\u5e42\u96c6\u51fd\u5b50\u3002 \u6001\u5c04/\u51fd\u6570\u7684\u7c7b\u578b \u5e42\u96c6\u51fd\u5b50 Haskell \u4e2d\u5217\u8868 \u4e00\u4e2a\u96c6\u5408 \\(S\\) \u548c\u4e00\u4e2a\u6001\u5c04 \\(f : A\\to B\\) \u4e00\u4e2a\u7c7b\u578b T \u548c\u4e00\u4e2a\u51fd\u6570 f :: A -> B \\(P(f) : \\mathcal{P}(A)\\to\\mathcal{P}(B)\\) fmap f :: [A] -> [B] \\(\\mathrm{unit}_S : S\\to\\mathcal{P}(S)\\) return :: T -> [T] \\(\\mathrm{join}_S : \\mathcal{P}(\\mathcal{P}(S))\\to\\mathcal{P}(S)\\) join :: [[T]] -> [T] \u6001\u5c04/\u51fd\u6570\u7684\u5b9a\u4e49 \u5e42\u96c6\u51fd\u5b50 Haskell \u4e2d\u5217\u8868 \\((\\mathcal{P}(f))(S) = \\\\{f(a):a\\in S\\\\}\\) fmap f xs = [ f a | a <- xs ] \\(\\mathrm{unit}_S(x) = \\\\{x\\\\}\\) return x = [x] \\(\\mathrm{join}_S(L) = \\bigcup L\\) join xs = concat xs","title":"\u5355\u5b50\uff08Monads\uff09"},{"location":"cs/pl/haskell/#_30","text":"\u5543\u4e86\u5c06\u8fd1\u4e00\u4e2a\u6708\uff0c\u7b97\u662f\u628a Haskell \u7684\u4e3b\u8981\u5185\u5bb9\u90fd\u5543\u5b8c\u4e86\u3002\u4e3b\u8981\u5c31\u662f\u524d\u671f\u770b Learn You a Haskell \uff0c\u540e\u671f\u770b Typeclassopedia \uff0c\u90fd\u662f pdcxs \u63a8\u8350\u7ed9\u7684\u6559\u7a0b\u3002\u4f46\u662f\u4e00\u5806\u89c6\u9891\u4e00\u4e2a\u90fd\u6ca1\u6709\u8010\u5fc3\u770b\u8fdb\u53bbqwq \u540e\u9762\u7684\u90e8\u5206\u7684\u7406\u89e3\u611f\u89c9\u4e5f\u6ca1\u5230\u4f4d\uff0cCategory\u3001Arrow \u7b49\u8fd9\u4e9b\u7c7b\u578b\u7c7b\u4e5f\u5c31\u662f\u5927\u81f4\u5730\u770b\u4e86\u4e00\u773c\uff0c\u751a\u81f3\u6709\u4ec0\u4e48\u7528\u90fd\u4e0d\u592a\u6e05\u695a_(:\u0437\u300d\u2220)_ \u611f\u89c9 Haskell \u8fd9\u95e8\u8bed\u8a00\u786e\u5b9e\u5f88\u795e\u5947\uff0c\u5f88\u591a\u8bed\u6cd5\u90fd\u5f88\u6709\u610f\u601d\uff0c\u800c\u4e14\u53ef\u4ee5\u505a\u5230\u975e\u5e38\u8d34\u8fd1\u6570\u5b66\u3001\u8d34\u8fd1\u6570\u5b66\u6982\u5ff5\u3002\u5b66\u7684\u65f6\u5019\u4e5f\u662f\u8d8a\u5b66\u5751\u8d8a\u591a\uff0c\u5148\u662f\u51fd\u6570\u5f0f\u7f16\u7a0b\u5f15\u7533\u5230\u4e86 lambda \u6f14\u7b97\uff0c\u7136\u540e\u662f\u51fd\u5b50\u7b49\u4e00\u7cfb\u5217\u6982\u5ff5\u5f15\u7533\u5230\u4e86\u8303\u7574\u8bba\uff0c\u76ee\u524d\u8303\u7574\u8bba\u7b80\u5355\u5730\u770b\u4e86\u4e00\u90e8\u5206\uff0clambda \u6f14\u7b97\u4e5f\u6ca1\u6df1\u5165\u7814\u7a76\uff0c\u4ee5\u540e\u6709\u65f6\u95f4\u518d\u8bf4\u4e86\uff08\u5495\u5495\u5495\uff09 \u73b0\u5728\u611f\u89c9\u6211\u5b66\u5230\u7684 Haskell \u7b80\u76f4\u662f\u76ae\u6bdb\uff0c\u8fd8\u6709\u4e00\u5806\u6e90\u7801\u91cc\u7684\u4e1c\u897f\u4e0d\u77e5\u9053\u662f\u600e\u4e48\u56de\u4e8b\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e#\uff0c~\uff09\uff0c\u4e5f\u8fd8\u6709\u4e00\u5806\u7c7b\u578b\u7c7b\u548c\u7528\u6cd5\u6ca1\u6709\u5b66\u5230\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e Monad Transformer\u3001Writer\u3001Reader\u3001State\u3001Comonad\u3001MonadFix\u3001Lens\u3001Parsec\u3001\u2026\u2026\uff09 md\uff0c\u8fd9\u4e48\u4e00\u770b\u5dee\u7684\u8fd8\u771f\u591a \uff0c\u4ee5\u540e\u6709\u65f6\u95f4\u518d\u6162\u6162\u5b66\u4e86\uff0c\u8fd9\u4e2a\u5047\u671f\u8fd8\u6709\u597d\u591a\u5176\u5b83\u4e8b\u8981\u5e72\u5462\uff0cHaskell \u8fd9\u8fb9\u5148\u6478\u4e86_(:\u0437\u300d\u2220)_","title":"\u540e\u8bb0"},{"location":"cs/pl/haskell/#reference","text":"Learn You a Haskell Writing foldl using foldr - StackOverflow Haskell\uff1a\u7528foldr\u5b9a\u4e49foldl Typeclassopedia - Haskell wiki Hoogle Functors, Applicatives, And Monads In Pictures Haskell\u5b66\u4e60 - functor Haskell\u8bed\u8a00\u5b66\u4e60\u7b14\u8bb0\uff088\uff09Monoid - zwvista Haskell\u8bed\u8a00\u5b66\u4e60\u7b14\u8bb0\uff0816\uff09Alternative - zwvista Haskell\u8bed\u8a00\u5b66\u4e60\u7b14\u8bb0\uff0840\uff09Arrow\uff081\uff09 - zwvista 24 Days of GHC Extensions: Arrows - Tom Ellis Haskell\u8bed\u8a00\u5b66\u4e60\u7b14\u8bb0\uff0847\uff09Arrow\uff082\uff09 - zwvista Haskell/Category theory - wikibooks Category theory - wikipedia \u8303\u7574\u8bba - \u7ef4\u57fa\u767e\u79d1 Monad (category theory) - wikipedia Functor - wikipedia \"The End?\"","title":"Reference"},{"location":"ctf/qrcode/","text":"\u4e8c\u7ef4\u7801 QRCode \u6807\u51c6\u9605\u8bfb \u00b6 \u6700\u8fd1\u51e0\u6b21\u6bd4\u8d5b\u9047\u5230\u8fc7\u597d\u51e0\u6b21\u4e8c\u7ef4\u7801\u7684\u9898\u76ee\uff0c\u6253\u7b97\u597d\u597d\u6765\u8bfb\u4e00\u8bfb\u6807\u51c6\u6587\u6863 ISO/IEC 18004:2015 \u6587\u6863 6.1 \u524d\u9762\u7684\u5185\u5bb9\u4e0d\u591a\uff0c\u5c31\u4ece\u5b83\u540e\u9762\u5f00\u59cb\u8bb0\u4e86 \u57fa\u7840\u63cf\u8ff0\u53ca\u7ed3\u6784\uff086.1\u30016.3\uff09 \u00b6 \u57fa\u7840\u63cf\u8ff0\uff085.3\u30016.1\uff09 \u00b6 \u5757\u4f4d\u7f6e\uff1a\u5de6\u4e0a\u89d2\u4e3a\u539f\u70b9 (0, 0) \u5411\u4e0bx+\uff0c\u5411\u53f3y+ \u7248\u672c\u8868\u793a\uff1aVersion V-E\uff08\u5176\u4e2dV\u662f\u7248\u672c\u53f7\uff0cE\u662f\u7ea0\u9519\u7b49\u7ea7\uff09 \u6570\u636e\u8868\u793a\uff1a\u9ed1\u5757-1 \u767d\u5757-0\uff08\u53ef\u4ee5\u5e26\u80cc\u666f\u5168\u90e8\u53cd\u8272\uff09 \u5927\u5c0f\uff1a\u4ece\u7248\u672c1\u5230\u7248\u672c40\u4f9d\u6b21\u662f 21x21 \uff5e 177x177\uff08\u6bcf\u589e\u52a0\u4e00\u4e2a\u7248\u672c\uff0c\u8fb9\u957f\u589e\u52a04\uff09 \u652f\u6301\u7684\u6700\u591a\u5b57\u7b26\u6570\uff08\u7248\u672c40\uff09 \u6570\u5b57\u6a21\u5f0f\uff1a7089 \u5b57\u6bcd\u6a21\u5f0f\uff1a4296 \u5b57\u8282\u6a21\u5f0f\uff1a2953 \u65e5\u6587\u6a21\u5f0f\uff1a1817 \u7ea0\u9519\u7b49\u7ea7\u5141\u8bb8\u7684\u6062\u590d\u6bd4\u4f8b L\uff1a7% M\uff1a15% Q\uff1a25% H\uff1a30% \u4e8c\u7ef4\u7801\u7ed3\u6784\uff086.3\uff09 \u00b6 \u529f\u80fd\u56fe\u6848\uff08function patterns\uff09 \u7279\u5f81\u7b26\uff08finder pattern\uff097x7\u9ed1\u5708 5x5\u767d\u5708 3x3\u9ed1\u5757 \u5206\u5272\u7ebf\uff08separator\uff09\u5728\u7279\u5f81\u7b26\u5468\u56f4\u7684\u4e00\u5708\u5168\u767d\u533a\u57df \u65f6\u5e8f\u56fe\u6848\uff08timing patterns\uff09\u7b2c7\u884c\u7b2c7\u5217\u7684\u4e24\u6761\u9ed1\u767d\u6761\u7eb9 \u5bf9\u9f50\u56fe\u6848\uff08alignment patterns\uff09\u7248\u672c1\u65e0\uff0c\u7248\u672c2-6 1\u4e2a\uff0c\u7248\u672c7-13 6\u4e2a\u2026\u2026\uff08\u9644\u5f55E\uff09 \u9759\u9ed8\u533a\uff08quiet zone\uff09\u81f3\u5c114\u4e2a\u5355\u4f4d\u5bbd \u7f16\u7801\u533a\u57df\uff08encoding region\uff09 \u683c\u5f0f\u4fe1\u606f\uff08format information\uff09\u5de6\u4e0a\u89d2\u5206\u5272\u7ebf\u5916\u4e00\u5708\uff0c\u5de6\u4e0b\u89d2\u5206\u5272\u7ebf\u53f3\u4fa7\uff0c\u53f3\u4e0a\u89d2\u5206\u5272\u7ebf\u4e0b\u4fa7 \u7248\u672c\u4fe1\u606f\uff08version information\uff09\u7248\u672c7\u540e\u624d\u6709\uff0c\u5728\u5de6\u4e0b\u5206\u5272\u7ebf\u4e0a\u4fa7\uff0c\u53f3\u4e0a\u5206\u5272\u7ebf\u5de6\u4fa7 \u6570\u636e\u53ca\u7ea0\u9519\u7801\u533a\u57df \u6570\u636e\u7f16\u7801\uff087.4\uff09 \u00b6 \u6570\u636e\u5e8f\u5217\uff087.4.1\uff09 \u00b6 \u9ed8\u8ba4\u7684 ECI \u6a21\u5f0f\u4e0b\uff0c\u6bd4\u7279\u6d41\u4ee5\u6a21\u5f0f\u6807\u8bc6\u7b26\u5f00\u59cb\u3002\u5982\u679c\u4e0d\u662f\u9ed8\u8ba4 ECI \u6a21\u5f0f\uff0c\u5219\u9700\u8981\u4ece ECI \u5934\u5f00\u59cb\uff1a \uff084 bits\uff09ECI \u6a21\u5f0f\u6807\u8bc6\u7b26 \uff088/16/24 bits\uff09ECI Designator \u6bd4\u7279\u6d41\u7684\u5269\u4f59\u90e8\u5206\u7531\u4e0b\u9762\u51e0\u90e8\u5206\u7ec4\u6210\uff1a \uff084 bits\uff09\u6a21\u5f0f\u6807\u8bc6\u7b26 \u5b57\u7b26\u6570\u91cf\u6807\u8bc6\u7b26\uff08\u957f\u5ea6\u89c1\u4e0b\u7b2c\u4e8c\u4e2a\u8868\uff09 \u6570\u636e\u6bd4\u7279\u6d41 \u6a21\u5f0f \u6807\u8bc6\u7b26 \u8bf4\u660e ECI 0111 \u6570\u5b57\u6a21\u5f0f 0001 \u53ea\u5305\u542b\u6570\u5b570-9\uff0c3\u4e2a\u6570\u5b57 10 bits \u5b57\u6bcd\u6570\u5b57\u6a21\u5f0f 0010 45\u4e2a\u5b57\u7b26\uff0c0-9A-Z \u53ca9\u4e2a\u7b26\u53f7 \u7a7a\u683c$%*+-./:\uff0c2\u4e2a\u5b57\u7b26 11 bits \u5b57\u8282\u6a21\u5f0f 0100 \u6bcf\u4e2a\u5b57\u7b26 8 bits \u65e5\u672c\u6c49\u5b57\u6a21\u5f0f 1000 \u7ed3\u6784\u6dfb\u52a0\u6a21\u5f0f 0011 \u7248\u672c \u6570\u5b57\u6a21\u5f0f\u5b57\u7b26\u6570\u91cf\u6807\u8bc6\u7b26\u957f\u5ea6 \u5b57\u6bcd\u6a21\u5f0f\u2026\u2026 \u5b57\u8282\u6a21\u5f0f\u2026\u2026 \u65e5\u6587\u6a21\u5f0f\u2026\u2026 1\uff5e9 10 9 8 8 10\uff5e26 12 11 16 10 27\uff5e40 14 13 16 12 ECI \u6a21\u5f0f\uff087.4.2\uff09 \u00b6 ECI \u6a21\u5f0f\u5373\u4f7f\u7528\u67d0\u4e9b\u7279\u5b9a\u7684\u5b57\u7b26\u6620\u5c04\u6765\u628a\u5b57\u7b26\u8f6c\u6362\u4e3a\u6bd4\u7279\u6d41 \u800c\u4e14\u90fd\u4f7f\u7528\u5b57\u8282\u6a21\u5f0f\u6765\u8868\u793a\u6570\u636e\uff08\u5373\u5728 ECI \u5934\u540e\u7684\u6a21\u5f0f\u6807\u8bc6\u7b26\u4e3a\u5b57\u8282\u6a21\u5f0f\u7684 0100\uff09 \u6bcf\u4e2a ECI \u90fd\u6709\u4e00\u4e2a\u516d\u4f4d\u6570\u7f16\u53f7\uff08assignment value\uff09\uff0c\u53ef\u80fd\u5360 1\u30012\u30013 \u4e2a codewords\uff0c\u5177\u4f53\u6807\u8bc6\u65b9\u5f0f\u89c1\u4e0b\u8868\uff08\u53601\u4e2a codewords \u65f6\u5f00\u5934\u4e00\u5b9a\u662f0\uff0c\u53602\u4e2a\u65f6\u5f00\u5934\u4e00\u5b9a\u662f10\uff0c\u53603\u4e2a\u65f6\u5f00\u5934\u4e00\u5b9a\u662f110\uff09\u8868\u4e2d xxxxxxxx \u8868\u793a\u7f16\u53f7\u7684\u4e8c\u8fdb\u5236 ECI Assignment Value Codewords values 000000 \uff5e 000127 0xxxxxxx 000000 \uff5e 016383 10xxxxxx xxxxxxxx 000000 \uff5e 999999 110xxxxx xxxxxxxx xxxxxxxx \u800c\u4e14 ECI \u6a21\u5f0f\u4e0b\u4e2d\u9014\u53ef\u4ee5\u66f4\u6362 ECI \u6307\u793a\u5668\uff0c\u4e00\u4e2a 5C\uff0801011100\uff09\u8868\u793a\u6362\u65b0\u7684 ECI\uff0c\u540e\u9762\u8981\u63a56\u4e2a codewords \u53736\u4e2a\u6570\u5b57\uff08\u5341\u516d\u8fdb\u523630\uff5e39\uff09\u8868\u793a\u7f16\u53f7\uff0c\u800c\u4e0d\u662f\u7528\u4e0a\u8868\u4e2d\u7684\u8868\u793a\u65b9\u6cd5\u3002\u800c 5C \u6b63\u5e38\u60c5\u51b5\u4e0b\u8868\u793a \uff0c\u6240\u4ee5\u8868\u793a \u8fd9\u4e2a\u539f\u6570\u636e\u9700\u8981\u7528\u4e24\u4e2a 5C \u4f8b\u5b50 1 \u4f7f\u7528 ISO/IEC 8859-7\uff08ECI 000009\uff09\u6765\u8868\u793a\u5e0c\u814a\u5b57\u6bcd\u0391\u0392\u0393\u0394\u0395\uff08\u8be5 ECI \u4e0b\u8868\u793a\u4e3a\u5341\u516d\u8fdb\u5236 A1 A2 A3 A4 A5\uff09 \u6bd4\u7279\u6d41\uff1a ECI \u6807\u8bc6\u7b26\uff1a 0111 ECI \u7f16\u53f7\uff1a 00001001 \u5b57\u8282\u6a21\u5f0f\u6807\u8bc6\u7b26\uff1a 0100 \u5b57\u7b26\u6570\u91cf\uff1a 00000101 \uff085\u4e2a\u5b57\u7b26\uff09 \u6570\u636e\uff1a 10100001 10100010 10100011 10100100 10100101 \u6240\u4ee5\u6700\u7ec8\u7684\u6bd4\u7279\u6d41\uff1a 0111 00001001 0100 00000101 10100001 10100010 10100011 10100100 10100101 \u4f8b\u5b50 2\uff0814.3\uff09 \u9700\u8981\u7f16\u7801\u7684\u6570\u636e\uff1aABC\\123456 \u6570\u636e\u6d41\u4e2d\u5341\u516d\u8fdb\u5236\uff08\u5b57\u8282\u6a21\u5f0f\u6807\u8bc6\u7b260100\u540e\uff09\uff1a41 42 43 5C 5C 31 32 33 34 35 36 \u9700\u8981\u7f16\u7801\u7684\u6570\u636e\uff1aABC<\u540e\u63a5 ECI 123456 \u4e0b\u7684\u6570\u636e\u2026\u2026> \u6570\u636e\u6d41\u4e2d\u5341\u516d\u8fdb\u5236\uff08\u5b57\u8282\u6a21\u5f0f\u6807\u8bc6\u7b260100\u540e\uff09\uff1a41 42 43 5C 31 32 33 34 35 36 \u2026\u2026 \u6570\u5b57\u6a21\u5f0f\uff087.4.3\uff09 \u00b6 \u8f93\u5165\u7684\u6570\u5b57\u5b57\u7b26\u4e32\uff08\u56e0\u4e3a\u5f00\u5934\u53ef\u4ee5\u662f0\uff09\u8981\u88ab\u5206\u62103\u4e2a\u4e00\u7ec4\uff0c\u6bcf\u7ec4\u4f1a\u8f6c\u6362\u4e3a 10 bits \u7684\u4e8c\u8fdb\u5236\u4e32\uff08999 -> 1111100111 \uff09\u3002\u5269\u4f59\u4e0d\u52303\u4e2a\u7684\u90e8\u5206\uff0c\u5982\u679c\u52692\u4e2a\u6570\u5b57\uff0c\u5219\u5c06\u5176\u8f6c\u6362\u4e3a 7 bits \u7684\u4e8c\u8fdb\u5236\u4e32\uff0899 -> 1100011 \uff09\u5982\u679c\u52691\u4e2a\u6570\u5b57\uff0c\u5219\u5c06\u5176\u8f6c\u6362\u4e3a 4 bits \u7684\u4e8c\u8fdb\u5236\u4e32\uff089 -> 1001 \uff09 \u7136\u540e\u5f00\u5934\u52a0\u4e0a\u6570\u5b57\u6a21\u5f0f\u6807\u8bc6\u7b26 0001 \u548c\u6570\u91cf\u6807\u8bc6\u7b26\uff08\u5b57\u7b26\u4e2a\u6570\u8f6c\u4e3a\u4e8c\u8fdb\u5236\uff0c\u5e76\u5f00\u5934\u88650\u81f3\u957f\u5ea6\uff0c\u957f\u5ea6\u7531\u7248\u672c\u51b3\u5b9a\uff0c\u89c1\u4e0a 7.4.1 \u90e8\u5206\u7684\u7b2c\u4e8c\u4e2a\u8868\uff09 \u4f8b\u5b50 \u6570\u636e\u5185\u5bb9\uff1a 01234567 \uff08\u4fdd\u7559\u5f00\u59340\uff09 \u6570\u636e\u6d41\u90e8\u5206\uff1a \u6570\u5b57\u6a21\u5f0f\u6807\u8bc6\u7b26\uff1a 0001 \u6570\u91cf\u6807\u8bc6\u7b26\uff1a 0000001000 \uff088\uff0c\u4e14\u7248\u672c1\u4e0b\u89c4\u5b9a\u4e3a 10 bits\uff09 \u6570\u636e\uff1a 012 -> 0000001100 345 -> 0101011001 67 -> 1000011 \u5b8c\u6574\u6570\u636e\u6bd4\u7279\u6d41\uff1a 0001 0000001000 0000001100 0101011001 1000011 \u6570\u5b57\u6a21\u5f0f\u4e0b\u7684\u6bd4\u7279\u6d41\u957f\u5ea6\u4e3a\uff1a \\[ B=M+C+10\\times\\lfloor\\frac{D}{3}\\rfloor+R \\] \u5176\u4e2d M \u4e3a 4\uff0cC \u4e3a\u6570\u91cf\u6807\u8bc6\u7b26\u957f\u5ea6\uff08\u7248\u672c1\uff5e9\u4e3a 10\uff0c\u7248\u672c10\uff5e26\u4e3a 12\uff0c\u7248\u672c27\uff5e40\u4e3a 14\uff09\uff0cD\u4e3a\u8f93\u5165\u5b57\u7b26\u4e2a\u6570\uff0cR\u4e3a\u5269\u4f59\u90e8\u5206\uff08\u82e5 D mod 3 = 0 \u5219\u4e3a 0\uff0c\u82e5 D mod 3 = 1 \u5219\u4e3a 4\uff0c\u82e5 D mod 3 = 2 \u5219\u4e3a 7\uff09 \u5b57\u6bcd\u6570\u5b57\u6a21\u5f0f\uff087.4.4\uff09 \u00b6 \u6570\u5b57\u5b57\u6bcd\u6a21\u5f0f\uff08Alphanumeric mode\uff09\u4e0b\u652f\u6301\u7684\u7f16\u7801\u5b57\u7b26\u670945\u4e2a\uff0c\u628a\u5b83\u4eec\u4ece0\u7f16\u53f7\u81f344\u3002\u5176\u4e2d 0-9 \u5bf9\u5e94\u6570\u5b57 0-9\uff0c10-35 \u5bf9\u5e94\u5b57\u6bcd A-Z\uff0c36-44 \u5bf9\u5e949\u4e2a\u7b26\u53f7\uff1a \u8f93\u5165\u7684\u5b57\u7b26\u5148\u6309\u7167\u4e0a\u8868\u8f6c\u6362\u4e3a\u6570\u503c\uff0c\u7136\u540e\u5206\u4e3a\u4e24\u4e2a\u4e00\u7ec4\uff0c\u6bcf\u4e00\u7ec4\u5185\u628a \u7b2c\u4e00\u4e2a\u6570\u503c \u00d7 45 + \u7b2c\u4e8c\u4e2a\u6570\u503c\uff0c\u518d\u8f6c\u6362\u4e3a\u957f\u5ea6\u4e3a 11 bits \u7684\u4e8c\u8fdb\u5236\u4e32\uff08\u6700\u5927\u4e3a 44\u00d745+44=2024 -> 11111101000 \uff09\u3002\u5982\u679c\u5b57\u7b26\u957f\u5ea6\u4e3a\u5947\u6570\uff0c\u5219\u4f1a\u5269\u4f59\u51fa\u4e00\u4e2a\u5b57\u7b26\uff0c\u9700\u8981\u5c06\u5176\u503c\u8f6c\u6362\u4e3a\u957f\u5ea6\u4e3a 6 bits \u7684\u4e8c\u8fdb\u5236\u4e32\uff08\u6700\u5927\u4e3a 11 -> 101100 \uff09 \u7136\u540e\u5f00\u5934\u52a0\u4e0a\u5b57\u6bcd\u6570\u5b57\u6a21\u5f0f\u6807\u8bc6\u7b26 0010 \u548c\u6570\u91cf\u6807\u8bc6\u7b26\uff08\u957f\u5ea6\u7531 7.4.1 \u7b2c\u4e8c\u4e2a\u8868\u89c4\u5b9a\uff09 \u4f8b\u5b50 \u6570\u636e\u5185\u5bb9\uff1aAC-42 \u6570\u636e\u6d41\u90e8\u5206\uff1a \u5b57\u6bcd\u6570\u5b57\u6a21\u5f0f\u6807\u8bc6\u7b26\uff1a 0010 \u6570\u91cf\u6807\u8bc6\u7b26\uff1a 000000101 \uff085\uff0c\u4e14\u7248\u672c1\u4e0b\u89c4\u5b9a\u957f\u5ea6\u4e3a9\uff09 \u6570\u636e\uff1aAC-42 -> 10 12 41 4 2 -> (10 12)(41 4)(2) 10 12 -> 10*45+12=462 -> 00111001110 41 4 -> 41*45+4=1849 -> 11100111001 2 -> 2 -> 000010 \u5b8c\u6574\u6570\u636e\u6bd4\u7279\u6d41\uff1a 0010 000000101 00111001110 11100111001 000010 \u5b57\u6bcd\u6570\u5b57\u6a21\u5f0f\u4e0b\u7684\u6bd4\u7279\u6d41\u957f\u5ea6\u4e3a\uff1a \\[B=M+C+11\\times\\lfloor\\frac{D}{2}\\rfloor+6\\times(D\\bmod 2)\\] \u5176\u4e2d M \u4e3a 4\uff0cC \u4e3a\u6570\u91cf\u6807\u8bc6\u7b26\u957f\u5ea6\uff0cD \u4e3a\u539f\u6570\u636e\u957f\u5ea6 \u5b57\u8282\u6a21\u5f0f\uff087.4.5\uff09 \u00b6 \u5b57\u8282\u6a21\u5f0f\uff08Byte mode\uff09\u4e0b\u628a\u6bcf\u4e2a\u5b57\u7b26\u6839\u636e Latin-1\uff08ISO/IEC 8859-1\uff09\u7f16\u7801\u6210 8 bits\uff081\u5b57\u8282\uff09\uff0c\u76f4\u63a5\u63a5\u5728\u5b57\u8282\u6a21\u5f0f\u6807\u8bc6\u7b26 0100 \u548c\u6570\u91cf\u6807\u8bc6\u7b26\uff08\u957f\u5ea6\u7531 7.4.1 \u7b2c\u4e8c\u4e2a\u8868\u89c4\u5b9a\uff09\u7684\u540e\u9762\u3002 Latin-1 \u5b57\u8282\u6a21\u5f0f\u4e0b\u7684\u6bd4\u7279\u6d41\u957f\u5ea6\uff1a \\[B=M+C+8\\times D\\] \u5176\u4e2d M \u4e3a 4\uff0cC \u4e3a\u6570\u91cf\u6807\u8bc6\u7b26\u957f\u5ea6\uff0cD \u4e3a\u539f\u6570\u636e\u957f\u5ea6 \u4e2d\u6587\u7f16\u7801 \u00b6 \u4e2d\u6587\u5728\u8f6c\u6362\u6210\u6bd4\u7279\u6d41\u7684\u65f6\u5019\u4e5f\u4f7f\u7528\u5b57\u8282\u6a21\u5f0f\uff0c\u9700\u8981\u7528 UTF-8 \u7f16\u7801\uff0c\u6bcf\u4e2a\u5b57\u7b26\u4f1a\u88ab\u7f16\u7801\u6210 3 \u4e2a\u5b57\u8282 \u6df7\u5408\u6a21\u5f0f\uff087.4.7\uff09 \u00b6 \u4e00\u4e2a\u4e8c\u7ef4\u7801\u7684\u6570\u636e\u6d41\u4e2d\u4e5f\u53ef\u4ee5\u4f7f\u7528\u591a\u79cd\u6a21\u5f0f\uff0c\u4e14\u4e0d\u9700\u8981\u7279\u522b\u8868\u793a\u3002\u66f4\u6362\u65b0\u7684\u6a21\u5f0f\u65f6\u53ea\u9700\u8981\u6b63\u5e38\u6dfb\u52a0 \u6a21\u5f0f\u6807\u8bc6\u7b26+\u6570\u91cf\u6807\u8bc6\u7b26+\u6570\u636e \u5373\u53ef \u4f8b\u5b50 \u539f\u59cb\u6570\u636e\uff1a123\u6d4b\u8bd5 \u6570\u636e\u6d41\uff1a \u6570\u5b57\u6a21\u5f0f\uff1a \u6807\u8bc6\u7b26\uff1a 0001 \u6570\u91cf\u6807\u8bc6\u7b26\uff1a 0000000011 \uff083\uff0c\u957f\u5ea610\uff09 \u6570\u636e\uff1a123 -> 0001111011 \u5b57\u8282\u6a21\u5f0f\uff1a\u6d4b\u8bd5 -> E6 B5 8B / E8 AF 95 \u6807\u8bc6\u7b26\uff1a 0100 \u6570\u91cf\u6807\u8bc6\u7b26\uff1a 00000110 \uff086\uff0c\u957f\u5ea68\uff09 \u6570\u636e\uff1a \u6d4b -> 11100110 10110101 10001011 \u8bd5 -> 11101000 10101111 10010101 \u5b8c\u6574\u6570\u636e\u6bd4\u7279\u6d41\uff1a 0001 0000000011 0001111011 0100 00000110 11100110 10110101 10001011 11101000 10101111 10010101 \u7ed3\u675f\u7b26\uff087.4.9\uff09 \u00b6 \u5728\u6570\u636e\u7684\u672b\u5c3e\u8981\u586b\u51454\u4e2a0\u4f5c\u4e3a\u7ed3\u675f\u7b26\uff0c\u5982\u679c\u5bb9\u91cf\u4e0d\u8db3\u7684\u8bdd\u53ef\u4ee5\u7f29\u77ed\u6216\u7701\u7565 \u5373\u80fd\u586b\u4e0b\u5219\u52a04\u4e2a0\uff0c\u586b\u4e0d\u4e0b\u5219\u80fd\u52a0\u51e0\u4e2a0\u5c31\u52a0\u51e0\u4e2a0 \u586b\u5145 padding bits\uff087.4.10\uff09 \u00b6 \u8f6c\u6362\u540e\u7684\u6570\u636e\u6bd4\u7279\u6d41\u8fd8\u9700\u8981\u586b\u5145\u81f3\u4e8c\u7ef4\u7801\u7684\u6570\u636e\u5bb9\u91cf \u9996\u5148\u5148\u7528 0 \u8865\u5145\u6bd4\u7279\u6d41\u957f\u5ea6\u5230 8 \u7684\u6574\u6570\u500d \u7136\u540e\u7528 11101100 \u548c 00010001 \u4ea4\u66ff\u586b\u8865\u5230\u4e8c\u7ef4\u7801\u6570\u636e\u5bb9\u91cf \u5177\u4f53\u7684\u6570\u636e\u5bb9\u91cf\u7531\u7248\u672c\u53f7\u548c\u7ea0\u9519\u7b49\u7ea7\u51b3\u5b9a\uff0c\u4e14\u6570\u636e\u5bb9\u91cf\uff08\u6bd4\u7279\uff09\u4e00\u5b9a\u4e3a8\u7684\u500d\u6570\uff0c\u5b8c\u6574\u6570\u636e\u89c1\u6587\u6863\u7684 33\uff5e36 \u9875\uff08\u6574\u4e2a pdf \u7684\u7b2c 41\uff5e44 \u9875\uff09 \u6ce8 \u8fd9\u4e2a\u5730\u65b9 QRazyBox \u7f51\u7ad9\u5b58\u5728 bug\uff0c\u6709\u65f6\u65e0\u6cd5\u6b63\u5e38\u8bc6\u522b\u586b\u5145\u7684 0 \u6bd4\u7279\u548c padding bits\uff08\u5373\u53ef\u80fd\u628a\u586b\u5145\u7684 0 \u4e2d\u524d\u56db\u4e2a\u89c6\u4e3a\u4e00\u4e2a terminator\uff0c\u628a\u540e\u9762\u7684 0 \u624d\u89c6\u4e3a\u5c5e\u4e8e padding bits \uff09 \u7ea0\u9519\u7801\u7f16\u7801\uff087.5\uff09 \u00b6 \u7ea0\u9519\u5bb9\u91cf\uff087.5.1\uff09 \u00b6 \u7ea0\u9519\u5b57\uff08error correction codewords\uff09\u53ef\u4ee5\u7ea0\u6b63\u4e24\u79cd\u9519\u8bef\uff0c\u4e00\u79cd\u662f\u6bd4\u5982\u65e0\u6cd5\u626b\u63cf\u6216\u65e0\u6cd5\u89e3\u7801\u7684\u5df2\u77e5\u4f4d\u7f6e\u7684\u9519\u8bef\u5b57\uff08erasures\uff09\uff0c\u4e00\u79cd\u662f\u672a\u77e5\u4f4d\u7f6e\u7684\u9519\u8bef\u5b57\uff08errors\uff09\uff0c\u4e00\u4e2a erasures \u53ef\u4ee5\u7531\u4e00\u4e2a\u7ea0\u9519\u5b57\u7ea0\u9519\uff0c\u800c\u4e00\u4e2a errors \u9700\u8981\u4e24\u4e2a\u7ea0\u9519\u5b57\u6765\u7ea0\u9519 \u53ef\u4ee5\u7ea0\u9519\u7684 erasures \u548c errors \u7684\u6570\u91cf\u6ee1\u8db3\uff1a \\[e+2t\\leq d-p\\] \u5176\u4e2d \\(e\\) \u662f erasures \u7684\u6570\u91cf\uff0c \\(t\\) \u662f errors \u7684\u6570\u91cf\uff0c \\(d\\) \u662f\u7ea0\u9519\u5b57\u7684\u6570\u91cf\uff0c \\(p\\) \u662f\u88ab\u9519\u8bef\u89e3\u6790\u7684\u4fdd\u62a4\u5b57\u6570\u91cf \u5176\u4e2d \\(p\\) \u7531\u7248\u672c\u51b3\u5b9a\uff1a \\(p=3\\) \uff1a\u7248\u672c 1-L \\(p=2\\) \uff1a\u7248\u672c 1-M\u30012-L \\(p=1\\) \uff1a\u7248\u672c 1-Q\u30011-H\u30013-L \\(p=0\\) \uff1a\u5176\u4ed6\u6240\u6709\u7248\u672c \u5206\u5757\u7f16\u7801\u7ea0\u9519\u7801 \u00b6 \u6839\u636e\u7248\u672c\u53f7\u53ca\u7ea0\u9519\u7b49\u7ea7\uff0c\u6570\u636e\u5e8f\u5217\u9700\u8981\u88ab\u5206\u6210 1 \u4e2a\u6216\u591a\u4e2a\u5757\uff0c\u6bcf\u5757\u5185\u9700\u8981\u5355\u72ec\u7f16\u7801\u7ea0\u9519\u7801 \u5982\u679c\u9700\u8981\u8865\u5145\u7684\u8bdd\u4e00\u5f8b\u5168\u90e8\u8865\u5145 0 \u6bd4\u7279\u5230\u9700\u8981\u7684\u957f\u5ea6 \u5177\u4f53\u4e0d\u540c\u7248\u672c\u7684\u5206\u5757\u5757\u6570\u548c\u6bcf\u5757\u4e2d\u6570\u91cf\u5b89\u6392\u4ee5\u53ca\u7ea0\u9519\u5bb9\u91cf\u90fd\u5728\u6587\u6863\u4e2d P38-44\uff08pdf \u4e2d P46-52\uff09\u7684\u5927\u8868\u683c Table 9 \u4e2d \u751f\u6210\u7ea0\u9519\u7801\uff087.5.2\uff09 \u00b6 \u4f3d\u7f57\u74e6\u57df \u00b6 \u751f\u6210\u7ea0\u9519\u7801\u4e4b\u524d\u8981\u5148\u5c06\u6240\u6709\u6570\u636e\u5b57\u8f6c\u6362\u6210\u4e00\u4e2a\u591a\u9879\u5f0f\uff0c\u4f7f\u5176\u9650\u5236\u4e8e\u4f3d\u7f57\u74e6\u57df \\(GF(2^3)\\bmod 100011101\\) \u4e2d\uff0c\u800c\u4e14\u540e\u7eed\u7684\u56db\u5219\u8fd0\u7b97\u4e5f\u90fd\u662f\u8be5\u4f3d\u7f57\u74e6\u57df\u4e2d\u7684\u8fd0\u7b97 \u5177\u4f53\u4f3d\u7f57\u74e6\u57df\u7684\u751f\u6210\u539f\u7406\u53ef\u4ee5\u770b\uff1a https://www.codenong.com/cs105738710/ \u7b80\u5355\u6765\u8bf4\u5c31\u662f\u591a\u9879\u5f0f\u7684\u52a0\u51cf\u6cd5\u90fd\u662f\u5f02\u6216\uff0c\u4e58\u9664\u6cd5\u8981\u6bcf\u4e00\u4e2a\u6bd4\u7279\u6a21 2\uff0c\u6bcf\u4e00\u4e2a\u5b57\u8282\u6a21 100011101\uff08\u5373\u8be5\u4f3d\u7f57\u74e6\u57df\u4e2d\u7684\u672c\u539f\u591a\u9879\u5f0f \\(x^8+x^4+x^3+x^2+1\\) \uff09 \u5177\u4f53\u591a\u9879\u5f0f mod \u8fd0\u7b97\u7684\u65b9\u6cd5\u53ef\u4ee5\u770b\uff1a https://blog.csdn.net/yaongtime/article/details/17200401 \u7b80\u5355\u6765\u8bf4\u5c31\u662f\u591a\u9879\u5f0f\u7684\u957f\u9664\u6cd5\u53d6\u6a21\uff0c\u800c\u4e14\u6ce8\u610f\u8fd9\u91cc\u7684\u52a0\u51cf\u90fd\u662f\u4f3d\u7f57\u74e6\u57df\u4e2d\u7684\u52a0\u51cf\uff0c\u5373\u5f02\u6216 \u751f\u6210\u591a\u9879\u5f0f\uff08Annex A\uff09 \u00b6 \u7ea0\u9519\u7801\u751f\u6210\u591a\u9879\u5f0f\u7684\u4e00\u822c\u8868\u8fbe\u5f62\u5f0f\u662f\uff1a \\[g(x)=(x-\\alpha^0)(x-\\alpha^1)\\cdots(x-\\alpha^{n-1})\\] \u5176\u4e2d \\(n\\) \u4e3a\u7ea0\u9519\u7801\u5b57\u7684\u4e2a\u6570\uff0c\u5176\u4e2d \\(\\alpha=2\\) \uff0c \\(\\alpha^k\\) \u7684\u662f\u5728\u4f3d\u7f57\u74e6\u57df\u4e0b\u7684\u8fd0\u7b97\uff0c\u5373\uff1a \\(\\alpha^0 = 1;\\ \\alpha^1=2;\\ \\alpha^2=4;\\ \\cdots;\\ \\alpha^7=128\\) \\(\\alpha^8=256\\bmod 285=256\\oplus 285=29;\\ \\alpha^9=29\\times2=58;\\ \\cdots\\) \u5177\u4f53\u8ba1\u7b97 \\(\\alpha^k\\) \u7684\u4ee3\u7801\uff1a def alpha ( k ): res = 1 for _ in range ( k ): res *= 2 if res >= 256 : res ^= 285 return res \u6587\u6863\u9644\u5f55 A \u4e2d\u5df2\u7ecf\u5c55\u5f00\u4e86\u6240\u6709\u53ef\u80fd \\(n\\) \u503c\u4e0b\u768436\u4e2a\u751f\u6210\u591a\u9879\u5f0f \u751f\u6210\u7ea0\u9519\u7801 \u00b6 \u6587\u6863\u91cc\u7ed9\u4e86\u4e00\u4e2a\u611f\u89c9\u6bd4\u8f83\u6666\u6da9\u96be\u61c2\u7684\u56fe\u6765\u5c55\u793a\u751f\u6210\u7ea0\u9519\u7801\u7684\u8fc7\u7a0b\uff1a \u4e0d\u662f\u5f88\u5bb9\u6613\u7406\u89e3\uff0c\u4e8e\u662f\u627e\u4e86\u53e6\u4e00\u7bc7\u6587\u7ae0\uff1a https://blog.csdn.net/ljm1995/article/details/88819664 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6bd4\u5982\u8981\u7f16\u7801 12345678 \u8fd9\u516b\u4e2a\u6570\u5b57 \u7248\u672c 1-L\uff0c\u67e5 Table 9 \u5f97\u5230\u5206\u4e3a 1 \u5757\uff0c\u4e14\u8be5\u5757\u5185\u603b\u5b57\u6570\u4e3a 26\uff0c\u6570\u636e\u5b57\u6570\u4e3a 19\uff0c\u7ea0\u9519\u5b57\u6570\u4e3a 26-19=7 \u6839\u636e\u524d\u9762\u6240\u8bf4\uff0c\u6bd4\u7279\u6d41\u5e94\u8be5\u662f\uff1a 0001 0000001000 0001111011 0111001000 1001110 0000 \u8865\u6210 8 \u7684\u500d\u6570\u957f\u5ea6\uff1a 00010000 00100000 01111011 01110010 00100111 00000000 \u6dfb\u52a0 padding bits\uff08\u8865\u5230 19 \u4e2a\u5b57\u8282\uff09\uff1a 00010000 00100000 01111011 01110010 00100111 00000000 11101100 00010001 11101100 00010001 11101100 00010001 11101100 00010001 11101100 00010001 11101100 00010001 11101100 \u5199\u6210\u591a\u9879\u5f0f\u5f62\u5f0f\uff0c\u6b21\u6570\u662f 19 \u6b21\uff0c\u6574\u4f53\u4e58 \\(x^7\\) \uff1a \\[16x^{25}+32x^{24}+123x^{23}+114x^{22}+39x^{21}+236x^{19}+\\\\\\\\17x^{18}+236x^{17}+17x^{16}+236x^{15}+17x^{14}+236x^{13}+\\\\\\\\17x^{12}+236x^{11}+17x^{10}+236x^{9}+17x^{8}+236x^{7}\\] \u518d\u67e5\u9644\u5f55 A \u5f97\u5230\u6b21\u6570\u4e3a 7 \u7684\u751f\u6210\u591a\u9879\u5f0f\uff0c\u5e76\u6574\u4f53\u4e58 \\(x^{18}\\) \uff1a \\[x^{25}+\\alpha^{87}x^{24}+\\alpha^{229}x^{23}+\\alpha^{146}x^{22}+\\alpha^{149}x^{21}+\\\\\\\\\\alpha^{238}x^{20}+\\alpha^{102}x^{19}+\\alpha^{21}x^{18}\\] \u7136\u540e\u628a\u7b2c\u4e00\u4e2a\u591a\u9879\u5f0f\u9664\u7b2c\u4e8c\u4e2a\u591a\u9879\u5f0f\u53d6\u4f59\u6570 \u53ef\u4ee5\u8fd9\u6837\u8ba1\u7b97\uff0c\u628a\u7b2c\u4e8c\u4e2a\u591a\u9879\u5f0f\u6574\u4f53\u4e58 16 \u5373 \\(\\alpha^4\\) \uff1a \\[\\alpha^4x^{25}+\\alpha^{91}x^{24}+\\alpha^{233}x^{23}+\\alpha^{150}x^{22}+\\alpha^{153}x^{21}+\\\\\\\\\\alpha^{242}x^{20}+\\alpha^{106}x^{19}+\\alpha^{25}x^{18}\\] \u8ba1\u7b97\u51fa\u7cfb\u6570\u7684\u503c\uff1a \\[16x^{25}+163x^{24}+243x^{23}+85x^{22}+146x^{21}+\\\\\\\\176x^{20}+52x^{19}+3x^{18}\\] \u4e4b\u540e\u4e0e\u7b2c\u4e00\u4e2a\u591a\u9879\u5f0f\u5f02\u6216\u5f97\u5230\uff1a \\[131x^{24}+136x^{23}+197x^{22}+181x^{21}+216x^{19}+18x^{18}+\\\\\\\\236x^{17}+17x^{16}+236x^{15}+17x^{14}+236x^{13}+\\\\\\\\17x^{12}+236x^{11}+17x^{10}+236x^{9}+17x^{8}+236x^{7}\\] \u8fd9\u4e4b\u540e\u6700\u9ad8\u6b21\u5c31\u53d8\u6210\u4e86 24 \u6b21\uff0c\u91cd\u590d\u6574\u4e2a\u8fc7\u7a0b\u76f4\u5230\u7ed3\u679c\u53ea\u5269\u4e0b 7 \u9879\uff08\u5373\u6700\u9ad8\u6b21\u4e3a 6 \u6b21\uff09\u65f6\u5373\u53ef\u5f97\u5230\uff1a \\[188x^6+247x^5+62x^4+248x^3+53x^2+170x+224\\] \u6240\u4ee5\u7ea0\u9519\u7801\u5c31\u662f\uff1a 188 247 62 248 53 170 224 \u8f6c\u4e3a\u4e8c\u8fdb\u5236\uff1a 10111100 11110111 00111110 11111000 00110101 10101010 11100000 \u6240\u4ee5\u6574\u4e2a\u4e8c\u7ef4\u7801\u7684\u7f16\u7801\u533a\u57df\uff08\u9664\u683c\u5f0f\u4fe1\u606f\u5916\uff09\u5168\u90e8\u5185\u5bb9\u5c31\u662f\uff1a 00010000 00100000 01111011 01110010 00100111 00000000 11101100 00010001 11101100 00010001 11101100 00010001 11101100 00010001 11101100 00010001 11101100 00010001 11101100 10111100 11110111 00111110 11111000 00110101 10101010 11100000 \u7ea0\u9519\u7801\u53ef\u4ee5\u76f4\u63a5\u7528 python \u7684 reedsolo \u5305\u6765\u6c42\u89e3\uff1a >>> from reedsolo import RSCodec , ReedSolomonError >>> rsc = RSCodec ( 7 ) >>> list ( rsc . encode ([ 16 , 32 , 123 , 114 , 39 , 0 , 236 , 17 , 236 , 17 , 236 , 17 , 236 , 17 , 236 , 17 , 236 , 17 , 236 ])) [ 16 , 32 , 123 , 114 , 39 , 0 , 236 , 17 , 236 , 17 , 236 , 17 , 236 , 17 , 236 , 17 , 236 , 17 , 236 , 188 , 247 , 62 , 248 , 53 , 170 , 224 ] >>> list ( rsc . encode ([ 16 , 32 , 123 , 114 , 39 , 0 , 236 , 17 , 236 , 17 , 236 , 17 , 236 , 17 , 236 , 17 , 236 , 17 , 236 ]))[ - 7 :] [ 188 , 247 , 62 , 248 , 53 , 170 , 224 ] \u5269\u4f59\u6b65\u9aa4\uff087.6~7.10\uff09 \u00b6 \u5408\u6210\u5e8f\u5217\uff087.6\uff09 \u00b6 \u9996\u5148\u6309\u7167 2 \u4e2d\u6240\u8ff0\u7ed9\u5b8c\u6574\u4fe1\u606f\u7f16\u7801\u6210\u6570\u636e\u5e8f\u5217\uff0c\u5176\u4e2d\u4e5f\u5305\u542b padding bits\uff0c\u4e14\u957f\u5ea6\u4e3a 8 \u7684\u500d\u6570 \u7136\u540e\u6839\u636e 3.1.1 \u4e2d\u6240\u8bf4\u5bf9\u6570\u636e\u5e8f\u5217\u8fdb\u884c\u5206\u5757\uff0c\u7136\u540e\u5bf9\u6bcf\u5757\u5206\u522b\u751f\u6210\u7ea0\u9519\u7801 \u6700\u540e\u628a\u6570\u636e\u5e8f\u5217\u7684\u6240\u6709\u5757\u6309\u7167\u5b57\u8282\u4f9d\u6b21\u4ea4\u9519\u5408\u6210\u65b0\u7684\u6570\u636e\u5e8f\u5217\uff0c\u7136\u540e\u628a\u7ea0\u9519\u7801\u7684\u6240\u6709\u5757\u6309\u7167\u5b57\u8282\u4ea4\u9519\u5408\u6210\u7ea0\u9519\u7801\u5e8f\u5217\u3002\u628a\u65b0\u7684\u6570\u636e\u5e8f\u5217\u548c\u7ea0\u9519\u7801\u5e8f\u5217\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u5982\u679c\u603b\u957f\u5ea6\u4e0d\u591f\u4e8c\u7ef4\u7801\u7684\u5bb9\u91cf\uff0c\u5219\u5728\u540e\u9762\u8865\u5145 3/4/7 \u4e2a 0 \u6bd4\u7279\uff08\u9700\u8981\u8865\u591a\u5c11\u5728 Table 1 \u4e2d\u6709\u5b9a\u4e49\uff09 \u800c\u4e14\u8fd9\u6837\u4e5f\u8981\u4fdd\u8bc1\u6700\u77ed\u7684\u6570\u636e\u5757\u5728\u6700\u524d\u9762\uff08\u5df2\u7ecf\u7531 Table 9 \u5b9a\u4e49\uff09 \u6bd4\u5982 5-H \u7248\u672c\u7684\u5e8f\u5217\uff0c\u9700\u8981\u5206\u4e3a 4 \u5757\uff0c\u524d\u4e24\u5757\u662f 11 \u4e2a\u6570\u636e\u5b57\u300122 \u4e2a\u7ea0\u9519\u5b57\uff0c\u540e\u4e24\u5757\u662f 12 \u4e2a\u6570\u636e\u5b57\u300122 \u4e2a\u7ea0\u9519\u5b57\uff1a \u6700\u540e\u7684\u5e8f\u5217\u5c31\u662f \\(D_1,D_{12},D_{23},D_{35},\\cdots,D_{45},D_{34},D_{46},E_1,E_{23},\\cdots,E_{88}\\) \u586b\u5145\u6570\u636e\uff087.7\uff09 \u00b6 \u628a\u524d\u9762\u5408\u6210\u7684\u5b8c\u6574\u6d88\u606f\u5e8f\u5217\u586b\u5230\u4e8c\u7ef4\u7801\u4e2d\uff0c\u9996\u5148\u8981\u5148\u586b\u5145\u529f\u80fd\u56fe\u6848\uff0c\u7136\u540e\u9884\u7559\u51fa\u683c\u5f0f\u4fe1\u606f\u3001\u7248\u672c\u4fe1\u606f\u7684\u4f4d\u7f6e \u586b\u5145\u65f6\u4ee5\u4e24\u5217\u4e3a\u5355\u4f4d\uff0c\u5373\u6bcf\u6b21\u4ea4\u66ff\u586b\u5145\u4e24\u5217\u3002\u4ece\u6700\u53f3\u4e0b\u89d2\u5f00\u59cb\u662f\u6700\u9ad8\u4f4d\u7684\u6bd4\u7279\uff0c\u7136\u540e\u4ece\u53f3\u5411\u5de6\u4ece\u4e0b\u5411\u4e0a\u4ea4\u66ff\u586b\u5145\uff0c\u5230\u4e86\u4e0a\u754c\u65f6\u5de6\u8f6c\u5411\u4e0b\u7ee7\u7eed\u586b\u5145\uff0c\u9047\u5230\u5bf9\u9f50\u56fe\u6848\u76f4\u63a5\u7a7f\u8fc7\uff0c\u9047\u5230\u5bf9\u9f50\u56fe\u6848\u8fb9\u754c\u5219\u53d8\u4e3a\u4e00\u884c \u4e5f\u53ef\u4ee5\u6309\u7167\u5b57\u8282\u6765\u4f9d\u6b21\u586b\u5145\uff0c\u5982\u679c\u662f\u5411\u4e0a\u586b\u5145\uff0c\u5219\u6700\u9ad8\u4f4d\u5728\u4e0b\u7aef\uff0c\u53cd\u4e4b\u5728\u4e0a\u6bb5\u3002\u6bcf\u4e2a\u5b57\u8282\u5757\u5185\u7684\u6700\u9ad8\u4f4d\u5c3d\u91cf\u53d6\u6700\u53f3\u4fa7\u7684\uff0c\u4f46\u5982\u679c\u6700\u4e0b(\u4e0a)\u7aef\u53ea\u6709\u4e00\u4e2a\u6bd4\u7279\u7684\u4f4d\u7f6e\uff0c\u5219\u9009\u5b83\u4f5c\u4e3a\u6700\u9ad8\u6bd4\u7279\u7684\u4f4d\u7f6e \u53cd\u6b63\u6309\u987a\u5e8f\u6b63\u5e38\u586b\u5c31\u884c\u4e86\uff0c\u9047\u5230\u4e1c\u897f\u5c31\u7ed5 \u5177\u4f53\u89c4\u5219 \u63a9\u7801\u906e\u76d6\uff087.8\uff09 \u00b6 \u586b\u5145\u540e\u7684\u6570\u636e\u8fd8\u8981\u906e\u76d6\u4e00\u5c42\u63a9\u7801\uff08\u5f02\u6216\uff09\u6765\u5e73\u8861\u9ed1\u767d\u5757\u7684\u6570\u91cf\uff0c\u4ee5\u53ca\u51cf\u5c11\u5bb9\u6613\u4ea7\u751f\u626b\u63cf\u9519\u8bef\u7684\u5927\u5757\u548c\u5f62\u4f3c\u529f\u80fd\u56fe\u6848\u7684\u90e8\u5206\u51fa\u73b0 QR \u7801\u4e00\u5171\u6709 8 \u79cd\u63a9\u7801\uff0c\u6bcf\u4e2a\u63a9\u7801\u6709\u4e00\u4e2a 3 bits \u7684\u7f16\u53f7\uff0c\u548c\u4e00\u4e2a\u751f\u6210\u516c\u5f0f\u3002\u8fd9\u4e2a\u516c\u5f0f\u7528\u6765\u751f\u6210\u63a9\u7801\u56fe\u6837\uff0c\u4ee5\u5de6\u4e0a\u4e3a\u539f\u70b9\uff0c\u5411\u53f3\u3001\u4e0b\u4e3a\u6b63\u65b9\u5411\uff0c\u5750\u6807\u6ee1\u8db3\u8fd9\u4e2a\u516c\u5f0f\u7684\u70b9\u5728\u56fe\u6837\u4e2d\u662f\u9ed1\u8272\uff081\uff09\uff0c\u4e0d\u6ee1\u8db3\u7684\u662f\u767d\u8272\uff080\uff09\u3002\u5728\u7248\u672c 1 \u4e2d\u7684\u63a9\u7801\u56fe\u50cf\u8868\u73b0\u4e3a\uff1a \u8fdb\u884c\u63a9\u7801\u64cd\u4f5c\u5c31\u662f\u628a\u9664\u53bb\u529f\u80fd\u56fe\u6848\u548c\u7248\u672c\u4fe1\u606f\u3001\u683c\u5f0f\u4fe1\u606f\u4e4b\u5916\u7684\u6570\u636e\u90e8\u5206\u6bcf\u4e00\u5757\u7684\u503c\u4e0e\u63a9\u7801\u56fe\u6837\u5f02\u6216 \u6574\u4e2a\u64cd\u4f5c\u9700\u8981\u751f\u6210\u5206\u522b\u4f7f\u7528\u4e0d\u540c\u63a9\u7801\u7684 8 \u4e2a\u56fe\u6837\uff0c\u7136\u540e\u8ba1\u7b97\u51fa\u635f\u5931\u5206\u6570\uff08penalty points score\uff09\uff0c\u7136\u540e\u91c7\u7528\u635f\u5931\u5206\u6570\u6700\u5c0f\u7684\u63a9\u7801\u6a21\u5f0f\u4f5c\u4e3a\u6700\u7ec8\u7684\u63a9\u7801\u6a21\u5f0f \u8ba1\u7b97\u635f\u5931\u5206\u6570\uff087.8.3\uff09 \u00b6 \u867d\u7136\u8fdb\u884c\u63a9\u7801\u64cd\u4f5c\u65f6\u4ec5\u5bf9\u975e\u529f\u80fd\u56fe\u6848\u3001\u975e\u7248\u672c\u4fe1\u606f\u683c\u5f0f\u4fe1\u606f\u7684\u6570\u636e\u533a\u57df\u8fdb\u884c\u63a9\u7801\uff0c\u4f46\u662f\u8ba1\u7b97\u635f\u5931\u5206\u6570\u65f6\u6309\u7167\u6574\u4e2a\u4e8c\u7ef4\u7801\u8ba1\u7b97 \u8ba1\u7b97\u635f\u5931\u5206\u6709\u56db\u4e2a\u89c4\u5219\uff1a \u76f8\u90bb\u4e00\u884c\u6216\u4e00\u5217\u5185\u51fa\u73b0\u8fde\u7eed\u4e94\u4e2a\u76f8\u540c\u989c\u8272\u5757\u65f6\u635f\u5931\u5206 +3\uff0c\u4e4b\u540e\u8fde\u7eed\u5757\u6570\u6bcf\u52a0\u4e00\uff0c\u635f\u5931\u5206 +1 \u5bfb\u627e\u5185\u90e8\u989c\u8272\u76f8\u540c\u7684 2*2 \u7684\u5757\uff0c\u6bcf\u51fa\u73b0\u4e00\u4e2a\u635f\u5931\u5206 +3 \u5728\u6bcf\u884c\u548c\u6bcf\u5217\u4e2d\u5bfb\u627e 10111010000 \u548c 00001011101 \uff0c\u6bcf\u51fa\u73b0\u4e00\u4e2a\u635f\u5931\u5206 +40 \u8bc4\u4f30\u9ed1\u8272\u5757\u5360\u5168\u90e8\u5757\u6570\u7684\u6bd4\u4f8b\uff0c\u5982\u679c\u5728 45%~55% \u95f4\u5219\u4e0d\u589e\u52a0\u635f\u5931\u5206\uff0c\u5728 40%~45%\u300155%~60% \u95f4\u5219\u635f\u5931\u5206 +10\uff0c\u5728 35%~40%\u300160%~65% \u95f4\u5219\u635f\u5931\u5206 +10*2\uff0c\u4ee5\u6b64\u7c7b\u63a8 \u66f4\u8be6\u7ec6\u7684\u4f8b\u5b50\u53ef\u4ee5\u770b\uff1a https://www.thonky.com/qr-code-tutorial/data-masking \u7136\u540e\u5bf9\u6240\u6709\u63a9\u7801\u7ed3\u679c\u8ba1\u7b97\u635f\u5931\u5206\u6570\u540e\u9009\u62e9\u5206\u6570\u6700\u4f4e\u7684\u4e00\u4e2a\u4f5c\u4e3a\u6700\u7ec8\u7ed3\u679c \u683c\u5f0f\u4fe1\u606f\uff087.9\uff09 \u00b6 QRCode \u7684\u683c\u5f0f\u4fe1\u606f\u662f 15 bits \u7684\u5e8f\u5217\uff0c\u5176\u4e2d\u524d 5 \u4f4d\u662f\u6570\u636e\uff0c\u540e 10 \u4f4d\u662f\u9488\u5bf9\u683c\u5f0f\u4fe1\u606f\u7684\u7ea0\u9519\u7801\uff08\u7531 (15, 5) BCH \u7801\u751f\u6210\uff09 5 bits \u7684\u6570\u636e\u524d 2 \u4f4d\u662f\u7ea0\u9519\u7b49\u7ea7\u6807\u8bc6\u7b26\uff0c\u5206\u522b\u662f L -> 01 \u3001M -> 00 \u3001Q -> 11 \u3001H -> 10 \u540e 3 \u4f4d\u662f\u4e0a\u9762\u8bf4\u5230\u7684\u63a9\u7801\u7f16\u53f7 \u7136\u540e\u540e\u63a5 10 bits \u7ea0\u9519\u7801\uff0c\u6700\u540e\u6574\u4f53\u5f02\u6216 101010000010010 \u9632\u6b62\u4ea7\u751f\u5168\u96f6\u6570\u636e\u5e8f\u5217 \u751f\u6210\u7ea0\u9519\u7801\uff08Annex C\uff09 \u00b6 \u5148\u5f97\u5230\u524d 5 bits \u7684\u6570\u636e\uff0c\u7136\u540e\u5316\u4e3a\u591a\u9879\u5f0f\uff0c\u6574\u4f53\u4e58 \\(x^{10}\\) \uff0c\u518d\u9664\u4ee5\u751f\u6210\u591a\u9879\u5f0f \\(G(x)=x^{10}+x^8+x^5+x^4+x^2+x+1\\) \u5f97\u5230\u4f59\u6570\u8f6c\u6362\u4e3a\u540e 10 bits \u7684\u7ea0\u9519\u7801 \u4f8b\u5b50 \u7ea0\u9519\u7b49\u7ea7 M\uff0c\u63a9\u7801\u7f16\u53f7 101 5 bits \u6570\u636e\uff1a 00101 \u5199\u4e3a\u591a\u9879\u5f0f\uff1a \\(x^2+1\\) \u6574\u4f53\u4e58 \\(x^{10}\\) \uff1a \\(x^{12}+x^{10}\\) \u9664\u4ee5 \\(G(x)\\) \uff1a \u5546 \\(x^2\\) \uff0c\u4f59\u6570 \\(x^7+x^6+x^4+x^3+x^2\\) \u4f59\u6570\u8f6c\u4e3a 10 bits \u7ea0\u9519\u7801\uff1a 0011011100 \u52a0\u4e0a\u539f\u6570\u636e\uff1a 001010011011100 \u5f02\u6216 101010000010010 \uff1a 100000011001110 \u56e0\u4e3a 5 bits \u7684\u6570\u636e\u4e00\u5171\u53ea\u6709 32 \u79cd\u60c5\u51b5\uff0c\u6240\u4ee5\u9644\u5f55 C \u4e2d\u76f4\u63a5\u7ed9\u51fa\u4e86\u5b8c\u6574\u7684\u8868\u683c\uff1a \u7ea0\u9519 \uff1a\u6700\u591a\u53ef\u4ee5\u7ea0\u6b63 3 bits \u7684\u9519\u8bef\uff0c\u5148\u628a\u683c\u5f0f\u4fe1\u606f\u5f02\u6216 101010000010010 \u5f97\u5230\u539f\u59cb\u5e8f\u5217\uff0c\u7136\u540e\u4e0e Table C.1 \u4e2d\u7684\u6709\u6548\u683c\u5f0f\u4fe1\u606f\u8fdb\u884c\u5bf9\u6bd4\uff0c\u5982\u679c\u627e\u4e0d\u5230\u8bf4\u660e\u6709\u9519\u8bef\u3002\u6b64\u65f6\u4ec5\u9009\u62e9 Table C.1 \u4e2d\u4e0e\u9519\u8bef\u683c\u5f0f\u4fe1\u606f\u76f8\u5dee\u6bd4\u7279\u6700\u5c11\u7684\u4e00\u4e2a\u4f5c\u4e3a\u7ea0\u6b63\u540e\u7684\u683c\u5f0f\u4fe1\u606f\u5373\u53ef\uff0c\u5982\u679c\u76f8\u5dee\u5c11\u4e8e\u7b49\u4e8e 3 \u4e2a\u6bd4\u7279\uff0c\u5219\u89c6\u4e3a\u7ea0\u6b63\u6210\u529f \u586b\u5165\u4e8c\u7ef4\u7801 \u00b6 \u5de6\u4e0a\u89d2\u7684\u683c\u5f0f\u4fe1\u606f\u533a\u57df\u586b\u5145\u4e00\u4efd\u5b8c\u6574\u7684\u683c\u5f0f\u4fe1\u606f\uff08\u6700\u9ad8\u4f4d\u5728\u5de6\uff09\uff0c\u5de6\u4e0b\u89d2\u548c\u53f3\u4e0a\u89d2\u5408\u8d77\u6765\u662f\u4e00\u4efd\u5b8c\u6574\u7684\u683c\u5f0f\u4fe1\u606f\uff08\u6700\u9ad8\u4f4d\u5728\u5de6\u4e0b\u89d2\u7684\u6700\u4e0b\uff0c\u6700\u4f4e\u4f4d\u5728\u53f3\u4e0a\u89d2\u7684\u6700\u53f3\uff09\u3002\u5e76\u4e14\u5de6\u4e0b\u89d2\u7684\u683c\u5f0f\u4fe1\u606f\u4e0a\u65b9\uff08\u4f4d\u7f6e (4V+9,8) \uff09\u6709\u4e00\u5757\u59cb\u7ec8\u662f\u9ed1\u8272\uff1a \u7248\u672c\u4fe1\u606f\uff087.10\uff09 \u00b6 \u5728\u7248\u672c 7 \u53ca\u4ee5\u4e0a\u7684\u4e8c\u7ef4\u7801\u4e2d\u9700\u8981\u586b\u5165\u7248\u672c\u4fe1\u606f\u6765\u786e\u4fdd\u51c6\u786e\u5ea6 \u7248\u672c\u4fe1\u606f\u53ea\u50a8\u5b58\u4e86\u8be5\u4e8c\u7ef4\u7801\u7684\u7248\u672c\u53f7\uff087\uff5e40\uff09\uff0c\u4e00\u5171 18 bits\uff0c\u524d 6 bits \u4e3a\u7248\u672c\u53f7\u7684\u4e8c\u8fdb\u5236\uff08\u4ece 000111 \u5230 101000 \uff09\uff0c\u540e 12 bits \u4e3a\u7531 (18, 6) Golay code \u751f\u6210\u7684\u7ea0\u9519\u7801 \u4e0d\u540c\u4e8e\u683c\u5f0f\u4fe1\u606f\uff0c\u56e0\u4e3a\u7248\u672c\u53f7\u4e0d\u4f1a\u51fa\u73b0\u5168\u96f6\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u8fdb\u884c\u63a9\u7801\u64cd\u4f5c \u751f\u6210\u7ea0\u9519\u7801\uff08Annex D\uff09 \u00b6 \u548c\u683c\u5f0f\u4fe1\u606f\u7684\u7ea0\u9519\u7801\u7c7b\u4f3c\uff0c\u5148\u628a\u524d 6 bits \u8f6c\u4e3a\u591a\u9879\u5f0f\uff0c\u7136\u540e\u6574\u4f53\u4e58 \\(x^{12}\\) \uff0c\u5f97\u5230\u7684\u7ed3\u679c\u9664\u4ee5\u751f\u6210\u591a\u9879\u5f0f \\(G(x)=x^{12}+x^{11}+x^{10}+x^9+x^8+x^5+x^2+x^1\\) \uff0c\u628a\u4f59\u6570\u8f6c\u4e3a 12 bits \u4e8c\u8fdb\u5236\u5c31\u662f\u7ea0\u9519\u7801\u4e86 \u56e0\u4e3a\u53ea\u6709 34 \u4e2a\u7248\u672c\u6709\u7248\u672c\u4fe1\u606f\uff0c\u6240\u4ee5\u4e5f\u5c31\u53ea\u6709 34 \u79cd\u6709\u6548\u7684\u7248\u672c\u4fe1\u606f\u5e8f\u5217\uff0c\u9644\u5f55 D \u7684 Table D.1 \u4e2d\u7ed9\u51fa\u4e86\u5b8c\u6574\u7684 34 \u4e2a\u7248\u672c\u4fe1\u606f\u5e8f\u5217 \u548c\u683c\u5f0f\u4fe1\u606f\u4e00\u6837\uff0c\u7ea0\u9519\u65f6\u5bf9\u7167\u8868\u683c\u9009\u62e9\u76f8\u5dee\u6bd4\u7279\u6570\u6700\u5c0f\u7684\u5373\u53ef\u3002\u5e76\u4e14\u7248\u672c\u4fe1\u606f\u4e5f\u53ea\u80fd\u7ea0\u6b63\u5c0f\u4e8e\u7b49\u4e8e 3 \u4e2a\u9519\u8bef \u586b\u5165\u4e8c\u7ef4\u7801 \u00b6 \u5728\u7248\u672c 7 \u4ee5\u4e0a\u7684\u4e8c\u7ef4\u7801\u4e2d\u5df2\u7ecf\u9884\u7559\u51fa\u4e86\u4e24\u4e2a 6*3 \u5927\u5c0f\u7684\u533a\u57df\uff0c\u4e00\u4e2a\u4f4d\u4e8e\u5de6\u4e0b\u5206\u5272\u7ebf\u7684\u4e0a\u65b9\u65f6\u5e8f\u56fe\u6848\u5de6\u4fa7\uff0c\u4e00\u4e2a\u4f4d\u4e8e\u53f3\u4e0a\u5206\u5272\u7ebf\u5de6\u4fa7\u65f6\u5e8f\u56fe\u6848\u7684\u4e0a\u65b9 \u6309\u7167\u4e0b\u56fe\u987a\u5e8f\u586b\u5165\u5373\u53ef\uff1a \u89e3\u7801\uff0811\u3001Annex B\uff09 \u00b6 \u7b80\u8981\u7684\u89e3\u7801\u8fc7\u7a0b\uff1a \u5b9a\u4f4d\u5e76\u83b7\u53d6\u56fe\u50cf\u4e2d\u7684\u4e8c\u7ef4\u7801\uff0c\u5e76\u628a\u56fe\u50cf\u4e2d\u7684\u9ed1\u767d\u5757\u63d0\u53d6\u4e3a 1 \u548c 0 \u8bfb\u53d6\u683c\u5f0f\u4fe1\u606f \u91ca\u653e\u63a9\u7801 101010000010010 \u8fdb\u884c\u7ea0\u9519 \u5982\u679c\u7ea0\u9519\u5931\u8d25\u5219\u5c06\u4e8c\u7ef4\u7801\u955c\u9762\u5bf9\u79f0\u518d\u5c1d\u8bd5 \u8bfb\u53d6\u7248\u672c\u4fe1\u606f\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09 \u8bfb\u53d6\u683c\u5f0f\u4fe1\u606f\u4e2d\u7684\u63a9\u7801\u7f16\u53f7\uff0c\u5e76\u91ca\u653e\u63a9\u7801 \u8bfb\u53d6\u5e76\u6062\u590d\u6570\u636e\u5b57\u548c\u7ea0\u9519\u5b57 \u7ea0\u9519\uff0c\u5982\u679c\u68c0\u6d4b\u5230\u4e86\u9519\u8bef\u5c31\u7ea0\u6b63 \u628a\u6570\u636e\u5b57\u89e3\u7801\u5f97\u5230\u7ed3\u679c \u7ea0\u9519\uff08Annex B\uff09 \u00b6 Annex B \u8bb2\u7684\u7ea0\u9519\u8fc7\u7a0b\u5f88\u7b80\u7565\uff0c\u800c\u4e14\u7b26\u53f7\u8bf4\u660e\u4e0d\u5168\uff0c\u5f88\u96be\u770b\u61c2 \u53bb\u5b66\u4e86\u5b66 PGZ \u89e3\u7801\uff1a Reed\u2013Solomon_error_correction#Peterson\u2013Gorenstein\u2013Zierler_decoder \u8bbe\u5f53\u524d\u7248\u672c\u4e0b\u6bcf\u5757\u4e2d\u6709 \\(n\\) \u4e2a\u5b57\uff0c \\(k\\) \u4e2a\u6570\u636e\u5b57\uff0c \\(n-k\\) \u4e2a\u7ea0\u9519\u5b57\uff0c\u7ea0\u9519\u5bb9\u91cf\u4e3a \\(\\nu\\) \u9996\u5148\u5b9a\u4e49\u539f\u6765\u7684\u5b8c\u6574\u6570\u636e\uff08\u5373\u6570\u636e\u5b57\u548c\u7ea0\u9519\u5b57\uff09\u4ece\u9ad8\u4f4d\u5230\u4f4e\u4f4d\u4e3a \\(c_{n-1},c_{n-2},\\cdots,c_0\\) \uff0c\u5bf9\u5e94\u591a\u9879\u5f0f\u4e3a\uff1a \\[s(x)=\\sum_{i=0}^{n-1}c_ix^i=c_{n-1}x^{n-1}+c_{n-2}x^{n-2}+\\cdots+c_0\\] \u800c\u4e14\u6839\u636e\u7ea0\u9519\u7801\u751f\u6210\u539f\u7406\uff0c \\(s(x)\\) \u53ef\u4ee5\u88ab\u751f\u6210\u591a\u9879\u5f0f \\(g(x)\\) \u6574\u9664\uff0c\u5176\u4e2d \\[g(x)=\\prod_{i=0}^{n-k-1}(x-\\alpha^i)\\] \u6240\u4ee5 \\(s(x)\\) \u4e5f\u6709\u6839 \\(s(\\alpha^i)=0, i=0,1,\\dots n-k-1\\) \u518d\u8bbe\u63a5\u6536\u5230\u7684\u6d88\u606f\u591a\u9879\u5f0f\uff08\u53ef\u80fd\u6709\u9519\uff09\u4e3a \\(r(x)\\) \uff0c\u8bef\u5dee\u591a\u9879\u5f0f\u4e3a \\(e(x)\\) \uff0c\u6ee1\u8db3\uff1a \\[r(x)=s(x)+e(x),\\quad e(x)=\\sum_{i=0}^{n-1}e_ix^i\\] \u5148\u8bbe\u4e00\u5171\u6709 \\(\\nu\\) \u4e2a\u9519\u8bef\uff0c\u4e14\u6bcf\u4e2a\u9519\u8bef\u7684\u4f4d\u7f6e\u4e3a \\(i_k,k=0,1,\\dots \\nu-1\\) \uff0c\u6240\u4ee5\u6709\uff1a \\[e(x)=\\sum_{k=0}^{\\nu-1}e_{i_k}x^{i_k}\\] \u6700\u7ec8\u7684\u76ee\u6807\u5c31\u662f\u627e\u5230\u9519\u8bef\u4e2a\u6570 \\(\\nu\\) \uff0c\u9519\u8bef\u4f4d\u7f6e \\(i_k\\) \uff0c\u4ee5\u53ca\u9519\u8bef\u5927\u5c0f \\(e_{i_k}\\) \u8ba1\u7b97\u5178\u578b\u503c \u00b6 \u9996\u5148\u5b9a\u4e49\u5178\u578b\u503c\uff08syndromes\uff09\u4e3a\u628a \\(\\alpha^j\\) \u4f20\u5165 \\(r(x)\\) \u5f97\u5230\u7684\u503c \\(S_j\\) \uff0c\u6709\uff1a \\[S_j=r(\\alpha^j)=s(\\alpha^j)+e(\\alpha^j)=e(\\alpha^j)=\\sum_{k=0}^{\\nu-1}e_{i_k}(\\alpha^j)^{i_k},j=0,1,\\dots,n-k-1\\] \u6b64\u65f6\u5982\u679c\u5f97\u5230\u7684\u5178\u578b\u503c\u90fd\u4e3a 0\uff0c\u90a3\u8bf4\u660e\u6ca1\u6709\u9519\u8bef \u4e3a\u4e86\u65b9\u4fbf\uff0c\u518d\u4ee4 \\(X_k=\\alpha^{i_k},Y_k=e_{i_k}\\) \uff0c\u8fd9\u6837 \\(X_k\\) \u4e5f\u80fd\u7528\u6765\u5b9a\u4f4d\u9519\u8bef\uff0c\u540c\u65f6\u4e5f\u6709\uff1a \\[S_j=\\sum_{k=0}^{\\nu-1}Y_kX_k^j\\] \u5199\u6210\u77e9\u9635\u5f62\u5f0f\u5c31\u662f\uff1a \\[\\begin{bmatrix} X_0^0 &X_2^0 &\\cdots &X_{\\nu-1}^0\\\\\\\\ X_0^1 &X_1^1 &\\cdots &X_{\\nu-1}^1\\\\\\\\ \\vdots &\\vdots & &\\vdots\\\\\\\\ X_0^{n-k-1} &X_1^{n-k-1} &\\cdots &X_{\\nu-1}^{n-k-1} \\end{bmatrix} \\begin{bmatrix} Y_0\\\\\\\\Y_1\\\\\\\\\\vdots\\\\\\\\Y_{\\nu-1} \\end{bmatrix}= \\begin{bmatrix} S_0\\\\\\\\S_1\\\\\\\\\\vdots\\\\\\\\S_{n-k-1} \\end{bmatrix}\\] \u6240\u4ee5\u53ea\u8981\u6c42\u5f97\u4f4d\u7f6e \\(X_k\\) \u5c31\u80fd\u5f97\u5230\u9519\u8bef\u5927\u5c0f\uff0c\u4f46\u662f\u6b64\u65f6\u5e76\u4e0d\u662f\u7ebf\u6027\u7684 \u9519\u8bef\u5b9a\u4f4d\u591a\u9879\u5f0f \u00b6 \u5b9a\u4e49\u4e00\u4e2a\u9519\u8bef\u5b9a\u4f4d\u591a\u9879\u5f0f\uff08error locator polynomial\uff09 \\(\\Lambda(x)\\) \uff1a \\[\\Lambda(x)=\\prod_{k=0}^{\\nu-1}(1-xX_k)=1+\\Lambda_1x+\\Lambda_2x^2+\\cdots+\\Lambda_\\nu x^\\nu\\] \u53ef\u4ee5\u770b\u51fa \\(\\Lambda(X_k^{-1})=0\\) \uff0c\u6240\u4ee5\u5bf9\u4e8e \\(0\\leq j\\leq\\nu-1\\) \u6709\uff1a \\[ Y_kX_k^{j+\\nu}\\Lambda(X_k^{-1}) =0 \\] \\[ Y_{k}X_{k}^{j+\\nu }(1+\\Lambda _{1}X_{k}^{-1}+\\Lambda _{2}X_{k}^{-2}+\\cdots +\\Lambda _{\\nu }X_{k}^{-\\nu })=0 \\] \\[ Y_{k}X_{k}^{j+\\nu }+\\Lambda _{1}Y_{k}X_{k}^{j+\\nu }X_{k}^{-1}+\\Lambda _{2}Y_{k}X_{k}^{j+\\nu }X_{k}^{-2}+\\cdots +\\Lambda _{\\nu }Y_{k}X_{k}^{j+\\nu }X_{k}^{-\\nu }=0 \\] \\[ Y_{k}X_{k}^{j+\\nu }+\\Lambda _{1}Y_{k}X_{k}^{j+\\nu -1}+\\Lambda _{2}Y_{k}X_{k}^{j+\\nu -2}+\\cdots +\\Lambda _{\\nu }Y_{k}X_{k}^{j}=0 \\] \u6240\u4ee5\u628a \\(k\\) \u4ece \\(0\\) \u5230 \\(\\nu-1\\) \u7d2f\u52a0\u8d77\u6765\u4e5f\u4e3a 0\uff1a \\[\\sum_{k=0}^{\\nu-1}\\left(Y_{k}X_{k}^{j+\\nu }+\\Lambda _{1}Y_{k}X_{k}^{j+\\nu -1}+\\Lambda _{2}Y_{k}X_{k}^{j+\\nu -2}+\\cdots +\\Lambda _{\\nu }Y_{k}X_{k}^{j}\\right)=0\\] \u7136\u540e\u8f6c\u6362\u4e3a\u6bcf\u9879\u7d2f\u52a0\u5e76\u63d0\u53d6\u51fa \\(\\Lambda_i\\) \uff1a \\[\\left(\\sum _{k=1}^{\\nu }Y_{k}X_{k}^{j+\\nu }\\right)+\\Lambda _{1}\\left(\\sum _{k=1}^{\\nu }Y_{k}X_{k}^{j+\\nu -1}\\right)+\\cdots +\\Lambda _{\\nu }\\left(\\sum _{k=1}^{\\nu }Y_{k}X_{k}^{j}\\right)=0\\] \u6839\u636e\u5178\u578b\u503c\u7684\u5b9a\u4e49\u6709\uff1a \\[S_{j+\\nu}+\\Lambda_1S_{j+\\nu-1}+\\cdots+\\Lambda_\\nu S_k=0\\] \u628a \\(S_{j+\\nu}\\) \u79fb\u5230\u53f3\u8fb9\uff0c\u5e76\u5c55\u5f00\u6240\u6709 \\(j\\) \u53ef\u4ee5\u5f97\u5230\u77e9\u9635\u5f62\u5f0f\uff1a \\[\\begin{bmatrix} S_{0}&S_{1}&\\cdots &S_{\\nu-1}\\\\\\\\S_{1}&S_{2}&\\cdots &S_{\\nu}\\\\\\\\\\vdots &\\vdots &&\\vdots \\\\\\\\S_{\\nu-1}&S_{\\nu}&\\cdots &S_{2\\nu -2} \\end{bmatrix} \\begin{bmatrix}\\Lambda _{\\nu }\\\\\\\\\\Lambda _{\\nu -1}\\\\\\\\\\vdots \\\\\\\\\\Lambda _{1} \\end{bmatrix} = \\begin{bmatrix} -S_{\\nu}\\\\\\\\-S_{\\nu +1}\\\\\\\\\\vdots \\\\\\\\-S_{2\\nu-1 } \\end{bmatrix}\\] \u6b64\u65f6\u662f\u4e00\u4e2a\u7ebf\u6027\u65b9\u7a0b\u7ec4\uff0c\u800c\u4e14 \\(S_i\\) \u5168\u90e8\u5df2\u77e5\uff0c\u53ef\u4ee5\u89e3\u5f97 \\(\\Lambda_i\\) \u5f97\u5230\u9519\u8bef\u4f4d\u7f6e\u548c\u5927\u5c0f \u00b6 \u6b64\u65f6\u591a\u9879\u5f0f \\(\\Lambda(x)\\) \u5df2\u7ecf\u5b8c\u5168\u5df2\u77e5\uff0c\u6240\u4ee5\u53ef\u4ee5\u6c42\u5f97\u5176\u6839\uff08\u7528 Chien search \u7b97\u6cd5\u5728\u4f3d\u7f57\u74e6\u57df\u4e0a\u6c42\u6839\uff09 \u518d\u7b97\u5176\u5012\u6570\u5373\u53ef\u5f97\u5230 \\(X_k\\) \uff0c\u7136\u540e\u53ef\u4ee5\u5bfb\u627e\u5230\u9519\u8bef\u4f4d\u7f6e \\(i_k\\) \u8fd9\u65f6\u4e5f\u5c31\u53ef\u4ee5\u5e26\u5165\u7b2c\u4e00\u4e2a\u65b9\u7a0b\u7ec4\u6c42\u5f97\u9519\u8bef\u5927\u5c0f \\(Y_k\\) \uff08\u6216\u8005\u5229\u7528 Forney algorithm\uff09 \u5f97\u5230\u4e86 \\(e(x)\\) \u540e\u5c31\u53ef\u4ee5\u6839\u636e \\(r(x)\\) \u7b97\u51fa\u539f\u59cb\u4fe1\u606f \\(s(x)\\) \u4e86","title":"QRCode"},{"location":"ctf/qrcode/#qrcode","text":"\u6700\u8fd1\u51e0\u6b21\u6bd4\u8d5b\u9047\u5230\u8fc7\u597d\u51e0\u6b21\u4e8c\u7ef4\u7801\u7684\u9898\u76ee\uff0c\u6253\u7b97\u597d\u597d\u6765\u8bfb\u4e00\u8bfb\u6807\u51c6\u6587\u6863 ISO/IEC 18004:2015 \u6587\u6863 6.1 \u524d\u9762\u7684\u5185\u5bb9\u4e0d\u591a\uff0c\u5c31\u4ece\u5b83\u540e\u9762\u5f00\u59cb\u8bb0\u4e86","title":"\u4e8c\u7ef4\u7801 QRCode \u6807\u51c6\u9605\u8bfb"},{"location":"ctf/qrcode/#6163","text":"","title":"\u57fa\u7840\u63cf\u8ff0\u53ca\u7ed3\u6784\uff086.1\u30016.3\uff09"},{"location":"ctf/qrcode/#5361","text":"\u5757\u4f4d\u7f6e\uff1a\u5de6\u4e0a\u89d2\u4e3a\u539f\u70b9 (0, 0) \u5411\u4e0bx+\uff0c\u5411\u53f3y+ \u7248\u672c\u8868\u793a\uff1aVersion V-E\uff08\u5176\u4e2dV\u662f\u7248\u672c\u53f7\uff0cE\u662f\u7ea0\u9519\u7b49\u7ea7\uff09 \u6570\u636e\u8868\u793a\uff1a\u9ed1\u5757-1 \u767d\u5757-0\uff08\u53ef\u4ee5\u5e26\u80cc\u666f\u5168\u90e8\u53cd\u8272\uff09 \u5927\u5c0f\uff1a\u4ece\u7248\u672c1\u5230\u7248\u672c40\u4f9d\u6b21\u662f 21x21 \uff5e 177x177\uff08\u6bcf\u589e\u52a0\u4e00\u4e2a\u7248\u672c\uff0c\u8fb9\u957f\u589e\u52a04\uff09 \u652f\u6301\u7684\u6700\u591a\u5b57\u7b26\u6570\uff08\u7248\u672c40\uff09 \u6570\u5b57\u6a21\u5f0f\uff1a7089 \u5b57\u6bcd\u6a21\u5f0f\uff1a4296 \u5b57\u8282\u6a21\u5f0f\uff1a2953 \u65e5\u6587\u6a21\u5f0f\uff1a1817 \u7ea0\u9519\u7b49\u7ea7\u5141\u8bb8\u7684\u6062\u590d\u6bd4\u4f8b L\uff1a7% M\uff1a15% Q\uff1a25% H\uff1a30%","title":"\u57fa\u7840\u63cf\u8ff0\uff085.3\u30016.1\uff09"},{"location":"ctf/qrcode/#63","text":"\u529f\u80fd\u56fe\u6848\uff08function patterns\uff09 \u7279\u5f81\u7b26\uff08finder pattern\uff097x7\u9ed1\u5708 5x5\u767d\u5708 3x3\u9ed1\u5757 \u5206\u5272\u7ebf\uff08separator\uff09\u5728\u7279\u5f81\u7b26\u5468\u56f4\u7684\u4e00\u5708\u5168\u767d\u533a\u57df \u65f6\u5e8f\u56fe\u6848\uff08timing patterns\uff09\u7b2c7\u884c\u7b2c7\u5217\u7684\u4e24\u6761\u9ed1\u767d\u6761\u7eb9 \u5bf9\u9f50\u56fe\u6848\uff08alignment patterns\uff09\u7248\u672c1\u65e0\uff0c\u7248\u672c2-6 1\u4e2a\uff0c\u7248\u672c7-13 6\u4e2a\u2026\u2026\uff08\u9644\u5f55E\uff09 \u9759\u9ed8\u533a\uff08quiet zone\uff09\u81f3\u5c114\u4e2a\u5355\u4f4d\u5bbd \u7f16\u7801\u533a\u57df\uff08encoding region\uff09 \u683c\u5f0f\u4fe1\u606f\uff08format information\uff09\u5de6\u4e0a\u89d2\u5206\u5272\u7ebf\u5916\u4e00\u5708\uff0c\u5de6\u4e0b\u89d2\u5206\u5272\u7ebf\u53f3\u4fa7\uff0c\u53f3\u4e0a\u89d2\u5206\u5272\u7ebf\u4e0b\u4fa7 \u7248\u672c\u4fe1\u606f\uff08version information\uff09\u7248\u672c7\u540e\u624d\u6709\uff0c\u5728\u5de6\u4e0b\u5206\u5272\u7ebf\u4e0a\u4fa7\uff0c\u53f3\u4e0a\u5206\u5272\u7ebf\u5de6\u4fa7 \u6570\u636e\u53ca\u7ea0\u9519\u7801\u533a\u57df","title":"\u4e8c\u7ef4\u7801\u7ed3\u6784\uff086.3\uff09"},{"location":"ctf/qrcode/#74","text":"","title":"\u6570\u636e\u7f16\u7801\uff087.4\uff09"},{"location":"ctf/qrcode/#741","text":"\u9ed8\u8ba4\u7684 ECI \u6a21\u5f0f\u4e0b\uff0c\u6bd4\u7279\u6d41\u4ee5\u6a21\u5f0f\u6807\u8bc6\u7b26\u5f00\u59cb\u3002\u5982\u679c\u4e0d\u662f\u9ed8\u8ba4 ECI \u6a21\u5f0f\uff0c\u5219\u9700\u8981\u4ece ECI \u5934\u5f00\u59cb\uff1a \uff084 bits\uff09ECI \u6a21\u5f0f\u6807\u8bc6\u7b26 \uff088/16/24 bits\uff09ECI Designator \u6bd4\u7279\u6d41\u7684\u5269\u4f59\u90e8\u5206\u7531\u4e0b\u9762\u51e0\u90e8\u5206\u7ec4\u6210\uff1a \uff084 bits\uff09\u6a21\u5f0f\u6807\u8bc6\u7b26 \u5b57\u7b26\u6570\u91cf\u6807\u8bc6\u7b26\uff08\u957f\u5ea6\u89c1\u4e0b\u7b2c\u4e8c\u4e2a\u8868\uff09 \u6570\u636e\u6bd4\u7279\u6d41 \u6a21\u5f0f \u6807\u8bc6\u7b26 \u8bf4\u660e ECI 0111 \u6570\u5b57\u6a21\u5f0f 0001 \u53ea\u5305\u542b\u6570\u5b570-9\uff0c3\u4e2a\u6570\u5b57 10 bits \u5b57\u6bcd\u6570\u5b57\u6a21\u5f0f 0010 45\u4e2a\u5b57\u7b26\uff0c0-9A-Z \u53ca9\u4e2a\u7b26\u53f7 \u7a7a\u683c$%*+-./:\uff0c2\u4e2a\u5b57\u7b26 11 bits \u5b57\u8282\u6a21\u5f0f 0100 \u6bcf\u4e2a\u5b57\u7b26 8 bits \u65e5\u672c\u6c49\u5b57\u6a21\u5f0f 1000 \u7ed3\u6784\u6dfb\u52a0\u6a21\u5f0f 0011 \u7248\u672c \u6570\u5b57\u6a21\u5f0f\u5b57\u7b26\u6570\u91cf\u6807\u8bc6\u7b26\u957f\u5ea6 \u5b57\u6bcd\u6a21\u5f0f\u2026\u2026 \u5b57\u8282\u6a21\u5f0f\u2026\u2026 \u65e5\u6587\u6a21\u5f0f\u2026\u2026 1\uff5e9 10 9 8 8 10\uff5e26 12 11 16 10 27\uff5e40 14 13 16 12","title":"\u6570\u636e\u5e8f\u5217\uff087.4.1\uff09"},{"location":"ctf/qrcode/#eci-742","text":"ECI \u6a21\u5f0f\u5373\u4f7f\u7528\u67d0\u4e9b\u7279\u5b9a\u7684\u5b57\u7b26\u6620\u5c04\u6765\u628a\u5b57\u7b26\u8f6c\u6362\u4e3a\u6bd4\u7279\u6d41 \u800c\u4e14\u90fd\u4f7f\u7528\u5b57\u8282\u6a21\u5f0f\u6765\u8868\u793a\u6570\u636e\uff08\u5373\u5728 ECI \u5934\u540e\u7684\u6a21\u5f0f\u6807\u8bc6\u7b26\u4e3a\u5b57\u8282\u6a21\u5f0f\u7684 0100\uff09 \u6bcf\u4e2a ECI \u90fd\u6709\u4e00\u4e2a\u516d\u4f4d\u6570\u7f16\u53f7\uff08assignment value\uff09\uff0c\u53ef\u80fd\u5360 1\u30012\u30013 \u4e2a codewords\uff0c\u5177\u4f53\u6807\u8bc6\u65b9\u5f0f\u89c1\u4e0b\u8868\uff08\u53601\u4e2a codewords \u65f6\u5f00\u5934\u4e00\u5b9a\u662f0\uff0c\u53602\u4e2a\u65f6\u5f00\u5934\u4e00\u5b9a\u662f10\uff0c\u53603\u4e2a\u65f6\u5f00\u5934\u4e00\u5b9a\u662f110\uff09\u8868\u4e2d xxxxxxxx \u8868\u793a\u7f16\u53f7\u7684\u4e8c\u8fdb\u5236 ECI Assignment Value Codewords values 000000 \uff5e 000127 0xxxxxxx 000000 \uff5e 016383 10xxxxxx xxxxxxxx 000000 \uff5e 999999 110xxxxx xxxxxxxx xxxxxxxx \u800c\u4e14 ECI \u6a21\u5f0f\u4e0b\u4e2d\u9014\u53ef\u4ee5\u66f4\u6362 ECI \u6307\u793a\u5668\uff0c\u4e00\u4e2a 5C\uff0801011100\uff09\u8868\u793a\u6362\u65b0\u7684 ECI\uff0c\u540e\u9762\u8981\u63a56\u4e2a codewords \u53736\u4e2a\u6570\u5b57\uff08\u5341\u516d\u8fdb\u523630\uff5e39\uff09\u8868\u793a\u7f16\u53f7\uff0c\u800c\u4e0d\u662f\u7528\u4e0a\u8868\u4e2d\u7684\u8868\u793a\u65b9\u6cd5\u3002\u800c 5C \u6b63\u5e38\u60c5\u51b5\u4e0b\u8868\u793a \uff0c\u6240\u4ee5\u8868\u793a \u8fd9\u4e2a\u539f\u6570\u636e\u9700\u8981\u7528\u4e24\u4e2a 5C \u4f8b\u5b50 1 \u4f7f\u7528 ISO/IEC 8859-7\uff08ECI 000009\uff09\u6765\u8868\u793a\u5e0c\u814a\u5b57\u6bcd\u0391\u0392\u0393\u0394\u0395\uff08\u8be5 ECI \u4e0b\u8868\u793a\u4e3a\u5341\u516d\u8fdb\u5236 A1 A2 A3 A4 A5\uff09 \u6bd4\u7279\u6d41\uff1a ECI \u6807\u8bc6\u7b26\uff1a 0111 ECI \u7f16\u53f7\uff1a 00001001 \u5b57\u8282\u6a21\u5f0f\u6807\u8bc6\u7b26\uff1a 0100 \u5b57\u7b26\u6570\u91cf\uff1a 00000101 \uff085\u4e2a\u5b57\u7b26\uff09 \u6570\u636e\uff1a 10100001 10100010 10100011 10100100 10100101 \u6240\u4ee5\u6700\u7ec8\u7684\u6bd4\u7279\u6d41\uff1a 0111 00001001 0100 00000101 10100001 10100010 10100011 10100100 10100101 \u4f8b\u5b50 2\uff0814.3\uff09 \u9700\u8981\u7f16\u7801\u7684\u6570\u636e\uff1aABC\\123456 \u6570\u636e\u6d41\u4e2d\u5341\u516d\u8fdb\u5236\uff08\u5b57\u8282\u6a21\u5f0f\u6807\u8bc6\u7b260100\u540e\uff09\uff1a41 42 43 5C 5C 31 32 33 34 35 36 \u9700\u8981\u7f16\u7801\u7684\u6570\u636e\uff1aABC<\u540e\u63a5 ECI 123456 \u4e0b\u7684\u6570\u636e\u2026\u2026> \u6570\u636e\u6d41\u4e2d\u5341\u516d\u8fdb\u5236\uff08\u5b57\u8282\u6a21\u5f0f\u6807\u8bc6\u7b260100\u540e\uff09\uff1a41 42 43 5C 31 32 33 34 35 36 \u2026\u2026","title":"ECI \u6a21\u5f0f\uff087.4.2\uff09"},{"location":"ctf/qrcode/#743","text":"\u8f93\u5165\u7684\u6570\u5b57\u5b57\u7b26\u4e32\uff08\u56e0\u4e3a\u5f00\u5934\u53ef\u4ee5\u662f0\uff09\u8981\u88ab\u5206\u62103\u4e2a\u4e00\u7ec4\uff0c\u6bcf\u7ec4\u4f1a\u8f6c\u6362\u4e3a 10 bits \u7684\u4e8c\u8fdb\u5236\u4e32\uff08999 -> 1111100111 \uff09\u3002\u5269\u4f59\u4e0d\u52303\u4e2a\u7684\u90e8\u5206\uff0c\u5982\u679c\u52692\u4e2a\u6570\u5b57\uff0c\u5219\u5c06\u5176\u8f6c\u6362\u4e3a 7 bits \u7684\u4e8c\u8fdb\u5236\u4e32\uff0899 -> 1100011 \uff09\u5982\u679c\u52691\u4e2a\u6570\u5b57\uff0c\u5219\u5c06\u5176\u8f6c\u6362\u4e3a 4 bits \u7684\u4e8c\u8fdb\u5236\u4e32\uff089 -> 1001 \uff09 \u7136\u540e\u5f00\u5934\u52a0\u4e0a\u6570\u5b57\u6a21\u5f0f\u6807\u8bc6\u7b26 0001 \u548c\u6570\u91cf\u6807\u8bc6\u7b26\uff08\u5b57\u7b26\u4e2a\u6570\u8f6c\u4e3a\u4e8c\u8fdb\u5236\uff0c\u5e76\u5f00\u5934\u88650\u81f3\u957f\u5ea6\uff0c\u957f\u5ea6\u7531\u7248\u672c\u51b3\u5b9a\uff0c\u89c1\u4e0a 7.4.1 \u90e8\u5206\u7684\u7b2c\u4e8c\u4e2a\u8868\uff09 \u4f8b\u5b50 \u6570\u636e\u5185\u5bb9\uff1a 01234567 \uff08\u4fdd\u7559\u5f00\u59340\uff09 \u6570\u636e\u6d41\u90e8\u5206\uff1a \u6570\u5b57\u6a21\u5f0f\u6807\u8bc6\u7b26\uff1a 0001 \u6570\u91cf\u6807\u8bc6\u7b26\uff1a 0000001000 \uff088\uff0c\u4e14\u7248\u672c1\u4e0b\u89c4\u5b9a\u4e3a 10 bits\uff09 \u6570\u636e\uff1a 012 -> 0000001100 345 -> 0101011001 67 -> 1000011 \u5b8c\u6574\u6570\u636e\u6bd4\u7279\u6d41\uff1a 0001 0000001000 0000001100 0101011001 1000011 \u6570\u5b57\u6a21\u5f0f\u4e0b\u7684\u6bd4\u7279\u6d41\u957f\u5ea6\u4e3a\uff1a \\[ B=M+C+10\\times\\lfloor\\frac{D}{3}\\rfloor+R \\] \u5176\u4e2d M \u4e3a 4\uff0cC \u4e3a\u6570\u91cf\u6807\u8bc6\u7b26\u957f\u5ea6\uff08\u7248\u672c1\uff5e9\u4e3a 10\uff0c\u7248\u672c10\uff5e26\u4e3a 12\uff0c\u7248\u672c27\uff5e40\u4e3a 14\uff09\uff0cD\u4e3a\u8f93\u5165\u5b57\u7b26\u4e2a\u6570\uff0cR\u4e3a\u5269\u4f59\u90e8\u5206\uff08\u82e5 D mod 3 = 0 \u5219\u4e3a 0\uff0c\u82e5 D mod 3 = 1 \u5219\u4e3a 4\uff0c\u82e5 D mod 3 = 2 \u5219\u4e3a 7\uff09","title":"\u6570\u5b57\u6a21\u5f0f\uff087.4.3\uff09"},{"location":"ctf/qrcode/#744","text":"\u6570\u5b57\u5b57\u6bcd\u6a21\u5f0f\uff08Alphanumeric mode\uff09\u4e0b\u652f\u6301\u7684\u7f16\u7801\u5b57\u7b26\u670945\u4e2a\uff0c\u628a\u5b83\u4eec\u4ece0\u7f16\u53f7\u81f344\u3002\u5176\u4e2d 0-9 \u5bf9\u5e94\u6570\u5b57 0-9\uff0c10-35 \u5bf9\u5e94\u5b57\u6bcd A-Z\uff0c36-44 \u5bf9\u5e949\u4e2a\u7b26\u53f7\uff1a \u8f93\u5165\u7684\u5b57\u7b26\u5148\u6309\u7167\u4e0a\u8868\u8f6c\u6362\u4e3a\u6570\u503c\uff0c\u7136\u540e\u5206\u4e3a\u4e24\u4e2a\u4e00\u7ec4\uff0c\u6bcf\u4e00\u7ec4\u5185\u628a \u7b2c\u4e00\u4e2a\u6570\u503c \u00d7 45 + \u7b2c\u4e8c\u4e2a\u6570\u503c\uff0c\u518d\u8f6c\u6362\u4e3a\u957f\u5ea6\u4e3a 11 bits \u7684\u4e8c\u8fdb\u5236\u4e32\uff08\u6700\u5927\u4e3a 44\u00d745+44=2024 -> 11111101000 \uff09\u3002\u5982\u679c\u5b57\u7b26\u957f\u5ea6\u4e3a\u5947\u6570\uff0c\u5219\u4f1a\u5269\u4f59\u51fa\u4e00\u4e2a\u5b57\u7b26\uff0c\u9700\u8981\u5c06\u5176\u503c\u8f6c\u6362\u4e3a\u957f\u5ea6\u4e3a 6 bits \u7684\u4e8c\u8fdb\u5236\u4e32\uff08\u6700\u5927\u4e3a 11 -> 101100 \uff09 \u7136\u540e\u5f00\u5934\u52a0\u4e0a\u5b57\u6bcd\u6570\u5b57\u6a21\u5f0f\u6807\u8bc6\u7b26 0010 \u548c\u6570\u91cf\u6807\u8bc6\u7b26\uff08\u957f\u5ea6\u7531 7.4.1 \u7b2c\u4e8c\u4e2a\u8868\u89c4\u5b9a\uff09 \u4f8b\u5b50 \u6570\u636e\u5185\u5bb9\uff1aAC-42 \u6570\u636e\u6d41\u90e8\u5206\uff1a \u5b57\u6bcd\u6570\u5b57\u6a21\u5f0f\u6807\u8bc6\u7b26\uff1a 0010 \u6570\u91cf\u6807\u8bc6\u7b26\uff1a 000000101 \uff085\uff0c\u4e14\u7248\u672c1\u4e0b\u89c4\u5b9a\u957f\u5ea6\u4e3a9\uff09 \u6570\u636e\uff1aAC-42 -> 10 12 41 4 2 -> (10 12)(41 4)(2) 10 12 -> 10*45+12=462 -> 00111001110 41 4 -> 41*45+4=1849 -> 11100111001 2 -> 2 -> 000010 \u5b8c\u6574\u6570\u636e\u6bd4\u7279\u6d41\uff1a 0010 000000101 00111001110 11100111001 000010 \u5b57\u6bcd\u6570\u5b57\u6a21\u5f0f\u4e0b\u7684\u6bd4\u7279\u6d41\u957f\u5ea6\u4e3a\uff1a \\[B=M+C+11\\times\\lfloor\\frac{D}{2}\\rfloor+6\\times(D\\bmod 2)\\] \u5176\u4e2d M \u4e3a 4\uff0cC \u4e3a\u6570\u91cf\u6807\u8bc6\u7b26\u957f\u5ea6\uff0cD \u4e3a\u539f\u6570\u636e\u957f\u5ea6","title":"\u5b57\u6bcd\u6570\u5b57\u6a21\u5f0f\uff087.4.4\uff09"},{"location":"ctf/qrcode/#745","text":"\u5b57\u8282\u6a21\u5f0f\uff08Byte mode\uff09\u4e0b\u628a\u6bcf\u4e2a\u5b57\u7b26\u6839\u636e Latin-1\uff08ISO/IEC 8859-1\uff09\u7f16\u7801\u6210 8 bits\uff081\u5b57\u8282\uff09\uff0c\u76f4\u63a5\u63a5\u5728\u5b57\u8282\u6a21\u5f0f\u6807\u8bc6\u7b26 0100 \u548c\u6570\u91cf\u6807\u8bc6\u7b26\uff08\u957f\u5ea6\u7531 7.4.1 \u7b2c\u4e8c\u4e2a\u8868\u89c4\u5b9a\uff09\u7684\u540e\u9762\u3002 Latin-1 \u5b57\u8282\u6a21\u5f0f\u4e0b\u7684\u6bd4\u7279\u6d41\u957f\u5ea6\uff1a \\[B=M+C+8\\times D\\] \u5176\u4e2d M \u4e3a 4\uff0cC \u4e3a\u6570\u91cf\u6807\u8bc6\u7b26\u957f\u5ea6\uff0cD \u4e3a\u539f\u6570\u636e\u957f\u5ea6","title":"\u5b57\u8282\u6a21\u5f0f\uff087.4.5\uff09"},{"location":"ctf/qrcode/#747","text":"\u4e00\u4e2a\u4e8c\u7ef4\u7801\u7684\u6570\u636e\u6d41\u4e2d\u4e5f\u53ef\u4ee5\u4f7f\u7528\u591a\u79cd\u6a21\u5f0f\uff0c\u4e14\u4e0d\u9700\u8981\u7279\u522b\u8868\u793a\u3002\u66f4\u6362\u65b0\u7684\u6a21\u5f0f\u65f6\u53ea\u9700\u8981\u6b63\u5e38\u6dfb\u52a0 \u6a21\u5f0f\u6807\u8bc6\u7b26+\u6570\u91cf\u6807\u8bc6\u7b26+\u6570\u636e \u5373\u53ef \u4f8b\u5b50 \u539f\u59cb\u6570\u636e\uff1a123\u6d4b\u8bd5 \u6570\u636e\u6d41\uff1a \u6570\u5b57\u6a21\u5f0f\uff1a \u6807\u8bc6\u7b26\uff1a 0001 \u6570\u91cf\u6807\u8bc6\u7b26\uff1a 0000000011 \uff083\uff0c\u957f\u5ea610\uff09 \u6570\u636e\uff1a123 -> 0001111011 \u5b57\u8282\u6a21\u5f0f\uff1a\u6d4b\u8bd5 -> E6 B5 8B / E8 AF 95 \u6807\u8bc6\u7b26\uff1a 0100 \u6570\u91cf\u6807\u8bc6\u7b26\uff1a 00000110 \uff086\uff0c\u957f\u5ea68\uff09 \u6570\u636e\uff1a \u6d4b -> 11100110 10110101 10001011 \u8bd5 -> 11101000 10101111 10010101 \u5b8c\u6574\u6570\u636e\u6bd4\u7279\u6d41\uff1a 0001 0000000011 0001111011 0100 00000110 11100110 10110101 10001011 11101000 10101111 10010101","title":"\u6df7\u5408\u6a21\u5f0f\uff087.4.7\uff09"},{"location":"ctf/qrcode/#749","text":"\u5728\u6570\u636e\u7684\u672b\u5c3e\u8981\u586b\u51454\u4e2a0\u4f5c\u4e3a\u7ed3\u675f\u7b26\uff0c\u5982\u679c\u5bb9\u91cf\u4e0d\u8db3\u7684\u8bdd\u53ef\u4ee5\u7f29\u77ed\u6216\u7701\u7565 \u5373\u80fd\u586b\u4e0b\u5219\u52a04\u4e2a0\uff0c\u586b\u4e0d\u4e0b\u5219\u80fd\u52a0\u51e0\u4e2a0\u5c31\u52a0\u51e0\u4e2a0","title":"\u7ed3\u675f\u7b26\uff087.4.9\uff09"},{"location":"ctf/qrcode/#padding-bits7410","text":"\u8f6c\u6362\u540e\u7684\u6570\u636e\u6bd4\u7279\u6d41\u8fd8\u9700\u8981\u586b\u5145\u81f3\u4e8c\u7ef4\u7801\u7684\u6570\u636e\u5bb9\u91cf \u9996\u5148\u5148\u7528 0 \u8865\u5145\u6bd4\u7279\u6d41\u957f\u5ea6\u5230 8 \u7684\u6574\u6570\u500d \u7136\u540e\u7528 11101100 \u548c 00010001 \u4ea4\u66ff\u586b\u8865\u5230\u4e8c\u7ef4\u7801\u6570\u636e\u5bb9\u91cf \u5177\u4f53\u7684\u6570\u636e\u5bb9\u91cf\u7531\u7248\u672c\u53f7\u548c\u7ea0\u9519\u7b49\u7ea7\u51b3\u5b9a\uff0c\u4e14\u6570\u636e\u5bb9\u91cf\uff08\u6bd4\u7279\uff09\u4e00\u5b9a\u4e3a8\u7684\u500d\u6570\uff0c\u5b8c\u6574\u6570\u636e\u89c1\u6587\u6863\u7684 33\uff5e36 \u9875\uff08\u6574\u4e2a pdf \u7684\u7b2c 41\uff5e44 \u9875\uff09 \u6ce8 \u8fd9\u4e2a\u5730\u65b9 QRazyBox \u7f51\u7ad9\u5b58\u5728 bug\uff0c\u6709\u65f6\u65e0\u6cd5\u6b63\u5e38\u8bc6\u522b\u586b\u5145\u7684 0 \u6bd4\u7279\u548c padding bits\uff08\u5373\u53ef\u80fd\u628a\u586b\u5145\u7684 0 \u4e2d\u524d\u56db\u4e2a\u89c6\u4e3a\u4e00\u4e2a terminator\uff0c\u628a\u540e\u9762\u7684 0 \u624d\u89c6\u4e3a\u5c5e\u4e8e padding bits \uff09","title":"\u586b\u5145 padding bits\uff087.4.10\uff09"},{"location":"ctf/qrcode/#75","text":"","title":"\u7ea0\u9519\u7801\u7f16\u7801\uff087.5\uff09"},{"location":"ctf/qrcode/#751","text":"\u7ea0\u9519\u5b57\uff08error correction codewords\uff09\u53ef\u4ee5\u7ea0\u6b63\u4e24\u79cd\u9519\u8bef\uff0c\u4e00\u79cd\u662f\u6bd4\u5982\u65e0\u6cd5\u626b\u63cf\u6216\u65e0\u6cd5\u89e3\u7801\u7684\u5df2\u77e5\u4f4d\u7f6e\u7684\u9519\u8bef\u5b57\uff08erasures\uff09\uff0c\u4e00\u79cd\u662f\u672a\u77e5\u4f4d\u7f6e\u7684\u9519\u8bef\u5b57\uff08errors\uff09\uff0c\u4e00\u4e2a erasures \u53ef\u4ee5\u7531\u4e00\u4e2a\u7ea0\u9519\u5b57\u7ea0\u9519\uff0c\u800c\u4e00\u4e2a errors \u9700\u8981\u4e24\u4e2a\u7ea0\u9519\u5b57\u6765\u7ea0\u9519 \u53ef\u4ee5\u7ea0\u9519\u7684 erasures \u548c errors \u7684\u6570\u91cf\u6ee1\u8db3\uff1a \\[e+2t\\leq d-p\\] \u5176\u4e2d \\(e\\) \u662f erasures \u7684\u6570\u91cf\uff0c \\(t\\) \u662f errors \u7684\u6570\u91cf\uff0c \\(d\\) \u662f\u7ea0\u9519\u5b57\u7684\u6570\u91cf\uff0c \\(p\\) \u662f\u88ab\u9519\u8bef\u89e3\u6790\u7684\u4fdd\u62a4\u5b57\u6570\u91cf \u5176\u4e2d \\(p\\) \u7531\u7248\u672c\u51b3\u5b9a\uff1a \\(p=3\\) \uff1a\u7248\u672c 1-L \\(p=2\\) \uff1a\u7248\u672c 1-M\u30012-L \\(p=1\\) \uff1a\u7248\u672c 1-Q\u30011-H\u30013-L \\(p=0\\) \uff1a\u5176\u4ed6\u6240\u6709\u7248\u672c","title":"\u7ea0\u9519\u5bb9\u91cf\uff087.5.1\uff09"},{"location":"ctf/qrcode/#752","text":"","title":"\u751f\u6210\u7ea0\u9519\u7801\uff087.5.2\uff09"},{"location":"ctf/qrcode/#76710","text":"","title":"\u5269\u4f59\u6b65\u9aa4\uff087.6~7.10\uff09"},{"location":"ctf/qrcode/#76","text":"\u9996\u5148\u6309\u7167 2 \u4e2d\u6240\u8ff0\u7ed9\u5b8c\u6574\u4fe1\u606f\u7f16\u7801\u6210\u6570\u636e\u5e8f\u5217\uff0c\u5176\u4e2d\u4e5f\u5305\u542b padding bits\uff0c\u4e14\u957f\u5ea6\u4e3a 8 \u7684\u500d\u6570 \u7136\u540e\u6839\u636e 3.1.1 \u4e2d\u6240\u8bf4\u5bf9\u6570\u636e\u5e8f\u5217\u8fdb\u884c\u5206\u5757\uff0c\u7136\u540e\u5bf9\u6bcf\u5757\u5206\u522b\u751f\u6210\u7ea0\u9519\u7801 \u6700\u540e\u628a\u6570\u636e\u5e8f\u5217\u7684\u6240\u6709\u5757\u6309\u7167\u5b57\u8282\u4f9d\u6b21\u4ea4\u9519\u5408\u6210\u65b0\u7684\u6570\u636e\u5e8f\u5217\uff0c\u7136\u540e\u628a\u7ea0\u9519\u7801\u7684\u6240\u6709\u5757\u6309\u7167\u5b57\u8282\u4ea4\u9519\u5408\u6210\u7ea0\u9519\u7801\u5e8f\u5217\u3002\u628a\u65b0\u7684\u6570\u636e\u5e8f\u5217\u548c\u7ea0\u9519\u7801\u5e8f\u5217\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u5982\u679c\u603b\u957f\u5ea6\u4e0d\u591f\u4e8c\u7ef4\u7801\u7684\u5bb9\u91cf\uff0c\u5219\u5728\u540e\u9762\u8865\u5145 3/4/7 \u4e2a 0 \u6bd4\u7279\uff08\u9700\u8981\u8865\u591a\u5c11\u5728 Table 1 \u4e2d\u6709\u5b9a\u4e49\uff09 \u800c\u4e14\u8fd9\u6837\u4e5f\u8981\u4fdd\u8bc1\u6700\u77ed\u7684\u6570\u636e\u5757\u5728\u6700\u524d\u9762\uff08\u5df2\u7ecf\u7531 Table 9 \u5b9a\u4e49\uff09 \u6bd4\u5982 5-H \u7248\u672c\u7684\u5e8f\u5217\uff0c\u9700\u8981\u5206\u4e3a 4 \u5757\uff0c\u524d\u4e24\u5757\u662f 11 \u4e2a\u6570\u636e\u5b57\u300122 \u4e2a\u7ea0\u9519\u5b57\uff0c\u540e\u4e24\u5757\u662f 12 \u4e2a\u6570\u636e\u5b57\u300122 \u4e2a\u7ea0\u9519\u5b57\uff1a \u6700\u540e\u7684\u5e8f\u5217\u5c31\u662f \\(D_1,D_{12},D_{23},D_{35},\\cdots,D_{45},D_{34},D_{46},E_1,E_{23},\\cdots,E_{88}\\)","title":"\u5408\u6210\u5e8f\u5217\uff087.6\uff09"},{"location":"ctf/qrcode/#77","text":"\u628a\u524d\u9762\u5408\u6210\u7684\u5b8c\u6574\u6d88\u606f\u5e8f\u5217\u586b\u5230\u4e8c\u7ef4\u7801\u4e2d\uff0c\u9996\u5148\u8981\u5148\u586b\u5145\u529f\u80fd\u56fe\u6848\uff0c\u7136\u540e\u9884\u7559\u51fa\u683c\u5f0f\u4fe1\u606f\u3001\u7248\u672c\u4fe1\u606f\u7684\u4f4d\u7f6e \u586b\u5145\u65f6\u4ee5\u4e24\u5217\u4e3a\u5355\u4f4d\uff0c\u5373\u6bcf\u6b21\u4ea4\u66ff\u586b\u5145\u4e24\u5217\u3002\u4ece\u6700\u53f3\u4e0b\u89d2\u5f00\u59cb\u662f\u6700\u9ad8\u4f4d\u7684\u6bd4\u7279\uff0c\u7136\u540e\u4ece\u53f3\u5411\u5de6\u4ece\u4e0b\u5411\u4e0a\u4ea4\u66ff\u586b\u5145\uff0c\u5230\u4e86\u4e0a\u754c\u65f6\u5de6\u8f6c\u5411\u4e0b\u7ee7\u7eed\u586b\u5145\uff0c\u9047\u5230\u5bf9\u9f50\u56fe\u6848\u76f4\u63a5\u7a7f\u8fc7\uff0c\u9047\u5230\u5bf9\u9f50\u56fe\u6848\u8fb9\u754c\u5219\u53d8\u4e3a\u4e00\u884c \u4e5f\u53ef\u4ee5\u6309\u7167\u5b57\u8282\u6765\u4f9d\u6b21\u586b\u5145\uff0c\u5982\u679c\u662f\u5411\u4e0a\u586b\u5145\uff0c\u5219\u6700\u9ad8\u4f4d\u5728\u4e0b\u7aef\uff0c\u53cd\u4e4b\u5728\u4e0a\u6bb5\u3002\u6bcf\u4e2a\u5b57\u8282\u5757\u5185\u7684\u6700\u9ad8\u4f4d\u5c3d\u91cf\u53d6\u6700\u53f3\u4fa7\u7684\uff0c\u4f46\u5982\u679c\u6700\u4e0b(\u4e0a)\u7aef\u53ea\u6709\u4e00\u4e2a\u6bd4\u7279\u7684\u4f4d\u7f6e\uff0c\u5219\u9009\u5b83\u4f5c\u4e3a\u6700\u9ad8\u6bd4\u7279\u7684\u4f4d\u7f6e \u53cd\u6b63\u6309\u987a\u5e8f\u6b63\u5e38\u586b\u5c31\u884c\u4e86\uff0c\u9047\u5230\u4e1c\u897f\u5c31\u7ed5 \u5177\u4f53\u89c4\u5219","title":"\u586b\u5145\u6570\u636e\uff087.7\uff09"},{"location":"ctf/qrcode/#78","text":"\u586b\u5145\u540e\u7684\u6570\u636e\u8fd8\u8981\u906e\u76d6\u4e00\u5c42\u63a9\u7801\uff08\u5f02\u6216\uff09\u6765\u5e73\u8861\u9ed1\u767d\u5757\u7684\u6570\u91cf\uff0c\u4ee5\u53ca\u51cf\u5c11\u5bb9\u6613\u4ea7\u751f\u626b\u63cf\u9519\u8bef\u7684\u5927\u5757\u548c\u5f62\u4f3c\u529f\u80fd\u56fe\u6848\u7684\u90e8\u5206\u51fa\u73b0 QR \u7801\u4e00\u5171\u6709 8 \u79cd\u63a9\u7801\uff0c\u6bcf\u4e2a\u63a9\u7801\u6709\u4e00\u4e2a 3 bits \u7684\u7f16\u53f7\uff0c\u548c\u4e00\u4e2a\u751f\u6210\u516c\u5f0f\u3002\u8fd9\u4e2a\u516c\u5f0f\u7528\u6765\u751f\u6210\u63a9\u7801\u56fe\u6837\uff0c\u4ee5\u5de6\u4e0a\u4e3a\u539f\u70b9\uff0c\u5411\u53f3\u3001\u4e0b\u4e3a\u6b63\u65b9\u5411\uff0c\u5750\u6807\u6ee1\u8db3\u8fd9\u4e2a\u516c\u5f0f\u7684\u70b9\u5728\u56fe\u6837\u4e2d\u662f\u9ed1\u8272\uff081\uff09\uff0c\u4e0d\u6ee1\u8db3\u7684\u662f\u767d\u8272\uff080\uff09\u3002\u5728\u7248\u672c 1 \u4e2d\u7684\u63a9\u7801\u56fe\u50cf\u8868\u73b0\u4e3a\uff1a \u8fdb\u884c\u63a9\u7801\u64cd\u4f5c\u5c31\u662f\u628a\u9664\u53bb\u529f\u80fd\u56fe\u6848\u548c\u7248\u672c\u4fe1\u606f\u3001\u683c\u5f0f\u4fe1\u606f\u4e4b\u5916\u7684\u6570\u636e\u90e8\u5206\u6bcf\u4e00\u5757\u7684\u503c\u4e0e\u63a9\u7801\u56fe\u6837\u5f02\u6216 \u6574\u4e2a\u64cd\u4f5c\u9700\u8981\u751f\u6210\u5206\u522b\u4f7f\u7528\u4e0d\u540c\u63a9\u7801\u7684 8 \u4e2a\u56fe\u6837\uff0c\u7136\u540e\u8ba1\u7b97\u51fa\u635f\u5931\u5206\u6570\uff08penalty points score\uff09\uff0c\u7136\u540e\u91c7\u7528\u635f\u5931\u5206\u6570\u6700\u5c0f\u7684\u63a9\u7801\u6a21\u5f0f\u4f5c\u4e3a\u6700\u7ec8\u7684\u63a9\u7801\u6a21\u5f0f","title":"\u63a9\u7801\u906e\u76d6\uff087.8\uff09"},{"location":"ctf/qrcode/#79","text":"QRCode \u7684\u683c\u5f0f\u4fe1\u606f\u662f 15 bits \u7684\u5e8f\u5217\uff0c\u5176\u4e2d\u524d 5 \u4f4d\u662f\u6570\u636e\uff0c\u540e 10 \u4f4d\u662f\u9488\u5bf9\u683c\u5f0f\u4fe1\u606f\u7684\u7ea0\u9519\u7801\uff08\u7531 (15, 5) BCH \u7801\u751f\u6210\uff09 5 bits \u7684\u6570\u636e\u524d 2 \u4f4d\u662f\u7ea0\u9519\u7b49\u7ea7\u6807\u8bc6\u7b26\uff0c\u5206\u522b\u662f L -> 01 \u3001M -> 00 \u3001Q -> 11 \u3001H -> 10 \u540e 3 \u4f4d\u662f\u4e0a\u9762\u8bf4\u5230\u7684\u63a9\u7801\u7f16\u53f7 \u7136\u540e\u540e\u63a5 10 bits \u7ea0\u9519\u7801\uff0c\u6700\u540e\u6574\u4f53\u5f02\u6216 101010000010010 \u9632\u6b62\u4ea7\u751f\u5168\u96f6\u6570\u636e\u5e8f\u5217","title":"\u683c\u5f0f\u4fe1\u606f\uff087.9\uff09"},{"location":"ctf/qrcode/#710","text":"\u5728\u7248\u672c 7 \u53ca\u4ee5\u4e0a\u7684\u4e8c\u7ef4\u7801\u4e2d\u9700\u8981\u586b\u5165\u7248\u672c\u4fe1\u606f\u6765\u786e\u4fdd\u51c6\u786e\u5ea6 \u7248\u672c\u4fe1\u606f\u53ea\u50a8\u5b58\u4e86\u8be5\u4e8c\u7ef4\u7801\u7684\u7248\u672c\u53f7\uff087\uff5e40\uff09\uff0c\u4e00\u5171 18 bits\uff0c\u524d 6 bits \u4e3a\u7248\u672c\u53f7\u7684\u4e8c\u8fdb\u5236\uff08\u4ece 000111 \u5230 101000 \uff09\uff0c\u540e 12 bits \u4e3a\u7531 (18, 6) Golay code \u751f\u6210\u7684\u7ea0\u9519\u7801 \u4e0d\u540c\u4e8e\u683c\u5f0f\u4fe1\u606f\uff0c\u56e0\u4e3a\u7248\u672c\u53f7\u4e0d\u4f1a\u51fa\u73b0\u5168\u96f6\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u8fdb\u884c\u63a9\u7801\u64cd\u4f5c","title":"\u7248\u672c\u4fe1\u606f\uff087.10\uff09"},{"location":"ctf/qrcode/#11annex-b","text":"\u7b80\u8981\u7684\u89e3\u7801\u8fc7\u7a0b\uff1a \u5b9a\u4f4d\u5e76\u83b7\u53d6\u56fe\u50cf\u4e2d\u7684\u4e8c\u7ef4\u7801\uff0c\u5e76\u628a\u56fe\u50cf\u4e2d\u7684\u9ed1\u767d\u5757\u63d0\u53d6\u4e3a 1 \u548c 0 \u8bfb\u53d6\u683c\u5f0f\u4fe1\u606f \u91ca\u653e\u63a9\u7801 101010000010010 \u8fdb\u884c\u7ea0\u9519 \u5982\u679c\u7ea0\u9519\u5931\u8d25\u5219\u5c06\u4e8c\u7ef4\u7801\u955c\u9762\u5bf9\u79f0\u518d\u5c1d\u8bd5 \u8bfb\u53d6\u7248\u672c\u4fe1\u606f\uff08\u5982\u679c\u6709\u7684\u8bdd\uff09 \u8bfb\u53d6\u683c\u5f0f\u4fe1\u606f\u4e2d\u7684\u63a9\u7801\u7f16\u53f7\uff0c\u5e76\u91ca\u653e\u63a9\u7801 \u8bfb\u53d6\u5e76\u6062\u590d\u6570\u636e\u5b57\u548c\u7ea0\u9519\u5b57 \u7ea0\u9519\uff0c\u5982\u679c\u68c0\u6d4b\u5230\u4e86\u9519\u8bef\u5c31\u7ea0\u6b63 \u628a\u6570\u636e\u5b57\u89e3\u7801\u5f97\u5230\u7ed3\u679c","title":"\u89e3\u7801\uff0811\u3001Annex B\uff09"},{"location":"ctf/qrcode/#annex-b","text":"Annex B \u8bb2\u7684\u7ea0\u9519\u8fc7\u7a0b\u5f88\u7b80\u7565\uff0c\u800c\u4e14\u7b26\u53f7\u8bf4\u660e\u4e0d\u5168\uff0c\u5f88\u96be\u770b\u61c2 \u53bb\u5b66\u4e86\u5b66 PGZ \u89e3\u7801\uff1a Reed\u2013Solomon_error_correction#Peterson\u2013Gorenstein\u2013Zierler_decoder \u8bbe\u5f53\u524d\u7248\u672c\u4e0b\u6bcf\u5757\u4e2d\u6709 \\(n\\) \u4e2a\u5b57\uff0c \\(k\\) \u4e2a\u6570\u636e\u5b57\uff0c \\(n-k\\) \u4e2a\u7ea0\u9519\u5b57\uff0c\u7ea0\u9519\u5bb9\u91cf\u4e3a \\(\\nu\\) \u9996\u5148\u5b9a\u4e49\u539f\u6765\u7684\u5b8c\u6574\u6570\u636e\uff08\u5373\u6570\u636e\u5b57\u548c\u7ea0\u9519\u5b57\uff09\u4ece\u9ad8\u4f4d\u5230\u4f4e\u4f4d\u4e3a \\(c_{n-1},c_{n-2},\\cdots,c_0\\) \uff0c\u5bf9\u5e94\u591a\u9879\u5f0f\u4e3a\uff1a \\[s(x)=\\sum_{i=0}^{n-1}c_ix^i=c_{n-1}x^{n-1}+c_{n-2}x^{n-2}+\\cdots+c_0\\] \u800c\u4e14\u6839\u636e\u7ea0\u9519\u7801\u751f\u6210\u539f\u7406\uff0c \\(s(x)\\) \u53ef\u4ee5\u88ab\u751f\u6210\u591a\u9879\u5f0f \\(g(x)\\) \u6574\u9664\uff0c\u5176\u4e2d \\[g(x)=\\prod_{i=0}^{n-k-1}(x-\\alpha^i)\\] \u6240\u4ee5 \\(s(x)\\) \u4e5f\u6709\u6839 \\(s(\\alpha^i)=0, i=0,1,\\dots n-k-1\\) \u518d\u8bbe\u63a5\u6536\u5230\u7684\u6d88\u606f\u591a\u9879\u5f0f\uff08\u53ef\u80fd\u6709\u9519\uff09\u4e3a \\(r(x)\\) \uff0c\u8bef\u5dee\u591a\u9879\u5f0f\u4e3a \\(e(x)\\) \uff0c\u6ee1\u8db3\uff1a \\[r(x)=s(x)+e(x),\\quad e(x)=\\sum_{i=0}^{n-1}e_ix^i\\] \u5148\u8bbe\u4e00\u5171\u6709 \\(\\nu\\) \u4e2a\u9519\u8bef\uff0c\u4e14\u6bcf\u4e2a\u9519\u8bef\u7684\u4f4d\u7f6e\u4e3a \\(i_k,k=0,1,\\dots \\nu-1\\) \uff0c\u6240\u4ee5\u6709\uff1a \\[e(x)=\\sum_{k=0}^{\\nu-1}e_{i_k}x^{i_k}\\] \u6700\u7ec8\u7684\u76ee\u6807\u5c31\u662f\u627e\u5230\u9519\u8bef\u4e2a\u6570 \\(\\nu\\) \uff0c\u9519\u8bef\u4f4d\u7f6e \\(i_k\\) \uff0c\u4ee5\u53ca\u9519\u8bef\u5927\u5c0f \\(e_{i_k}\\)","title":"\u7ea0\u9519\uff08Annex B\uff09"},{"location":"writeups/hackergame2021/","text":"Hackergame 2021 Writeup \u00b6 \u53c2\u52a0\u7684\u7b2c\u4e00\u4e2a\u53ef\u4ee5\u7b97\u662f CTF \u7684\u6bd4\u8d5b\u3002\u8fd9\u91cc\u662f\u6211\u505a\u51fa\u7684\u9898\u7684 writeup\uff0c\u535a\u5ba2\u7248\u5728\uff1a https://blog.tonycrane.cc/p/c05d7b7c.html \u5b98\u65b9 writeup \u7b7e\u5230 \u00b6 \u4e3a\u4e86\u80fd\u8ba9\u5927\u5bb6\u987a\u5229\u7b7e\u5230\uff0c\u547d\u9898\u7ec4\u628a\u6bcf\u4e00\u79d2\u7684 flag \u90fd\u8bb0\u5f55\u4e0b\u6765\u5236\u6210\u4e86\u65e5\u8bb0\u672c\u7684\u4e00\u9875\u3002\u4f60\u53ea\u9700\u8981\u6253\u5f00\u65e5\u8bb0\uff0c\u7ffb\u5230 Hackergame 2021 \u6bd4\u8d5b\u8fdb\u884c\u671f\u95f4\u7684\u4efb\u4f55\u4e00\u9875\u5c31\u80fd\u5f97\u5230 flag\uff01 \u5f88\u660e\u786e\uff0c\u8fdb\u5165\u7f51\u5740\u540e\u4e00\u76f4\u70b9 Next \u7ffb\u5230\u6bd4\u8d5b\u65f6\u95f4\u5c31\u597d\u4e86\uff08\u8bef \u770b\u5230\u4e86 URI \u91cc\u6709 ?page=... \uff0c\u6240\u4ee5\u4e5f\u61d2\u5f97\u8ba1\u7b97\u4e86\uff0c\u624b\u52a8\u4e8c\u5206\uff0c\u5927\u6982 ?page=1635000000 \u5de6\u53f3\u5c31\u53ef\u4ee5\u770b\u5230 flag \u4e86 \u8d5b\u540e\u624d\u53cd\u5e94\u8fc7\u6765\u539f\u6765\u662f UNIX \u65f6\u95f4\u6233 \u8fdb\u5236\u5341\u516d\u2014\u2014\u53c2\u4e0a \u00b6 \u4e5f\u5f88\u660e\u786e\uff0c\u76f4\u63a5\u628a\u53f3\u4fa7\u6321\u4f4f\u7684 flag \u90e8\u5206\u5bf9\u5e94\u5de6\u8fb9\u7684\u5341\u516d\u8fdb\u5236\u6570\u6362\u7b97\u6210\u5341\u8fdb\u5236\uff0c\u7136\u540e\u6839\u636e ASCII \u7801\u8f6c\u6210\u5b57\u7b26\u3002\u6216\u8005\u76f4\u63a5\u628a\u5de6\u4fa7\u6284\u8fdb Hex Friend \u4e5f\u53ef\u4ee5\u76f4\u63a5\u5f97\u5230\u53f3\u4fa7\u7684flag\u3002 \uff08**\u5f53\u65f6\u8fd9\u9898\u6284\u4e32\u884c\u4e86\u4e24\u4e09\u6b21\u2026\u2026\uff09 \u53bb\u5427\uff01\u8ffd\u5bfb\u81ea\u7531\u7684\u7535\u6ce2 \u00b6 \u5f53\u7136\uff0c\u5982\u679c\u53ea\u662f\u8fd9\u6837\u8fd8\u8fdc\u8fdc\u4e0d\u591f\u3002\u9075\u4f9d\u53f2\u79f0\u201c\u8001\u7239\u201d\u7684\u4e0a\u53e4\u5148\u8d24\u7684\u81f3\u7406\u540d\u8a00\uff0c\u5fc5\u987b\u8981\u201c\u7528\u9b54\u6cd5\u6253\u8d25\u9b54\u6cd5\u201d\u3002X \u540c\u5b66\u5411\u4e0a\u7ea7\u7533\u8bf7\u5230\u4e86\u79d1\u5927\u897f\u533a\u540c\u6b65\u8f90\u5c04\u5b9e\u9a8c\u5ba4\u8bbe\u5907\u7684\u4f7f\u7528\u6743\u9650\uff0c\u4ee5\u6b64\u6253\u901a\u6b21\u5143\u7a7a\u95f4\uff0c\u501f\u52a9\u5230\u53e6\u4e00\u4e2a\u5e73\u884c\u5b87\u5b99\u4e2d Z \u540c\u5b66\u7684\u6cd5\u529b\u8fdb\u884c\u6570\u636e\u5bf9\u51b2\uff0c\u65b9\u624d\u4e8e\u4e71\u4e2d\u640f\u5f97\u4e00\u4e1d\u673a\u4f1a\uff0c\u5c06 flag \u7528\u65e0\u7ebf\u7535\u7684\u5f62\u5f0f\u53d1\u5c04\u4e86\u51fa\u53bb\u3002 \u8003\u8651\u5230\u4fe1\u606f\u7684\u9c81\u68d2\u6027\uff0cX \u540c\u5b66\u4f7f\u7528\u4e86\u65e0\u7ebf\u7535\u4e2d\u60ef\u7528\u7684\u65b9\u6cd5\u6765\u533a\u5206\u5b57\u7b26\u4e32\u4e2d\u8bfb\u97f3\u76f8\u8fd1\u7684\u5b57\u6bcd\u3002\u5373\u4f7f\u5982\u6b64\uff0c\u6253\u7834\u6b21\u5143\u7684\u5f3a\u5927\u80fd\u91cf\u626d\u66f2\u4e86\u65f6\u7a7a\uff0c\u4f7f\u5f97\u6700\u7ec8\u63a5\u53d7\u5230\u7684\u5f55\u97f3\u7684\u901f\u5ea6\u6709\u6240\u6539\u53d8\u3002 \uff08\u8fd9\u9898\u5728\u7fa4\u91cc\u770b\u8d77\u6765\u597d\u50cf\u5361\u4e86\u5f88\u591a\u4eba\uff0c\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff09 \u9898\u76ee\u4e0b\u8f7d\u4e0b\u6765\u662f\u4e00\u4e2a\u542c\u8d77\u6765\u6742\u4e71\u7684\u97f3\u9891 \u9898\u91cc\u6700\u540e\u8bf4\u4e86 \u201c\u6700\u7ec8\u63a5\u53d7\u5230\u7684\u5f55\u97f3\u7684 \u901f\u5ea6 \u6709\u6240\u6539\u53d8\u201d\uff0c\u6240\u4ee5\u8003\u8651\u5c06\u97f3\u9891\u65f6\u95f4\u62c9\u957f\u3002 \u6700\u5f00\u59cb\u4f7f\u7528\u4e86 Adobe Audition\uff0c\u4f46\u662f\u6548\u679c\u4e0d\u662f\u5f88\u7406\u60f3\uff0c\u5927\u6982\u662f\u91cd\u65b0\u91c7\u6837\u7b49\u4e00\u7cfb\u5217\u7b97\u6cd5\u5bfc\u81f4\u7684 \u6240\u4ee5\u6362\u4e86 Adobe Premier Pro \u76f4\u63a5\u7528\u6bd4\u7387\u62c9\u4f38\u5de5\u5177\u62c9\u957f\u97f3\u9891\uff0c\u8fd8\u662f\u53ef\u4ee5\u542c\u6e05\u7684 \u4e0d\u65ad\u5c1d\u8bd5\u4e4b\u540e\uff0c\u5927\u6982\u653e\u6162\u4e09\u500d\u5de6\u53f3\u5c31\u53ef\u4ee5\u542c\u51fa\u8bfb\u7684\u662f\u82f1\u8bed\u5355\u8bcd\u4e86 \u9898\u91cc\u8bf4\u5230\u4e86 \u201c\u8003\u8651\u5230\u4fe1\u606f\u7684\u9c81\u68d2\u6027\uff0cX \u540c\u5b66\u4f7f\u7528\u4e86 \u65e0\u7ebf\u7535\u4e2d\u60ef\u7528\u7684\u65b9\u6cd5 \u6765\u533a\u5206\u5b57\u7b26\u4e32\u4e2d\u8bfb\u97f3\u76f8\u8fd1\u7684\u5b57\u6bcd\u201d\uff0c\u6240\u4ee5\u5c31\u67e5\u5230\u4e86 \u56fd\u9645\u822a\u7a7a\u65e0\u7ebf\u7535\u901a\u8baf26\u4e2a\u82f1\u6587\u5b57\u6bcd\u8bfb\u6cd5 \u7136\u540e\u4ed4\u7ec6\u542c\uff0c\u8fa8\u522b\u6bcf\u4e2a\u5355\u8bcd\u7684\u7b2c\u4e00\u4e2a\u97f3\u5c31\u53ef\u4ee5\u5f97\u5230 flag \u4e86 \u732b\u54aa\u95ee\u7b54 Pro Max \u00b6 \u4e94\u9053\u5201\u94bb\u7684\u9898\u76ee\uff0c\u4f46\u662f\u8fd8\u662f\u597d\u67e5\u5230\u7684\uff0c\u9898\u76ee\u91cc\u4e5f\u8bf4\u4e86\u201c\u89e3\u51fa\u8c1c\u9898\u4e0d\u9700\u8981\u662f\u79d1\u5927\u5728\u6821\u5b66\u751f\u201d 2017 \u5e74\uff0c\u4e2d\u79d1\u5927\u4fe1\u606f\u5b89\u5168\u4ff1\u4e50\u90e8\uff08SEC@USTC\uff09\u5e76\u5165\u4e2d\u79d1\u5927 Linux \u7528\u6237\u534f\u4f1a\uff08USTCLUG\uff09\u3002\u76ee\u524d\uff0c\u4fe1\u606f\u5b89\u5168\u4ff1\u4e50\u90e8\u7684\u57df\u540d\uff08sec.ustc.edu.cn\uff09\u5df2\u7ecf\u65e0\u6cd5\u8bbf\u95ee\uff0c\u4f46\u4f60\u80fd\u627e\u5230\u4fe1\u606f\u5b89\u5168\u4ff1\u4e50\u90e8\u7684\u793e\u56e2\u7ae0\u7a0b\u5728\u54ea\u4e00\u5929\u7684\u4f1a\u5458\u4ee3\u8868\u5927\u4f1a\u4e0a\u901a\u8fc7\u7684\u5417\uff1f \u770b\u5230\u4e86 \u201c\u76ee\u524d\uff0c\u5df2\u7ecf\u65e0\u6cd5\u8bbf\u95ee\u201d \u8bf4\u660e\u8fd9\u4e2a\u57df\u540d\u66fe\u7ecf\u662f\u53ef\u4ee5\u8bbf\u95ee\u7684\uff0c\u76f4\u63a5\u901a\u8fc7 ~\u4e92\u8054\u7f51\u7684\u8bb0\u5fc6 ~archive.org\uff0c\u67e5\u5230\u8fd9\u4e2a\u57df\u540d\u7684\u5386\u53f2\u5b58\u6863\uff0c\u968f\u4fbf\u627e\u4e00\u5929\u5c31\u53ef\u4ee5\u770b\u5230\u4ed6\u4eec\u5b98\u7f51\u4e2d\u7684 \u4fe1\u606f\u5b89\u5168\u4ff1\u4e50\u90e8\u793e\u56e2\u7ae0\u7a0b \u3002 \u5176\u4e2d\u7b2c\u4e00\u884c\u5c31\u5199\u4e86 \u201c\u672c\u7ae0\u7a0b\u5728 2015 \u5e74 5 \u6708 4 \u65e5 \uff0c\u7ecf\u4f1a\u5458\u4ee3\u8868\u5927\u4f1a\u5ba1\u8bae\u901a\u8fc7\u3002\u201d \u6240\u4ee5\u7b54\u6848\u5c31\u662f 20150504 \u4e2d\u56fd\u79d1\u5b66\u6280\u672f\u5927\u5b66 Linux \u7528\u6237\u534f\u4f1a\u5728\u8fd1\u4e94\u5e74\u591a\u5c11\u6b21\u88ab\u8bc4\u4e3a\u6821\u4e94\u661f\u7ea7\u793e\u56e2\uff1f \u76f4\u63a5\u53bb\u79d1\u5927 LUG \u5b98\u7f51\u7684 Intro \u9875\u9762 \uff0c\u5c31\u53ef\u4ee5\u770b\u5230 \u201c\u4e8e 2015 \u5e74 5 \u6708\u30012017 \u5e74 7 \u6708\u30012018 \u5e74 9 \u6708\u30012019 \u5e74 8 \u6708\u53ca 2020 \u5e74 9 \u6708\u88ab\u8bc4\u4e3a\u4e2d\u56fd\u79d1\u5b66\u6280\u672f\u5927\u5b66\u4e94\u661f\u7ea7\u5b66\u751f\u793e\u56e2\u3002\u201d \u6240\u4ee5\u662f4\u6b21\uff08x \u4f46\u662f\u6000\u7591\u4e00\u4e0b\u4e3a\u4ec0\u4e48\u6ca1\u67092021\u5e74\uff0c\u56e0\u4e3a\u90fd\u662f\u57289\u6708\u4efd\u5de6\u53f3\uff0c\u6240\u4ee5\u53ef\u80fd\u662f\u6570\u636e\u6ca1\u66f4\u65b0\uff0c\u8fd9\u98984\u548c5\u90fd\u6709\u53ef\u80fd \u5c1d\u8bd5\u540e\u5f97\u5230\u7b54\u6848\u662f 5 \u4e2d\u56fd\u79d1\u5b66\u6280\u672f\u5927\u5b66 Linux \u7528\u6237\u534f\u4f1a\u4f4d\u4e8e\u897f\u533a\u56fe\u4e66\u9986\u7684\u6d3b\u52a8\u5ba4\u95e8\u53e3\u7684\u724c\u5b50\u4e0a\u201cLUG @ USTC\u201d\u4e0b\u65b9\u7684\u5c0f\u5b57\u662f\uff1f \u8fd9\u9898\u4e5f\u7b80\u5355\uff0c\u76f4\u63a5\u95ee\u79d1\u5927\u540c\u5b66\u5c31\u597d\u4e86\uff08x \u7ffb\u4e86 LUG \u7684\u5fae\u4fe1\u516c\u4f17\u53f7\u548c QQ \u5b98\u65b9\u53f7\uff0c\u90fd\u6ca1\u5565\u6536\u83b7\uff0c\u6700\u540e\u53d1\u73b0\u5b98\u7f51\u4e0a\u6709 News \u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u5982\u679c\u65b0\u542f\u7528\u6d3b\u52a8\u5ba4\u7684\u8bdd\uff0c\u4e00\u5b9a\u4f1a\u6709\u4e00\u7bc7\u65b0\u95fb\u7a3f\uff0c\u641c\u7d22\u201c\u56fe\u4e66\u9986\u201d\u5f97\u5230\u4e86 \u300c\u897f\u533a\u56fe\u4e66\u9986\u65b0\u6d3b\u52a8\u5ba4\u542f\u7528\u300d \u8fd9\u7bc7\u6587\u7ae0\uff0c\u5f00\u7bc7\u7b2c\u4e00\u5f20\u5927\u56fe\u5c31\u662f\u95e8\u53e3\u724c\u5b50\u7684\u7167\u7247 \u6240\u4ee5\u7b54\u6848\u662f Development Team of Library \uff08\u6ce8\u610f\u5927\u5c0f\u5199\uff09 \u5728 SIGBOVIK 2021 \u7684\u4e00\u7bc7\u5173\u4e8e\u4e8c\u8fdb\u5236 Newcomb-Benford \u5b9a\u5f8b\u7684\u8bba\u6587\u4e2d\uff0c\u4f5c\u8005\u4e00\u5171\u5c55\u793a\u4e86\u591a\u5c11\u4e2a\u6570\u636e\u96c6\u5bf9\u5176\u7406\u8bba\u7ed3\u679c\u8fdb\u884c\u9a8c\u8bc1\uff1f \u5e94\u8be5\u6ca1\u5fc5\u8981\u641c\u8c37\u6b4c\u5b66\u672f\u4e4b\u7c7b\u7684\uff0c\u76f4\u63a5\u5fc5\u5e94\u67e5 \u201cSIGBOVIK Newcomb-Benford\u201d \u5c31\u53ef\u4ee5\u627e\u5230 SIGBOVIK \u7684 \u8fd9\u4e00\u7bc7\u5927\u6587\u7ae0\u5408\u96c6 \uff0c\u518d\u641c\u7d22 Newcomb \u5c31\u53ef\u4ee5\u770b\u5230\u9898\u76ee\u91cc\u8bf4\u7684\u8bba\u6587\u4e86\u3002 \u5168\u6587\u4e5f\u4e0d\u957f\uff0c\u53ea\u6709\u56db\u9875\uff0c\u540e\u4e24\u9875\u5168\u662f\u6570\u636e\u7684\u56fe\uff0c\u6570\u4e00\u4e0b\uff0c\u4e00\u5171\u670913\u5e45 \u6240\u4ee5\u7b54\u6848\u662f 13 \u4e0d\u4e25\u683c\u9075\u5faa\u534f\u8bae\u89c4\u8303\u7684\u64cd\u4f5c\u7740\u5b9e\u4ee4\u4eba\u751f\u538c\uff0c\u597d\u5728 IETF \u4e8e 2021 \u5e74\u6210\u7acb\u4e86 Protocol Police \u4ee5\u76d1\u7763\u5e76\u60e9\u6212\u6240\u6709\u8fdd\u80cc RFC \u6587\u6863\u7684\u884c\u4e3a\u4e2a\u4f53\u3002\u5047\u5982\u4f60\u53d1\u73b0\u4e86\u67d0\u4f4d\u540c\u5b66\u53ef\u80fd\u8fdd\u53cd\u4e86\u534f\u8bae\u89c4\u8303\uff0c\u6839\u636e Protocol Police \u76f8\u5173\u6587\u6863\u4e2d\u89c4\u5b9a\u7684\u4e3e\u62a5\u65b9\u6cd5\uff0c\u4f60\u5e94\u8be5\u5c06\u4f60\u7684\u4e3e\u62a5\u4fe1\u53d1\u5f80\u4f55\u5904\uff1f \u6ca1\u5565\u597d\u8bf4\u7684\uff0c\u76f4\u63a5\u67e5\uff0c\u7b54\u6848 /dev/null \u7136\u540e\u63d0\u4ea4\u5c31\u53ef\u4ee5\u5f97\u5230 flag \u5356\u74dc \u00b6 \u9898\u76ee\u91cc\u6bd4\u8f83\u91cd\u8981\u7684\u8bdd\u5c31\u662f\uff1a \u8865\u5145\u8bf4\u660e\uff1a\u5f53\u79f0\u7684\u6570\u5b57\u53d8\u4e3a\u6d6e\u70b9\u6570\u800c\u4e0d\u662f\u6574\u6570\u65f6\uff0cHQ \u4e0d\u4f1a\u8ba4\u53ef\u6700\u7ec8\u7684\u79f0\u91cd\u7ed3\u679c\u3002 \u9898\u76ee\u7684\u76ee\u7684\u4e5f\u5f88\u660e\u786e\uff0c\u7528\u4e00\u58069\u548c\u4e00\u58066\u52a0\u8d77\u6765\u5f97\u523020\u3002\u80af\u5b9a\u4e0d\u80fd ~\u50cf\u534e\u5f3a\u4e00\u6837 ~\u5288\u74dc\uff0c\u6240\u4ee5\u8f93\u5165\u4e00\u5b9a\u662f\u6574\u6570 \u90a3\u5c31\u53ef\u4ee5\u8003\u8651\u6ea2\u51fa \u4f46\u662f\u7ecf\u8fc7\u5c1d\u8bd5\uff0c\u7ed9\u7684\u6570\u5b57\u592a\u5927\uff0c\u5c31\u4f1a\u4f7f\u7ed3\u679c\u6ea2\u51fa\u5230\u6d6e\u70b9\u6570\uff0c\u8fd9\u4e0d\u662f\u60f3\u8981\u7684\uff08\u56e0\u4e3a\u5373\u4f7f\u51d1\u5230\u4e8620.0\u4e5f\u4e0d\u6b63\u786e\uff09 \u90a3\u5982\u679c\u6570\u5b57\u518d\u5927\u5462\uff0c\u6bd4\u5982 2000000000000000000\uff0818\u4e2a0\uff09\u4e2a9\u65a4\u7684\u74dc\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u65f6\u76f4\u63a5\u6ea2\u51fa\u5230\u4e86\u8d1f\u6574\u578b -446744073709551616 \u518d\u8865\u4e0a 49638230412172000 \u4e2a9\u65a4\u7684\u74dc\u5c31\u53ef\u4ee5\u5f97\u5230 -3616\uff0c\u52a0\u4e0a20\u53ef\u4ee5\u88ab6\u6574\u9664\uff0c\u6240\u4ee5\u518d\u52a0\u4e0a606\u4e2a6\u65a4\u7684\u74dc\u5c31\u53ef\u4ee5\u5f97\u5230 20 \u606d\u559c\u4f60\u9003\u8fc7\u4e00\u52ab\uff01\u534e\u5f3a\uff5e\u534e\u5f3a\uff01 \u900f\u660e\u7684\u6587\u4ef6 \u00b6 \u4e00\u4e2a\u900f\u660e\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u5728\u7ec8\u7aef\u4e2d\u5c55\u793a\u4e00\u4e2a\u4e94\u989c\u516d\u8272\u7684 flag\u3002 \u53ef\u80fd\u662f\u5728 cmd.exe \u7b49\u52a3\u8d28\u7ec8\u7aef\u4e2d\u88ab\u957f\u671f\u4f7f\u7528\u7684\u539f\u56e0\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5931\u53bb\u4e86\u4e00\u4e9b\u91cd\u8981\u6210\u5206\uff0c\u53d8\u6210\u4e86\u4e00\u5806\u4e71\u7801\uff0c\u4e5f\u4e0d\u4f1a\u518d\u663e\u793a\u51fa flag \u4e86\u3002 \u6ce8\u610f\uff1aflag \u5185\u90e8\u7684\u5b57\u7b26\u5168\u90e8\u4e3a\u5c0f\u5199\u5b57\u6bcd\u3002 \u62ff\u5230\u6587\u4ef6\uff0c\u770b\u5230\u91cc\u9762\u597d\u591a [ ; m \u4e4b\u7c7b\u7684\uff0c\u518d\u7ed3\u5408\u7ec8\u7aef\u4e2d\u8f93\u51fa\u5e26\u989c\u8272\u6587\u5b57\u7684 \\033[...m; \u4e4b\u7c7b\u7684\u65b9\u6cd5\uff0c\u4ee5\u53ca\u9898\u76ee\u4e2d\u7684 \u201c\u5931\u53bb\u4e86\u4e00\u4e9b \u91cd\u8981\u6210\u5206 \u201d \u6240\u4ee5\u76f4\u63a5\u5c1d\u8bd5\u628a [ \u5168\u5c40\u66ff\u6362\u4e3a \\033[ \uff0c\u7136\u540e\u590d\u5236\u5230 python \u4e2d print\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u795e\u5947\u7684\u4e00\u5e55\u4e86\uff08\u5176\u5b9e\u5e76\u6ca1\u5b8c\u5168\u505a\u5b8c\uff0c\u4f46\u662f\u53ef\u4ee5\u5df2\u7ecf\u770b\u4e86\uff09 \u7136\u540e\u8bfb\u51fa flag \u5373\u53ef\uff08\u5168\u662f\u5c0f\u5199\u5b57\u6bcd\uff09 \u65c5\u884c\u7167\u7247 \u00b6 \u4f60\u7684\u5b66\u957f\u51b3\u5b9a\u6765\u4e00\u573a\u8bf4\u8d70\u5c31\u8d70\u7684\u65c5\u884c\u3002\u901a\u8fc7\u4ed6\u53d1\u7ed9\u4f60\u7684\u7167\u7247\u6765\u770b\uff0c\u4ed6\u5e94\u8be5\u662f\u5728\u9152\u5e97\u4f4f\u4e0b\u4e86\u3002 \u4ece\u7167\u7247\u6765\u770b\uff0c\u9152\u5e97\u4f3c\u4e4e\u5728\u5c0f\u533a\u7684\u4e00\u680b\u9ad8\u697c\u91cc\uff0c\u9644\u8fd1\u8fd8\u6709\u4e00\u5bb6 KFC \u5206\u5e97\u3002\u7a81\u7136\uff0c\u4f60\u610f\u8bc6\u5230\u7167\u7247\u91cc\u900f\u9732\u51fa\u6765\u7684\u4fe1\u606f\u6bd4\u8868\u9762\u4e0a\u770b\u8d77\u6765\u7684\u8981\u591a\u3002 \u8bf7\u89c2\u5bdf\u7167\u7247\u5e76\u7b54\u5bf9\u5168\u90e8 5 \u9053\u9898\u4ee5\u83b7\u53d6 flag\u3002\u6ce8\u610f\uff1a\u56fe\u7247\u672a\u5728\u5176\u4ed6\u5730\u65b9\u516c\u5f00\u53d1\u5e03\u8fc7\uff0c\u4e5f\u672a\u91c7\u53d6\u4efb\u4f55\u9690\u5199\u63aa\u65bd\uff08\u901a\u8fc7\u624b\u673a\u62cd\u6444\u5c4f\u5e55\u4ea6\u53ef\u7b54\u9898\uff09\u3002 \u201c\u624b\u673a\u62cd\u6444\u5c4f\u5e55\u4ea6\u53ef\u7b54\u9898\u201d\uff0c\u6240\u4ee5\u7167\u7247\u4e2d\u6ca1\u6709\u4efb\u4f55\u5730\u5740\u7684\u5143\u4fe1\u606f\uff0c\u53ea\u80fd\u9760\u770b\u56fe \u7ebf\u7d22 \uff1a\u6d77\u8fb9\u3001KFC\u3001\u9ad8\u697c\u3001\u5927\u77f3\u5934\u3001\u505c\u8f66\u4f4d \u5148\u770b\u90a3\u4e2aKFC\uff0c\u5927\u6982\u662f\u4e2a\u7f51\u7ea2\u5e97\uff0c\u6240\u4ee5\u641c\u7d22 \u201c\u7f51\u7ea2 \u6d77\u8fb9 KFC\u201d\uff0c\u67e5\u5230\u4e86\u79e6\u7687\u5c9b\uff0c\u800c\u4e14\u4e5f\u662f\u6d77\u8fb9 \u518d\u8fdb\u4e00\u6b65\u770b\u5730\u56fe\u548c\u8857\u666f\u5730\u56fe\u5c31\u53ef\u4ee5\u786e\u5b9a\u5730\u70b9\u5728 \u79e6\u7687\u5c9b\u65b0\u6fb3\u6d77\u5e95\u4e16\u754c \u7136\u540e\u662f5\u4e2a\u95ee\u9898 \u8be5\u7167\u7247\u62cd\u6444\u8005\u7684\u9762\u671d\u65b9\u5411\u4e3a\uff1a \u6839\u636e\u5730\u56fe\uff0c\u5bf9\u6bd4\u4e00\u4e0b\u5c31\u53ef\u4ee5\u5f97\u5230\uff0c\u9762\u671d\u65b9\u5411\u662f \u4e1c\u5357 \u8be5\u7167\u7247\u7684\u62cd\u6444\u65f6\u95f4\u5927\u81f4\u4e3a\uff1a \u6839\u636e\u9009\u9879\u91cc\u7684\u65f6\u95f4\uff0c\u4e0b\u5348\u662f\u4e24\u70b9\u534a\u5de6\u53f3\uff0c\u800c\u5728\u4e1c\u5317\u7684\u4e24\u70b9\u534a\u5de6\u53f3\u5176\u5b9e\u548c\u4e2d\u5348\u5dee\u4e0d\u591a\uff0c\u5f71\u5b50\u548c\u5149\u6e29\u4e5f\u4e0d\u592a\u50cf\u8fd9\u4e2a\u6837\u5b50\uff0c\u6240\u4ee5\u53ef\u4ee5\u786e\u5b9a\u65f6\u95f4\u5927\u81f4\u662f \u508d\u665a \u8be5\u7167\u7247\u7684\u62cd\u6444\u8005\u6240\u5728\u697c\u5c42\u4e3a\uff1a \u4e0d\u597d\u786e\u5b9a\uff0c\u4f46\u662f\u7b54\u6848\u53ef\u4ee5\u4ea4\u5f88\u591a\u6b21\uff0c\u6240\u4ee5\u4ece9\u5c42\u5de6\u53f3\u4f9d\u6b21\u8bd5\u5c31\u53ef\u4ee5\u4e86\uff0c\u6700\u540e\u5f97\u5230\u697c\u5c42\u662f 14 \u8be5\u7167\u7247\u5de6\u4e0a\u89d2 KFC \u5206\u5e97\u7684\u7535\u8bdd\u53f7\u7801\u662f\uff1a \u76f4\u63a5\u7528\u5730\u56fe\u8f6f\u4ef6\u641c \u201c\u79e6\u7687\u5c9b\u65b0\u6fb3 KFC\u201d \u5c31\u53ef\u4ee5\u67e5\u5230\u90a3\u5bb6\u5e97\u94fa\uff0c\u4e5f\u7ed9\u4e86\u7535\u8bdd\uff0c\u6216\u8005\u641c\u7d22 \u201d\u7f51\u7ea2 \u6d77\u8fb9 KFC\u201c \u4e5f\u53ef\u4ee5\u76f4\u63a5\u5f97\u5230\u7535\u8bdd\uff1a 0335-7168800 \u8be5\u7167\u7247\u5de6\u4e0a\u89d2 KFC \u5206\u5e97\u5de6\u4fa7\u5efa\u7b51\u6709\u4e09\u4e2a\u6c34\u5e73\u6392\u5217\u7684\u6c49\u5b57\uff0c\u5b83\u4eec\u662f\uff1a \u901a\u8fc7\u8857\u666f\u5730\u56fe\u5c31\u53ef\u4ee5\u770b\u5230 KFC \u5de6\u8fb9\u7684\u5efa\u7b51\u4e0a\u5199\u4e86 \u6d77\u8c5a\u9986 FLAG \u52a9\u529b\u5927\u7ea2\u5305 \u00b6 \u53c2\u4e0e\u6d3b\u52a8\uff0c\u52a9\u529b\u62bd\u5956\uff01\u96c6\u6ee1 1 \u4e2a flag\uff0c\u5373\u53ef\u63d0\u53d6 1 \u4e2a flag\u3002 \u606d\u559c\u4f60\u79ef\u6512\u5230 0.5\u2026\u2026 \u4e2a flag\uff0c \u5269\u4f59\u65f6\u95f4\uff1a10\u520600\u79d2 \u5df2\u6709 0 \u4f4d\u597d\u53cb\u4e3a\u60a8\u52a9\u529b\u3002 \u5c06\u5982\u4e0b\u94fe\u63a5\u5206\u4eab\u7ed9\u597d\u53cb\uff0c\u53ef\u4ee5\u83b7\u5f97\u597d\u53cb\u52a9\u529b\uff0c\u83b7\u5f97\u66f4\u591a flag\uff1a\u2026\u2026 \u8001\u5e76\u5915\u5915\u4e86 \uff0c\u7ecf\u8fc7\u4e00\u4e9b\u6d4b\u8bd5\u548c\u770b\u89c4\u5219\u53ef\u4ee5\u77e5\u9053\uff0cip \u5728\u540c\u4e00 /8 \u7f51\u6bb5\u7684\u7528\u6237\u88ab\u89c6\u4e3a\u540c\u4e00\u7528\u6237\uff0c\u5373 ip \u5730\u5740\u7684\u7b2c\u4e00\u4e2a\u70b9\u524d\u9762\u7684\u6570\u5b57\u4e0d\u4e00\u6837\u624d\u662f\u4e0d\u540c\u7528\u6237 \u518d\u7528\u865a\u62df\u673a\u548c\u624b\u673a\u8bd5\u4e00\u4e0b\uff0c\u53d1\u73b0\u6bcf\u4e2a\u7528\u6237\u589e\u52a0\u7684 flag \u6570\u91cf\u5f88\u5c0f \u6240\u4ee5\u63a8\u6d4b\u9700\u8981200+\u4e2a ip \u5730\u5740\uff0c\u80af\u5b9a\u4e0d\u4f1a\u8981\u771f\u7684\u8f6c\u53d1\uff0c\u800c\u4e14\u4e5f\u5f88\u96be\u51d1\u51fa\u5f88\u591a\u4e0d\u5728\u540c\u4e00 /8 \u7f51\u6bb5\u7684 ip \u4e8e\u662f\u5728 BurpSuite \u91cc\u9762\u6293\u5305\u53ef\u4ee5\u770b\u5230\uff0c\u6bcf\u6b21\u70b9\u51fb\u201c\u52a9\u529b\u201d\u90fd\u4f1a\u53d1\u9001\u4e00\u4e2a\u5230\u52a9\u529b\u94fe\u63a5\u7684 POST\uff0c\u5185\u5bb9\u4e3a ip \u5730\u5740 \u7136\u540e\u5c06\u5176\u53d1\u9001\u5230 Repeater \u4e2d\uff0c\u5c1d\u8bd5\u66f4\u6539 ip \u5730\u5740\uff0c\u5f97\u5230\u7684 Response \u4e2d\u8bf4 \u201c\u5931\u8d25\uff01\u68c0\u6d4b\u5230\u524d\u540e\u7aef\u68c0\u6d4b IPv4 \u5730\u5740\u4e0d\u5339\u914d\u201d \u6240\u4ee5\u4ec5\u4ec5\u66f4\u6539 POST \u5185\u5bb9\u7684 ip \u662f\u4e0d\u591f\u7684\uff0c\u800c\u63d0\u4f9b\u7ed9\u68c0\u6d4b\u7684\u5185\u5bb9\u4e5f\u4ec5\u4ec5\u662f\u4e00\u4e2a POST\uff0c\u6240\u4ee5\u53ef\u4ee5\u66f4\u6539 POST \u5934\uff0c\u6dfb\u52a0 X-Forwarded-For \u7136\u540e\u4f7f\u7528 python \u5c31\u53ef\u4ee5\u5faa\u73af\u53d1\u9001 POST \u5e76\u4f2a\u9020 ip \u5730\u5740\u5f97\u5230256\u4e2a\u52a9\u529b\u4e86\uff0c\u521a\u597d\u8fbe\u52301\u4e2aflag\uff1a \uff08\u8981\u6ce8\u610f sleep \u4e00\u6bb5\u65f6\u95f4\uff0c\u4e0d\u7136\u4f1a\u51fa\u73b0\u64cd\u4f5c\u8fc7\u5feb\u62d2\u7edd\u7684\u60c5\u51b5\uff1b\u4e5f\u4e0d\u8981 sleep \u8fc7\u957f\uff0c\u5426\u5219\u8d85\u8fc710\u5206\u949f flag \u5c31\u65e0\u6548\u4e86\uff09 import requests import time from tqdm import tqdm url = \"http://202.38.93.111:10888/invite/...\" with tqdm ( total = 256 ) as pbar : for i in range ( 256 ): res = requests . post ( url , data = { \"ip\" : f \" { i } .0.0.0\" }, headers = { \"X-Forwarded-For\" : f \" { i } .0.0.0\" }) if \"\u6210\u529f\" not in res . text : print ( \"[x] \u5931\u8d25\" ) print ( res . text ) time . sleep ( 1.5 ) pbar . update ( 1 ) Amnesia \u00b6 \u8f7b\u5ea6\u5931\u5fc6 \u00b6 \u4f60\u7684\u7a0b\u5e8f\u53ea\u9700\u8981\u8f93\u51fa\u5b57\u7b26\u4e32 Hello, world!\uff08\u7ed3\u5c3e\u6709\u65e0\u6362\u884c\u5747\u53ef\uff09\u5e76\u6b63\u5e38\u7ed3\u675f\u3002 \u7f16\u8bd1\u6307\u4ee4\uff1a gcc -O file.c -m32 \u8fd0\u884c\u6307\u4ee4\uff1a ./a.out \u7f16\u8bd1\u540e ELF \u6587\u4ef6\u7684 .data \u548c .rodata \u6bb5\u4f1a\u88ab\u6e05\u96f6\u3002 ELF\uff08Executable and Linkable Format\uff09\u662f Linux \u4e0b\u5e38\u7528\u7684\u53ef\u6267\u884c\u6587\u4ef6\u683c\u5f0f\uff0c\u5176\u4e2d\u6709\u5f88\u591a\u4e0d\u540c\u7684\u8282\uff1a .text \u8282\uff1a\u7a0b\u5e8f\u8fd0\u884c\u9700\u8981\u7684\u4ee3\u7801 .data \u8282\uff1a\u5b58\u653e\u53ef\u4fee\u6539\u7684\u6570\u636e\uff0c\u4e00\u822c\u662f\u975e const \u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf .rodata \u8282\uff1a\u5373 read only data\uff0c\u4e00\u822c\u662f\u5e38\u91cf\u6216\u8005\u5b57\u7b26\u4e32 .bss \u8282\uff1a\u6ca1\u6709\u88ab\u521d\u59cb\u5316\u7684\u53d8\u91cf \u2026\u2026 \u800c\u8fd9\u9053\u9898\u76ee\u5219\u662f\u5728\u7f16\u8bd1\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6 a.out \u540e\uff0c\u6e05\u7a7a .data \u548c .rodata \u9996\u5148\u4e0d\u59a8\u6b63\u5e38\u7f16\u5199\u4e00\u4e2a\u8f93\u51fa \u201cHello, world!\u201d \u7684\u7a0b\u5e8f\uff1a printf ( \"Hello, world! \\n \" ); \u7136\u540e\u7f16\u8bd1\uff0c\u518d\u62d6\u5230 IDA \u91cc \u53ef\u4ee5\u53d1\u73b0\uff0c\u6b64\u65f6\u7684 \"Hello, world!\" \u88ab\u653e\u5230\u4e86 .rodata \u8282\u4e2d\uff0c\u4f1a\u88ab\u6e05\u9664\u6389\uff0c\u6240\u4ee5\u8fd9\u6837\u5199\u4e0d\u884c \u76f4\u63a5\u4f7f\u7528\u5b57\u7b26\u4e32\u4f1a\u88ab\u653e\u5230 .rodata \u4e2d\u6e05\u9664\uff0c\u5199\u6210\u5168\u5c40\u53d8\u91cf\u53c8\u4f1a\u653e\u5230 .data \u4e2d \u4f46\u662f\uff0c\u5982\u679c\u5199\u6210\u5c40\u90e8\u53d8\u91cf\u5462\uff1a char str [] = \"Hello, world! \\n \" ; printf ( str ); \u7f16\u8bd1\uff0c\u62d6\u5230 IDA \u91cc \u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u6b21\u7684\u5b57\u7b26\u4e32\u76f4\u63a5\u5199\u5230\u4e86 .text \u8282\u4e2d\uff0c\u5220\u6389\u4e86 .data .rodata \u4e5f\u6ca1\u6709\u5f71\u54cd \u6240\u4ee5\u628a\u8fd9\u4e2a\u4ee3\u7801\u4ea4\u4e0a\u53bb\u5c31\u53ef\u4ee5\u8f93\u51fa \u201cHello, world!\u201c \u62ff\u5230 flag \u4e86 \u6e05\u9664\u8bb0\u5fc6\u76f4\u63a5\u628a .text \u8282\u5168\u5220\u6389\u4e86\uff0c\u60f3\u4e86\u5f88\u4e45\u4e5f\u4e0d\u77e5\u9053\u548b\u641e\uff0c\u867d\u7136\u53ef\u4ee5 __attribute__ ((section (\"...\"))) \u6765\u628a\u51fd\u6570\u6216\u53d8\u91cf\u585e\u5230\u6307\u5b9a\u7684\u8282\u4e2d\u3002\u4f46\u8fd8\u662f\u4e0d\u6e05\u695a\u8981\u600e\u4e48\u89e3\u51b3\u6bb5\u9519\u8bef\u7684\u95ee\u9898qwq \u56fe\u4e4b\u4e0a\u7684\u4fe1\u606f \u00b6 \u5c0f T \u542c\u8bf4 GraphQL \u662f\u4e00\u79cd\u7279\u522b\u7684 API \u8bbe\u8ba1\u6a21\u5f0f\uff0c\u4e5f\u662f RESTful API \u7684\u6709\u529b\u7ade\u4e89\u8005\uff0c\u6240\u4ee5\u4ed6\u5199\u4e86\u4e2a\u5c0f\u7f51\u7ad9\u6765\u5b9e\u9a8c\u8fd9\u9879\u6280\u672f\u3002 \u4f60\u80fd\u901a\u8fc7\u8fd9\u4e2a\u5168\u65b0\u7684\u63a5\u53e3\uff0c\u83b7\u53d6\u5230\u6ca1\u6709\u516c\u5f00\u51fa\u6765\u7684\u7ba1\u7406\u5458\u7684\u90ae\u7bb1\u5730\u5740\u5417\uff1f \u9898\u76ee\u4fe1\u606f\u7ed9\u7684\u5f88\u5145\u5206\uff0c\u7528\u7684\u662f GraphQL\uff0c\u8981\u7528\u5176\u5f97\u5230 admin \u7684\u90ae\u7bb1 \u6ca1\u63a5\u89e6\u8fc7 GraphQL\uff0c\u6240\u4ee5\u76f4\u63a5\u5fc5\u5e94\uff08\u9003 \u67e5\u5230\u4e86\u5f88\u591a\u6709\u7528\u7684\u4e1c\u897f\uff1a GraphQL\u5b98\u7f51 \uff1a\u4e86\u89e3\u4e00\u4e0b GraphQL \u662f\u5e72\u4ec0\u4e48\u7684\uff0c\u8981\u600e\u4e48\u7528 GraphiQL \uff1a\u4e00\u4e2a\u8fdb\u884c GraphQL \u67e5\u8be2\u7684 GUI \u3010\u5b89\u5168\u8bb0\u5f55\u3011\u73a9\u8f6cGraphQL - DVGA\u9776\u573a\uff08\u4e0a\uff09- \u77e5\u4e4e GraphQL Voyager \uff1a\u53ef\u89c6\u5316\u73b0\u5b9e GraphQL \u5185\u7701\u51fa\u7684\u7ed3\u6784 \u7b80\u800c\u8a00\u4e4b\uff0cGraphQL \u5c31\u662f\u4e00\u4e2a\u53ef\u4ee5\u901a\u8fc7\u4e00\u6b21 query \u8bf7\u6c42\u67e5\u8be2\u591a\u4e2a\u8d44\u6e90\u7684 API \u6a21\u5f0f\uff0c\u53ea\u8981 \u7f51\u5740/graphql?query=... \u5c31\u53ef\u4ee5\u5b9e\u73b0\u67e5\u8be2 \u6709\u4e9b\u4f7f\u7528 GraphQL \u7684\u7f51\u7ad9\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u8bbf\u95ee \u7f51\u5740/graphiql \u5f97\u5230\u67e5\u8be2\u7684 GUI \u4f46\u662f\u672c\u9898\u4e2d\u7981\u6b62\u4e86\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528 GraphiQL \u8f6f\u4ef6\u6765\u8fdb\u884c\u67e5\u8be2 \u5728\u7b2c\u4e09\u4e2a\u94fe\u63a5\u4e2d\u53ef\u4ee5\u4e86\u89e3\u5230\uff0c\u53ef\u4ee5\u5229\u7528 GraphQL \u7684\u5185\u7701\u67e5\u8be2\u6765\u6cc4\u9732\u51fa\u5185\u90e8\u7684\u7ed3\u6784\uff0c\u628a\u5176\u4e2d\u7684\u67e5\u8be2\u8bed\u53e5\u4e22\u5230 GraphiQL \u4e2d\u53ef\u4ee5\u5f97\u5230\u7ed3\u679c query IntrospectionQuery { __schema { queryType { name } mutationType { name } subscriptionType { name } types { ...FullType } directives { name description locations args { ...InputValue } } }}fragment FullType on __Type { kind name description fields(includeDeprecated: true) { name description args { ...InputValue } type { ...TypeRef } isDeprecated deprecationReason } inputFields { ...InputValue } interfaces { ...TypeRef } enumValues(includeDeprecated: true) { name description isDeprecated deprecationReason } possibleTypes { ...TypeRef }}fragment InputValue on __InputValue { name description type { ...TypeRef } defaultValue}fragment TypeRef on __Type { kind name ofType { kind name ofType { kind name ofType { kind name ofType { kind name ofType { kind name ofType { kind name ofType { kind name } } } } } } }} \u7136\u540e\u628a\u7ed3\u679c\u4e22\u5230 GraphQL Voyager \u4e2d\u5c31\u53ef\u4ee5\u5f97\u5230\u53ef\u89c6\u5316\u7684\u7ed3\u6784\uff1a \u6240\u4ee5\u53ea\u9700\u8981\u6839\u636e id query \u4e00\u4e0b user \u5c31\u53ef\u4ee5\u4e86\uff1a query { user ( id : 1 ) { privateEmail , } } >>> { \"data\" : { \"user\" : { \"privateEmail\" : \"flag{...}\" } } } Easy RSA \u00b6 \u81ea\u4ece Hackergame 2018 \u516c\u7136\u63ed\u9732\u4e86\u5927\u6574\u6570\u53ef\u4ee5\u88ab\u795e\u7ae5\u53e3\u7b97\u5206\u89e3\u7684\u4e8b\u5b9e\uff0cRSA \u5728 hackergame \u4e2d\u5df2\u7ecf\u53ea\u80fd\u5904\u4e8e\u4f4e\u5206\u503c\u7684\u5730\u4f4d\u4e86\u3002\u5982\u679c\u4e0d\u5728\u5176\u540d\u79f0\u524d\u9762\u52a0\u4e0a Easy \u8fd9\u4e2a\u5355\u8bcd\uff0c\u4f3c\u4e4e\u5c31\u4f1a\u663e\u5f97\u5b8c\u5168\u5bf9\u4e0d\u8d77\u5176\u4ed6\u9898\u76ee\u3002 \u66f4\u4f55\u51b5\uff0c\u5728\u672c\u9898\u7684\u9644\u4ef6\u4e2d\uff0c\u4f60\u8fd8\u83b7\u5f97\u4e86\u6784\u9020 p \u548c q \u7684\u65b9\u5f0f\u3002\u6570\u7406\u57fa\u7840\u624e\u5b9e\u7684\u4f60\u5e94\u8be5\u53ef\u4ee5\u8f7b\u677e\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u5427\u3002 \u8c22\u9080\uff0c\u6ca1\u6709\u6570\u7406\u57fa\u7840 \u770b\u4ee3\u7801\uff01 e = 65537 def get_p (): x = 11124440021748127159092076861405454814981575144744508857178576572929321435002942998531420985771090167262256877805902135304112271641074498386662361391760451 y = 11124440021748127159092076861405454814981575144744508857178576572929321435002942998531420985771090167262256877805902135304112271641074498386662361391661439 value_p = sympy . nextprime (( math . factorial ( y )) % x ) # Hint\uff1a\u8fd9\u91cc\u76f4\u63a5\u8ba1\u7b97\u4f1a\u6ea2\u51fa\uff0c\u8bf7\u4f60\u4ed4\u7ec6\u89c2\u5bdf x \u548c y \u7684\u7279\u5f81 return value_p def get_q (): value = [ getPrime ( 256 )] for i in range ( 1 , 10 ): value . append ( sympy . nextprime ( value [ i - 1 ])) print ( \"value[-1] = \" , value [ - 1 ]) # value[-1] = 80096058210213458444437404275177554701604739094679033012396452382975889905967 n = 1 for i in range ( 10 ): n = n * value [ i ] q = getPrime ( 512 ) value_q = pow ( q , e , n ) print ( \"value_q = \" , value_q ) # value_q = 5591130088089053683141520294620171646179623062803708281023766040254675625012293743465254007970358536660934858789388093688621793201658889399155357407224541324547522479617669812322262372851929223461622559971534394847970366311206823328200747893961649255426063204482192349202005330622561575868946656570678176047822163692259375233925446556338917358118222905050574458037965803154233167594946713038301249145097770337253930655681648299249481985768272321820718607757023350742647019762122572886601905212830744868048802864679734428398229280780215896045509020793530842541217790352661324630048261329493088812057300480085895399922301827190211956061083460036781018660201163819104150988531352228650991733072010425499238731811243310625701946882701082178190402011133439065106720309788819 return sympy . nextprime ( q ) # this destroyes the rsa cryptosystem p = get_p () q = get_q () m = int . from_bytes ( open ( \"flag.txt\" , \"rb\" ) . read (), \"big\" ) c = pow ( m , e , p * q ) print ( \"c = \" , c ) # c = 110644875422336073350488613774418819991169603750711465190260581119043921549811353108399064284589038384540018965816137286856268590507418636799746759551009749004176545414118128330198437101472882906564195341277423007542422286760940374859966152871273887950174522820162832774361714668826122465471705166574184367478 \u53ef\u4ee5\u770b\u5230\uff0c\u5176\u4e2d\u8981\u89e3\u51b3\u7684\u5c31\u662f get_p() \u4e2d y! % x \u6ea2\u51fa\u7684\u95ee\u9898\uff0c\u4ee5\u53ca get_q() \u4e2d q \u662f\u54ea\u4e2a\u968f\u673a\u7684512\u4f4d\u8d28\u6570\u7684\u95ee\u9898 get_p : \u4ee3\u7801\u91cc\u4e5f\u7ed9\u4e86 Hint\uff0c\u89c2\u5bdf x \u548c y \u7684\u7279\u5f81\u3002x \u548c y \u90fd\u5f88\u5927\uff0c\u4f46\u662f\u4e24\u4e2a\u7684\u5dee\u5e76\u4e0d\u5927\uff1b\u800c\u4e14\u53ef\u4ee5\u4e22\u5230 python \u91cc\u9a8c\u8bc1\u51fa x \u662f\u4e00\u4e2a\u8d28\u6570 \u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528 \u5a01\u5c14\u900a\u5b9a\u7406 \u4e5f\u67e5\u5230\u4e86\u5a01\u5c14\u900a\u5b9a\u7406\u5728 RSA \u9898\u76ee\u4e2d\u7684\u5e94\u7528\uff1a BUU-RSA [RoarCTF2019]babyRSA \u8981\u6c42 y! % x\uff08x\u662f\u8d28\u6570\uff09 \u6839\u636e\u5a01\u5c14\u900a\u5b9a\u7406\uff0c\u6709 \\[ (x - 1)! \\equiv -1\\pmod{x} \\] \u6240\u4ee5\uff1a \\[ y!\\times \\frac{(x - 1)!}{y!}\\equiv -1\\pmod{x} \\] \u4ee4 \\(k = \\dfrac{(x - 1)!}{y!} = (y+1)(y+2)...(x-1)x\\) \uff0c\u6240\u4ee5\u6709\uff1a \\[ y!\\equiv -\\mathrm{inv}(k, x)\\pmod{x} \\] \uff08\u5176\u4e2d \\(\\mathrm{inv}(k, x)\\) \u8868\u793a\u6a21 x \u4e0b k \u7684\u9006\u5143\uff09 \u6240\u4ee5\u91cd\u5199 get_p() \u5373\u53ef\u6b63\u786e\u7684\u5f97\u5230 p\uff1a def get_p (): x = ... y = ... k = 1 for i in range ( y + 1 , x ): k = ( k * i ) % x res = ( - gmpy2 . invert ( k , x )) % x return sympy . nextprime ( res ) get_q : \u76f8\u6bd4\u6765\u8bf4\uff0cget_q \u5c31\u6ca1\u90a3\u4e48\u9700\u8981\u6280\u5de7\u4e86 \u7ed9\u51fa\u4e86 value[-1] \u7684\u503c\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u7528 sympy.prevprime \u9006\u63a8\u51fa\u6574\u4e2a value \u6570\u7ec4 value = [ 80096058210213458444437404275177554701604739094679033012396452382975889905967 ] for i in range ( 1 , 10 ): value . append ( sympy . prevprime ( value [ i - 1 ])) print ( \"value[-1] = \" , value [ - 1 ]) \u540e\u9762\u8ba1\u7b97 value_q \u7ec6\u770b\u5176\u5b9e\u4e5f\u662f\u4e00\u4e2a RSA \u7b97\u6cd5\uff1a q\uff1a\u5bc6\u6587 e\uff1a\u79c1\u94a5 value_q\uff1a\u660e\u6587 n\uff1a\u5c31\u662f n\uff0c\u53ea\u4e0d\u8fc7\u4e0d\u662f\u4e24\u4e2a\u8d28\u6570\u76f8\u4e58\uff0c\u662f\u5341\u4e2a\u8d28\u6570\u76f8\u4e58 \u5341\u4e2a\u8d28\u6570\u76f8\u4e58\u5f97\u5230 n \u7684 RSA \u7b97\u6cd5\u4e5f\u4e00\u6837\uff0c\u56e0\u4e3a RSA \u7684\u6b63\u786e\u6027\u5e76\u6ca1\u6709\u8981\u6c42 n \u4e00\u5b9a\u662f\u4e24\u4e2a\u5927\u8d28\u6570\u76f8\u4e58\uff0c\u8fd9\u6837\u53ea\u662f\u96be\u4ee5\u7834\u89e3\u4fdd\u8bc1\u5b89\u5168\u6027 \u89e3\u51b3\u8fd9\u4e2a\u540c\u6837\u4e5f\u662f\u9700\u8981\u516c\u94a5 d\uff0c\u6240\u4ee5\u9700\u8981 phi(n) \u6839\u636e \u6b27\u62c9\u51fd\u6570 \u7684\u6027\u8d28\uff0cphi(n) \u7b49\u4e8e n \u7684\u6240\u6709\u8d28\u56e0\u6570\u51cf\u4e00\u7684\u79ef \u5373 phi(n) = (value[0] - 1) * (value[1] - 1) * ... * (value[9] - 1) \u518d\u89e3\u5bc6\u5373\u53ef\u5f97\u5230\u5bc6\u6587 q\uff0c\u7136\u540e\u4e5f\u5c31\u5f97\u5230\u4e86 get_q \u7684\u7ed3\u679c n = phi = 1 for i in range ( 10 ): n = n * value [ i ] phi *= ( value [ i ] - 1 ) value_q = ... d = pow ( e , - 1 , phi ) q = pow ( value_q , d , n ) return sympy . nextprime ( q ) flag : \u641e\u5b9a\u4e86 get_p \u548c get_q \u4e4b\u540e\u5c31\u53ef\u4ee5\u76f4\u63a5\u89e3\u51fa flag \u4e86\uff1a e = 65537 p = get_p () q = get_q () c = ... d = pow ( e , - 1 , ( p - 1 ) * ( q - 1 )) m = pow ( c , d , p * q ) print ( int . to_bytes ( m , 30 , byteorder = \"big\" )) \u52a0\u5bc6\u7684 U \u76d8 \u00b6 \uff08\u672c\u6765\u633a\u597d\u505a\u7684\u4e00\u9053\u9898\uff0c\u600e\u4e48\u9898\u7ed9\u7684\u63d0\u793a\u6211\u5c31\u786c\u662f\u6ca1\u9886\u4f1a\u5230\uff09 \u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e LUKS (Linux Unified Key Setup) \u7684\u6545\u4e8b\u3002 \u7b2c\u4e00\u5929 \u5c0f T\uff1a\u300c\u4f60\u8981\u7684\u968f\u673a\u8fc7\u7a0b\u7684\u8bfe\u4ef6\u6211\u5e2e\u4f60\u62f7\u597d\u4e86\uff0c\u5728\u8fd9\u4e2a U \u76d8\u91cc\uff0cLUKS \u52a0\u5bc6\u7684\u5bc6\u7801\u662f suijiguocheng123123\u3002\u300d \u5c0f Z\uff1a\u300c\u554a\uff0c\u4f60\u53c8\u641e\u4e86 Linux \u6587\u4ef6\u7cfb\u7edf\u52a0\u5bc6\uff0c\u771f\u62ff\u4f60\u6ca1\u529e\u6cd5\u3002\u6211\u73b0\u5728\u4e0d\u65b9\u4fbf\u7528 Linux\uff0c\u6211\u76f4\u63a5\u628a\u8fd9\u5757\u76d8\u505a\u6210\u78c1\u76d8\u955c\u50cf\u6587\u4ef6\u518d\u56de\u53bb\u5904\u7406\u5427\u3002\u300d \u7b2c\u4e8c\u5929 \u5c0f Z\uff1a\u300c\u8c22\u8c22\u4f60\u6628\u5929\u5e2e\u6211\u62f7\u7684\u8bfe\u4ef6\u3002\u4f60\u6bcf\u6b21\u90fd\u641e\u8fd9\u4e2a\u52a0\u5bc6\uff0c\u5b83\u771f\u7684\u5b89\u5168\u5417\uff1f\u300d \u5c0f T\uff1a\u300c\u5f53\u7136\u4e86\uff01\u4f60\u770b\uff0c\u4f60\u8fd8\u7ed9\u6211\u4e4b\u540e\uff0c\u6211\u5df2\u7ecf\u628a\u8fd9\u5757\u76d8\u7684\u5f31\u5bc6\u7801\u6539\u6389\u4e86\uff0c\u73b0\u5728\u662f\u968f\u673a\u751f\u6210\u7684\u5f3a\u5bc6\u7801\uff0c\u8fd9\u6837\u9664\u4e86\u6211\u81ea\u5df1\uff0c\u4e16\u754c\u4e0a\u4efb\u4f55\u4eba\u90fd\u65e0\u6cd5\u89e3\u5bc6\u5b83\u4e86\u3002\u300d \u5c0f Z\uff1a\u300c\u6211\u53ef\u4e0d\u4fe1\u3002\u300d \u5c0f T\uff1a\u300c\u4f60\u4e0d\u4fe1\uff1f\u4f60\u770b\uff0c\u6211\u73b0\u5728\u5f80 U \u76d8\u91cc\u653e\u4e00\u4e2a flag \u6587\u4ef6\uff0c\u7136\u540e\u8fd9\u4e2a U \u76d8\u5c31\u7ed9\u4f60\u4e86\uff0c\u4f60\u7edd\u5bf9\u89e3\u5bc6\u4e0d\u51fa\u6765\u8fd9\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9\u3002\u5f53\u521d\u641e LUKS \u7684\u65f6\u5019\u6211\u53ef\u7814\u7a76\u4e86\u597d\u51e0\u5929\uff0c\u73ed\u4e0a\u53ef\u6ca1\u4eba\u6bd4\u6211\u66f4\u61c2\u52a0\u5bc6\uff01\u300d \u4e00\u5171\u7ed9\u4e86\u4e24\u4e2a img \u6587\u4ef6\uff0c\u901a\u8fc7 file \u53ef\u4ee5\u770b\u51fa\u90fd\u662f DOS/MBR boot sector $ file *.img day1.img: DOS/MBR boot sector ; partition 1 : ID = 0xee, start-CHS ( 0x0,0,2 ) , end-CHS ( 0x3ff,255,63 ) , startsector 1 , 40959 sectors, extended partition table ( last ) day2.img: DOS/MBR boot sector ; partition 1 : ID = 0xee, start-CHS ( 0x0,0,2 ) , end-CHS ( 0x3ff,255,63 ) , startsector 1 , 40959 sectors, extended partition table ( last ) \u6240\u4ee5\u5148\u76f4\u63a5 7z \u63d0\u53d6\uff0c\u5f97\u5230\u4e24\u4e2a\u65b0\u7684 img\uff0c\u518d file\uff1a $ file *.img My Disk.img: LUKS encrypted file, ver 2 [ , , sha256 ] UUID: e9a660d5-4a91-4dca-bda5-3f6a49eea998 My Disk 2 .img: LUKS encrypted file, ver 2 [ , , sha256 ] UUID: e9a660d5-4a91-4dca-bda5-3f6a49eea998 \u53d1\u73b0\u90fd\u662f LUKS encrypted file \u5728 Kali Linux \u91cc\u5c1d\u8bd5\u76f4\u63a5\u6302\u8f7d\u7b2c\u4e00\u4e2a img\uff0c\u8981\u6c42\u8f93\u5165\u5bc6\u7801\uff0c\u628a\u9898\u7ed9\u7684\u5bc6\u7801\u8f93\u5165\u5c31\u53ef\u4ee5\u770b\u5230 \u201c\u8bfe\u4ef6\u201d \u4ee5\u4e0a\u90fd\u662f\u5df2\u77e5\u7684\u8bd5\u9a8c\u90e8\u5206\uff0c\u771f\u6b63\u8981\u505a\u7684\u662f\u89e3\u5f00\u7b2c\u4e8c\u4e2a\u672a\u77e5\u5bc6\u7801\u7684 LUKS img \u5df2\u77e5\u78c1\u76d8\u7684\u52a0\u5bc6\u4f7f\u7528\u7684\u662f luks2\uff0c\u5728\u7f51\u4e0a\u67e5\u4e86\u7834\u89e3 luks2 \u4e4b\u7c7b\u7684\u90fd\u8bf4 luks2 \u4e0d\u53ef\u7834\u89e3 \uff0c\u6216\u8005\u662f\u4f7f\u7528\u5df2\u77e5\u7684\u5bc6\u7801\u5b57\u5178\u6765\u7206\u7834 \u4f46\u662f\u9898\u91cc\u8bf4\u4e86 \u201c \u968f\u673a\u751f\u6210 \u7684\u5f3a\u5bc6\u7801\u201d\uff0c\u6240\u4ee5\u4e5f\u662f\u6ca1\u6709\u5bc6\u7801\u5b57\u5178\u7684 \u5176\u5b9e\u8fd9\u9053\u9898\u7684\u6700\u5927\u63d0\u793a\u5c31\u5728\u4e8e\u5b83\u7ed9\u4e86\u4e24\u4e2a img\uff0c\u65e2\u7136\u7b2c\u4e00\u4e2a img \u6253\u5f00\u540e\u4ec5\u4ec5\u662f\u4e00\u4e2a\u8bfe\u4ef6\uff0c\u5982\u679c\u5b83\u7684\u7528\u5904\u4ec5\u4ec5\u662f\u7528\u6765\u8bd5\u9a8c luks \u600e\u4e48\u6253\u5f00\u7684\u8bdd\uff0c\u6839\u672c\u5b83\u6ca1\u5fc5\u8981\u7ed9\u51fa \u6240\u4ee5\u7b2c\u4e00\u4e2a img \u80af\u5b9a\u8fd8\u662f\u6709\u7528\u7684\u3002 \u518d\u770b\u9898\u76ee\uff0c\u53cd\u590d\u8bf4\u4e86 U \u76d8\uff0c\u6240\u4ee5\u8fd9\u4e24\u4e2a img \u5e94\u8be5\u662f\u540c\u4e00\u4e2a U \u76d8\u7684\u955c\u50cf\u6587\u4ef6\uff0c\u53ea\u662f\u66f4\u6539\u4e86\u5bc6\u7801\u800c\u5df2\uff08file \u770b\u5230\u7684 uuid \u4e5f\u662f\u4e00\u81f4\u7684\uff09 \u4e8e\u662f\u7ee7\u7eed\u5fc5\u5e94\uff0c\u53d1\u73b0\u540c\u4e00\u4e2a\u78c1\u76d8\u7684 master-key \u662f\u4e00\u6837\u7684\uff0c\u800c\u4e14\u53ef\u4ee5\u7528 master-key \u6765\u6dfb\u52a0\u5bc6\u7801\u6062\u590d\u78c1\u76d8\uff08\u89c1\uff1a 10 Linux cryptsetup Examples for LUKS Key Management \uff09 \u6240\u4ee5\u5c31\u8ddf\u7740\u6587\u7ae0\u91cc\u7684\u505a\u6cd5\uff0c\u4ece\u7b2c\u4e00\u4e2a img \u4e2d\u63d0\u53d6\u51fa master-key\uff0c\u7136\u540e\u7528\u5b83\u6765\u63d0\u4f9b AddKey \u7684\u6743\u9650\u3002\u6dfb\u52a0\u4e86\u65b0 passphrase \u540e\u5c31\u53ef\u4ee5\u7528\u65b0\u5bc6\u7801\u6253\u5f00\u78c1\u76d8\u4e86\uff1a $ cryptsetup luksDump --dump-master-key MyDisk.img # \u8f93\u51fa master-key ... MK dump: be 97 db 91 5c 30 47 ce 1c 59 c5 c0 8c 75 3c 40 72 35 85 9d fe 49 c0 52 c4 f5 26 60 af 3e d4 2c ec a3 60 53 aa 96 70 4d f3 f2 ff 56 8f 49 a1 82 60 18 7c 58 d7 6a ec e8 00 c1 90 c1 88 43 f8 9a $ cat \"be...9a\" > master_key.txt # \u5b58\u5165\u6587\u4ef6 $ xxd -r -p master_key.txt master_key.bin # \u8f6c\u4e3a\u4e8c\u8fdb\u5236 $ cryptsetup luksAddKey MyDisk2.img --master-key-file < ( cat master_key.bin ) # \u6dfb\u52a0\u5bc6\u7801 Enter new passphrase for key slot: # \u8f93\u5165\u65b0\u5bc6\u7801\u5373\u53ef\uff0c\u56e0\u4e3amaster-key-file\u76f8\u5f53\u4e8e\u63d0\u4f9b\u4e86\u539f\u59cb\u5bc6\u7801 Verify passphrase: \uff08\u4e00\u5b9a\u8981\u7528 root \u6743\u9650\u624d\u53ef\u4ee5\u52a0\u5bc6\u7801\uff09 \u7136\u540e\u6302\u8f7d\u3001\u8f93\u5165\u5bc6\u7801\uff0c\u5c31\u53ef\u4ee5\u770b\u5230 flag.txt \u4e86 \u8d5b\u535a\u53a8\u623f \u00b6 \u867d\u7136\u8fd9\u662f\u4f60\u7684\u9910\u5385\uff0c\u4f46\u53ea\u6709\u673a\u5668\u4eba\u53ef\u4ee5\u5728\u53a8\u623f\u5de5\u4f5c\u3002\u673a\u5668\u4eba\u7cbe\u786e\u5730\u6309\u7167\u7a0b\u5e8f\u5de5\u4f5c\uff0c\u5728\u53a8\u623f\u4e2d\u79fb\u52a8\uff0c\u4ece\u7269\u54c1\u6e90\u53d6\u51fa\u98df\u6750\uff0c\u6309\u7167\u83dc\u8c31\u7684\u987a\u5e8f\u628a\u98df\u6750\u4f9d\u6b21\u653e\u5165\u9505\u5185\u3002 \u673a\u5668\u4eba\u4e0d\u9700\u8981\u4f11\u606f\uff0c\u53ea\u9700\u8981\u4e00\u4e2a\u665a\u4e0a\u7684\u65f6\u95f4\u6765\u5b66\u4e60\u4f60\u6559\u7ed9\u5b83\u7684\u7a0b\u5e8f\uff0c\u5728\u6b64\u4e4b\u540e\u4f60\u5c31\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u8ba9\u673a\u5668\u4eba\u6267\u884c\u8fd9\u4e2a\u7a0b\u5e8f\uff0c\u7a0b\u5e8f\u7684\u6bcf\u4e00\u6b65\u6267\u884c\u90fd\u4f1a\u88ab\u8bb0\u5f55\u4e0b\u6765\uff0c\u65b9\u4fbf\u4f60\u68c0\u67e5\u673a\u5668\u4eba\u505a\u83dc\u7684\u8fc7\u7a0b\u3002 \u53e6\u5916\u4e3a\u4e86\u7b26\u5408\u98df\u54c1\u5b89\u5168\u6cd5\u7684\u8981\u6c42\uff0c\u8d5b\u535a\u53a8\u623f\u4e2d\u7684\u673a\u5668\u4eba\u540c\u4e00\u65f6\u95f4\u624b\u91cc\u53ea\u80fd\u62ff\u4e00\u79cd\u98df\u7269\uff0c\u6bcf\u6b21\u505a\u83dc\u524d\u90fd\u5fc5\u987b\u6267\u884c\u6e05\u7406\u53a8\u623f\u7684\u64cd\u4f5c\uff0c\u628a\u5404\u5904\u7684\u98df\u7269\u6b8b\u6e23\u6e05\u7406\u6389\uff0c\u7136\u540e\u56de\u5230\u53a8\u623f\u89d2\u843d\u5f85\u547d\u3002 \u6bcf\u5929\u7684\u83dc\u8c31\u53ef\u80fd\u4e0d\u540c\uff0c\u4f46\u4e5f\u8bb8\u4e5f\u5b58\u5728\u4e00\u4e9b\u89c4\u5f8b\u3002 \u5bf9\u673a\u5668\u4eba\u7f16\u7a0b\u53ef\u4ee5\u4f7f\u7528\u7684\u6307\u4ee4\u6709\uff08n, m \u4e3a\u6574\u6570\u53c2\u6570\uff0c\u7a0b\u5e8f\u7684\u884c\u53f7\u4ece 0 \u5f00\u59cb\uff0c\u6ce8\u610f\u6307\u4ee4\u4e2d\u9700\u8981\u6b63\u786e\u4f7f\u7528\u7a7a\u683c\uff09\uff1a \u5411\u4e0a n \u6b65 \u5411\u4e0b n \u6b65 \u5411\u5de6 n \u6b65 \u5411\u53f3 n \u6b65 \u653e\u4e0b n \u4e2a\u7269\u54c1 \u62ff\u8d77 n \u4e2a\u7269\u54c1 \u653e\u4e0b\u76d8\u5b50 \u62ff\u8d77\u76d8\u5b50 \u5982\u679c\u624b\u4e0a\u7684\u7269\u54c1\u5927\u4e8e\u7b49\u4e8e n \u5411\u4e0a\u8df3\u8f6c m \u884c \u5982\u679c\u624b\u4e0a\u7684\u7269\u54c1\u5927\u4e8e\u7b49\u4e8e n \u5411\u4e0b\u8df3\u8f6c m \u884c \u8d76\u7d27\u8fdb\u5165\u8d5b\u535a\u53a8\u623f\u5f00\u59cb\u505a\u83dc\u5427\uff01 \u521a\u770b\u9898\u8fd8\u662f\u633a\u61f5\u7684\uff0c\u60f3\u4e86\u597d\u534a\u5929\u624d\u660e\u767d \u7b80\u5355\u8bf4\u6765\u5c31\u662f\uff0c\u6bcf\u5929\u53ef\u4ee5\u7f16\u5199\u65b0\u7684\u7a0b\u5e8f\uff0c\u4f46\u662f\u53ea\u80fd\u8fd0\u884c\u4e00\u4e2a\u4e4b\u524d\u7f16\u5199\u8fc7\u7684\u7a0b\u5e8f \u6bcf\u4e2a\u7a0b\u5e8f\u53ea\u6709\u51e0\u79cd\u6307\u4ee4\u53ef\u4ee5\u4f7f\u7528\uff0c\u9700\u8981\u5728\u5176\u4e2d\u6ee1\u8db3\u83dc\u8c31\u7684\u987a\u5e8f\u8981\u6c42 \u800c\u95ee\u9898\u5728\u4e8e\uff0c\u7f16\u5199\u7a0b\u5e8f\u540e\u7684\u7b2c\u4e8c\u5929\u7684\u83dc\u8c31\u53ef\u80fd\u4f1a\u4e0d\u540c\uff0c\u5bfc\u81f4\u524d\u9762\u7f16\u5199\u7684\u7a0b\u5e8f\u65e0\u6cd5\u4f7f\u7528 \u6240\u4ee5\u5c31\u9700\u8981 \u9884\u6d4b \u7b2c\u4e8c\u5929\u7684\u83dc\u8c31 Level 0 \u00b6 \u53ef\u4ee5\u770b\u5230\u7b2c 0 \u5929\u7684\u83dc\u8c31\u662f 1, 0\uff0c\u4e5f\u5c31\u662f\u8981\u5728\u540c\u4e00\u4e2a\u7a0b\u5e8f\u4e2d\u4f9d\u6b21\u5411\u9505(1,0)\u4e2d\u653e\u5165 1 \u53f7\u98df\u7269(0,2)\u548c 0 \u53f7\u98df\u7269(0,1) \u968f\u4fbf\u7f16\u5199\u7a0b\u5e8f\u4fdd\u5b58\uff0c\u76f4\u63a5\u5230\u4e0b\u4e00\u5929\uff0c\u53ef\u4ee5\u53d1\u73b0\u83dc\u8c31\u53d1\u751f\u4e86\u53d8\u5316 \u591a\u6b21\u5c1d\u8bd5\u4e4b\u540e\u53d1\u73b0\u83dc\u8c31 \u53ea\u6709 0,0 / 0,1 / 1,0 / 1,1 \u56db\u79cd \u6240\u4ee5\u5728\u7b2c 0 \u5929\u7f16\u5199\u5b66\u4e60\u56db\u4e2a\u7a0b\u5e8f\uff0c\u5230\u4e0b\u4e00\u5929\u5c31\u53ef\u4ee5\u6839\u636e\u83dc\u8c31\u6765\u6267\u884c\u4e86 \u4f8b\u5982\u7a0b\u5e8f 1,0 \u5c31\u53ef\u4ee5\u7f16\u5199\u4e3a\uff1a \u5411\u53f3 2 \u6b65 \u62ff\u8d77 1 \u4e2a\u7269\u54c1 \u5411\u5de6 2 \u6b65 \u5411\u4e0b 1 \u6b65 \u653e\u4e0b 1 \u4e2a\u7269\u54c1 \u5411\u4e0a 1 \u6b65 \u5411\u53f3 1 \u6b65 \u62ff\u8d77 1 \u4e2a\u7269\u54c1 \u5411\u5de6 1 \u6b65 \u5411\u4e0b 1 \u6b65 \u653e\u4e0b 1 \u4e2a\u7269\u54c1 \u5411\u4e0a 1 \u6b65 \u53ea\u8981\u6b63\u786e\u4e86\u4e00\u5929\uff0c\u5c31\u53ef\u4ee5\u62ff\u5230 flag \u4e86 Level 1 \u00b6 \u53ea\u6709 1 \u4e2a\u98df\u7269\uff0c\u83dc\u8c31\u662f\u597d\u591a 0 \u540c\u6837\u968f\u4fbf\u7f16\u5199\u7a0b\u5e8f\u4fdd\u5b58\u8fdb\u5165\u4e0b\u4e00\u5929\uff0c\u53d1\u73b0\u83dc\u8c31 \u6ca1\u6709\u53d8\u5316 \uff0c\u8fd8\u662f 73 \u4e2a 0 \u6240\u4ee5\u8fd9\u4e00\u5173\u53ef\u80fd\u53ea\u662f\u5faa\u73af\u7684\u6559\u7a0b \u53ef\u7528\u7684\u6307\u4ee4\u4e2d\u6709\u4e00\u6761 \u201c\u5982\u679c\u624b\u4e0a\u7684\u7269\u54c1\u5927\u4e8e\u7b49\u4e8e n \u5411\u4e0a\u8df3\u8f6c m \u884c\u201d \u53ef\u4ee5\u7528\u5b83\u6765\u8fbe\u5230 \u5faa\u73af \u7684\u6548\u679c \u53ea\u9700\u8981\u62ff 73 \u4e2a\u7269\u54c1\uff0c\u7136\u540e\u5faa\u73af\u653e\u4e0b\u76f4\u5230\u624b\u4e2d\u6ca1\u6709\u4e86\u5373\u53ef \u5411\u53f3 1 \u6b65 \u62ff\u8d77 73 \u4e2a\u7269\u54c1 \u5411\u5de6 1 \u6b65 \u5411\u4e0b 1 \u6b65 \u653e\u4e0b 1 \u4e2a\u7269\u54c1 \u5982\u679c\u624b\u4e0a\u7684\u7269\u54c1\u5927\u4e8e\u7b49\u4e8e 1 \u5411\u4e0a\u8df3\u8f6c 1 \u884c \u540c\u6837\u4fdd\u5b58\u4e0b\u4e00\u5929\u6267\u884c\u5c31\u53ef\u4ee5\u62ff\u5230 flag \u4e86 \u5269\u4e0b\u7684\u4e24\u4e2a\u770b\u8d77\u6765\u5927\u6982\u662f\u901a\u8fc7\u6e90\u7801\u6765\u63a8\u6d4b\u51fa\u83dc\u8c31\u7684\u751f\u6210\u65b9\u6cd5\uff0c\u7136\u540e\u7f16\u5199\u76f8\u5e94\u7684\u6307\u4ee4\uff0c\u592a\u96be\u4e86\uff0c\u4e0d\u4f1aqwq Micro World \u00b6 \u5b87\u5b99\u4e2d\u67d0\u4e00\u7247\u6781\u5176\u5fae\u5c0f\u7684\u533a\u57df\u91cc\u7684\u7c92\u5b50\u88ab\u4e00\u80a1\u795e\u79d8\u529b\u91cf\u521d\u59cb\u5316\u8bbe\u7f6e\u6210\u4e86 flag \u7684\u5f62\u72b6\uff0c\u7a0b\u5e8f\u5fe0\u5b9e\u5730\u8bb0\u5f55\u4e86\u4e00\u6bb5\u65f6\u95f4\u4e4b\u540e\u8fd9\u7247\u533a\u57df\u7684\u7c92\u5b50\u8fd0\u52a8\u60c5\u51b5\u3002 \u62ff\u5230\u4e86 exe \u6587\u4ef6\uff0c\u770b\u8d77\u6765\u633a\u7cbe\u81f4\uff0c\u8fd0\u884c\u8d77\u6765\u662f\u4e00\u4e9b\u70b9\u8fd0\u52a8\u78b0\u649e\u7684\u573a\u666f \u62d6\u5230 IDA \u91cc\u770b\u770b\uff0c\u53d1\u73b0\u4e86 __main__ \u4ee5\u53ca .rdata \u91cc\u4e00\u4e9b py \u6709\u5173\u7684\u5b57\u7b26\u4e32\uff1a \u6240\u4ee5\u63a8\u6d4b\u662f\u4f7f\u7528 python \u7f16\u5199\u7684\uff0c\u7136\u540e\u7528 pyinstaller \u6253\u5305 \u8fd9\u6837\u7684\u8bdd\u8bd5\u7740\u7528 pyinstxtractor \u89e3\u5305 .exe\uff0c\u6210\u529f\u5f97\u5230\u4e00\u4e2a\u6587\u4ef6\u5939 \u91cc\u9762\u662f\u4e00\u5806 .pyc .pyd .dll \u6587\u4ef6\uff0c\u4ece\u540d\u5b57\u5c31\u53ef\u4ee5\u770b\u51fa\u5927\u90e8\u5206\u662f import \u7684\u5305\uff0c\u53ea\u6709\u4e00\u4e2a\u7279\u522b\u7684 2.pyc \u6240\u4ee5\u8fd9\u4e2a\u5e94\u8be5\u5c31\u662f\u7f16\u8bd1\u540e\u7684\u6e90\u7801\u4e86 \u63a5\u4e0b\u6765\u7528 uncompyle6 \u6765\u53cd\u7f16\u8bd1 pyc \u6587\u4ef6\uff0c\u8f93\u51fa\u5f97\u5230\u4e86\u6e90\u7801 2.py \u5c1d\u8bd5\u8fd0\u884c\uff0c\u53d1\u73b0\u8dd1\u8d77\u6765\u4e4b\u540e\u53ea\u6709\u4e00\u4e2a\u70b9\u5728\u8fd0\u52a8\uff0c\u5e94\u8be5\u662f\u53cd\u7f16\u8bd1\u65f6\u51fa\u4e86\u4e9b\u95ee\u9898 \u4e8e\u662f\u5f00\u59cb\u770b\u6e90\u7801 \u57fa\u672c\u4e0a\u7b80\u5355\u8bf4\u5c31\u662f\uff0c\u521d\u59cb\u6709\u4e00\u4e9b\u6570\u636e\uff0c\u8868\u793a\u6bcf\u4e2a\u70b9\u7684\u4f4d\u7f6e\u548c\u901f\u5ea6\uff0c\u7136\u540e\u8fd0\u884c\uff0c\u6bcf\u6b21\u8fd0\u884c\u90fd\u68c0\u6d4b\u78b0\u649e\uff0c\u7136\u540e\u83b7\u5f97\u65b0\u7684\u70b9\u4f4d\u7f6e\uff0c\u518d\u7ed8\u5236\u51fa\u6765 \u8c03\u8bd5\u4e00\u4e0b\uff0c\u8f93\u51fa\u6bcf\u6b21\u7684 pointlist\uff0c\u53d1\u73b0\u7b2c\u4e00\u6b21\u662f\u6240\u6709\u70b9\uff0c\u7b2c\u4e8c\u6b21\u53d8\u62102\u4e2a\uff0c\u7b2c\u4e09\u6b21\u5f80\u540e\u5c31\u53ea\u6709\u4e00\u4e2a\u4e86 \u6240\u4ee5\u95ee\u9898\u5927\u6982\u5c31\u51fa\u5728\u4e86 next_pos_list \u51fd\u6570\uff1a def next_pos_list ( Pointlist ): pointlist = [] for i in range ( len ( Pointlist )): for point in Pointlist [ i + 1 :]: times = checkcrush ( Pointlist [ i ], point ) if times != None : a , b = get_new_point ( times , Pointlist [ i ], point ) pointlist . extend ([ a , b ]) Pointlist [ i ] . flag = 0 point . flag = 0 else : for item in Pointlist : if item . flag != 0 : pointlist . append ( Point (( item . x + item . vx , item . y + item . vy ), item . vx , item . vy )) for poi in pointlist : poi . x = poi . x % WIDTH poi . y = poi . y % HEIGHT else : return pointlist \u4ed4\u7ec6\u8bfb\u4e00\u8bfb\uff0c\u53ef\u4ee5\u53d1\u73b0\u8fd9\u91cc\u9762\u7684 for-else \u5757\u5f88\u5947\u602a\uff0c\u5bfc\u81f4\u5faa\u73af\u7ed3\u675f\u548c return \u90fd\u65e9\u4e86\uff0c\u6240\u4ee5\u6839\u636e\u51fd\u6570\u7684\u610f\u601d\u6539\u4e00\u6539\uff1a def next_pos_list ( Pointlist ): pointlist = [] for i in range ( len ( Pointlist )): for point in Pointlist [ i + 1 :]: ... for item in Pointlist : ... return pointlist \u8fd9\u6837\u5c31\u53ef\u4ee5\u6210\u529f\u8fd0\u884c\u4e86 \u4f46\u662f\u753b\u9762\u4ecd\u7136\u662f\u6742\u4e71\u7684\u3002\u56e0\u4e3a\u9898\u91cc\u8bf4\u4e86 \u201c\u8bb0\u5f55\u4e86 \u4e00\u6bb5\u65f6\u95f4\u4e4b\u540e \u8fd9\u7247\u533a\u57df\u7684\u7c92\u5b50\u8fd0\u52a8\u60c5\u51b5\u201d \u6240\u4ee5\u9700\u8981\u5c06\u8f68\u8ff9\u5f80\u524d\u63a8\uff0c\u6700\u65b9\u4fbf\u7684\u65b9\u6cd5\u5c31\u662f\u66f4\u6539\u6bcf\u4e2a\u70b9\u7684\u901f\u5ea6\u65b9\u5411\uff1a Pointlist = [] for item in list_ : Pointlist . append ( Point (( item [ 0 ], item [ 1 ]), - item [ 2 ], - item [ 3 ])) \u8fd0\u884c\u540e\u7b49\u5f85\u4e00\u5c0f\u4f1a\u513f\u5c31\u53ef\u4ee5\u770b\u5230\u70b9\u9010\u6e10\u6709\u5e8f\uff0c\u5728\u67d0\u4e00\u523b\u6c47\u6210\u4e86 flag\uff1a \u867d\u7136\u4e0d\u592a\u6e05\u6670\uff0c\u4f46\u662f\u4e5f\u53ef\u4ee5\u731c\u4e2a\u5927\u6982 \u9635\u5217\u6062\u590d\u5927\u5e08 \u00b6 \uff08\u8fd9\u9898\u6574\u6574\u505a\u4e86\u6211\u4e24\u5929\u591a\uff0c\u6bcf\u5929\u665a\u4e0a\u90fd\u5bf9\u7740\u78c1\u76d8\u9635\u5217\u2026\u2026\uff09 \u4ee5\u4e0b\u662f\u4e24\u4e2a\u538b\u7f29\u5305\uff0c\u5206\u522b\u662f\u4e00\u4e2a RAID 0 \u9635\u5217\u7684\u78c1\u76d8\u538b\u7f29\u5305\uff0c\u548c\u4e00\u4e2a RAID 5 \u9635\u5217\u7684\u78c1\u76d8\u538b\u7f29\u5305\uff0c\u5bf9\u5e94\u672c\u9898\u7684\u4e24\u5c0f\u95ee\u3002\u4f60\u9700\u8981\u89e3\u6790\u5f97\u5230\u6b63\u786e\u5b8c\u6574\u7684\u78c1\u76d8\u9635\u5217\uff0c\u6302\u8f7d\u7b2c\u4e00\u4e2a\u5206\u533a\u540e\u5728\u8be5\u5206\u533a\u6839\u76ee\u5f55\u4e0b\u4f7f\u7528 Python 3.7 \u6216\u4ee5\u4e0a\u7248\u672c\u6267\u884c getflag.py \u811a\u672c\u4ee5\u83b7\u53d6 flag\u3002\u78c1\u76d8\u6570\u636e\u4fdd\u8bc1\u65e0\u635f\u574f\u3002 RAID 5 \u00b6 \u867d\u7136 RAID 5 \u662f\u7b2c\u4e8c\u95ee\uff0c\u800c\u4e14\u5206\u6570\u9ad8\uff0c\u4f46\u662f\u66f4\u597d\u505a\uff0c\u800c\u4e14\u505a\u51fa\u7684\u4eba\u4e5f\u591a\u3002 \u56e0\u4e3a\u6570\u636e\u4fdd\u8bc1\u65e0\u635f\u574f\uff0c\u6240\u4ee5\u8981\u505a\u7684\u4ec5\u4ec5\u662f\u627e\u51fa\u4e94\u4e2a\u78c1\u76d8\u7684\u987a\u5e8f\u548c\u5757\u5927\u5c0f \u987a\u5e8f\u53ef\u4ee5\u5148\u7b80\u5355\u5730\u770b\u770b strings *.img \u8f93\u51fa\u7684\u5185\u5bb9 \u9010\u4e2a\u6587\u4ef6\u770b\uff0c\u53ef\u4ee5\u53d1\u73b0\u6bcf\u4e2a\u6587\u4ef6\u6bd4\u8f83\u9760\u524d\u7684\u5730\u65b9\u4f1a\u6709\u4e00\u6bb5\u662f git \u5386\u53f2\u8bb0\u5f55\u7684\u4e00\u90e8\u5206: \u6839\u636e\u91cc\u9762\u7684\u65f6\u95f4\u53ef\u4ee5\u63a8\u65ad\u51fa\u78c1\u76d8\u7684\u987a\u5e8f\u5927\u81f4\u662f\uff1a Qj... -> 60... -> 3R... -> Ir... -> 3D... \u53ea\u662f\uff0c\u8fd9\u4e2a\u987a\u5e8f\u5e94\u8be5\u662f\u4e00\u4e2a\u73af\uff0c\u8c01\u5728\u7b2c\u4e00\u8fd8\u6ca1\u533a\u5206\u51fa\u6765 \u5728\u770b\u6bcf\u4e2a\u6587\u4ef6\u7684\u5934\u90e8\uff0c\u53ea\u6709 60... \u548c 3R... \u6709 \u201cEFI PART\u201d: \u6240\u4ee5\u5e94\u8be5\u662f\u4e00\u4e2a\u5728\u5f00\u5934\uff0c\u4e00\u4e2a\u5728\u7ed3\u5c3e\u3002\u6240\u4ee5\u6700\u7ec8\u7684\u987a\u5e8f\u662f\uff1a 3R... -> Ir... -> 3D... -> Qj... -> 60... \u7136\u540e\u9700\u8981\u627e\u5230\u5757\u5927\u5c0f \u76f4\u63a5\u4e22\u5230 DiskGenius \u91cc\u7ec4\u5efa\u865a\u62df RAID\uff0c\u9009\u5de6\u540c\u6b65\uff0c\u7136\u540e\u53ef\u4ee5\u8bd5\u51fa\u6765\u5f53\u5757\u5927\u5c0f\u662f 64k \u7684\u65f6\u5019\u6b63\u597d\u53ef\u4ee5\u62fc\u51fa\u5b8c\u6574\u78c1\u76d8 \u7136\u540e\u514b\u9686\u78c1\u76d8\u751f\u6210 img \u6587\u4ef6\uff0c\u518d\u6302\u8f7d\uff0c\u8fdb\u5165\uff0c\u6267\u884c getflag.py \u5c31\u5f97\u5230\u4e86 flag RAID 0 \u00b6 \u5728\u505a RAID 5 \u7684\u65f6\u5019\u8fd8\u53d1\u73b0\u4e86\u4e00\u4e2a\u53eb Raid Reconstructor \u7684\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u7206\u7834 RAID \u9635\u5217\u987a\u5e8f\u548c\u5757\u5927\u5c0f \u6240\u4ee5\u8fd9\u95ee\u4e5f\u5c31\u61d2\u5f97\u770b\u4e86\uff0c\u76f4\u63a5\u4e22\u7ed9 Raid Reconstructor \u6765\u7206\u7834\uff0c\u5f97\u5230\u6700\u63a8\u8350\u7684\u987a\u5e8f\uff1a wl. -> jC. -> 1G. -> 5q. -> d3. -> eR. -> RA. -> ID. \u548c\u5757\u5927\u5c0f 128k \u7136\u540e\u76f4\u63a5\u7528 Raid Reconstructor \u7684 Copy \u5bfc\u51fa img \u6587\u4ef6\uff0c\u63d0\u53d6\u540e\u53c8\u5f97\u5230\u4e00\u4e2a\u65b0\u7684 img \u6587\u4ef6 \u901a\u8fc7 file \u53ef\u4ee5\u770b\u5230\u7ed3\u679c\u7684\u6587\u4ef6\u7cfb\u7edf\u662f XFS $ file MyDisk.img MyDisk.img: SGI XFS filesystem data ( blksz 4096 , inosz 512 , v2 dirs ) \u4f46\u662f\u59cb\u7ec8\u65e0\u6cd5\u6302\u8f7d\uff08\u641e\u4e86\u4e00\u5929\uff09 \u53ef\u80fd\u662f Raid Reconstructor \u7684\u95ee\u9898\uff0c\u6240\u4ee5\u53c8\u7528 DiskGenius \u8bd5\u4e86\u4e0b \u56e0\u4e3a win \u548c DiskGenius \u8bfb\u4e0d\u4e86 XFS \u6587\u4ef6\u7cfb\u7edf\uff0c\u6240\u4ee5\u62fc\u8d77\u6765\u4e4b\u540e\u76f4\u63a5\u514b\u9686\u51fa img \u6587\u4ef6 \u7136\u540e\u62d6\u5230 Kali Linux \u91cc\u6302\u8f7d\uff0c\u6210\u529f\u6302\u8f7d\u540e\u8fdb\u5165\u3001\u8fd0\u884c getflag.py \u5c31\u5f97\u5230\u4e86 flag \u52a9\u8bb0\u8bcd \u00b6 \u9898\u76ee\u6709\u6548\u5185\u5bb9\uff1a \u4f60\u7684\u5ba4\u53cb\u7ec8\u4e8e\u8fde\u591c\u8d76\u5b8c\u4e86\u4ed6\u7684 Java \u8bed\u8a00\u7a0b\u5e8f\u8bbe\u8ba1\u7684\u8bfe\u7a0b\u5927\u4f5c\u4e1a\u3002\u770b\u8d77\u6765\u4ed6\u4f7f\u7528 Java 17 \u5199\u4e86\u4e00\u4e2a\u4fdd\u5b58\u52a9\u8bb0\u8bcd\u7684\u540e\u7aef\uff0c\u5f53\u7136\u8fd8\u6709\u914d\u5957\u7684\u524d\u7aef\u3002\u52a9\u8bb0\u8bcd\u7531\u56db\u4e2a\u82f1\u6587\u5355\u8bcd\u7ec4\u6210\uff0c\u6bcf\u4e2a\u7528\u6237\u6700\u591a\u4fdd\u5b58 32 \u6761\u3002 \u4f60\u4ece\u4ed6\u5145\u6ee1\u6fc0\u60c5\u5374\u53c8\u5939\u6742\u4e0d\u6e05\u7684\u8868\u8ff0\u4e2d\u5f97\u77e5\uff0c\u4ed6\u4f3c\u4e4e\u8fd8\u4e3a\u6b64\u4e13\u95e8\u5728\u5927\u4f5c\u4e1a\u91cc\u85cf\u4e86\u4e24\u4e2a flag\uff1a\u5f53\u8bbf\u95ee\u5ef6\u8fdf\u8fbe\u5230\u4e24\u4e2a\u7279\u6b8a\u7684\u9608\u503c\u65f6\uff0cflag \u4fbf\u4f1a\u6253\u5370\u51fa\u6765\uff0c\u5c4a\u65f6\u4f60\u4fbf\u53ef\u4ee5\u62ff\u7740 flag \u8ba9\u4f60\u7684\u5ba4\u53cb\u8bf7\u4f60\u5403\u4e00\u987f\u5927\u9910\u3002 \u4e0b\u8f7d\u5230\u6e90\u7801\u540e\u7ffb\u4e00\u7ffb\uff0c\u6709\u7528\u7684\u5c31\u53ea\u6709 Phrase.java \u548c Instance.java \u5176\u4e2d Phrase.java \u5b9a\u4e49\u4e86 Phrase\uff0c\u5176\u4e2d\u91cd\u8f7d\u4e86 equals \u65b9\u6cd5\uff0c\u5176\u4e2d\u6709\uff1a try { TimeUnit . MILLISECONDS . sleep ( EQUALS_DURATION_MILLIS ); // 20ms // TODO: remove it since it is for debugging } catch ( InterruptedException e ) { throw new RuntimeException ( e ); } \u6240\u4ee5\u5728\u6bcf\u6b21\u6bd4\u8f83\u76f8\u7b49\u7684\u65f6\u5019\u5c31\u4f1a sleep 20ms \u800c Instance.java \u7684 post \u65b9\u6cd5\u4e2d\u5bf9\u4e8e\u6bcf\u6b21\u7684\u8f93\u5165\uff0c\u904d\u5386\u8f93\u5165\u7684\u5217\u8868\uff0c\u7136\u540e\u9010\u4e2a\u52a0\u8fdb HashMap \u4e2d \u5728\u52a0\u5165 HashMap \u7684\u65f6\u5019\u5c31\u6d89\u53ca\u5230\u5224\u65ad\u662f\u5426\u76f8\u7b49 \u800c\u6700\u7ec8\u4f1a\u5224\u65ad\u5728\u5b8c\u6210\u524d\u540e\u7684\u603b\u7684\u65f6\u95f4\u95f4\u9694\u662f\u591a\u5c11\uff0c\u5982\u679c\u5927\u4e8e 600ms \u5c31\u63d0\u53d6\u51fa\u7b2c\u4e00\u4e2a flag\uff1a var modified = 0 ; var before = System . nanoTime (); for ( var i = 0 ; i < input . length () && i < MAX_PHRASES && phrases . size () < MAX_PHRASES ; ++ i ) { var text = input . optString ( i , \"\" ). toLowerCase ( Locale . ENGLISH ); modified += phrases . add ( Phrase . create ( this . mnemonics , text , token )) ? 1 : 0 ; // \u8fd9\u91cc\u4f1a sleep } var after = System . nanoTime (); var duration = TimeUnit . MILLISECONDS . convert ( after - before , TimeUnit . NANOSECONDS ); if ( duration > FLAG1_DURATION_MILLIS ) { // 600ms token . addFlag ( 1 , flag -> output . put ( \"flag1\" , flag )); } \u800c\u5728\u7f51\u9875\u4e2d\u6dfb\u52a0\u6761\u76ee\u7684\u65f6\u5019\uff0c\u4e00\u6b21\u53ea\u80fd\u6dfb\u52a0\u4e00\u6761\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a POST \u91cc\u9762\u53ea\u6709\u4e00\u4e2a Phrase \u4f46\u662f\u6e90\u7801\u4e2d\u6709\u4e00\u4e2a\u5faa\u73af\uff0c\u904d\u5386\u6574\u4e2a input\uff0c\u6240\u4ee5\u4e00\u4e2a POST \u91cc\u7684\u5185\u5bb9\u5176\u5b9e\u662f\u4e00\u4e2a\u5217\u8868 \u6240\u4ee5\u53ef\u4ee5\u7528 BurpSuite \u83b7\u53d6 POST \u7136\u540e\u66f4\u6539\u4e00\u4e0b\u5185\u5bb9\u518d\u53d1\u9001\u51fa\u53bb\uff08\u5148 random \u4e00\u4e2a\uff0c\u7136\u540e add\uff09 \u6839\u636e flag \u91cc\u7684\u63d0\u793a\uff0c\u6b63\u89e3\uff08\u7b2c\u4e8c\u987f\u5927\u9910\uff09\u5e94\u8be5\u662f\u4f7f\u7528\u54c8\u5e0c\u78b0\u649e\uff0c \u4f46\u662f\u4e0d\u4f1a \u9a6c\u8d5b\u514b \u00b6 \uff08\u8fd9\u9053\u9898\u5df2\u7ecf\u505a\u7834\u9632\u4e86\uff0c\u672c\u4ee5\u4e3a\u662f\u4e2a\u9752\u94dc\uff0c\u7ed3\u679c\u662f\u4e2a\u738b\u8005\u2026\u2026\uff09 \u6211\u505a\u7684\u80af\u5b9a\u4e0d\u662f\u6b63\u89e3\uff0c\u5229\u7528\u4e8c\u7ef4\u7801\u7ea0\u9519\u80fd\u529b\u52c9\u5f3a\u62ff\u5230\u4e86 flag\uff0c\u6240\u4ee5\u5c31\u4e0d\u8be6\u7ec6\u5199 writeup \u4e86\uff0c\u4e3b\u8981\u8fd8\u662f\u8981\u770b\u5b98\u65b9 wp\uff08\u9003 \u5927\u6982\u6b65\u9aa4\u5c31\u662f\uff1a \u8bfb\u56fe\u7247 \u628a\u5df2\u77e5\u7684\u50cf\u7d20\u63d0\u53d6\u51fa\u6765 \u628a\u56db\u4e2a\u5c0f\u5b9a\u4f4d\u5757\u586b\u4e0a \u6328\u4e2a\u9a6c\u8d5b\u514b\u5757\u5bfb\u627e\u4f7f\u8fd8\u539f\u7684\u6570\u636e\u5e73\u5747\u6570\u4e0e\u539f\u9a6c\u8d5b\u514b\u503c\u5dee\u7684\u7edd\u5bf9\u503c\u5c0f\u4e8e1\u7684\u586b\u8865\u65b9\u6cd5 \u5982\u679c\u53ea\u6709\u4e00\u79cd\u5c31\u586b\u4e0a\uff0c\u5e76\u4e14\u6807\u6ce8\u5df2\u7ecf\u586b\u597d\uff0c\u4ee5\u540e\u4e0d\u518d\u641c\u5bfb \u5982\u679c\u6709\u591a\u79cd\u5c31\u5148\u653e\u4e0b\u4e0d\u586b \u91cd\u590d4\u7684\u8fc7\u7a0b\uff0c\u8fd9\u662f\u8fd8\u4f1a\u6709\u552f\u4e00\u786e\u5b9a\u7684\u586b\u8865\u65b9\u6848\u3002\u91cd\u590d4\u6b21\u5927\u6982\u5c31\u4e0d\u5269\u552f\u4e00\u89e3\u4e86 \u8fd9\u65f6\u91cd\u590d4\uff0c\u627e\u51fa\u4ec5\u67092\u4e2d\u586b\u8865\u65b9\u6cd5\u7684\uff0c\u9009\u8bef\u5dee\u6700\u5c0f\u7684\u586b\u4e0a \u7136\u540e\u518d\u91cd\u590d4 \u7136\u540e\u91cd\u590d6 \u7136\u540e\u91cd\u590d4 \u8fd9\u65f6\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u8fd8\u539f\u5f97\u5dee\u4e0d\u591a\u4e86\uff0c\u5269\u4e0b\u7684\u4e0d\u7ba1\u76f4\u63a5\u626b\u7801\u4e5f\u53ef\u4ee5\u626b\u51fa flag \u4e86 \u770b\uff0c\u505a\u6cd5\u5f88\u70c2\u5bf9\u5427 minecRaft \u00b6 kk \u540c\u5b66\u5f88\u559c\u6b22\u73a9 Minecraft\uff0c\u4ed6\u6700\u8fd1\u6536\u5230\u4e86\u4e00\u5f20 MC \u5730\u56fe\uff0c\u5730\u56fe\u91cc\u9762\u6709\u4e09\u76cf\u706f\uff0c\u8fd8\u6709\u5f88\u591a\u5947\u5947\u602a\u602a\u7684\u538b\u529b\u677f\u3002 \u4f46\u4ed6\u53d1\u73b0\u8fd9\u4e9b\u706f\u597d\u50cf\u4e0d\u592a\u7b26\u5408 MC \u7535\u78c1\u5b66\uff08Red stone\uff09\uff0c\u4f60\u80fd\u5e2e\u4ed6\u628a\u706f\u5168\u90e8\u70b9\u4eae\u5417\uff1f \u6ce8\uff1a\u672c\u9898\u89e3\u6cd5\u4e0e\u539f\u7248 Minecraft \u6e38\u620f\u65e0\u5173\u3002 \u8865\u5145\u8bf4\u660e\uff1aflag \u82b1\u62ec\u53f7\u5185\u4e3a\u8ba9\u4e09\u76cf\u706f\u5168\u90e8\u70b9\u4eae\u7684\u6700\u77ed\u7684\u8f93\u5165\u5e8f\u5217\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8e29\u8e0f\u538b\u529b\u677f\u8f93\u5165\u7684\u6700\u77ed\u7684\u5e8f\u5217\u4e3a abc\uff0c\u5219\u7b54\u6848\u4e3a flag{abc}\u3002 \u8fd8\u633a\u597d\u73a9\u7684\u9898\uff0c\u5728\u7f51\u9875\u4e2d\u6a21\u62df\u4e86\u4e00\u4e2amc\u51fa\u6765 \u770b\u6e90\u7801\u770b\u5230\u4e86\u5f15\u5165\u4e86 flag.js \u6587\u4ef6\uff0c\u6240\u4ee5\u53ef\u80fd\u5c31\u662f\u8981\u901a\u8fc7\u5b83\u6765\u5f97\u5230\u7b54\u6848\uff1a < script src = \"jsm/miscs/flag.js\" ></ script > \u4e5f\u53ef\u4ee5\u770b\u5230\uff0c\u6700\u7ec8\u5224\u65ad\u662f\u5426\u6b63\u786e\u662f\u901a\u8fc7\u8c03\u7528 gyflagh(input) \u662f\u5426\u4e3a true \u6765\u5224\u65ad\uff0c\u800c gyflagh \u4e5f\u5728 flag.js \u4e2d\uff0c\u6240\u4ee5\u8fd8\u662f\u8981\u770b flag.js \u4f46\u662f flag.js \u662f\u7ecf\u8fc7\u7b80\u5355\u6df7\u6dc6\u8fc7\u7684\uff0c\u8fd8\u662f\u8981\u8d39\u70b9\u65f6\u95f4\u8bfb\u4e00\u4e0b \u5176\u4e2d\u6709\u56db\u4e2a\u8f6c\u6362 Str4 Base16 \u548c Long \u7684\u51fd\u6570\u53ef\u4ee5\u7565\u6389\u4e0d\u7ba1 \u6ce8\u610f\u5230\u4e86 _0x381b() \u8fd9\u4e2a\u51fd\u6570\u91cc\u6709\u4e00\u4e2a\u5217\u8868\uff0c\u800c\u4e14\u6bd4\u8f83\u7b80\u5355\uff0c\u5176\u5b9e\u5b83\u8fd4\u56de\u7684\u5c31\u662f\u8fd9\u4e2a\u5217\u8868 ['encrypt', '33MGcQht', '6fbde674819a59bfa12092565b4ca2a7a11dc670c678681daf4afb6704b82f0c', '14021KbbewD', 'charCodeAt', '808heYYJt', '5DlyrGX', '552oZzIQH', 'fromCharCode', '356IjESGA', '784713mdLTBv', '2529060PvKScd', '805548mjjthm', '844848vFCypf', '4bIkkcJ', '1356853149054377', 'length', 'slice', '1720848ZSQDkr'] \u4f46\u662f\u5728 Console \u91cc\u9762\u8c03\u7528 _0x381b \u5f97\u5230\u7684\u5374\u662f\u4ee5 'slice' \u5f00\u5934\u3001'length' \u7ed3\u5c3e\u7684\u5217\u8868\uff0c\u5c06\u8fd9\u4e2a\u5217\u8868\u8bb0\u4e3a lst \u65b9\u4fbf\u8868\u8ff0 \u800c\u4e14\u6e90\u7801\u4e2d\u53ea\u6709\u6700\u5f00\u5934\u7684\u8c03\u7528\u533f\u540d\u51fd\u6570\u91cc\u9762\u6709 ['push'] \u548c ['shift'] \uff0c\u6240\u4ee5\u63a8\u6d4b\u8fd9\u4e2a\u533f\u540d\u51fd\u6570\u5c31\u662f\u5c06\u8fd9\u4e2a\u5217\u8868\u5faa\u73af\u53f3\u79fb\u4e24\u4e2a\u4f4d\u7f6e \u90a3\u8fd9\u4e2a\u533f\u540d\u51fd\u6570\u4e5f\u4e0d\u7528\u770b\u4e86 \u518d\u6765\u770b _0x2c9e() \u8fd9\u4e2a\u51fd\u6570\uff1a function _0x2c9e ( _0x49e6ff , _0x310d40 ) { const _0x381b4c = _0x381b (); return _0x2c9e = function ( _0x2c9ec6 , _0x2ec3bd ) { _0x2c9ec6 = _0x2c9ec6 - 0x1a6 ; let _0x4769df = _0x381b4c [ _0x2c9ec6 ]; return _0x4769df ; } , _0x2c9e ( _0x49e6ff , _0x310d40 ); } \u5176\u4e2d _0x381b4c \u662f\u521a\u521a\u8bf4\u7684\u90a3\u4e2a\u5217\u8868 lst\u3002\u7136\u540e return \u91cc\u9762\u91cd\u65b0\u5b9a\u4e49\u4e86 _0x2c9e \uff0c\u4f46\u662f\u65b0\u7684\u5b9a\u4e49\u91cc\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5e76\u6ca1\u6709\u7528\uff0c\u7136\u540e\u8c03\u7528\u8fd4\u56de\uff0c\u6240\u4ee5\u6574\u4e2a\u51fd\u6570\u5c31\u76f8\u5f53\u4e8e\uff1a function _0x2c9e ( _0x2c9ec6 , ...) { _0x2c9ec6 = _0x2c9ec6 - 0x1a6 ; return lst [ _0x2c9ec6 ]; } 0x1a6 \u662f 422\uff0c\u6240\u4ee5\u6574\u4e2a\u51fd\u6570\u4e5f\u5c31\u76f8\u5f53\u4e8e function(x) { return lst[x - 422]; } \u540c\u65f6\u6839\u636e\u7b2c\u4e00\u884c\uff0c\u7a0b\u5e8f\u4e2d\u6240\u6709 _0x22517d \u4e5f\u662f\u8fd9\u4e2a\u51fd\u6570 \u7136\u540e\u770b\u5224\u65ad\u7b54\u6848\u7684 gyflagh \u51fd\u6570 function gyflagh ( _0x111955 ) { const _0x50051f = _0x22517d ; let _0x3b790d = _0x111955 [ _0x50051f ( 0x1a8 )]( _0x50051f ( 0x1b7 )); if ( _0x3b790d === _0x50051f ( 0x1aa )) return !! []; return ! []; } \u6ca1\u5565\u7279\u522b\u7684\uff0c\u7ed3\u5408 lst \u53ef\u4ee5\u5f97\u5230\uff1a function gyflagh ( ans ) { if ( ans [ \"encrypt\" ]( \"1356853149054377\" ) === \"6fbde674819a59bfa12092565b4ca2a7a11dc670c678681daf4afb6704b82f0c\" ) { return true ; } return false ; } \u7136\u540e\u5c31\u53ef\u4ee5\u7ed3\u5408 lst \u4e2d\u7684\u503c\u548c\u7d22\u5f15\uff0c\u7ffb\u8bd1\u51fa\u6700\u91cd\u8981\u7684\u51fd\u6570 \u518d\u8fdb\u884c\u4e00\u4e9b\u8fd0\u7b97\uff0c\u7528\u6ce8\u91ca\u6807\u6ce8\u4e00\u4e0b\u5df2\u77e5\u7684\u503c\u5c31\u53ef\u4ee5\u5f97\u5230\uff1a String [ \"prototype\" ][ \"encrypt\" ] = function ( key ) { // key = \"1356853149054377\" const left = new Array ( 2 ); const right = new Array ( 4 ); let res = \"\" ; ans = escape ( this ); // this := ans right = [ 909456177 , 825439544 , 892352820 , 926364468 ] for ( var i = 0 ; i < ans [ \"length\" ]; i = i + 8 ) { left [ 0 ] = Str4ToLong ( ans [ \"slice\" ]( i , i + 4 )); left [ 1 ] = Str4ToLong ( ans [ \"slice\" ]( i + 4 , i + 8 )); code ( left , right ); res = res + ( LongToBase16 ( left [ 0 ]) + LongToBase16 ( left [ 1 ])); } return res ; // 6fbde674819a59bfa12092565b4ca2a7a11dc670c678681daf4afb6704b82f0c }; \u518d\u6765\u770b code \u51fd\u6570\uff0c\u6839\u636e << 4\u3001 ^\u3001 >>> 5 \u53ef\u4ee5\u5927\u80c6\u63a8\u6d4b\u7c7b\u4f3c TEA\uff0c\u7136\u540e\u89e3\u7801\u5c31\u76f4\u63a5\u7ffb\u8fc7\u6765\u5c31\u597d\u4e86\uff1a function dec ( left , right ) { for ( var i = 2654435769 * 32 ; i != 0 ;) { left [ 1 ] -= (( left [ 0 ] << 4 ^ left [ 0 ] >>> 5 ) + left [ 0 ] ^ i + right [ i >>> 11 & 3 ]); i -= 2654435769 ; left [ 0 ] -= (( left [ 1 ] << 4 ^ left [ 1 ] >>> 5 ) + left [ 1 ] ^ i + right [ i & 3 ]); } console . log ( left ); } \u6700\u540e\u628a\u8981\u5f97\u5230\u7684 res \u5206\u5757\uff0c\u6bcf 8 \u4e2a\u4e00\u7ec4\uff1a 6fbde674 819a59bf a1209256 5b4ca2a7 a11dc670 c678681d af4afb67 04b82f0c \u7136\u540e\u4ece\u540e\u5f80\u524d\uff0c\u6bcf\u4e24\u4e2a\u6267\u884c Base16ToLong\uff0c\u7136\u540e\u4f5c\u4e3a left \u4f20\u7ed9 dec \u51fd\u6570\u89e3\u7801\uff0c\u7136\u540e\u518d LongToStr4 \u5f97\u5230\u56db\u4e2a\u5b57\u7b26: \u62fc\u8d77\u6765\u5c31\u662f flag \u4e86\uff1a flag{McWebRE_inMlnCrA1t_3a5y_1cIuop9i} \u5bc6\u7801\u751f\u6210\u5668 \u00b6 \u5c0f T \u6700\u8fd1\u53c8\u5199\u4e86\u4e00\u4e2a web \u5e94\u7528\u3002 \u4ed6\u53d1\u73b0\u5f88\u591a\u7528\u6237\u90fd\u559c\u6b22\u8bbe\u7f6e\u5f31\u5bc6\u7801\uff0c\u4e8e\u662f\u51b3\u5b9a\u8ba9\u6240\u6709\u7528\u6237\u7684\u5bc6\u7801\u90fd\u5fc5\u987b\u662f 16 \u4f4d\u957f\uff0c\u5e76\u4e14\u5404\u79cd\u7b26\u53f7\u90fd\u8981\u6709\u3002\u4e3a\u4e86\u8ba9\u5927\u5bb6\u53ef\u4ee5\u65b9\u4fbf\u751f\u6210\u8fd9\u6837\u7684\u5bc6\u7801\uff0c\u4ed6\u8fd8\u5199\u4e86\u4e00\u4e2a\u5bc6\u7801\u751f\u6210\u5668\uff0c\u8ba9\u7528\u6237\u53ef\u4ee5\u751f\u6210\u7b26\u5408\u89c4\u5219\u7684\u5bc6\u7801\u3002 \u4f46\u8fd9\u6837\u679c\u771f\u5b89\u5168\u5417\uff1f \uff08\u611f\u89c9\u8fd9\u6b21 Hackergame \u9898\u7684 tag \u90fd\u5f88\u8be1\u5f02\u3002\u8fd9\u9898\u660e\u660e\u662f misc(general) \u4e3a\u4ec0\u4e48\u6253\u4e86 binary \u7684 tag\uff09 \u770b\u5230 binary tag \u76f4\u63a5\u5148\u5f80 IDA \u91cc\u9762\u4e22\uff0c\u7136\u540e\u62a5\u9519\u4e86\uff0c\u5927\u6982\u662f\u56e0\u4e3a\u90e8\u5206 winapi \u5bfc\u5165\u4e0d\u8fdb\u53bb\u7684\u95ee\u9898\uff08\uff1f\uff09 \u7136\u540e\u5c31\u4e0d\u4f1a\u4e86\u2026\u2026 \u5bf9\u7740 IDA \u5e72\u77aa\u773c \u770b\u9898\uff0c\u9898\u76ee\u7ed9\u4e86\u4e00\u4e2a\u7f51\u7ad9\uff0c\u7528\u6765\u53d1\u5e03\u5c55\u677f\uff0c\u770b\u8d77\u6765\u53ea\u6709 admin \u7528\u6237\uff0c\u800c\u4e14\u6ca1\u6709\u6ce8\u518c\u7cfb\u7edf\uff0c\u6240\u4ee5\u5e94\u8be5\u5c31\u662f\u8981\u641e\u5230 admin \u7684\u5bc6\u7801\u4e86 \u518d\u7ec6\u770b\u7f51\u7ad9\uff0c\u7279\u610f\u63d0\u5230 \u201c\u7f51\u9875\u663e\u793a \u65f6\u95f4 \u201d\uff0c\u800c\u4e14\u5c55\u677f\u540e\u9762\u90fd\u6709\u53d1\u5e03\u65f6\u95f4\uff0c\u70b9\u8fdb admin \u7684\u7528\u6237\u9875\u9762\u53d1\u73b0\u4e5f\u6709\u6ce8\u518c\u65f6\u95f4\uff0c\u7740\u5b9e\u6709\u4e9b\u8bb8\u8be1\u5f02\uff08 \u6240\u4ee5\u65f6\u95f4\u5e94\u8be5\u662f\u4e00\u4e2a\u63d0\u793a \u800c\u5199\u4ee3\u7801\u7684\u65f6\u5019\u8bbe\u7f6e\u968f\u673a\u6570\u79cd\u5b50\u53c8\u5e38\u4ee5\u5f53\u524d\u65f6\u95f4\u4f5c\u4e3a\u79cd\u5b50\uff0c\u6240\u4ee5\u751f\u6210\u7684\u5bc6\u7801\u53ef\u80fd\u662f\u548c\u65f6\u95f4\u6709\u5173\u7cfb\u7684 \u901a\u8fc7\u8c03\u7cfb\u7edf\u65f6\u95f4\uff0c\u53ef\u4ee5\u53d1\u73b0\u5728\u540c\u4e00\u79d2\u70b9\u4e0b\u751f\u6210\uff0c\u4ea7\u751f\u7684\u5bc6\u7801\u662f\u4e00\u6837\u7684 \u6240\u4ee5\u53ea\u9700\u8981\u628a\u7cfb\u7edf\u65f6\u95f4\u8c03\u5230 admin \u7684\u6ce8\u518c\u65f6\u95f4\u5de6\u53f3\uff0c\u7136\u540e\u6bcf\u79d2\u751f\u6210\u5bc6\u7801\uff0c\u518d\u6328\u4e2a\u8f93\u8fdb\u53bb\u7206\u7834\u5373\u53ef \u6700\u540e\u5f97\u5230 2021-09-22 23:10:53 \u65f6\u751f\u6210\u7684\u5bc6\u7801 $Z=CBDL7TjHu~mEX \u5c31\u662f admin \u7684\u5bc6\u7801 \u7136\u540e\u767b\u5f55\u5373\u53ef\u5728\u201c\u6211\u7684\u201d\u91cc\u770b\u5230\u4e00\u6761\u79c1\u5bc6\u5c55\u677f\uff0c\u5185\u5bb9\u662f flag p\ud83d\ude2dq \u00b6 \u5b66\u4f1a\u5085\u91cc\u53f6\u7684\u4e00\u77ac\u95f4\uff0c\u6094\u6068\u7684\u6cea\u6c34\u6d41\u4e86\u4e0b\u6765\u3002 \u5f53\u6211\u770b\u5230\u97f3\u9891\u64ad\u653e\u5668\u4e2d\u8df3\u52a8\u7684\u9891\u8c31\u52a8\u753b\uff0c\u6708\u660e\u661f\u7a00\u7684\u591c\u665a\uff0c\u6df1\u9083\u7684\u94f6\u6cb3\uff0c\u53ea\u6709\u5929\u4f7f\u5728\u6d45\u541f\u4f4e\u5531\uff0c\u590d\u6742\u7684\u60c5\u611f\u4e8e\u6211\u773c\u4e2d\u6ea2\u51fa\uff0c\u50cf\u662f\u6c89\u5165\u4e86\u96fe\u91cc\u6726\u80e7\u7684\u6d77\u4e00\u6837\u7684\u6e29\u67d4\u3002 \u8fd9\u4e00\u523b\u6211\u624d\u77e5\u9053\uff0c\u8033\u673a\u97f3\u54cd\u4e5f\u5c31\u56fe\u4e00\u4e50\uff0c\u771f\u542c\u97f3\u4e50\u8fd8\u5f97\u9760\u773c\u775b\u3002 \uff08\u6ce8\u610f\uff1aflag \u82b1\u62ec\u53f7\u5185\u662f\u4e00\u4e2a 12 \u4f4d\u6574\u6570\uff0c\u7531 0-9 \u6570\u4f4d\u7ec4\u6210\uff0c\u6ca1\u6709\u5176\u5b83\u5b57\u7b26\u3002\uff09 \u867d\u7136\u8fd9\u9898\u662f\u5728\u5012\u6570\u7b2c\u4e09\u9898\uff0c\u8fd8\u503c 400pt\uff0c \u4f46\u4f60\u4e00\u8bf4\u5085\u91cc\u53f6\u6211\u53ef\u5c31\u4e0d\u56f0\u4e86\u55f7 \u4e0b\u8f7d\u9898\u76ee\u5305\uff0c\u6709\u4e00\u4e2a\u751f\u6210 gif \u7684 py \u4ee3\u7801\u548c\u90a3\u4e2a gif \u6587\u4ef6 \u6b63\u597d\u524d\u9762\u7684\u7535\u6ce2\u4e5f\u6709\u4e00\u6bb5\u97f3\u9891\uff0c\u53ef\u4ee5\u7528\u90a3\u4e2a\u5e26\u5165\u5230 generate_sound_visualization.py \u4e2d\u751f\u6210\u4e00\u4e2a gif\uff0c\u7136\u540e\u7528\u8fd9\u4e2a\u6765\u6d4b\u8bd5 \u518d\u4ed4\u7ec6\u770b\u4e00\u770b generate_sound_visualization.py \u8fd9\u4e2a\u6587\u4ef6 \u4e3b\u8981\u4f7f\u7528\u4e86 librosa \uff0c\u4e8e\u662f\u5c31\u53ef\u4ee5\u7ffb \u6587\u6863 \u6765\u770b\u61c2\u8fd9\u4e2a\u7a0b\u5e8f\uff1a y , sample_rate = librosa . load ( \"flag.mp3\" ) # \u4ecemp3\u4e2d\u8bfb\u53d6\u6570\u636e\u548c\u91c7\u6837\u7387 spectrogram = numpy . around ( # \u56db\u820d\u4e94\u5165\uff0c\u4f46\u4f1a\u9020\u6210\u9006\u5411\u7684\u65f6\u5019\u6709\u5c11\u8bb8\u8bef\u5dee\u5bfc\u81f4\u6742\u97f3 librosa . power_to_db ( # \u628a\u4ee5\u529f\u7387\u4e3a\u5355\u4f4d\u7684\u9891\u8c31\u56fe\u8f6c\u6362\u4e3a\u4ee5\u5206\u8d1d\u4e3a\u5355\u4f4d librosa . feature . melspectrogram ( # \u901a\u8fc7\u97f3\u9891\u6570\u636e\u548c\u91c7\u6837\u7387\u8ba1\u7b97\u6885\u5c14\u9891\u8c31 y , sample_rate , n_mels = num_freqs , n_fft = fft_window_size , hop_length = frame_step_size , window = window_function_type ) ) / quantize # \u9664\u4ee52 ) * quantize # \u4e58\u4ee52 \u7136\u540e\u53c8\u901a\u8fc7\u4e00\u4e9b numpy \u7684\u9a9a\u64cd\u4f5c\u6765\u751f\u6210\u6bcf\u4e00\u5e27\u7684\u6570\u636e\uff0c\u7136\u540e\u901a\u8fc7 array2gif \u5305\u7684 write_gif \u51fd\u6570\u6765\u751f\u6210 gif \u6240\u4ee5\u4e3b\u8981\u601d\u8def\u5c31\u662f\u628a\u6574\u4e2a\u7a0b\u5e8f \u5b8c\u6574\u5730\u9006\u8fc7\u6765 \u7531\u4e8e\u5fc5\u5e94\u6ca1\u6709\u67e5\u5230 gif2array \u7684\u5305\uff0c\u6240\u4ee5\u8bfb\u53d6 gif \u5c31\u7528\u4e86\u7ecf\u5178 PIL.Image \uff1a from PIL import Image file = Image . open ( \"flag.gif\" ) try : while True : gif_data . append ( np . array ( file )) file . seek ( file . tell () + 1 ) except : print ( \"[+] Read gif file\" ) \u7136\u540e\u662f\u89e3\u51b3\u90a3\u4e00\u5927\u6bb5 numpy \u9a9a\u64cd\u4f5c\u7684\u9006\u9a9a\u64cd\u4f5c\uff08 \u4f46\u662f\u6570\u7406\u57fa\u7840\u8fd9\u4e48\u5dee\u7684\u6211\u5f53\u7136\u662f\u4e0d\u60f3\u4ed4\u7ec6\u7814\u7a76\u4e86\uff0c\u6240\u4ee5\u76f4\u63a5\u7528\u7535\u6ce2\u90a3\u9898\u7684 radio.mp3 \u5e26\u5165\uff0c\u770b\u4e00\u770b\u8981\u5f97\u5230\u7684 spectrogram \u662f\u4ec0\u4e48\u6837\u5b50 \u8f93\u51fa\u5f97\u5230\u7684 spectrogram \u662f\uff1a [[ - 58. - 48. - 30. ... - 58. - 58. - 58. ] [ - 58. - 44. - 26. ... - 58. - 58. - 58. ] [ - 58. - 40. - 16. ... - 58. - 58. - 58. ] ... [ - 58. - 42. - 30. ... - 58. - 58. - 58. ] [ - 58. - 44. - 32. ... - 58. - 58. - 58. ] [ - 58. - 46. - 34. ... - 58. - 58. - 58. ]] \u800c\u8f6c\u7f6e\u8fc7\u6765\u662f\uff1a [[ - 58. - 58. - 58. ... - 58. - 58. - 58. ] [ - 48. - 44. - 40. ... - 42. - 44. - 46. ] [ - 30. - 26. - 16. ... - 30. - 32. - 34. ] ... [ - 58. - 58. - 58. ... - 58. - 58. - 58. ] [ - 58. - 58. - 58. ... - 58. - 58. - 58. ] [ - 58. - 58. - 58. ... - 58. - 58. - 58. ]] \u51cf\u53bb min_db=-60 \u7b2c\u4e00\u884c\u6b63\u597d\u662f 2\uff0c\u7b2c\u4e8c\u884c\u662f [12. 16. 20. ... 18. 16. 14.] \u518d\u5bf9\u5e94\u5230\u751f\u6210\u7684 gif \u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u770b\u51fa gif \u7684\u7b2c\u4e00\u5e27\u6bcf\u4e2a\u77e9\u5f62\u7684\u9ad8\u5ea6\u90fd\u662f 2 \u800c\u7b2c\u4e8c\u5e27\u6bcf\u4e2a\u77e9\u5f62\u7684\u9ad8\u5ea6\u4e5f\u6070\u597d\u662f\u521a\u5f97\u51fa\u7684\u90a3\u7ec4\u6570 \u6240\u4ee5\u8981\u5f97\u5230\u7684 spectrogram \u5c31\u662f gif \u6bcf\u4e00\u5e27\u6240\u6709\u77e9\u5f62\u7684\u9ad8\u5ea6\u6784\u6210\u7684\u77e9\u9635\u7684\u8f6c\u7f6e \u518d\u7ed3\u5408\u6e90\u7801\uff1a numpy . array ([ [ red_pixel if freq % 2 and round ( frame [ freq // 2 ]) > threshold else white_pixel for threshold in list ( range ( min_db , max_db + 1 , quantize ))[:: - 1 ] ] for freq in range ( num_freqs * 2 + 1 ) ]) \u53ef\u4ee5\u770b\u51fa\uff0c\u6bcf\u4e2a\u77e9\u5f62\u52a0\u4e0a\u5de6\u8fb9\u7684\u7a7a\u683c\u6b63\u597d\u662f 4 \u4e2a\u50cf\u7d20\uff0c\u6240\u4ee5\u6bcf\u56db\u5217\u8bfb\u53d6\u6700\u540e\u4e00\u5217\u5373\u53ef\uff1a spectrogramT = [] for data in gif_data : res = [] for ind , line in enumerate ( data . transpose ()): # \u5c06\u6bcf\u4e00\u5e27\u8f6c\u7f6e\uff0c\u65b9\u4fbf\u8ba1\u7b97 num = sum ( line ) # \u8ba1\u7b97\u6bcf\u4e2a\u77e9\u5f62\u7684\u9ad8\u5ea6\uff08\u8f6c\u7f6e\u540e\u662f\u5bbd\u5ea6\uff09 if ind % 4 == 3 : res . append ( num + min_db ) # \u5f97\u5230\u7684\u6570\u8981\u52a0\u4e0a-60\u624d\u7b26\u5408\u89c4\u77e9 spectrogramT . append ( res ) spectrogram = np . array ( spectrogramT ) . transpose () # \u5f97\u5230\u7684\u7ed3\u679c\u8f6c\u7f6e\u4e00\u4e0b \u8fd9\u6837\u5c31\u5f97\u5230\u4e86\u6885\u5c14\u9891\u8c31\u56fe\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u5bf9 librosa \u7684\u90e8\u5206\u8fdb\u884c\u9006\u8fc7\u7a0b\u4e86 \u7ffb librosa \u7684\u6587\u6863\uff0c\u6709 power_to_db \u5f53\u7136\u4e5f\u5c31\u6709 db_to_power \u800c\u4e14\u7c7b\u4f3c\u4e8e melspectrogram \u51fd\u6570\u5728 librosa.feature \u4e2d\uff0c\u53ef\u4ee5\u4e13\u95e8\u770b feature \u90e8\u5206\u7684\u6587\u6863 \u7ffb\u5230\u4e86 inverse \u90e8\u5206\uff0c\u53ef\u4ee5\u770b\u5230\u6709\u4e00\u4e2a\u51fd\u6570 librosa.feature.inverse.mel_to_audio \u53ef\u4ee5\u76f4\u63a5\u628a\u6885\u5c14\u9891\u8c31\u56fe\u4e13\u4e3a\u97f3\u9891\u6570\u636e\uff0c\u6240\u4ee5\u5c31\u7528\u5b83\u4e86\uff1a y = librosa . feature . inverse . mel_to_audio ( librosa . db_to_power ( spectrogram ), # \u4e58\u4e8c\u9664\u4e8c\u6ca1\u4ec0\u4e48\u5927\u7528\uff0c\u800c\u4e14\u5f71\u54cd\u6548\u679c\uff0c\u5c31\u5220\u4e86 sample_rate , n_iter = num_freqs , # \u91c7\u6837\u7387\u9898\u76ee\u63d0\u4f9b\u4e86\uff0c\u662f 22050Hz n_fft = fft_window_size , hop_length = frame_step_size , window = window_function_type , ) \u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u8fd8\u539f\uff0c\u6700\u540e\u662f\u8f93\u51fa\uff0c\u4f46\u662f\u5e76\u6ca1\u5728 librosa \u4e2d\u627e\u5230\u97f3\u9891\u8f93\u51fa\u7684\u51fd\u6570\uff0c\u6240\u4ee5\u5c31\u7528\u4e86\u7ecf\u5178 soundfile \uff1a import soundfile as sf sf . write ( \"flag.wav\" , y , sample_rate ) \u7136\u540e\u6253\u5f00\u542c\u5c31\u884c\u4e86\uff0c\u9898\u76ee\u8bf4\u4e86\u662f\u4e2a 12 \u4f4d\u6570\uff0c\u6240\u4ee5\u5269\u4e0b\u7684\u5c31\u662f\u82f1\u8bed\u542c\u529b\u4e86\uff0c\u7ffb\u8bd1\u8fc7\u6765\u7684\u6570\u5b57\u5c31\u662f flag \u4e86 Reference \u00b6 Hackergame \u56fd\u9645\u822a\u7a7a\u65e0\u7ebf\u7535\u901a\u8baf26\u4e2a\u82f1\u6587\u5b57\u6bcd\u8bfb\u6cd5 - \u77e5\u4e4e LUG@USTC \u5b98\u7f51 Wayback Machine archive.org SIGBOVIK 2021 \u767e\u5ea6\u5168\u666f\u5730\u56fe \u4f2a\u9020http\u8bf7\u6c42ip\u5730\u5740 - \u535a\u5ba2\u56ed GraphQL\u5b98\u7f51 \u3001 GraphiQL \u3001 GraphQL Voyager \u3010\u5b89\u5168\u8bb0\u5f55\u3011\u73a9\u8f6cGraphQL - DVGA\u9776\u573a\uff08\u4e0a\uff09- \u77e5\u4e4e librosa\u6587\u6863 PySoundFile\u6587\u6863 Wilson's theorem - wikipedia BUU-RSA [RoarCTF2019]babyRSA - CSDN Euler's totient function - wikipedia LUKS2 doc pdf 10 Linux cryptsetup Examples for LUKS Key Management pyinstxtractor uncompyle6","title":"Hackergame 2021"},{"location":"writeups/hackergame2021/#hackergame-2021-writeup","text":"\u53c2\u52a0\u7684\u7b2c\u4e00\u4e2a\u53ef\u4ee5\u7b97\u662f CTF \u7684\u6bd4\u8d5b\u3002\u8fd9\u91cc\u662f\u6211\u505a\u51fa\u7684\u9898\u7684 writeup\uff0c\u535a\u5ba2\u7248\u5728\uff1a https://blog.tonycrane.cc/p/c05d7b7c.html \u5b98\u65b9 writeup","title":"Hackergame 2021 Writeup"},{"location":"writeups/hackergame2021/#_1","text":"\u4e3a\u4e86\u80fd\u8ba9\u5927\u5bb6\u987a\u5229\u7b7e\u5230\uff0c\u547d\u9898\u7ec4\u628a\u6bcf\u4e00\u79d2\u7684 flag \u90fd\u8bb0\u5f55\u4e0b\u6765\u5236\u6210\u4e86\u65e5\u8bb0\u672c\u7684\u4e00\u9875\u3002\u4f60\u53ea\u9700\u8981\u6253\u5f00\u65e5\u8bb0\uff0c\u7ffb\u5230 Hackergame 2021 \u6bd4\u8d5b\u8fdb\u884c\u671f\u95f4\u7684\u4efb\u4f55\u4e00\u9875\u5c31\u80fd\u5f97\u5230 flag\uff01 \u5f88\u660e\u786e\uff0c\u8fdb\u5165\u7f51\u5740\u540e\u4e00\u76f4\u70b9 Next \u7ffb\u5230\u6bd4\u8d5b\u65f6\u95f4\u5c31\u597d\u4e86\uff08\u8bef \u770b\u5230\u4e86 URI \u91cc\u6709 ?page=... \uff0c\u6240\u4ee5\u4e5f\u61d2\u5f97\u8ba1\u7b97\u4e86\uff0c\u624b\u52a8\u4e8c\u5206\uff0c\u5927\u6982 ?page=1635000000 \u5de6\u53f3\u5c31\u53ef\u4ee5\u770b\u5230 flag \u4e86 \u8d5b\u540e\u624d\u53cd\u5e94\u8fc7\u6765\u539f\u6765\u662f UNIX \u65f6\u95f4\u6233","title":"\u7b7e\u5230"},{"location":"writeups/hackergame2021/#_2","text":"\u4e5f\u5f88\u660e\u786e\uff0c\u76f4\u63a5\u628a\u53f3\u4fa7\u6321\u4f4f\u7684 flag \u90e8\u5206\u5bf9\u5e94\u5de6\u8fb9\u7684\u5341\u516d\u8fdb\u5236\u6570\u6362\u7b97\u6210\u5341\u8fdb\u5236\uff0c\u7136\u540e\u6839\u636e ASCII \u7801\u8f6c\u6210\u5b57\u7b26\u3002\u6216\u8005\u76f4\u63a5\u628a\u5de6\u4fa7\u6284\u8fdb Hex Friend \u4e5f\u53ef\u4ee5\u76f4\u63a5\u5f97\u5230\u53f3\u4fa7\u7684flag\u3002 \uff08**\u5f53\u65f6\u8fd9\u9898\u6284\u4e32\u884c\u4e86\u4e24\u4e09\u6b21\u2026\u2026\uff09","title":"\u8fdb\u5236\u5341\u516d\u2014\u2014\u53c2\u4e0a"},{"location":"writeups/hackergame2021/#_3","text":"\u5f53\u7136\uff0c\u5982\u679c\u53ea\u662f\u8fd9\u6837\u8fd8\u8fdc\u8fdc\u4e0d\u591f\u3002\u9075\u4f9d\u53f2\u79f0\u201c\u8001\u7239\u201d\u7684\u4e0a\u53e4\u5148\u8d24\u7684\u81f3\u7406\u540d\u8a00\uff0c\u5fc5\u987b\u8981\u201c\u7528\u9b54\u6cd5\u6253\u8d25\u9b54\u6cd5\u201d\u3002X \u540c\u5b66\u5411\u4e0a\u7ea7\u7533\u8bf7\u5230\u4e86\u79d1\u5927\u897f\u533a\u540c\u6b65\u8f90\u5c04\u5b9e\u9a8c\u5ba4\u8bbe\u5907\u7684\u4f7f\u7528\u6743\u9650\uff0c\u4ee5\u6b64\u6253\u901a\u6b21\u5143\u7a7a\u95f4\uff0c\u501f\u52a9\u5230\u53e6\u4e00\u4e2a\u5e73\u884c\u5b87\u5b99\u4e2d Z \u540c\u5b66\u7684\u6cd5\u529b\u8fdb\u884c\u6570\u636e\u5bf9\u51b2\uff0c\u65b9\u624d\u4e8e\u4e71\u4e2d\u640f\u5f97\u4e00\u4e1d\u673a\u4f1a\uff0c\u5c06 flag \u7528\u65e0\u7ebf\u7535\u7684\u5f62\u5f0f\u53d1\u5c04\u4e86\u51fa\u53bb\u3002 \u8003\u8651\u5230\u4fe1\u606f\u7684\u9c81\u68d2\u6027\uff0cX \u540c\u5b66\u4f7f\u7528\u4e86\u65e0\u7ebf\u7535\u4e2d\u60ef\u7528\u7684\u65b9\u6cd5\u6765\u533a\u5206\u5b57\u7b26\u4e32\u4e2d\u8bfb\u97f3\u76f8\u8fd1\u7684\u5b57\u6bcd\u3002\u5373\u4f7f\u5982\u6b64\uff0c\u6253\u7834\u6b21\u5143\u7684\u5f3a\u5927\u80fd\u91cf\u626d\u66f2\u4e86\u65f6\u7a7a\uff0c\u4f7f\u5f97\u6700\u7ec8\u63a5\u53d7\u5230\u7684\u5f55\u97f3\u7684\u901f\u5ea6\u6709\u6240\u6539\u53d8\u3002 \uff08\u8fd9\u9898\u5728\u7fa4\u91cc\u770b\u8d77\u6765\u597d\u50cf\u5361\u4e86\u5f88\u591a\u4eba\uff0c\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff09 \u9898\u76ee\u4e0b\u8f7d\u4e0b\u6765\u662f\u4e00\u4e2a\u542c\u8d77\u6765\u6742\u4e71\u7684\u97f3\u9891 \u9898\u91cc\u6700\u540e\u8bf4\u4e86 \u201c\u6700\u7ec8\u63a5\u53d7\u5230\u7684\u5f55\u97f3\u7684 \u901f\u5ea6 \u6709\u6240\u6539\u53d8\u201d\uff0c\u6240\u4ee5\u8003\u8651\u5c06\u97f3\u9891\u65f6\u95f4\u62c9\u957f\u3002 \u6700\u5f00\u59cb\u4f7f\u7528\u4e86 Adobe Audition\uff0c\u4f46\u662f\u6548\u679c\u4e0d\u662f\u5f88\u7406\u60f3\uff0c\u5927\u6982\u662f\u91cd\u65b0\u91c7\u6837\u7b49\u4e00\u7cfb\u5217\u7b97\u6cd5\u5bfc\u81f4\u7684 \u6240\u4ee5\u6362\u4e86 Adobe Premier Pro \u76f4\u63a5\u7528\u6bd4\u7387\u62c9\u4f38\u5de5\u5177\u62c9\u957f\u97f3\u9891\uff0c\u8fd8\u662f\u53ef\u4ee5\u542c\u6e05\u7684 \u4e0d\u65ad\u5c1d\u8bd5\u4e4b\u540e\uff0c\u5927\u6982\u653e\u6162\u4e09\u500d\u5de6\u53f3\u5c31\u53ef\u4ee5\u542c\u51fa\u8bfb\u7684\u662f\u82f1\u8bed\u5355\u8bcd\u4e86 \u9898\u91cc\u8bf4\u5230\u4e86 \u201c\u8003\u8651\u5230\u4fe1\u606f\u7684\u9c81\u68d2\u6027\uff0cX \u540c\u5b66\u4f7f\u7528\u4e86 \u65e0\u7ebf\u7535\u4e2d\u60ef\u7528\u7684\u65b9\u6cd5 \u6765\u533a\u5206\u5b57\u7b26\u4e32\u4e2d\u8bfb\u97f3\u76f8\u8fd1\u7684\u5b57\u6bcd\u201d\uff0c\u6240\u4ee5\u5c31\u67e5\u5230\u4e86 \u56fd\u9645\u822a\u7a7a\u65e0\u7ebf\u7535\u901a\u8baf26\u4e2a\u82f1\u6587\u5b57\u6bcd\u8bfb\u6cd5 \u7136\u540e\u4ed4\u7ec6\u542c\uff0c\u8fa8\u522b\u6bcf\u4e2a\u5355\u8bcd\u7684\u7b2c\u4e00\u4e2a\u97f3\u5c31\u53ef\u4ee5\u5f97\u5230 flag \u4e86","title":"\u53bb\u5427\uff01\u8ffd\u5bfb\u81ea\u7531\u7684\u7535\u6ce2"},{"location":"writeups/hackergame2021/#pro-max","text":"\u4e94\u9053\u5201\u94bb\u7684\u9898\u76ee\uff0c\u4f46\u662f\u8fd8\u662f\u597d\u67e5\u5230\u7684\uff0c\u9898\u76ee\u91cc\u4e5f\u8bf4\u4e86\u201c\u89e3\u51fa\u8c1c\u9898\u4e0d\u9700\u8981\u662f\u79d1\u5927\u5728\u6821\u5b66\u751f\u201d 2017 \u5e74\uff0c\u4e2d\u79d1\u5927\u4fe1\u606f\u5b89\u5168\u4ff1\u4e50\u90e8\uff08SEC@USTC\uff09\u5e76\u5165\u4e2d\u79d1\u5927 Linux \u7528\u6237\u534f\u4f1a\uff08USTCLUG\uff09\u3002\u76ee\u524d\uff0c\u4fe1\u606f\u5b89\u5168\u4ff1\u4e50\u90e8\u7684\u57df\u540d\uff08sec.ustc.edu.cn\uff09\u5df2\u7ecf\u65e0\u6cd5\u8bbf\u95ee\uff0c\u4f46\u4f60\u80fd\u627e\u5230\u4fe1\u606f\u5b89\u5168\u4ff1\u4e50\u90e8\u7684\u793e\u56e2\u7ae0\u7a0b\u5728\u54ea\u4e00\u5929\u7684\u4f1a\u5458\u4ee3\u8868\u5927\u4f1a\u4e0a\u901a\u8fc7\u7684\u5417\uff1f \u770b\u5230\u4e86 \u201c\u76ee\u524d\uff0c\u5df2\u7ecf\u65e0\u6cd5\u8bbf\u95ee\u201d \u8bf4\u660e\u8fd9\u4e2a\u57df\u540d\u66fe\u7ecf\u662f\u53ef\u4ee5\u8bbf\u95ee\u7684\uff0c\u76f4\u63a5\u901a\u8fc7 ~\u4e92\u8054\u7f51\u7684\u8bb0\u5fc6 ~archive.org\uff0c\u67e5\u5230\u8fd9\u4e2a\u57df\u540d\u7684\u5386\u53f2\u5b58\u6863\uff0c\u968f\u4fbf\u627e\u4e00\u5929\u5c31\u53ef\u4ee5\u770b\u5230\u4ed6\u4eec\u5b98\u7f51\u4e2d\u7684 \u4fe1\u606f\u5b89\u5168\u4ff1\u4e50\u90e8\u793e\u56e2\u7ae0\u7a0b \u3002 \u5176\u4e2d\u7b2c\u4e00\u884c\u5c31\u5199\u4e86 \u201c\u672c\u7ae0\u7a0b\u5728 2015 \u5e74 5 \u6708 4 \u65e5 \uff0c\u7ecf\u4f1a\u5458\u4ee3\u8868\u5927\u4f1a\u5ba1\u8bae\u901a\u8fc7\u3002\u201d \u6240\u4ee5\u7b54\u6848\u5c31\u662f 20150504 \u4e2d\u56fd\u79d1\u5b66\u6280\u672f\u5927\u5b66 Linux \u7528\u6237\u534f\u4f1a\u5728\u8fd1\u4e94\u5e74\u591a\u5c11\u6b21\u88ab\u8bc4\u4e3a\u6821\u4e94\u661f\u7ea7\u793e\u56e2\uff1f \u76f4\u63a5\u53bb\u79d1\u5927 LUG \u5b98\u7f51\u7684 Intro \u9875\u9762 \uff0c\u5c31\u53ef\u4ee5\u770b\u5230 \u201c\u4e8e 2015 \u5e74 5 \u6708\u30012017 \u5e74 7 \u6708\u30012018 \u5e74 9 \u6708\u30012019 \u5e74 8 \u6708\u53ca 2020 \u5e74 9 \u6708\u88ab\u8bc4\u4e3a\u4e2d\u56fd\u79d1\u5b66\u6280\u672f\u5927\u5b66\u4e94\u661f\u7ea7\u5b66\u751f\u793e\u56e2\u3002\u201d \u6240\u4ee5\u662f4\u6b21\uff08x \u4f46\u662f\u6000\u7591\u4e00\u4e0b\u4e3a\u4ec0\u4e48\u6ca1\u67092021\u5e74\uff0c\u56e0\u4e3a\u90fd\u662f\u57289\u6708\u4efd\u5de6\u53f3\uff0c\u6240\u4ee5\u53ef\u80fd\u662f\u6570\u636e\u6ca1\u66f4\u65b0\uff0c\u8fd9\u98984\u548c5\u90fd\u6709\u53ef\u80fd \u5c1d\u8bd5\u540e\u5f97\u5230\u7b54\u6848\u662f 5 \u4e2d\u56fd\u79d1\u5b66\u6280\u672f\u5927\u5b66 Linux \u7528\u6237\u534f\u4f1a\u4f4d\u4e8e\u897f\u533a\u56fe\u4e66\u9986\u7684\u6d3b\u52a8\u5ba4\u95e8\u53e3\u7684\u724c\u5b50\u4e0a\u201cLUG @ USTC\u201d\u4e0b\u65b9\u7684\u5c0f\u5b57\u662f\uff1f \u8fd9\u9898\u4e5f\u7b80\u5355\uff0c\u76f4\u63a5\u95ee\u79d1\u5927\u540c\u5b66\u5c31\u597d\u4e86\uff08x \u7ffb\u4e86 LUG \u7684\u5fae\u4fe1\u516c\u4f17\u53f7\u548c QQ \u5b98\u65b9\u53f7\uff0c\u90fd\u6ca1\u5565\u6536\u83b7\uff0c\u6700\u540e\u53d1\u73b0\u5b98\u7f51\u4e0a\u6709 News \u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u5982\u679c\u65b0\u542f\u7528\u6d3b\u52a8\u5ba4\u7684\u8bdd\uff0c\u4e00\u5b9a\u4f1a\u6709\u4e00\u7bc7\u65b0\u95fb\u7a3f\uff0c\u641c\u7d22\u201c\u56fe\u4e66\u9986\u201d\u5f97\u5230\u4e86 \u300c\u897f\u533a\u56fe\u4e66\u9986\u65b0\u6d3b\u52a8\u5ba4\u542f\u7528\u300d \u8fd9\u7bc7\u6587\u7ae0\uff0c\u5f00\u7bc7\u7b2c\u4e00\u5f20\u5927\u56fe\u5c31\u662f\u95e8\u53e3\u724c\u5b50\u7684\u7167\u7247 \u6240\u4ee5\u7b54\u6848\u662f Development Team of Library \uff08\u6ce8\u610f\u5927\u5c0f\u5199\uff09 \u5728 SIGBOVIK 2021 \u7684\u4e00\u7bc7\u5173\u4e8e\u4e8c\u8fdb\u5236 Newcomb-Benford \u5b9a\u5f8b\u7684\u8bba\u6587\u4e2d\uff0c\u4f5c\u8005\u4e00\u5171\u5c55\u793a\u4e86\u591a\u5c11\u4e2a\u6570\u636e\u96c6\u5bf9\u5176\u7406\u8bba\u7ed3\u679c\u8fdb\u884c\u9a8c\u8bc1\uff1f \u5e94\u8be5\u6ca1\u5fc5\u8981\u641c\u8c37\u6b4c\u5b66\u672f\u4e4b\u7c7b\u7684\uff0c\u76f4\u63a5\u5fc5\u5e94\u67e5 \u201cSIGBOVIK Newcomb-Benford\u201d \u5c31\u53ef\u4ee5\u627e\u5230 SIGBOVIK \u7684 \u8fd9\u4e00\u7bc7\u5927\u6587\u7ae0\u5408\u96c6 \uff0c\u518d\u641c\u7d22 Newcomb \u5c31\u53ef\u4ee5\u770b\u5230\u9898\u76ee\u91cc\u8bf4\u7684\u8bba\u6587\u4e86\u3002 \u5168\u6587\u4e5f\u4e0d\u957f\uff0c\u53ea\u6709\u56db\u9875\uff0c\u540e\u4e24\u9875\u5168\u662f\u6570\u636e\u7684\u56fe\uff0c\u6570\u4e00\u4e0b\uff0c\u4e00\u5171\u670913\u5e45 \u6240\u4ee5\u7b54\u6848\u662f 13 \u4e0d\u4e25\u683c\u9075\u5faa\u534f\u8bae\u89c4\u8303\u7684\u64cd\u4f5c\u7740\u5b9e\u4ee4\u4eba\u751f\u538c\uff0c\u597d\u5728 IETF \u4e8e 2021 \u5e74\u6210\u7acb\u4e86 Protocol Police \u4ee5\u76d1\u7763\u5e76\u60e9\u6212\u6240\u6709\u8fdd\u80cc RFC \u6587\u6863\u7684\u884c\u4e3a\u4e2a\u4f53\u3002\u5047\u5982\u4f60\u53d1\u73b0\u4e86\u67d0\u4f4d\u540c\u5b66\u53ef\u80fd\u8fdd\u53cd\u4e86\u534f\u8bae\u89c4\u8303\uff0c\u6839\u636e Protocol Police \u76f8\u5173\u6587\u6863\u4e2d\u89c4\u5b9a\u7684\u4e3e\u62a5\u65b9\u6cd5\uff0c\u4f60\u5e94\u8be5\u5c06\u4f60\u7684\u4e3e\u62a5\u4fe1\u53d1\u5f80\u4f55\u5904\uff1f \u6ca1\u5565\u597d\u8bf4\u7684\uff0c\u76f4\u63a5\u67e5\uff0c\u7b54\u6848 /dev/null \u7136\u540e\u63d0\u4ea4\u5c31\u53ef\u4ee5\u5f97\u5230 flag","title":"\u732b\u54aa\u95ee\u7b54 Pro Max"},{"location":"writeups/hackergame2021/#_4","text":"\u9898\u76ee\u91cc\u6bd4\u8f83\u91cd\u8981\u7684\u8bdd\u5c31\u662f\uff1a \u8865\u5145\u8bf4\u660e\uff1a\u5f53\u79f0\u7684\u6570\u5b57\u53d8\u4e3a\u6d6e\u70b9\u6570\u800c\u4e0d\u662f\u6574\u6570\u65f6\uff0cHQ \u4e0d\u4f1a\u8ba4\u53ef\u6700\u7ec8\u7684\u79f0\u91cd\u7ed3\u679c\u3002 \u9898\u76ee\u7684\u76ee\u7684\u4e5f\u5f88\u660e\u786e\uff0c\u7528\u4e00\u58069\u548c\u4e00\u58066\u52a0\u8d77\u6765\u5f97\u523020\u3002\u80af\u5b9a\u4e0d\u80fd ~\u50cf\u534e\u5f3a\u4e00\u6837 ~\u5288\u74dc\uff0c\u6240\u4ee5\u8f93\u5165\u4e00\u5b9a\u662f\u6574\u6570 \u90a3\u5c31\u53ef\u4ee5\u8003\u8651\u6ea2\u51fa \u4f46\u662f\u7ecf\u8fc7\u5c1d\u8bd5\uff0c\u7ed9\u7684\u6570\u5b57\u592a\u5927\uff0c\u5c31\u4f1a\u4f7f\u7ed3\u679c\u6ea2\u51fa\u5230\u6d6e\u70b9\u6570\uff0c\u8fd9\u4e0d\u662f\u60f3\u8981\u7684\uff08\u56e0\u4e3a\u5373\u4f7f\u51d1\u5230\u4e8620.0\u4e5f\u4e0d\u6b63\u786e\uff09 \u90a3\u5982\u679c\u6570\u5b57\u518d\u5927\u5462\uff0c\u6bd4\u5982 2000000000000000000\uff0818\u4e2a0\uff09\u4e2a9\u65a4\u7684\u74dc\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u65f6\u76f4\u63a5\u6ea2\u51fa\u5230\u4e86\u8d1f\u6574\u578b -446744073709551616 \u518d\u8865\u4e0a 49638230412172000 \u4e2a9\u65a4\u7684\u74dc\u5c31\u53ef\u4ee5\u5f97\u5230 -3616\uff0c\u52a0\u4e0a20\u53ef\u4ee5\u88ab6\u6574\u9664\uff0c\u6240\u4ee5\u518d\u52a0\u4e0a606\u4e2a6\u65a4\u7684\u74dc\u5c31\u53ef\u4ee5\u5f97\u5230 20 \u606d\u559c\u4f60\u9003\u8fc7\u4e00\u52ab\uff01\u534e\u5f3a\uff5e\u534e\u5f3a\uff01","title":"\u5356\u74dc"},{"location":"writeups/hackergame2021/#_5","text":"\u4e00\u4e2a\u900f\u660e\u7684\u6587\u4ef6\uff0c\u7528\u4e8e\u5728\u7ec8\u7aef\u4e2d\u5c55\u793a\u4e00\u4e2a\u4e94\u989c\u516d\u8272\u7684 flag\u3002 \u53ef\u80fd\u662f\u5728 cmd.exe \u7b49\u52a3\u8d28\u7ec8\u7aef\u4e2d\u88ab\u957f\u671f\u4f7f\u7528\u7684\u539f\u56e0\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5931\u53bb\u4e86\u4e00\u4e9b\u91cd\u8981\u6210\u5206\uff0c\u53d8\u6210\u4e86\u4e00\u5806\u4e71\u7801\uff0c\u4e5f\u4e0d\u4f1a\u518d\u663e\u793a\u51fa flag \u4e86\u3002 \u6ce8\u610f\uff1aflag \u5185\u90e8\u7684\u5b57\u7b26\u5168\u90e8\u4e3a\u5c0f\u5199\u5b57\u6bcd\u3002 \u62ff\u5230\u6587\u4ef6\uff0c\u770b\u5230\u91cc\u9762\u597d\u591a [ ; m \u4e4b\u7c7b\u7684\uff0c\u518d\u7ed3\u5408\u7ec8\u7aef\u4e2d\u8f93\u51fa\u5e26\u989c\u8272\u6587\u5b57\u7684 \\033[...m; \u4e4b\u7c7b\u7684\u65b9\u6cd5\uff0c\u4ee5\u53ca\u9898\u76ee\u4e2d\u7684 \u201c\u5931\u53bb\u4e86\u4e00\u4e9b \u91cd\u8981\u6210\u5206 \u201d \u6240\u4ee5\u76f4\u63a5\u5c1d\u8bd5\u628a [ \u5168\u5c40\u66ff\u6362\u4e3a \\033[ \uff0c\u7136\u540e\u590d\u5236\u5230 python \u4e2d print\uff0c\u5c31\u53ef\u4ee5\u770b\u5230\u795e\u5947\u7684\u4e00\u5e55\u4e86\uff08\u5176\u5b9e\u5e76\u6ca1\u5b8c\u5168\u505a\u5b8c\uff0c\u4f46\u662f\u53ef\u4ee5\u5df2\u7ecf\u770b\u4e86\uff09 \u7136\u540e\u8bfb\u51fa flag \u5373\u53ef\uff08\u5168\u662f\u5c0f\u5199\u5b57\u6bcd\uff09","title":"\u900f\u660e\u7684\u6587\u4ef6"},{"location":"writeups/hackergame2021/#_6","text":"\u4f60\u7684\u5b66\u957f\u51b3\u5b9a\u6765\u4e00\u573a\u8bf4\u8d70\u5c31\u8d70\u7684\u65c5\u884c\u3002\u901a\u8fc7\u4ed6\u53d1\u7ed9\u4f60\u7684\u7167\u7247\u6765\u770b\uff0c\u4ed6\u5e94\u8be5\u662f\u5728\u9152\u5e97\u4f4f\u4e0b\u4e86\u3002 \u4ece\u7167\u7247\u6765\u770b\uff0c\u9152\u5e97\u4f3c\u4e4e\u5728\u5c0f\u533a\u7684\u4e00\u680b\u9ad8\u697c\u91cc\uff0c\u9644\u8fd1\u8fd8\u6709\u4e00\u5bb6 KFC \u5206\u5e97\u3002\u7a81\u7136\uff0c\u4f60\u610f\u8bc6\u5230\u7167\u7247\u91cc\u900f\u9732\u51fa\u6765\u7684\u4fe1\u606f\u6bd4\u8868\u9762\u4e0a\u770b\u8d77\u6765\u7684\u8981\u591a\u3002 \u8bf7\u89c2\u5bdf\u7167\u7247\u5e76\u7b54\u5bf9\u5168\u90e8 5 \u9053\u9898\u4ee5\u83b7\u53d6 flag\u3002\u6ce8\u610f\uff1a\u56fe\u7247\u672a\u5728\u5176\u4ed6\u5730\u65b9\u516c\u5f00\u53d1\u5e03\u8fc7\uff0c\u4e5f\u672a\u91c7\u53d6\u4efb\u4f55\u9690\u5199\u63aa\u65bd\uff08\u901a\u8fc7\u624b\u673a\u62cd\u6444\u5c4f\u5e55\u4ea6\u53ef\u7b54\u9898\uff09\u3002 \u201c\u624b\u673a\u62cd\u6444\u5c4f\u5e55\u4ea6\u53ef\u7b54\u9898\u201d\uff0c\u6240\u4ee5\u7167\u7247\u4e2d\u6ca1\u6709\u4efb\u4f55\u5730\u5740\u7684\u5143\u4fe1\u606f\uff0c\u53ea\u80fd\u9760\u770b\u56fe \u7ebf\u7d22 \uff1a\u6d77\u8fb9\u3001KFC\u3001\u9ad8\u697c\u3001\u5927\u77f3\u5934\u3001\u505c\u8f66\u4f4d \u5148\u770b\u90a3\u4e2aKFC\uff0c\u5927\u6982\u662f\u4e2a\u7f51\u7ea2\u5e97\uff0c\u6240\u4ee5\u641c\u7d22 \u201c\u7f51\u7ea2 \u6d77\u8fb9 KFC\u201d\uff0c\u67e5\u5230\u4e86\u79e6\u7687\u5c9b\uff0c\u800c\u4e14\u4e5f\u662f\u6d77\u8fb9 \u518d\u8fdb\u4e00\u6b65\u770b\u5730\u56fe\u548c\u8857\u666f\u5730\u56fe\u5c31\u53ef\u4ee5\u786e\u5b9a\u5730\u70b9\u5728 \u79e6\u7687\u5c9b\u65b0\u6fb3\u6d77\u5e95\u4e16\u754c \u7136\u540e\u662f5\u4e2a\u95ee\u9898 \u8be5\u7167\u7247\u62cd\u6444\u8005\u7684\u9762\u671d\u65b9\u5411\u4e3a\uff1a \u6839\u636e\u5730\u56fe\uff0c\u5bf9\u6bd4\u4e00\u4e0b\u5c31\u53ef\u4ee5\u5f97\u5230\uff0c\u9762\u671d\u65b9\u5411\u662f \u4e1c\u5357 \u8be5\u7167\u7247\u7684\u62cd\u6444\u65f6\u95f4\u5927\u81f4\u4e3a\uff1a \u6839\u636e\u9009\u9879\u91cc\u7684\u65f6\u95f4\uff0c\u4e0b\u5348\u662f\u4e24\u70b9\u534a\u5de6\u53f3\uff0c\u800c\u5728\u4e1c\u5317\u7684\u4e24\u70b9\u534a\u5de6\u53f3\u5176\u5b9e\u548c\u4e2d\u5348\u5dee\u4e0d\u591a\uff0c\u5f71\u5b50\u548c\u5149\u6e29\u4e5f\u4e0d\u592a\u50cf\u8fd9\u4e2a\u6837\u5b50\uff0c\u6240\u4ee5\u53ef\u4ee5\u786e\u5b9a\u65f6\u95f4\u5927\u81f4\u662f \u508d\u665a \u8be5\u7167\u7247\u7684\u62cd\u6444\u8005\u6240\u5728\u697c\u5c42\u4e3a\uff1a \u4e0d\u597d\u786e\u5b9a\uff0c\u4f46\u662f\u7b54\u6848\u53ef\u4ee5\u4ea4\u5f88\u591a\u6b21\uff0c\u6240\u4ee5\u4ece9\u5c42\u5de6\u53f3\u4f9d\u6b21\u8bd5\u5c31\u53ef\u4ee5\u4e86\uff0c\u6700\u540e\u5f97\u5230\u697c\u5c42\u662f 14 \u8be5\u7167\u7247\u5de6\u4e0a\u89d2 KFC \u5206\u5e97\u7684\u7535\u8bdd\u53f7\u7801\u662f\uff1a \u76f4\u63a5\u7528\u5730\u56fe\u8f6f\u4ef6\u641c \u201c\u79e6\u7687\u5c9b\u65b0\u6fb3 KFC\u201d \u5c31\u53ef\u4ee5\u67e5\u5230\u90a3\u5bb6\u5e97\u94fa\uff0c\u4e5f\u7ed9\u4e86\u7535\u8bdd\uff0c\u6216\u8005\u641c\u7d22 \u201d\u7f51\u7ea2 \u6d77\u8fb9 KFC\u201c \u4e5f\u53ef\u4ee5\u76f4\u63a5\u5f97\u5230\u7535\u8bdd\uff1a 0335-7168800 \u8be5\u7167\u7247\u5de6\u4e0a\u89d2 KFC \u5206\u5e97\u5de6\u4fa7\u5efa\u7b51\u6709\u4e09\u4e2a\u6c34\u5e73\u6392\u5217\u7684\u6c49\u5b57\uff0c\u5b83\u4eec\u662f\uff1a \u901a\u8fc7\u8857\u666f\u5730\u56fe\u5c31\u53ef\u4ee5\u770b\u5230 KFC \u5de6\u8fb9\u7684\u5efa\u7b51\u4e0a\u5199\u4e86 \u6d77\u8c5a\u9986","title":"\u65c5\u884c\u7167\u7247"},{"location":"writeups/hackergame2021/#flag","text":"\u53c2\u4e0e\u6d3b\u52a8\uff0c\u52a9\u529b\u62bd\u5956\uff01\u96c6\u6ee1 1 \u4e2a flag\uff0c\u5373\u53ef\u63d0\u53d6 1 \u4e2a flag\u3002 \u606d\u559c\u4f60\u79ef\u6512\u5230 0.5\u2026\u2026 \u4e2a flag\uff0c \u5269\u4f59\u65f6\u95f4\uff1a10\u520600\u79d2 \u5df2\u6709 0 \u4f4d\u597d\u53cb\u4e3a\u60a8\u52a9\u529b\u3002 \u5c06\u5982\u4e0b\u94fe\u63a5\u5206\u4eab\u7ed9\u597d\u53cb\uff0c\u53ef\u4ee5\u83b7\u5f97\u597d\u53cb\u52a9\u529b\uff0c\u83b7\u5f97\u66f4\u591a flag\uff1a\u2026\u2026 \u8001\u5e76\u5915\u5915\u4e86 \uff0c\u7ecf\u8fc7\u4e00\u4e9b\u6d4b\u8bd5\u548c\u770b\u89c4\u5219\u53ef\u4ee5\u77e5\u9053\uff0cip \u5728\u540c\u4e00 /8 \u7f51\u6bb5\u7684\u7528\u6237\u88ab\u89c6\u4e3a\u540c\u4e00\u7528\u6237\uff0c\u5373 ip \u5730\u5740\u7684\u7b2c\u4e00\u4e2a\u70b9\u524d\u9762\u7684\u6570\u5b57\u4e0d\u4e00\u6837\u624d\u662f\u4e0d\u540c\u7528\u6237 \u518d\u7528\u865a\u62df\u673a\u548c\u624b\u673a\u8bd5\u4e00\u4e0b\uff0c\u53d1\u73b0\u6bcf\u4e2a\u7528\u6237\u589e\u52a0\u7684 flag \u6570\u91cf\u5f88\u5c0f \u6240\u4ee5\u63a8\u6d4b\u9700\u8981200+\u4e2a ip \u5730\u5740\uff0c\u80af\u5b9a\u4e0d\u4f1a\u8981\u771f\u7684\u8f6c\u53d1\uff0c\u800c\u4e14\u4e5f\u5f88\u96be\u51d1\u51fa\u5f88\u591a\u4e0d\u5728\u540c\u4e00 /8 \u7f51\u6bb5\u7684 ip \u4e8e\u662f\u5728 BurpSuite \u91cc\u9762\u6293\u5305\u53ef\u4ee5\u770b\u5230\uff0c\u6bcf\u6b21\u70b9\u51fb\u201c\u52a9\u529b\u201d\u90fd\u4f1a\u53d1\u9001\u4e00\u4e2a\u5230\u52a9\u529b\u94fe\u63a5\u7684 POST\uff0c\u5185\u5bb9\u4e3a ip \u5730\u5740 \u7136\u540e\u5c06\u5176\u53d1\u9001\u5230 Repeater \u4e2d\uff0c\u5c1d\u8bd5\u66f4\u6539 ip \u5730\u5740\uff0c\u5f97\u5230\u7684 Response \u4e2d\u8bf4 \u201c\u5931\u8d25\uff01\u68c0\u6d4b\u5230\u524d\u540e\u7aef\u68c0\u6d4b IPv4 \u5730\u5740\u4e0d\u5339\u914d\u201d \u6240\u4ee5\u4ec5\u4ec5\u66f4\u6539 POST \u5185\u5bb9\u7684 ip \u662f\u4e0d\u591f\u7684\uff0c\u800c\u63d0\u4f9b\u7ed9\u68c0\u6d4b\u7684\u5185\u5bb9\u4e5f\u4ec5\u4ec5\u662f\u4e00\u4e2a POST\uff0c\u6240\u4ee5\u53ef\u4ee5\u66f4\u6539 POST \u5934\uff0c\u6dfb\u52a0 X-Forwarded-For \u7136\u540e\u4f7f\u7528 python \u5c31\u53ef\u4ee5\u5faa\u73af\u53d1\u9001 POST \u5e76\u4f2a\u9020 ip \u5730\u5740\u5f97\u5230256\u4e2a\u52a9\u529b\u4e86\uff0c\u521a\u597d\u8fbe\u52301\u4e2aflag\uff1a \uff08\u8981\u6ce8\u610f sleep \u4e00\u6bb5\u65f6\u95f4\uff0c\u4e0d\u7136\u4f1a\u51fa\u73b0\u64cd\u4f5c\u8fc7\u5feb\u62d2\u7edd\u7684\u60c5\u51b5\uff1b\u4e5f\u4e0d\u8981 sleep \u8fc7\u957f\uff0c\u5426\u5219\u8d85\u8fc710\u5206\u949f flag \u5c31\u65e0\u6548\u4e86\uff09 import requests import time from tqdm import tqdm url = \"http://202.38.93.111:10888/invite/...\" with tqdm ( total = 256 ) as pbar : for i in range ( 256 ): res = requests . post ( url , data = { \"ip\" : f \" { i } .0.0.0\" }, headers = { \"X-Forwarded-For\" : f \" { i } .0.0.0\" }) if \"\u6210\u529f\" not in res . text : print ( \"[x] \u5931\u8d25\" ) print ( res . text ) time . sleep ( 1.5 ) pbar . update ( 1 )","title":"FLAG \u52a9\u529b\u5927\u7ea2\u5305"},{"location":"writeups/hackergame2021/#amnesia","text":"","title":"Amnesia"},{"location":"writeups/hackergame2021/#_7","text":"\u4f60\u7684\u7a0b\u5e8f\u53ea\u9700\u8981\u8f93\u51fa\u5b57\u7b26\u4e32 Hello, world!\uff08\u7ed3\u5c3e\u6709\u65e0\u6362\u884c\u5747\u53ef\uff09\u5e76\u6b63\u5e38\u7ed3\u675f\u3002 \u7f16\u8bd1\u6307\u4ee4\uff1a gcc -O file.c -m32 \u8fd0\u884c\u6307\u4ee4\uff1a ./a.out \u7f16\u8bd1\u540e ELF \u6587\u4ef6\u7684 .data \u548c .rodata \u6bb5\u4f1a\u88ab\u6e05\u96f6\u3002 ELF\uff08Executable and Linkable Format\uff09\u662f Linux \u4e0b\u5e38\u7528\u7684\u53ef\u6267\u884c\u6587\u4ef6\u683c\u5f0f\uff0c\u5176\u4e2d\u6709\u5f88\u591a\u4e0d\u540c\u7684\u8282\uff1a .text \u8282\uff1a\u7a0b\u5e8f\u8fd0\u884c\u9700\u8981\u7684\u4ee3\u7801 .data \u8282\uff1a\u5b58\u653e\u53ef\u4fee\u6539\u7684\u6570\u636e\uff0c\u4e00\u822c\u662f\u975e const \u5168\u5c40\u53d8\u91cf\u548c\u9759\u6001\u53d8\u91cf .rodata \u8282\uff1a\u5373 read only data\uff0c\u4e00\u822c\u662f\u5e38\u91cf\u6216\u8005\u5b57\u7b26\u4e32 .bss \u8282\uff1a\u6ca1\u6709\u88ab\u521d\u59cb\u5316\u7684\u53d8\u91cf \u2026\u2026 \u800c\u8fd9\u9053\u9898\u76ee\u5219\u662f\u5728\u7f16\u8bd1\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6 a.out \u540e\uff0c\u6e05\u7a7a .data \u548c .rodata \u9996\u5148\u4e0d\u59a8\u6b63\u5e38\u7f16\u5199\u4e00\u4e2a\u8f93\u51fa \u201cHello, world!\u201d \u7684\u7a0b\u5e8f\uff1a printf ( \"Hello, world! \\n \" ); \u7136\u540e\u7f16\u8bd1\uff0c\u518d\u62d6\u5230 IDA \u91cc \u53ef\u4ee5\u53d1\u73b0\uff0c\u6b64\u65f6\u7684 \"Hello, world!\" \u88ab\u653e\u5230\u4e86 .rodata \u8282\u4e2d\uff0c\u4f1a\u88ab\u6e05\u9664\u6389\uff0c\u6240\u4ee5\u8fd9\u6837\u5199\u4e0d\u884c \u76f4\u63a5\u4f7f\u7528\u5b57\u7b26\u4e32\u4f1a\u88ab\u653e\u5230 .rodata \u4e2d\u6e05\u9664\uff0c\u5199\u6210\u5168\u5c40\u53d8\u91cf\u53c8\u4f1a\u653e\u5230 .data \u4e2d \u4f46\u662f\uff0c\u5982\u679c\u5199\u6210\u5c40\u90e8\u53d8\u91cf\u5462\uff1a char str [] = \"Hello, world! \\n \" ; printf ( str ); \u7f16\u8bd1\uff0c\u62d6\u5230 IDA \u91cc \u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u6b21\u7684\u5b57\u7b26\u4e32\u76f4\u63a5\u5199\u5230\u4e86 .text \u8282\u4e2d\uff0c\u5220\u6389\u4e86 .data .rodata \u4e5f\u6ca1\u6709\u5f71\u54cd \u6240\u4ee5\u628a\u8fd9\u4e2a\u4ee3\u7801\u4ea4\u4e0a\u53bb\u5c31\u53ef\u4ee5\u8f93\u51fa \u201cHello, world!\u201c \u62ff\u5230 flag \u4e86 \u6e05\u9664\u8bb0\u5fc6\u76f4\u63a5\u628a .text \u8282\u5168\u5220\u6389\u4e86\uff0c\u60f3\u4e86\u5f88\u4e45\u4e5f\u4e0d\u77e5\u9053\u548b\u641e\uff0c\u867d\u7136\u53ef\u4ee5 __attribute__ ((section (\"...\"))) \u6765\u628a\u51fd\u6570\u6216\u53d8\u91cf\u585e\u5230\u6307\u5b9a\u7684\u8282\u4e2d\u3002\u4f46\u8fd8\u662f\u4e0d\u6e05\u695a\u8981\u600e\u4e48\u89e3\u51b3\u6bb5\u9519\u8bef\u7684\u95ee\u9898qwq","title":"\u8f7b\u5ea6\u5931\u5fc6"},{"location":"writeups/hackergame2021/#_8","text":"\u5c0f T \u542c\u8bf4 GraphQL \u662f\u4e00\u79cd\u7279\u522b\u7684 API \u8bbe\u8ba1\u6a21\u5f0f\uff0c\u4e5f\u662f RESTful API \u7684\u6709\u529b\u7ade\u4e89\u8005\uff0c\u6240\u4ee5\u4ed6\u5199\u4e86\u4e2a\u5c0f\u7f51\u7ad9\u6765\u5b9e\u9a8c\u8fd9\u9879\u6280\u672f\u3002 \u4f60\u80fd\u901a\u8fc7\u8fd9\u4e2a\u5168\u65b0\u7684\u63a5\u53e3\uff0c\u83b7\u53d6\u5230\u6ca1\u6709\u516c\u5f00\u51fa\u6765\u7684\u7ba1\u7406\u5458\u7684\u90ae\u7bb1\u5730\u5740\u5417\uff1f \u9898\u76ee\u4fe1\u606f\u7ed9\u7684\u5f88\u5145\u5206\uff0c\u7528\u7684\u662f GraphQL\uff0c\u8981\u7528\u5176\u5f97\u5230 admin \u7684\u90ae\u7bb1 \u6ca1\u63a5\u89e6\u8fc7 GraphQL\uff0c\u6240\u4ee5\u76f4\u63a5\u5fc5\u5e94\uff08\u9003 \u67e5\u5230\u4e86\u5f88\u591a\u6709\u7528\u7684\u4e1c\u897f\uff1a GraphQL\u5b98\u7f51 \uff1a\u4e86\u89e3\u4e00\u4e0b GraphQL \u662f\u5e72\u4ec0\u4e48\u7684\uff0c\u8981\u600e\u4e48\u7528 GraphiQL \uff1a\u4e00\u4e2a\u8fdb\u884c GraphQL \u67e5\u8be2\u7684 GUI \u3010\u5b89\u5168\u8bb0\u5f55\u3011\u73a9\u8f6cGraphQL - DVGA\u9776\u573a\uff08\u4e0a\uff09- \u77e5\u4e4e GraphQL Voyager \uff1a\u53ef\u89c6\u5316\u73b0\u5b9e GraphQL \u5185\u7701\u51fa\u7684\u7ed3\u6784 \u7b80\u800c\u8a00\u4e4b\uff0cGraphQL \u5c31\u662f\u4e00\u4e2a\u53ef\u4ee5\u901a\u8fc7\u4e00\u6b21 query \u8bf7\u6c42\u67e5\u8be2\u591a\u4e2a\u8d44\u6e90\u7684 API \u6a21\u5f0f\uff0c\u53ea\u8981 \u7f51\u5740/graphql?query=... \u5c31\u53ef\u4ee5\u5b9e\u73b0\u67e5\u8be2 \u6709\u4e9b\u4f7f\u7528 GraphQL \u7684\u7f51\u7ad9\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u8bbf\u95ee \u7f51\u5740/graphiql \u5f97\u5230\u67e5\u8be2\u7684 GUI \u4f46\u662f\u672c\u9898\u4e2d\u7981\u6b62\u4e86\uff0c\u4f46\u53ef\u4ee5\u4f7f\u7528 GraphiQL \u8f6f\u4ef6\u6765\u8fdb\u884c\u67e5\u8be2 \u5728\u7b2c\u4e09\u4e2a\u94fe\u63a5\u4e2d\u53ef\u4ee5\u4e86\u89e3\u5230\uff0c\u53ef\u4ee5\u5229\u7528 GraphQL \u7684\u5185\u7701\u67e5\u8be2\u6765\u6cc4\u9732\u51fa\u5185\u90e8\u7684\u7ed3\u6784\uff0c\u628a\u5176\u4e2d\u7684\u67e5\u8be2\u8bed\u53e5\u4e22\u5230 GraphiQL \u4e2d\u53ef\u4ee5\u5f97\u5230\u7ed3\u679c query IntrospectionQuery { __schema { queryType { name } mutationType { name } subscriptionType { name } types { ...FullType } directives { name description locations args { ...InputValue } } }}fragment FullType on __Type { kind name description fields(includeDeprecated: true) { name description args { ...InputValue } type { ...TypeRef } isDeprecated deprecationReason } inputFields { ...InputValue } interfaces { ...TypeRef } enumValues(includeDeprecated: true) { name description isDeprecated deprecationReason } possibleTypes { ...TypeRef }}fragment InputValue on __InputValue { name description type { ...TypeRef } defaultValue}fragment TypeRef on __Type { kind name ofType { kind name ofType { kind name ofType { kind name ofType { kind name ofType { kind name ofType { kind name ofType { kind name } } } } } } }} \u7136\u540e\u628a\u7ed3\u679c\u4e22\u5230 GraphQL Voyager \u4e2d\u5c31\u53ef\u4ee5\u5f97\u5230\u53ef\u89c6\u5316\u7684\u7ed3\u6784\uff1a \u6240\u4ee5\u53ea\u9700\u8981\u6839\u636e id query \u4e00\u4e0b user \u5c31\u53ef\u4ee5\u4e86\uff1a query { user ( id : 1 ) { privateEmail , } } >>> { \"data\" : { \"user\" : { \"privateEmail\" : \"flag{...}\" } } }","title":"\u56fe\u4e4b\u4e0a\u7684\u4fe1\u606f"},{"location":"writeups/hackergame2021/#easy-rsa","text":"\u81ea\u4ece Hackergame 2018 \u516c\u7136\u63ed\u9732\u4e86\u5927\u6574\u6570\u53ef\u4ee5\u88ab\u795e\u7ae5\u53e3\u7b97\u5206\u89e3\u7684\u4e8b\u5b9e\uff0cRSA \u5728 hackergame \u4e2d\u5df2\u7ecf\u53ea\u80fd\u5904\u4e8e\u4f4e\u5206\u503c\u7684\u5730\u4f4d\u4e86\u3002\u5982\u679c\u4e0d\u5728\u5176\u540d\u79f0\u524d\u9762\u52a0\u4e0a Easy \u8fd9\u4e2a\u5355\u8bcd\uff0c\u4f3c\u4e4e\u5c31\u4f1a\u663e\u5f97\u5b8c\u5168\u5bf9\u4e0d\u8d77\u5176\u4ed6\u9898\u76ee\u3002 \u66f4\u4f55\u51b5\uff0c\u5728\u672c\u9898\u7684\u9644\u4ef6\u4e2d\uff0c\u4f60\u8fd8\u83b7\u5f97\u4e86\u6784\u9020 p \u548c q \u7684\u65b9\u5f0f\u3002\u6570\u7406\u57fa\u7840\u624e\u5b9e\u7684\u4f60\u5e94\u8be5\u53ef\u4ee5\u8f7b\u677e\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u5427\u3002 \u8c22\u9080\uff0c\u6ca1\u6709\u6570\u7406\u57fa\u7840 \u770b\u4ee3\u7801\uff01 e = 65537 def get_p (): x = 11124440021748127159092076861405454814981575144744508857178576572929321435002942998531420985771090167262256877805902135304112271641074498386662361391760451 y = 11124440021748127159092076861405454814981575144744508857178576572929321435002942998531420985771090167262256877805902135304112271641074498386662361391661439 value_p = sympy . nextprime (( math . factorial ( y )) % x ) # Hint\uff1a\u8fd9\u91cc\u76f4\u63a5\u8ba1\u7b97\u4f1a\u6ea2\u51fa\uff0c\u8bf7\u4f60\u4ed4\u7ec6\u89c2\u5bdf x \u548c y \u7684\u7279\u5f81 return value_p def get_q (): value = [ getPrime ( 256 )] for i in range ( 1 , 10 ): value . append ( sympy . nextprime ( value [ i - 1 ])) print ( \"value[-1] = \" , value [ - 1 ]) # value[-1] = 80096058210213458444437404275177554701604739094679033012396452382975889905967 n = 1 for i in range ( 10 ): n = n * value [ i ] q = getPrime ( 512 ) value_q = pow ( q , e , n ) print ( \"value_q = \" , value_q ) # value_q = 5591130088089053683141520294620171646179623062803708281023766040254675625012293743465254007970358536660934858789388093688621793201658889399155357407224541324547522479617669812322262372851929223461622559971534394847970366311206823328200747893961649255426063204482192349202005330622561575868946656570678176047822163692259375233925446556338917358118222905050574458037965803154233167594946713038301249145097770337253930655681648299249481985768272321820718607757023350742647019762122572886601905212830744868048802864679734428398229280780215896045509020793530842541217790352661324630048261329493088812057300480085895399922301827190211956061083460036781018660201163819104150988531352228650991733072010425499238731811243310625701946882701082178190402011133439065106720309788819 return sympy . nextprime ( q ) # this destroyes the rsa cryptosystem p = get_p () q = get_q () m = int . from_bytes ( open ( \"flag.txt\" , \"rb\" ) . read (), \"big\" ) c = pow ( m , e , p * q ) print ( \"c = \" , c ) # c = 110644875422336073350488613774418819991169603750711465190260581119043921549811353108399064284589038384540018965816137286856268590507418636799746759551009749004176545414118128330198437101472882906564195341277423007542422286760940374859966152871273887950174522820162832774361714668826122465471705166574184367478 \u53ef\u4ee5\u770b\u5230\uff0c\u5176\u4e2d\u8981\u89e3\u51b3\u7684\u5c31\u662f get_p() \u4e2d y! % x \u6ea2\u51fa\u7684\u95ee\u9898\uff0c\u4ee5\u53ca get_q() \u4e2d q \u662f\u54ea\u4e2a\u968f\u673a\u7684512\u4f4d\u8d28\u6570\u7684\u95ee\u9898 get_p : \u4ee3\u7801\u91cc\u4e5f\u7ed9\u4e86 Hint\uff0c\u89c2\u5bdf x \u548c y \u7684\u7279\u5f81\u3002x \u548c y \u90fd\u5f88\u5927\uff0c\u4f46\u662f\u4e24\u4e2a\u7684\u5dee\u5e76\u4e0d\u5927\uff1b\u800c\u4e14\u53ef\u4ee5\u4e22\u5230 python \u91cc\u9a8c\u8bc1\u51fa x \u662f\u4e00\u4e2a\u8d28\u6570 \u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528 \u5a01\u5c14\u900a\u5b9a\u7406 \u4e5f\u67e5\u5230\u4e86\u5a01\u5c14\u900a\u5b9a\u7406\u5728 RSA \u9898\u76ee\u4e2d\u7684\u5e94\u7528\uff1a BUU-RSA [RoarCTF2019]babyRSA \u8981\u6c42 y! % x\uff08x\u662f\u8d28\u6570\uff09 \u6839\u636e\u5a01\u5c14\u900a\u5b9a\u7406\uff0c\u6709 \\[ (x - 1)! \\equiv -1\\pmod{x} \\] \u6240\u4ee5\uff1a \\[ y!\\times \\frac{(x - 1)!}{y!}\\equiv -1\\pmod{x} \\] \u4ee4 \\(k = \\dfrac{(x - 1)!}{y!} = (y+1)(y+2)...(x-1)x\\) \uff0c\u6240\u4ee5\u6709\uff1a \\[ y!\\equiv -\\mathrm{inv}(k, x)\\pmod{x} \\] \uff08\u5176\u4e2d \\(\\mathrm{inv}(k, x)\\) \u8868\u793a\u6a21 x \u4e0b k \u7684\u9006\u5143\uff09 \u6240\u4ee5\u91cd\u5199 get_p() \u5373\u53ef\u6b63\u786e\u7684\u5f97\u5230 p\uff1a def get_p (): x = ... y = ... k = 1 for i in range ( y + 1 , x ): k = ( k * i ) % x res = ( - gmpy2 . invert ( k , x )) % x return sympy . nextprime ( res ) get_q : \u76f8\u6bd4\u6765\u8bf4\uff0cget_q \u5c31\u6ca1\u90a3\u4e48\u9700\u8981\u6280\u5de7\u4e86 \u7ed9\u51fa\u4e86 value[-1] \u7684\u503c\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u7528 sympy.prevprime \u9006\u63a8\u51fa\u6574\u4e2a value \u6570\u7ec4 value = [ 80096058210213458444437404275177554701604739094679033012396452382975889905967 ] for i in range ( 1 , 10 ): value . append ( sympy . prevprime ( value [ i - 1 ])) print ( \"value[-1] = \" , value [ - 1 ]) \u540e\u9762\u8ba1\u7b97 value_q \u7ec6\u770b\u5176\u5b9e\u4e5f\u662f\u4e00\u4e2a RSA \u7b97\u6cd5\uff1a q\uff1a\u5bc6\u6587 e\uff1a\u79c1\u94a5 value_q\uff1a\u660e\u6587 n\uff1a\u5c31\u662f n\uff0c\u53ea\u4e0d\u8fc7\u4e0d\u662f\u4e24\u4e2a\u8d28\u6570\u76f8\u4e58\uff0c\u662f\u5341\u4e2a\u8d28\u6570\u76f8\u4e58 \u5341\u4e2a\u8d28\u6570\u76f8\u4e58\u5f97\u5230 n \u7684 RSA \u7b97\u6cd5\u4e5f\u4e00\u6837\uff0c\u56e0\u4e3a RSA \u7684\u6b63\u786e\u6027\u5e76\u6ca1\u6709\u8981\u6c42 n \u4e00\u5b9a\u662f\u4e24\u4e2a\u5927\u8d28\u6570\u76f8\u4e58\uff0c\u8fd9\u6837\u53ea\u662f\u96be\u4ee5\u7834\u89e3\u4fdd\u8bc1\u5b89\u5168\u6027 \u89e3\u51b3\u8fd9\u4e2a\u540c\u6837\u4e5f\u662f\u9700\u8981\u516c\u94a5 d\uff0c\u6240\u4ee5\u9700\u8981 phi(n) \u6839\u636e \u6b27\u62c9\u51fd\u6570 \u7684\u6027\u8d28\uff0cphi(n) \u7b49\u4e8e n \u7684\u6240\u6709\u8d28\u56e0\u6570\u51cf\u4e00\u7684\u79ef \u5373 phi(n) = (value[0] - 1) * (value[1] - 1) * ... * (value[9] - 1) \u518d\u89e3\u5bc6\u5373\u53ef\u5f97\u5230\u5bc6\u6587 q\uff0c\u7136\u540e\u4e5f\u5c31\u5f97\u5230\u4e86 get_q \u7684\u7ed3\u679c n = phi = 1 for i in range ( 10 ): n = n * value [ i ] phi *= ( value [ i ] - 1 ) value_q = ... d = pow ( e , - 1 , phi ) q = pow ( value_q , d , n ) return sympy . nextprime ( q ) flag : \u641e\u5b9a\u4e86 get_p \u548c get_q \u4e4b\u540e\u5c31\u53ef\u4ee5\u76f4\u63a5\u89e3\u51fa flag \u4e86\uff1a e = 65537 p = get_p () q = get_q () c = ... d = pow ( e , - 1 , ( p - 1 ) * ( q - 1 )) m = pow ( c , d , p * q ) print ( int . to_bytes ( m , 30 , byteorder = \"big\" ))","title":"Easy RSA"},{"location":"writeups/hackergame2021/#u","text":"\uff08\u672c\u6765\u633a\u597d\u505a\u7684\u4e00\u9053\u9898\uff0c\u600e\u4e48\u9898\u7ed9\u7684\u63d0\u793a\u6211\u5c31\u786c\u662f\u6ca1\u9886\u4f1a\u5230\uff09 \u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e LUKS (Linux Unified Key Setup) \u7684\u6545\u4e8b\u3002 \u7b2c\u4e00\u5929 \u5c0f T\uff1a\u300c\u4f60\u8981\u7684\u968f\u673a\u8fc7\u7a0b\u7684\u8bfe\u4ef6\u6211\u5e2e\u4f60\u62f7\u597d\u4e86\uff0c\u5728\u8fd9\u4e2a U \u76d8\u91cc\uff0cLUKS \u52a0\u5bc6\u7684\u5bc6\u7801\u662f suijiguocheng123123\u3002\u300d \u5c0f Z\uff1a\u300c\u554a\uff0c\u4f60\u53c8\u641e\u4e86 Linux \u6587\u4ef6\u7cfb\u7edf\u52a0\u5bc6\uff0c\u771f\u62ff\u4f60\u6ca1\u529e\u6cd5\u3002\u6211\u73b0\u5728\u4e0d\u65b9\u4fbf\u7528 Linux\uff0c\u6211\u76f4\u63a5\u628a\u8fd9\u5757\u76d8\u505a\u6210\u78c1\u76d8\u955c\u50cf\u6587\u4ef6\u518d\u56de\u53bb\u5904\u7406\u5427\u3002\u300d \u7b2c\u4e8c\u5929 \u5c0f Z\uff1a\u300c\u8c22\u8c22\u4f60\u6628\u5929\u5e2e\u6211\u62f7\u7684\u8bfe\u4ef6\u3002\u4f60\u6bcf\u6b21\u90fd\u641e\u8fd9\u4e2a\u52a0\u5bc6\uff0c\u5b83\u771f\u7684\u5b89\u5168\u5417\uff1f\u300d \u5c0f T\uff1a\u300c\u5f53\u7136\u4e86\uff01\u4f60\u770b\uff0c\u4f60\u8fd8\u7ed9\u6211\u4e4b\u540e\uff0c\u6211\u5df2\u7ecf\u628a\u8fd9\u5757\u76d8\u7684\u5f31\u5bc6\u7801\u6539\u6389\u4e86\uff0c\u73b0\u5728\u662f\u968f\u673a\u751f\u6210\u7684\u5f3a\u5bc6\u7801\uff0c\u8fd9\u6837\u9664\u4e86\u6211\u81ea\u5df1\uff0c\u4e16\u754c\u4e0a\u4efb\u4f55\u4eba\u90fd\u65e0\u6cd5\u89e3\u5bc6\u5b83\u4e86\u3002\u300d \u5c0f Z\uff1a\u300c\u6211\u53ef\u4e0d\u4fe1\u3002\u300d \u5c0f T\uff1a\u300c\u4f60\u4e0d\u4fe1\uff1f\u4f60\u770b\uff0c\u6211\u73b0\u5728\u5f80 U \u76d8\u91cc\u653e\u4e00\u4e2a flag \u6587\u4ef6\uff0c\u7136\u540e\u8fd9\u4e2a U \u76d8\u5c31\u7ed9\u4f60\u4e86\uff0c\u4f60\u7edd\u5bf9\u89e3\u5bc6\u4e0d\u51fa\u6765\u8fd9\u4e2a\u6587\u4ef6\u7684\u5185\u5bb9\u3002\u5f53\u521d\u641e LUKS \u7684\u65f6\u5019\u6211\u53ef\u7814\u7a76\u4e86\u597d\u51e0\u5929\uff0c\u73ed\u4e0a\u53ef\u6ca1\u4eba\u6bd4\u6211\u66f4\u61c2\u52a0\u5bc6\uff01\u300d \u4e00\u5171\u7ed9\u4e86\u4e24\u4e2a img \u6587\u4ef6\uff0c\u901a\u8fc7 file \u53ef\u4ee5\u770b\u51fa\u90fd\u662f DOS/MBR boot sector $ file *.img day1.img: DOS/MBR boot sector ; partition 1 : ID = 0xee, start-CHS ( 0x0,0,2 ) , end-CHS ( 0x3ff,255,63 ) , startsector 1 , 40959 sectors, extended partition table ( last ) day2.img: DOS/MBR boot sector ; partition 1 : ID = 0xee, start-CHS ( 0x0,0,2 ) , end-CHS ( 0x3ff,255,63 ) , startsector 1 , 40959 sectors, extended partition table ( last ) \u6240\u4ee5\u5148\u76f4\u63a5 7z \u63d0\u53d6\uff0c\u5f97\u5230\u4e24\u4e2a\u65b0\u7684 img\uff0c\u518d file\uff1a $ file *.img My Disk.img: LUKS encrypted file, ver 2 [ , , sha256 ] UUID: e9a660d5-4a91-4dca-bda5-3f6a49eea998 My Disk 2 .img: LUKS encrypted file, ver 2 [ , , sha256 ] UUID: e9a660d5-4a91-4dca-bda5-3f6a49eea998 \u53d1\u73b0\u90fd\u662f LUKS encrypted file \u5728 Kali Linux \u91cc\u5c1d\u8bd5\u76f4\u63a5\u6302\u8f7d\u7b2c\u4e00\u4e2a img\uff0c\u8981\u6c42\u8f93\u5165\u5bc6\u7801\uff0c\u628a\u9898\u7ed9\u7684\u5bc6\u7801\u8f93\u5165\u5c31\u53ef\u4ee5\u770b\u5230 \u201c\u8bfe\u4ef6\u201d \u4ee5\u4e0a\u90fd\u662f\u5df2\u77e5\u7684\u8bd5\u9a8c\u90e8\u5206\uff0c\u771f\u6b63\u8981\u505a\u7684\u662f\u89e3\u5f00\u7b2c\u4e8c\u4e2a\u672a\u77e5\u5bc6\u7801\u7684 LUKS img \u5df2\u77e5\u78c1\u76d8\u7684\u52a0\u5bc6\u4f7f\u7528\u7684\u662f luks2\uff0c\u5728\u7f51\u4e0a\u67e5\u4e86\u7834\u89e3 luks2 \u4e4b\u7c7b\u7684\u90fd\u8bf4 luks2 \u4e0d\u53ef\u7834\u89e3 \uff0c\u6216\u8005\u662f\u4f7f\u7528\u5df2\u77e5\u7684\u5bc6\u7801\u5b57\u5178\u6765\u7206\u7834 \u4f46\u662f\u9898\u91cc\u8bf4\u4e86 \u201c \u968f\u673a\u751f\u6210 \u7684\u5f3a\u5bc6\u7801\u201d\uff0c\u6240\u4ee5\u4e5f\u662f\u6ca1\u6709\u5bc6\u7801\u5b57\u5178\u7684 \u5176\u5b9e\u8fd9\u9053\u9898\u7684\u6700\u5927\u63d0\u793a\u5c31\u5728\u4e8e\u5b83\u7ed9\u4e86\u4e24\u4e2a img\uff0c\u65e2\u7136\u7b2c\u4e00\u4e2a img \u6253\u5f00\u540e\u4ec5\u4ec5\u662f\u4e00\u4e2a\u8bfe\u4ef6\uff0c\u5982\u679c\u5b83\u7684\u7528\u5904\u4ec5\u4ec5\u662f\u7528\u6765\u8bd5\u9a8c luks \u600e\u4e48\u6253\u5f00\u7684\u8bdd\uff0c\u6839\u672c\u5b83\u6ca1\u5fc5\u8981\u7ed9\u51fa \u6240\u4ee5\u7b2c\u4e00\u4e2a img \u80af\u5b9a\u8fd8\u662f\u6709\u7528\u7684\u3002 \u518d\u770b\u9898\u76ee\uff0c\u53cd\u590d\u8bf4\u4e86 U \u76d8\uff0c\u6240\u4ee5\u8fd9\u4e24\u4e2a img \u5e94\u8be5\u662f\u540c\u4e00\u4e2a U \u76d8\u7684\u955c\u50cf\u6587\u4ef6\uff0c\u53ea\u662f\u66f4\u6539\u4e86\u5bc6\u7801\u800c\u5df2\uff08file \u770b\u5230\u7684 uuid \u4e5f\u662f\u4e00\u81f4\u7684\uff09 \u4e8e\u662f\u7ee7\u7eed\u5fc5\u5e94\uff0c\u53d1\u73b0\u540c\u4e00\u4e2a\u78c1\u76d8\u7684 master-key \u662f\u4e00\u6837\u7684\uff0c\u800c\u4e14\u53ef\u4ee5\u7528 master-key \u6765\u6dfb\u52a0\u5bc6\u7801\u6062\u590d\u78c1\u76d8\uff08\u89c1\uff1a 10 Linux cryptsetup Examples for LUKS Key Management \uff09 \u6240\u4ee5\u5c31\u8ddf\u7740\u6587\u7ae0\u91cc\u7684\u505a\u6cd5\uff0c\u4ece\u7b2c\u4e00\u4e2a img \u4e2d\u63d0\u53d6\u51fa master-key\uff0c\u7136\u540e\u7528\u5b83\u6765\u63d0\u4f9b AddKey \u7684\u6743\u9650\u3002\u6dfb\u52a0\u4e86\u65b0 passphrase \u540e\u5c31\u53ef\u4ee5\u7528\u65b0\u5bc6\u7801\u6253\u5f00\u78c1\u76d8\u4e86\uff1a $ cryptsetup luksDump --dump-master-key MyDisk.img # \u8f93\u51fa master-key ... MK dump: be 97 db 91 5c 30 47 ce 1c 59 c5 c0 8c 75 3c 40 72 35 85 9d fe 49 c0 52 c4 f5 26 60 af 3e d4 2c ec a3 60 53 aa 96 70 4d f3 f2 ff 56 8f 49 a1 82 60 18 7c 58 d7 6a ec e8 00 c1 90 c1 88 43 f8 9a $ cat \"be...9a\" > master_key.txt # \u5b58\u5165\u6587\u4ef6 $ xxd -r -p master_key.txt master_key.bin # \u8f6c\u4e3a\u4e8c\u8fdb\u5236 $ cryptsetup luksAddKey MyDisk2.img --master-key-file < ( cat master_key.bin ) # \u6dfb\u52a0\u5bc6\u7801 Enter new passphrase for key slot: # \u8f93\u5165\u65b0\u5bc6\u7801\u5373\u53ef\uff0c\u56e0\u4e3amaster-key-file\u76f8\u5f53\u4e8e\u63d0\u4f9b\u4e86\u539f\u59cb\u5bc6\u7801 Verify passphrase: \uff08\u4e00\u5b9a\u8981\u7528 root \u6743\u9650\u624d\u53ef\u4ee5\u52a0\u5bc6\u7801\uff09 \u7136\u540e\u6302\u8f7d\u3001\u8f93\u5165\u5bc6\u7801\uff0c\u5c31\u53ef\u4ee5\u770b\u5230 flag.txt \u4e86","title":"\u52a0\u5bc6\u7684 U \u76d8"},{"location":"writeups/hackergame2021/#_9","text":"\u867d\u7136\u8fd9\u662f\u4f60\u7684\u9910\u5385\uff0c\u4f46\u53ea\u6709\u673a\u5668\u4eba\u53ef\u4ee5\u5728\u53a8\u623f\u5de5\u4f5c\u3002\u673a\u5668\u4eba\u7cbe\u786e\u5730\u6309\u7167\u7a0b\u5e8f\u5de5\u4f5c\uff0c\u5728\u53a8\u623f\u4e2d\u79fb\u52a8\uff0c\u4ece\u7269\u54c1\u6e90\u53d6\u51fa\u98df\u6750\uff0c\u6309\u7167\u83dc\u8c31\u7684\u987a\u5e8f\u628a\u98df\u6750\u4f9d\u6b21\u653e\u5165\u9505\u5185\u3002 \u673a\u5668\u4eba\u4e0d\u9700\u8981\u4f11\u606f\uff0c\u53ea\u9700\u8981\u4e00\u4e2a\u665a\u4e0a\u7684\u65f6\u95f4\u6765\u5b66\u4e60\u4f60\u6559\u7ed9\u5b83\u7684\u7a0b\u5e8f\uff0c\u5728\u6b64\u4e4b\u540e\u4f60\u5c31\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u8ba9\u673a\u5668\u4eba\u6267\u884c\u8fd9\u4e2a\u7a0b\u5e8f\uff0c\u7a0b\u5e8f\u7684\u6bcf\u4e00\u6b65\u6267\u884c\u90fd\u4f1a\u88ab\u8bb0\u5f55\u4e0b\u6765\uff0c\u65b9\u4fbf\u4f60\u68c0\u67e5\u673a\u5668\u4eba\u505a\u83dc\u7684\u8fc7\u7a0b\u3002 \u53e6\u5916\u4e3a\u4e86\u7b26\u5408\u98df\u54c1\u5b89\u5168\u6cd5\u7684\u8981\u6c42\uff0c\u8d5b\u535a\u53a8\u623f\u4e2d\u7684\u673a\u5668\u4eba\u540c\u4e00\u65f6\u95f4\u624b\u91cc\u53ea\u80fd\u62ff\u4e00\u79cd\u98df\u7269\uff0c\u6bcf\u6b21\u505a\u83dc\u524d\u90fd\u5fc5\u987b\u6267\u884c\u6e05\u7406\u53a8\u623f\u7684\u64cd\u4f5c\uff0c\u628a\u5404\u5904\u7684\u98df\u7269\u6b8b\u6e23\u6e05\u7406\u6389\uff0c\u7136\u540e\u56de\u5230\u53a8\u623f\u89d2\u843d\u5f85\u547d\u3002 \u6bcf\u5929\u7684\u83dc\u8c31\u53ef\u80fd\u4e0d\u540c\uff0c\u4f46\u4e5f\u8bb8\u4e5f\u5b58\u5728\u4e00\u4e9b\u89c4\u5f8b\u3002 \u5bf9\u673a\u5668\u4eba\u7f16\u7a0b\u53ef\u4ee5\u4f7f\u7528\u7684\u6307\u4ee4\u6709\uff08n, m \u4e3a\u6574\u6570\u53c2\u6570\uff0c\u7a0b\u5e8f\u7684\u884c\u53f7\u4ece 0 \u5f00\u59cb\uff0c\u6ce8\u610f\u6307\u4ee4\u4e2d\u9700\u8981\u6b63\u786e\u4f7f\u7528\u7a7a\u683c\uff09\uff1a \u5411\u4e0a n \u6b65 \u5411\u4e0b n \u6b65 \u5411\u5de6 n \u6b65 \u5411\u53f3 n \u6b65 \u653e\u4e0b n \u4e2a\u7269\u54c1 \u62ff\u8d77 n \u4e2a\u7269\u54c1 \u653e\u4e0b\u76d8\u5b50 \u62ff\u8d77\u76d8\u5b50 \u5982\u679c\u624b\u4e0a\u7684\u7269\u54c1\u5927\u4e8e\u7b49\u4e8e n \u5411\u4e0a\u8df3\u8f6c m \u884c \u5982\u679c\u624b\u4e0a\u7684\u7269\u54c1\u5927\u4e8e\u7b49\u4e8e n \u5411\u4e0b\u8df3\u8f6c m \u884c \u8d76\u7d27\u8fdb\u5165\u8d5b\u535a\u53a8\u623f\u5f00\u59cb\u505a\u83dc\u5427\uff01 \u521a\u770b\u9898\u8fd8\u662f\u633a\u61f5\u7684\uff0c\u60f3\u4e86\u597d\u534a\u5929\u624d\u660e\u767d \u7b80\u5355\u8bf4\u6765\u5c31\u662f\uff0c\u6bcf\u5929\u53ef\u4ee5\u7f16\u5199\u65b0\u7684\u7a0b\u5e8f\uff0c\u4f46\u662f\u53ea\u80fd\u8fd0\u884c\u4e00\u4e2a\u4e4b\u524d\u7f16\u5199\u8fc7\u7684\u7a0b\u5e8f \u6bcf\u4e2a\u7a0b\u5e8f\u53ea\u6709\u51e0\u79cd\u6307\u4ee4\u53ef\u4ee5\u4f7f\u7528\uff0c\u9700\u8981\u5728\u5176\u4e2d\u6ee1\u8db3\u83dc\u8c31\u7684\u987a\u5e8f\u8981\u6c42 \u800c\u95ee\u9898\u5728\u4e8e\uff0c\u7f16\u5199\u7a0b\u5e8f\u540e\u7684\u7b2c\u4e8c\u5929\u7684\u83dc\u8c31\u53ef\u80fd\u4f1a\u4e0d\u540c\uff0c\u5bfc\u81f4\u524d\u9762\u7f16\u5199\u7684\u7a0b\u5e8f\u65e0\u6cd5\u4f7f\u7528 \u6240\u4ee5\u5c31\u9700\u8981 \u9884\u6d4b \u7b2c\u4e8c\u5929\u7684\u83dc\u8c31","title":"\u8d5b\u535a\u53a8\u623f"},{"location":"writeups/hackergame2021/#level-0","text":"\u53ef\u4ee5\u770b\u5230\u7b2c 0 \u5929\u7684\u83dc\u8c31\u662f 1, 0\uff0c\u4e5f\u5c31\u662f\u8981\u5728\u540c\u4e00\u4e2a\u7a0b\u5e8f\u4e2d\u4f9d\u6b21\u5411\u9505(1,0)\u4e2d\u653e\u5165 1 \u53f7\u98df\u7269(0,2)\u548c 0 \u53f7\u98df\u7269(0,1) \u968f\u4fbf\u7f16\u5199\u7a0b\u5e8f\u4fdd\u5b58\uff0c\u76f4\u63a5\u5230\u4e0b\u4e00\u5929\uff0c\u53ef\u4ee5\u53d1\u73b0\u83dc\u8c31\u53d1\u751f\u4e86\u53d8\u5316 \u591a\u6b21\u5c1d\u8bd5\u4e4b\u540e\u53d1\u73b0\u83dc\u8c31 \u53ea\u6709 0,0 / 0,1 / 1,0 / 1,1 \u56db\u79cd \u6240\u4ee5\u5728\u7b2c 0 \u5929\u7f16\u5199\u5b66\u4e60\u56db\u4e2a\u7a0b\u5e8f\uff0c\u5230\u4e0b\u4e00\u5929\u5c31\u53ef\u4ee5\u6839\u636e\u83dc\u8c31\u6765\u6267\u884c\u4e86 \u4f8b\u5982\u7a0b\u5e8f 1,0 \u5c31\u53ef\u4ee5\u7f16\u5199\u4e3a\uff1a \u5411\u53f3 2 \u6b65 \u62ff\u8d77 1 \u4e2a\u7269\u54c1 \u5411\u5de6 2 \u6b65 \u5411\u4e0b 1 \u6b65 \u653e\u4e0b 1 \u4e2a\u7269\u54c1 \u5411\u4e0a 1 \u6b65 \u5411\u53f3 1 \u6b65 \u62ff\u8d77 1 \u4e2a\u7269\u54c1 \u5411\u5de6 1 \u6b65 \u5411\u4e0b 1 \u6b65 \u653e\u4e0b 1 \u4e2a\u7269\u54c1 \u5411\u4e0a 1 \u6b65 \u53ea\u8981\u6b63\u786e\u4e86\u4e00\u5929\uff0c\u5c31\u53ef\u4ee5\u62ff\u5230 flag \u4e86","title":"Level 0"},{"location":"writeups/hackergame2021/#level-1","text":"\u53ea\u6709 1 \u4e2a\u98df\u7269\uff0c\u83dc\u8c31\u662f\u597d\u591a 0 \u540c\u6837\u968f\u4fbf\u7f16\u5199\u7a0b\u5e8f\u4fdd\u5b58\u8fdb\u5165\u4e0b\u4e00\u5929\uff0c\u53d1\u73b0\u83dc\u8c31 \u6ca1\u6709\u53d8\u5316 \uff0c\u8fd8\u662f 73 \u4e2a 0 \u6240\u4ee5\u8fd9\u4e00\u5173\u53ef\u80fd\u53ea\u662f\u5faa\u73af\u7684\u6559\u7a0b \u53ef\u7528\u7684\u6307\u4ee4\u4e2d\u6709\u4e00\u6761 \u201c\u5982\u679c\u624b\u4e0a\u7684\u7269\u54c1\u5927\u4e8e\u7b49\u4e8e n \u5411\u4e0a\u8df3\u8f6c m \u884c\u201d \u53ef\u4ee5\u7528\u5b83\u6765\u8fbe\u5230 \u5faa\u73af \u7684\u6548\u679c \u53ea\u9700\u8981\u62ff 73 \u4e2a\u7269\u54c1\uff0c\u7136\u540e\u5faa\u73af\u653e\u4e0b\u76f4\u5230\u624b\u4e2d\u6ca1\u6709\u4e86\u5373\u53ef \u5411\u53f3 1 \u6b65 \u62ff\u8d77 73 \u4e2a\u7269\u54c1 \u5411\u5de6 1 \u6b65 \u5411\u4e0b 1 \u6b65 \u653e\u4e0b 1 \u4e2a\u7269\u54c1 \u5982\u679c\u624b\u4e0a\u7684\u7269\u54c1\u5927\u4e8e\u7b49\u4e8e 1 \u5411\u4e0a\u8df3\u8f6c 1 \u884c \u540c\u6837\u4fdd\u5b58\u4e0b\u4e00\u5929\u6267\u884c\u5c31\u53ef\u4ee5\u62ff\u5230 flag \u4e86 \u5269\u4e0b\u7684\u4e24\u4e2a\u770b\u8d77\u6765\u5927\u6982\u662f\u901a\u8fc7\u6e90\u7801\u6765\u63a8\u6d4b\u51fa\u83dc\u8c31\u7684\u751f\u6210\u65b9\u6cd5\uff0c\u7136\u540e\u7f16\u5199\u76f8\u5e94\u7684\u6307\u4ee4\uff0c\u592a\u96be\u4e86\uff0c\u4e0d\u4f1aqwq","title":"Level 1"},{"location":"writeups/hackergame2021/#micro-world","text":"\u5b87\u5b99\u4e2d\u67d0\u4e00\u7247\u6781\u5176\u5fae\u5c0f\u7684\u533a\u57df\u91cc\u7684\u7c92\u5b50\u88ab\u4e00\u80a1\u795e\u79d8\u529b\u91cf\u521d\u59cb\u5316\u8bbe\u7f6e\u6210\u4e86 flag \u7684\u5f62\u72b6\uff0c\u7a0b\u5e8f\u5fe0\u5b9e\u5730\u8bb0\u5f55\u4e86\u4e00\u6bb5\u65f6\u95f4\u4e4b\u540e\u8fd9\u7247\u533a\u57df\u7684\u7c92\u5b50\u8fd0\u52a8\u60c5\u51b5\u3002 \u62ff\u5230\u4e86 exe \u6587\u4ef6\uff0c\u770b\u8d77\u6765\u633a\u7cbe\u81f4\uff0c\u8fd0\u884c\u8d77\u6765\u662f\u4e00\u4e9b\u70b9\u8fd0\u52a8\u78b0\u649e\u7684\u573a\u666f \u62d6\u5230 IDA \u91cc\u770b\u770b\uff0c\u53d1\u73b0\u4e86 __main__ \u4ee5\u53ca .rdata \u91cc\u4e00\u4e9b py \u6709\u5173\u7684\u5b57\u7b26\u4e32\uff1a \u6240\u4ee5\u63a8\u6d4b\u662f\u4f7f\u7528 python \u7f16\u5199\u7684\uff0c\u7136\u540e\u7528 pyinstaller \u6253\u5305 \u8fd9\u6837\u7684\u8bdd\u8bd5\u7740\u7528 pyinstxtractor \u89e3\u5305 .exe\uff0c\u6210\u529f\u5f97\u5230\u4e00\u4e2a\u6587\u4ef6\u5939 \u91cc\u9762\u662f\u4e00\u5806 .pyc .pyd .dll \u6587\u4ef6\uff0c\u4ece\u540d\u5b57\u5c31\u53ef\u4ee5\u770b\u51fa\u5927\u90e8\u5206\u662f import \u7684\u5305\uff0c\u53ea\u6709\u4e00\u4e2a\u7279\u522b\u7684 2.pyc \u6240\u4ee5\u8fd9\u4e2a\u5e94\u8be5\u5c31\u662f\u7f16\u8bd1\u540e\u7684\u6e90\u7801\u4e86 \u63a5\u4e0b\u6765\u7528 uncompyle6 \u6765\u53cd\u7f16\u8bd1 pyc \u6587\u4ef6\uff0c\u8f93\u51fa\u5f97\u5230\u4e86\u6e90\u7801 2.py \u5c1d\u8bd5\u8fd0\u884c\uff0c\u53d1\u73b0\u8dd1\u8d77\u6765\u4e4b\u540e\u53ea\u6709\u4e00\u4e2a\u70b9\u5728\u8fd0\u52a8\uff0c\u5e94\u8be5\u662f\u53cd\u7f16\u8bd1\u65f6\u51fa\u4e86\u4e9b\u95ee\u9898 \u4e8e\u662f\u5f00\u59cb\u770b\u6e90\u7801 \u57fa\u672c\u4e0a\u7b80\u5355\u8bf4\u5c31\u662f\uff0c\u521d\u59cb\u6709\u4e00\u4e9b\u6570\u636e\uff0c\u8868\u793a\u6bcf\u4e2a\u70b9\u7684\u4f4d\u7f6e\u548c\u901f\u5ea6\uff0c\u7136\u540e\u8fd0\u884c\uff0c\u6bcf\u6b21\u8fd0\u884c\u90fd\u68c0\u6d4b\u78b0\u649e\uff0c\u7136\u540e\u83b7\u5f97\u65b0\u7684\u70b9\u4f4d\u7f6e\uff0c\u518d\u7ed8\u5236\u51fa\u6765 \u8c03\u8bd5\u4e00\u4e0b\uff0c\u8f93\u51fa\u6bcf\u6b21\u7684 pointlist\uff0c\u53d1\u73b0\u7b2c\u4e00\u6b21\u662f\u6240\u6709\u70b9\uff0c\u7b2c\u4e8c\u6b21\u53d8\u62102\u4e2a\uff0c\u7b2c\u4e09\u6b21\u5f80\u540e\u5c31\u53ea\u6709\u4e00\u4e2a\u4e86 \u6240\u4ee5\u95ee\u9898\u5927\u6982\u5c31\u51fa\u5728\u4e86 next_pos_list \u51fd\u6570\uff1a def next_pos_list ( Pointlist ): pointlist = [] for i in range ( len ( Pointlist )): for point in Pointlist [ i + 1 :]: times = checkcrush ( Pointlist [ i ], point ) if times != None : a , b = get_new_point ( times , Pointlist [ i ], point ) pointlist . extend ([ a , b ]) Pointlist [ i ] . flag = 0 point . flag = 0 else : for item in Pointlist : if item . flag != 0 : pointlist . append ( Point (( item . x + item . vx , item . y + item . vy ), item . vx , item . vy )) for poi in pointlist : poi . x = poi . x % WIDTH poi . y = poi . y % HEIGHT else : return pointlist \u4ed4\u7ec6\u8bfb\u4e00\u8bfb\uff0c\u53ef\u4ee5\u53d1\u73b0\u8fd9\u91cc\u9762\u7684 for-else \u5757\u5f88\u5947\u602a\uff0c\u5bfc\u81f4\u5faa\u73af\u7ed3\u675f\u548c return \u90fd\u65e9\u4e86\uff0c\u6240\u4ee5\u6839\u636e\u51fd\u6570\u7684\u610f\u601d\u6539\u4e00\u6539\uff1a def next_pos_list ( Pointlist ): pointlist = [] for i in range ( len ( Pointlist )): for point in Pointlist [ i + 1 :]: ... for item in Pointlist : ... return pointlist \u8fd9\u6837\u5c31\u53ef\u4ee5\u6210\u529f\u8fd0\u884c\u4e86 \u4f46\u662f\u753b\u9762\u4ecd\u7136\u662f\u6742\u4e71\u7684\u3002\u56e0\u4e3a\u9898\u91cc\u8bf4\u4e86 \u201c\u8bb0\u5f55\u4e86 \u4e00\u6bb5\u65f6\u95f4\u4e4b\u540e \u8fd9\u7247\u533a\u57df\u7684\u7c92\u5b50\u8fd0\u52a8\u60c5\u51b5\u201d \u6240\u4ee5\u9700\u8981\u5c06\u8f68\u8ff9\u5f80\u524d\u63a8\uff0c\u6700\u65b9\u4fbf\u7684\u65b9\u6cd5\u5c31\u662f\u66f4\u6539\u6bcf\u4e2a\u70b9\u7684\u901f\u5ea6\u65b9\u5411\uff1a Pointlist = [] for item in list_ : Pointlist . append ( Point (( item [ 0 ], item [ 1 ]), - item [ 2 ], - item [ 3 ])) \u8fd0\u884c\u540e\u7b49\u5f85\u4e00\u5c0f\u4f1a\u513f\u5c31\u53ef\u4ee5\u770b\u5230\u70b9\u9010\u6e10\u6709\u5e8f\uff0c\u5728\u67d0\u4e00\u523b\u6c47\u6210\u4e86 flag\uff1a \u867d\u7136\u4e0d\u592a\u6e05\u6670\uff0c\u4f46\u662f\u4e5f\u53ef\u4ee5\u731c\u4e2a\u5927\u6982","title":"Micro World"},{"location":"writeups/hackergame2021/#_10","text":"\uff08\u8fd9\u9898\u6574\u6574\u505a\u4e86\u6211\u4e24\u5929\u591a\uff0c\u6bcf\u5929\u665a\u4e0a\u90fd\u5bf9\u7740\u78c1\u76d8\u9635\u5217\u2026\u2026\uff09 \u4ee5\u4e0b\u662f\u4e24\u4e2a\u538b\u7f29\u5305\uff0c\u5206\u522b\u662f\u4e00\u4e2a RAID 0 \u9635\u5217\u7684\u78c1\u76d8\u538b\u7f29\u5305\uff0c\u548c\u4e00\u4e2a RAID 5 \u9635\u5217\u7684\u78c1\u76d8\u538b\u7f29\u5305\uff0c\u5bf9\u5e94\u672c\u9898\u7684\u4e24\u5c0f\u95ee\u3002\u4f60\u9700\u8981\u89e3\u6790\u5f97\u5230\u6b63\u786e\u5b8c\u6574\u7684\u78c1\u76d8\u9635\u5217\uff0c\u6302\u8f7d\u7b2c\u4e00\u4e2a\u5206\u533a\u540e\u5728\u8be5\u5206\u533a\u6839\u76ee\u5f55\u4e0b\u4f7f\u7528 Python 3.7 \u6216\u4ee5\u4e0a\u7248\u672c\u6267\u884c getflag.py \u811a\u672c\u4ee5\u83b7\u53d6 flag\u3002\u78c1\u76d8\u6570\u636e\u4fdd\u8bc1\u65e0\u635f\u574f\u3002","title":"\u9635\u5217\u6062\u590d\u5927\u5e08"},{"location":"writeups/hackergame2021/#raid-5","text":"\u867d\u7136 RAID 5 \u662f\u7b2c\u4e8c\u95ee\uff0c\u800c\u4e14\u5206\u6570\u9ad8\uff0c\u4f46\u662f\u66f4\u597d\u505a\uff0c\u800c\u4e14\u505a\u51fa\u7684\u4eba\u4e5f\u591a\u3002 \u56e0\u4e3a\u6570\u636e\u4fdd\u8bc1\u65e0\u635f\u574f\uff0c\u6240\u4ee5\u8981\u505a\u7684\u4ec5\u4ec5\u662f\u627e\u51fa\u4e94\u4e2a\u78c1\u76d8\u7684\u987a\u5e8f\u548c\u5757\u5927\u5c0f \u987a\u5e8f\u53ef\u4ee5\u5148\u7b80\u5355\u5730\u770b\u770b strings *.img \u8f93\u51fa\u7684\u5185\u5bb9 \u9010\u4e2a\u6587\u4ef6\u770b\uff0c\u53ef\u4ee5\u53d1\u73b0\u6bcf\u4e2a\u6587\u4ef6\u6bd4\u8f83\u9760\u524d\u7684\u5730\u65b9\u4f1a\u6709\u4e00\u6bb5\u662f git \u5386\u53f2\u8bb0\u5f55\u7684\u4e00\u90e8\u5206: \u6839\u636e\u91cc\u9762\u7684\u65f6\u95f4\u53ef\u4ee5\u63a8\u65ad\u51fa\u78c1\u76d8\u7684\u987a\u5e8f\u5927\u81f4\u662f\uff1a Qj... -> 60... -> 3R... -> Ir... -> 3D... \u53ea\u662f\uff0c\u8fd9\u4e2a\u987a\u5e8f\u5e94\u8be5\u662f\u4e00\u4e2a\u73af\uff0c\u8c01\u5728\u7b2c\u4e00\u8fd8\u6ca1\u533a\u5206\u51fa\u6765 \u5728\u770b\u6bcf\u4e2a\u6587\u4ef6\u7684\u5934\u90e8\uff0c\u53ea\u6709 60... \u548c 3R... \u6709 \u201cEFI PART\u201d: \u6240\u4ee5\u5e94\u8be5\u662f\u4e00\u4e2a\u5728\u5f00\u5934\uff0c\u4e00\u4e2a\u5728\u7ed3\u5c3e\u3002\u6240\u4ee5\u6700\u7ec8\u7684\u987a\u5e8f\u662f\uff1a 3R... -> Ir... -> 3D... -> Qj... -> 60... \u7136\u540e\u9700\u8981\u627e\u5230\u5757\u5927\u5c0f \u76f4\u63a5\u4e22\u5230 DiskGenius \u91cc\u7ec4\u5efa\u865a\u62df RAID\uff0c\u9009\u5de6\u540c\u6b65\uff0c\u7136\u540e\u53ef\u4ee5\u8bd5\u51fa\u6765\u5f53\u5757\u5927\u5c0f\u662f 64k \u7684\u65f6\u5019\u6b63\u597d\u53ef\u4ee5\u62fc\u51fa\u5b8c\u6574\u78c1\u76d8 \u7136\u540e\u514b\u9686\u78c1\u76d8\u751f\u6210 img \u6587\u4ef6\uff0c\u518d\u6302\u8f7d\uff0c\u8fdb\u5165\uff0c\u6267\u884c getflag.py \u5c31\u5f97\u5230\u4e86 flag","title":"RAID 5"},{"location":"writeups/hackergame2021/#raid-0","text":"\u5728\u505a RAID 5 \u7684\u65f6\u5019\u8fd8\u53d1\u73b0\u4e86\u4e00\u4e2a\u53eb Raid Reconstructor \u7684\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u7206\u7834 RAID \u9635\u5217\u987a\u5e8f\u548c\u5757\u5927\u5c0f \u6240\u4ee5\u8fd9\u95ee\u4e5f\u5c31\u61d2\u5f97\u770b\u4e86\uff0c\u76f4\u63a5\u4e22\u7ed9 Raid Reconstructor \u6765\u7206\u7834\uff0c\u5f97\u5230\u6700\u63a8\u8350\u7684\u987a\u5e8f\uff1a wl. -> jC. -> 1G. -> 5q. -> d3. -> eR. -> RA. -> ID. \u548c\u5757\u5927\u5c0f 128k \u7136\u540e\u76f4\u63a5\u7528 Raid Reconstructor \u7684 Copy \u5bfc\u51fa img \u6587\u4ef6\uff0c\u63d0\u53d6\u540e\u53c8\u5f97\u5230\u4e00\u4e2a\u65b0\u7684 img \u6587\u4ef6 \u901a\u8fc7 file \u53ef\u4ee5\u770b\u5230\u7ed3\u679c\u7684\u6587\u4ef6\u7cfb\u7edf\u662f XFS $ file MyDisk.img MyDisk.img: SGI XFS filesystem data ( blksz 4096 , inosz 512 , v2 dirs ) \u4f46\u662f\u59cb\u7ec8\u65e0\u6cd5\u6302\u8f7d\uff08\u641e\u4e86\u4e00\u5929\uff09 \u53ef\u80fd\u662f Raid Reconstructor \u7684\u95ee\u9898\uff0c\u6240\u4ee5\u53c8\u7528 DiskGenius \u8bd5\u4e86\u4e0b \u56e0\u4e3a win \u548c DiskGenius \u8bfb\u4e0d\u4e86 XFS \u6587\u4ef6\u7cfb\u7edf\uff0c\u6240\u4ee5\u62fc\u8d77\u6765\u4e4b\u540e\u76f4\u63a5\u514b\u9686\u51fa img \u6587\u4ef6 \u7136\u540e\u62d6\u5230 Kali Linux \u91cc\u6302\u8f7d\uff0c\u6210\u529f\u6302\u8f7d\u540e\u8fdb\u5165\u3001\u8fd0\u884c getflag.py \u5c31\u5f97\u5230\u4e86 flag","title":"RAID 0"},{"location":"writeups/hackergame2021/#_11","text":"\u9898\u76ee\u6709\u6548\u5185\u5bb9\uff1a \u4f60\u7684\u5ba4\u53cb\u7ec8\u4e8e\u8fde\u591c\u8d76\u5b8c\u4e86\u4ed6\u7684 Java \u8bed\u8a00\u7a0b\u5e8f\u8bbe\u8ba1\u7684\u8bfe\u7a0b\u5927\u4f5c\u4e1a\u3002\u770b\u8d77\u6765\u4ed6\u4f7f\u7528 Java 17 \u5199\u4e86\u4e00\u4e2a\u4fdd\u5b58\u52a9\u8bb0\u8bcd\u7684\u540e\u7aef\uff0c\u5f53\u7136\u8fd8\u6709\u914d\u5957\u7684\u524d\u7aef\u3002\u52a9\u8bb0\u8bcd\u7531\u56db\u4e2a\u82f1\u6587\u5355\u8bcd\u7ec4\u6210\uff0c\u6bcf\u4e2a\u7528\u6237\u6700\u591a\u4fdd\u5b58 32 \u6761\u3002 \u4f60\u4ece\u4ed6\u5145\u6ee1\u6fc0\u60c5\u5374\u53c8\u5939\u6742\u4e0d\u6e05\u7684\u8868\u8ff0\u4e2d\u5f97\u77e5\uff0c\u4ed6\u4f3c\u4e4e\u8fd8\u4e3a\u6b64\u4e13\u95e8\u5728\u5927\u4f5c\u4e1a\u91cc\u85cf\u4e86\u4e24\u4e2a flag\uff1a\u5f53\u8bbf\u95ee\u5ef6\u8fdf\u8fbe\u5230\u4e24\u4e2a\u7279\u6b8a\u7684\u9608\u503c\u65f6\uff0cflag \u4fbf\u4f1a\u6253\u5370\u51fa\u6765\uff0c\u5c4a\u65f6\u4f60\u4fbf\u53ef\u4ee5\u62ff\u7740 flag \u8ba9\u4f60\u7684\u5ba4\u53cb\u8bf7\u4f60\u5403\u4e00\u987f\u5927\u9910\u3002 \u4e0b\u8f7d\u5230\u6e90\u7801\u540e\u7ffb\u4e00\u7ffb\uff0c\u6709\u7528\u7684\u5c31\u53ea\u6709 Phrase.java \u548c Instance.java \u5176\u4e2d Phrase.java \u5b9a\u4e49\u4e86 Phrase\uff0c\u5176\u4e2d\u91cd\u8f7d\u4e86 equals \u65b9\u6cd5\uff0c\u5176\u4e2d\u6709\uff1a try { TimeUnit . MILLISECONDS . sleep ( EQUALS_DURATION_MILLIS ); // 20ms // TODO: remove it since it is for debugging } catch ( InterruptedException e ) { throw new RuntimeException ( e ); } \u6240\u4ee5\u5728\u6bcf\u6b21\u6bd4\u8f83\u76f8\u7b49\u7684\u65f6\u5019\u5c31\u4f1a sleep 20ms \u800c Instance.java \u7684 post \u65b9\u6cd5\u4e2d\u5bf9\u4e8e\u6bcf\u6b21\u7684\u8f93\u5165\uff0c\u904d\u5386\u8f93\u5165\u7684\u5217\u8868\uff0c\u7136\u540e\u9010\u4e2a\u52a0\u8fdb HashMap \u4e2d \u5728\u52a0\u5165 HashMap \u7684\u65f6\u5019\u5c31\u6d89\u53ca\u5230\u5224\u65ad\u662f\u5426\u76f8\u7b49 \u800c\u6700\u7ec8\u4f1a\u5224\u65ad\u5728\u5b8c\u6210\u524d\u540e\u7684\u603b\u7684\u65f6\u95f4\u95f4\u9694\u662f\u591a\u5c11\uff0c\u5982\u679c\u5927\u4e8e 600ms \u5c31\u63d0\u53d6\u51fa\u7b2c\u4e00\u4e2a flag\uff1a var modified = 0 ; var before = System . nanoTime (); for ( var i = 0 ; i < input . length () && i < MAX_PHRASES && phrases . size () < MAX_PHRASES ; ++ i ) { var text = input . optString ( i , \"\" ). toLowerCase ( Locale . ENGLISH ); modified += phrases . add ( Phrase . create ( this . mnemonics , text , token )) ? 1 : 0 ; // \u8fd9\u91cc\u4f1a sleep } var after = System . nanoTime (); var duration = TimeUnit . MILLISECONDS . convert ( after - before , TimeUnit . NANOSECONDS ); if ( duration > FLAG1_DURATION_MILLIS ) { // 600ms token . addFlag ( 1 , flag -> output . put ( \"flag1\" , flag )); } \u800c\u5728\u7f51\u9875\u4e2d\u6dfb\u52a0\u6761\u76ee\u7684\u65f6\u5019\uff0c\u4e00\u6b21\u53ea\u80fd\u6dfb\u52a0\u4e00\u6761\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a POST \u91cc\u9762\u53ea\u6709\u4e00\u4e2a Phrase \u4f46\u662f\u6e90\u7801\u4e2d\u6709\u4e00\u4e2a\u5faa\u73af\uff0c\u904d\u5386\u6574\u4e2a input\uff0c\u6240\u4ee5\u4e00\u4e2a POST \u91cc\u7684\u5185\u5bb9\u5176\u5b9e\u662f\u4e00\u4e2a\u5217\u8868 \u6240\u4ee5\u53ef\u4ee5\u7528 BurpSuite \u83b7\u53d6 POST \u7136\u540e\u66f4\u6539\u4e00\u4e0b\u5185\u5bb9\u518d\u53d1\u9001\u51fa\u53bb\uff08\u5148 random \u4e00\u4e2a\uff0c\u7136\u540e add\uff09 \u6839\u636e flag \u91cc\u7684\u63d0\u793a\uff0c\u6b63\u89e3\uff08\u7b2c\u4e8c\u987f\u5927\u9910\uff09\u5e94\u8be5\u662f\u4f7f\u7528\u54c8\u5e0c\u78b0\u649e\uff0c \u4f46\u662f\u4e0d\u4f1a","title":"\u52a9\u8bb0\u8bcd"},{"location":"writeups/hackergame2021/#_12","text":"\uff08\u8fd9\u9053\u9898\u5df2\u7ecf\u505a\u7834\u9632\u4e86\uff0c\u672c\u4ee5\u4e3a\u662f\u4e2a\u9752\u94dc\uff0c\u7ed3\u679c\u662f\u4e2a\u738b\u8005\u2026\u2026\uff09 \u6211\u505a\u7684\u80af\u5b9a\u4e0d\u662f\u6b63\u89e3\uff0c\u5229\u7528\u4e8c\u7ef4\u7801\u7ea0\u9519\u80fd\u529b\u52c9\u5f3a\u62ff\u5230\u4e86 flag\uff0c\u6240\u4ee5\u5c31\u4e0d\u8be6\u7ec6\u5199 writeup \u4e86\uff0c\u4e3b\u8981\u8fd8\u662f\u8981\u770b\u5b98\u65b9 wp\uff08\u9003 \u5927\u6982\u6b65\u9aa4\u5c31\u662f\uff1a \u8bfb\u56fe\u7247 \u628a\u5df2\u77e5\u7684\u50cf\u7d20\u63d0\u53d6\u51fa\u6765 \u628a\u56db\u4e2a\u5c0f\u5b9a\u4f4d\u5757\u586b\u4e0a \u6328\u4e2a\u9a6c\u8d5b\u514b\u5757\u5bfb\u627e\u4f7f\u8fd8\u539f\u7684\u6570\u636e\u5e73\u5747\u6570\u4e0e\u539f\u9a6c\u8d5b\u514b\u503c\u5dee\u7684\u7edd\u5bf9\u503c\u5c0f\u4e8e1\u7684\u586b\u8865\u65b9\u6cd5 \u5982\u679c\u53ea\u6709\u4e00\u79cd\u5c31\u586b\u4e0a\uff0c\u5e76\u4e14\u6807\u6ce8\u5df2\u7ecf\u586b\u597d\uff0c\u4ee5\u540e\u4e0d\u518d\u641c\u5bfb \u5982\u679c\u6709\u591a\u79cd\u5c31\u5148\u653e\u4e0b\u4e0d\u586b \u91cd\u590d4\u7684\u8fc7\u7a0b\uff0c\u8fd9\u662f\u8fd8\u4f1a\u6709\u552f\u4e00\u786e\u5b9a\u7684\u586b\u8865\u65b9\u6848\u3002\u91cd\u590d4\u6b21\u5927\u6982\u5c31\u4e0d\u5269\u552f\u4e00\u89e3\u4e86 \u8fd9\u65f6\u91cd\u590d4\uff0c\u627e\u51fa\u4ec5\u67092\u4e2d\u586b\u8865\u65b9\u6cd5\u7684\uff0c\u9009\u8bef\u5dee\u6700\u5c0f\u7684\u586b\u4e0a \u7136\u540e\u518d\u91cd\u590d4 \u7136\u540e\u91cd\u590d6 \u7136\u540e\u91cd\u590d4 \u8fd9\u65f6\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u8fd8\u539f\u5f97\u5dee\u4e0d\u591a\u4e86\uff0c\u5269\u4e0b\u7684\u4e0d\u7ba1\u76f4\u63a5\u626b\u7801\u4e5f\u53ef\u4ee5\u626b\u51fa flag \u4e86 \u770b\uff0c\u505a\u6cd5\u5f88\u70c2\u5bf9\u5427","title":"\u9a6c\u8d5b\u514b"},{"location":"writeups/hackergame2021/#minecraft","text":"kk \u540c\u5b66\u5f88\u559c\u6b22\u73a9 Minecraft\uff0c\u4ed6\u6700\u8fd1\u6536\u5230\u4e86\u4e00\u5f20 MC \u5730\u56fe\uff0c\u5730\u56fe\u91cc\u9762\u6709\u4e09\u76cf\u706f\uff0c\u8fd8\u6709\u5f88\u591a\u5947\u5947\u602a\u602a\u7684\u538b\u529b\u677f\u3002 \u4f46\u4ed6\u53d1\u73b0\u8fd9\u4e9b\u706f\u597d\u50cf\u4e0d\u592a\u7b26\u5408 MC \u7535\u78c1\u5b66\uff08Red stone\uff09\uff0c\u4f60\u80fd\u5e2e\u4ed6\u628a\u706f\u5168\u90e8\u70b9\u4eae\u5417\uff1f \u6ce8\uff1a\u672c\u9898\u89e3\u6cd5\u4e0e\u539f\u7248 Minecraft \u6e38\u620f\u65e0\u5173\u3002 \u8865\u5145\u8bf4\u660e\uff1aflag \u82b1\u62ec\u53f7\u5185\u4e3a\u8ba9\u4e09\u76cf\u706f\u5168\u90e8\u70b9\u4eae\u7684\u6700\u77ed\u7684\u8f93\u5165\u5e8f\u5217\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8e29\u8e0f\u538b\u529b\u677f\u8f93\u5165\u7684\u6700\u77ed\u7684\u5e8f\u5217\u4e3a abc\uff0c\u5219\u7b54\u6848\u4e3a flag{abc}\u3002 \u8fd8\u633a\u597d\u73a9\u7684\u9898\uff0c\u5728\u7f51\u9875\u4e2d\u6a21\u62df\u4e86\u4e00\u4e2amc\u51fa\u6765 \u770b\u6e90\u7801\u770b\u5230\u4e86\u5f15\u5165\u4e86 flag.js \u6587\u4ef6\uff0c\u6240\u4ee5\u53ef\u80fd\u5c31\u662f\u8981\u901a\u8fc7\u5b83\u6765\u5f97\u5230\u7b54\u6848\uff1a < script src = \"jsm/miscs/flag.js\" ></ script > \u4e5f\u53ef\u4ee5\u770b\u5230\uff0c\u6700\u7ec8\u5224\u65ad\u662f\u5426\u6b63\u786e\u662f\u901a\u8fc7\u8c03\u7528 gyflagh(input) \u662f\u5426\u4e3a true \u6765\u5224\u65ad\uff0c\u800c gyflagh \u4e5f\u5728 flag.js \u4e2d\uff0c\u6240\u4ee5\u8fd8\u662f\u8981\u770b flag.js \u4f46\u662f flag.js \u662f\u7ecf\u8fc7\u7b80\u5355\u6df7\u6dc6\u8fc7\u7684\uff0c\u8fd8\u662f\u8981\u8d39\u70b9\u65f6\u95f4\u8bfb\u4e00\u4e0b \u5176\u4e2d\u6709\u56db\u4e2a\u8f6c\u6362 Str4 Base16 \u548c Long \u7684\u51fd\u6570\u53ef\u4ee5\u7565\u6389\u4e0d\u7ba1 \u6ce8\u610f\u5230\u4e86 _0x381b() \u8fd9\u4e2a\u51fd\u6570\u91cc\u6709\u4e00\u4e2a\u5217\u8868\uff0c\u800c\u4e14\u6bd4\u8f83\u7b80\u5355\uff0c\u5176\u5b9e\u5b83\u8fd4\u56de\u7684\u5c31\u662f\u8fd9\u4e2a\u5217\u8868 ['encrypt', '33MGcQht', '6fbde674819a59bfa12092565b4ca2a7a11dc670c678681daf4afb6704b82f0c', '14021KbbewD', 'charCodeAt', '808heYYJt', '5DlyrGX', '552oZzIQH', 'fromCharCode', '356IjESGA', '784713mdLTBv', '2529060PvKScd', '805548mjjthm', '844848vFCypf', '4bIkkcJ', '1356853149054377', 'length', 'slice', '1720848ZSQDkr'] \u4f46\u662f\u5728 Console \u91cc\u9762\u8c03\u7528 _0x381b \u5f97\u5230\u7684\u5374\u662f\u4ee5 'slice' \u5f00\u5934\u3001'length' \u7ed3\u5c3e\u7684\u5217\u8868\uff0c\u5c06\u8fd9\u4e2a\u5217\u8868\u8bb0\u4e3a lst \u65b9\u4fbf\u8868\u8ff0 \u800c\u4e14\u6e90\u7801\u4e2d\u53ea\u6709\u6700\u5f00\u5934\u7684\u8c03\u7528\u533f\u540d\u51fd\u6570\u91cc\u9762\u6709 ['push'] \u548c ['shift'] \uff0c\u6240\u4ee5\u63a8\u6d4b\u8fd9\u4e2a\u533f\u540d\u51fd\u6570\u5c31\u662f\u5c06\u8fd9\u4e2a\u5217\u8868\u5faa\u73af\u53f3\u79fb\u4e24\u4e2a\u4f4d\u7f6e \u90a3\u8fd9\u4e2a\u533f\u540d\u51fd\u6570\u4e5f\u4e0d\u7528\u770b\u4e86 \u518d\u6765\u770b _0x2c9e() \u8fd9\u4e2a\u51fd\u6570\uff1a function _0x2c9e ( _0x49e6ff , _0x310d40 ) { const _0x381b4c = _0x381b (); return _0x2c9e = function ( _0x2c9ec6 , _0x2ec3bd ) { _0x2c9ec6 = _0x2c9ec6 - 0x1a6 ; let _0x4769df = _0x381b4c [ _0x2c9ec6 ]; return _0x4769df ; } , _0x2c9e ( _0x49e6ff , _0x310d40 ); } \u5176\u4e2d _0x381b4c \u662f\u521a\u521a\u8bf4\u7684\u90a3\u4e2a\u5217\u8868 lst\u3002\u7136\u540e return \u91cc\u9762\u91cd\u65b0\u5b9a\u4e49\u4e86 _0x2c9e \uff0c\u4f46\u662f\u65b0\u7684\u5b9a\u4e49\u91cc\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5e76\u6ca1\u6709\u7528\uff0c\u7136\u540e\u8c03\u7528\u8fd4\u56de\uff0c\u6240\u4ee5\u6574\u4e2a\u51fd\u6570\u5c31\u76f8\u5f53\u4e8e\uff1a function _0x2c9e ( _0x2c9ec6 , ...) { _0x2c9ec6 = _0x2c9ec6 - 0x1a6 ; return lst [ _0x2c9ec6 ]; } 0x1a6 \u662f 422\uff0c\u6240\u4ee5\u6574\u4e2a\u51fd\u6570\u4e5f\u5c31\u76f8\u5f53\u4e8e function(x) { return lst[x - 422]; } \u540c\u65f6\u6839\u636e\u7b2c\u4e00\u884c\uff0c\u7a0b\u5e8f\u4e2d\u6240\u6709 _0x22517d \u4e5f\u662f\u8fd9\u4e2a\u51fd\u6570 \u7136\u540e\u770b\u5224\u65ad\u7b54\u6848\u7684 gyflagh \u51fd\u6570 function gyflagh ( _0x111955 ) { const _0x50051f = _0x22517d ; let _0x3b790d = _0x111955 [ _0x50051f ( 0x1a8 )]( _0x50051f ( 0x1b7 )); if ( _0x3b790d === _0x50051f ( 0x1aa )) return !! []; return ! []; } \u6ca1\u5565\u7279\u522b\u7684\uff0c\u7ed3\u5408 lst \u53ef\u4ee5\u5f97\u5230\uff1a function gyflagh ( ans ) { if ( ans [ \"encrypt\" ]( \"1356853149054377\" ) === \"6fbde674819a59bfa12092565b4ca2a7a11dc670c678681daf4afb6704b82f0c\" ) { return true ; } return false ; } \u7136\u540e\u5c31\u53ef\u4ee5\u7ed3\u5408 lst \u4e2d\u7684\u503c\u548c\u7d22\u5f15\uff0c\u7ffb\u8bd1\u51fa\u6700\u91cd\u8981\u7684\u51fd\u6570 \u518d\u8fdb\u884c\u4e00\u4e9b\u8fd0\u7b97\uff0c\u7528\u6ce8\u91ca\u6807\u6ce8\u4e00\u4e0b\u5df2\u77e5\u7684\u503c\u5c31\u53ef\u4ee5\u5f97\u5230\uff1a String [ \"prototype\" ][ \"encrypt\" ] = function ( key ) { // key = \"1356853149054377\" const left = new Array ( 2 ); const right = new Array ( 4 ); let res = \"\" ; ans = escape ( this ); // this := ans right = [ 909456177 , 825439544 , 892352820 , 926364468 ] for ( var i = 0 ; i < ans [ \"length\" ]; i = i + 8 ) { left [ 0 ] = Str4ToLong ( ans [ \"slice\" ]( i , i + 4 )); left [ 1 ] = Str4ToLong ( ans [ \"slice\" ]( i + 4 , i + 8 )); code ( left , right ); res = res + ( LongToBase16 ( left [ 0 ]) + LongToBase16 ( left [ 1 ])); } return res ; // 6fbde674819a59bfa12092565b4ca2a7a11dc670c678681daf4afb6704b82f0c }; \u518d\u6765\u770b code \u51fd\u6570\uff0c\u6839\u636e << 4\u3001 ^\u3001 >>> 5 \u53ef\u4ee5\u5927\u80c6\u63a8\u6d4b\u7c7b\u4f3c TEA\uff0c\u7136\u540e\u89e3\u7801\u5c31\u76f4\u63a5\u7ffb\u8fc7\u6765\u5c31\u597d\u4e86\uff1a function dec ( left , right ) { for ( var i = 2654435769 * 32 ; i != 0 ;) { left [ 1 ] -= (( left [ 0 ] << 4 ^ left [ 0 ] >>> 5 ) + left [ 0 ] ^ i + right [ i >>> 11 & 3 ]); i -= 2654435769 ; left [ 0 ] -= (( left [ 1 ] << 4 ^ left [ 1 ] >>> 5 ) + left [ 1 ] ^ i + right [ i & 3 ]); } console . log ( left ); } \u6700\u540e\u628a\u8981\u5f97\u5230\u7684 res \u5206\u5757\uff0c\u6bcf 8 \u4e2a\u4e00\u7ec4\uff1a 6fbde674 819a59bf a1209256 5b4ca2a7 a11dc670 c678681d af4afb67 04b82f0c \u7136\u540e\u4ece\u540e\u5f80\u524d\uff0c\u6bcf\u4e24\u4e2a\u6267\u884c Base16ToLong\uff0c\u7136\u540e\u4f5c\u4e3a left \u4f20\u7ed9 dec \u51fd\u6570\u89e3\u7801\uff0c\u7136\u540e\u518d LongToStr4 \u5f97\u5230\u56db\u4e2a\u5b57\u7b26: \u62fc\u8d77\u6765\u5c31\u662f flag \u4e86\uff1a flag{McWebRE_inMlnCrA1t_3a5y_1cIuop9i}","title":"minecRaft"},{"location":"writeups/hackergame2021/#_13","text":"\u5c0f T \u6700\u8fd1\u53c8\u5199\u4e86\u4e00\u4e2a web \u5e94\u7528\u3002 \u4ed6\u53d1\u73b0\u5f88\u591a\u7528\u6237\u90fd\u559c\u6b22\u8bbe\u7f6e\u5f31\u5bc6\u7801\uff0c\u4e8e\u662f\u51b3\u5b9a\u8ba9\u6240\u6709\u7528\u6237\u7684\u5bc6\u7801\u90fd\u5fc5\u987b\u662f 16 \u4f4d\u957f\uff0c\u5e76\u4e14\u5404\u79cd\u7b26\u53f7\u90fd\u8981\u6709\u3002\u4e3a\u4e86\u8ba9\u5927\u5bb6\u53ef\u4ee5\u65b9\u4fbf\u751f\u6210\u8fd9\u6837\u7684\u5bc6\u7801\uff0c\u4ed6\u8fd8\u5199\u4e86\u4e00\u4e2a\u5bc6\u7801\u751f\u6210\u5668\uff0c\u8ba9\u7528\u6237\u53ef\u4ee5\u751f\u6210\u7b26\u5408\u89c4\u5219\u7684\u5bc6\u7801\u3002 \u4f46\u8fd9\u6837\u679c\u771f\u5b89\u5168\u5417\uff1f \uff08\u611f\u89c9\u8fd9\u6b21 Hackergame \u9898\u7684 tag \u90fd\u5f88\u8be1\u5f02\u3002\u8fd9\u9898\u660e\u660e\u662f misc(general) \u4e3a\u4ec0\u4e48\u6253\u4e86 binary \u7684 tag\uff09 \u770b\u5230 binary tag \u76f4\u63a5\u5148\u5f80 IDA \u91cc\u9762\u4e22\uff0c\u7136\u540e\u62a5\u9519\u4e86\uff0c\u5927\u6982\u662f\u56e0\u4e3a\u90e8\u5206 winapi \u5bfc\u5165\u4e0d\u8fdb\u53bb\u7684\u95ee\u9898\uff08\uff1f\uff09 \u7136\u540e\u5c31\u4e0d\u4f1a\u4e86\u2026\u2026 \u5bf9\u7740 IDA \u5e72\u77aa\u773c \u770b\u9898\uff0c\u9898\u76ee\u7ed9\u4e86\u4e00\u4e2a\u7f51\u7ad9\uff0c\u7528\u6765\u53d1\u5e03\u5c55\u677f\uff0c\u770b\u8d77\u6765\u53ea\u6709 admin \u7528\u6237\uff0c\u800c\u4e14\u6ca1\u6709\u6ce8\u518c\u7cfb\u7edf\uff0c\u6240\u4ee5\u5e94\u8be5\u5c31\u662f\u8981\u641e\u5230 admin \u7684\u5bc6\u7801\u4e86 \u518d\u7ec6\u770b\u7f51\u7ad9\uff0c\u7279\u610f\u63d0\u5230 \u201c\u7f51\u9875\u663e\u793a \u65f6\u95f4 \u201d\uff0c\u800c\u4e14\u5c55\u677f\u540e\u9762\u90fd\u6709\u53d1\u5e03\u65f6\u95f4\uff0c\u70b9\u8fdb admin \u7684\u7528\u6237\u9875\u9762\u53d1\u73b0\u4e5f\u6709\u6ce8\u518c\u65f6\u95f4\uff0c\u7740\u5b9e\u6709\u4e9b\u8bb8\u8be1\u5f02\uff08 \u6240\u4ee5\u65f6\u95f4\u5e94\u8be5\u662f\u4e00\u4e2a\u63d0\u793a \u800c\u5199\u4ee3\u7801\u7684\u65f6\u5019\u8bbe\u7f6e\u968f\u673a\u6570\u79cd\u5b50\u53c8\u5e38\u4ee5\u5f53\u524d\u65f6\u95f4\u4f5c\u4e3a\u79cd\u5b50\uff0c\u6240\u4ee5\u751f\u6210\u7684\u5bc6\u7801\u53ef\u80fd\u662f\u548c\u65f6\u95f4\u6709\u5173\u7cfb\u7684 \u901a\u8fc7\u8c03\u7cfb\u7edf\u65f6\u95f4\uff0c\u53ef\u4ee5\u53d1\u73b0\u5728\u540c\u4e00\u79d2\u70b9\u4e0b\u751f\u6210\uff0c\u4ea7\u751f\u7684\u5bc6\u7801\u662f\u4e00\u6837\u7684 \u6240\u4ee5\u53ea\u9700\u8981\u628a\u7cfb\u7edf\u65f6\u95f4\u8c03\u5230 admin \u7684\u6ce8\u518c\u65f6\u95f4\u5de6\u53f3\uff0c\u7136\u540e\u6bcf\u79d2\u751f\u6210\u5bc6\u7801\uff0c\u518d\u6328\u4e2a\u8f93\u8fdb\u53bb\u7206\u7834\u5373\u53ef \u6700\u540e\u5f97\u5230 2021-09-22 23:10:53 \u65f6\u751f\u6210\u7684\u5bc6\u7801 $Z=CBDL7TjHu~mEX \u5c31\u662f admin \u7684\u5bc6\u7801 \u7136\u540e\u767b\u5f55\u5373\u53ef\u5728\u201c\u6211\u7684\u201d\u91cc\u770b\u5230\u4e00\u6761\u79c1\u5bc6\u5c55\u677f\uff0c\u5185\u5bb9\u662f flag","title":"\u5bc6\u7801\u751f\u6210\u5668"},{"location":"writeups/hackergame2021/#pq","text":"\u5b66\u4f1a\u5085\u91cc\u53f6\u7684\u4e00\u77ac\u95f4\uff0c\u6094\u6068\u7684\u6cea\u6c34\u6d41\u4e86\u4e0b\u6765\u3002 \u5f53\u6211\u770b\u5230\u97f3\u9891\u64ad\u653e\u5668\u4e2d\u8df3\u52a8\u7684\u9891\u8c31\u52a8\u753b\uff0c\u6708\u660e\u661f\u7a00\u7684\u591c\u665a\uff0c\u6df1\u9083\u7684\u94f6\u6cb3\uff0c\u53ea\u6709\u5929\u4f7f\u5728\u6d45\u541f\u4f4e\u5531\uff0c\u590d\u6742\u7684\u60c5\u611f\u4e8e\u6211\u773c\u4e2d\u6ea2\u51fa\uff0c\u50cf\u662f\u6c89\u5165\u4e86\u96fe\u91cc\u6726\u80e7\u7684\u6d77\u4e00\u6837\u7684\u6e29\u67d4\u3002 \u8fd9\u4e00\u523b\u6211\u624d\u77e5\u9053\uff0c\u8033\u673a\u97f3\u54cd\u4e5f\u5c31\u56fe\u4e00\u4e50\uff0c\u771f\u542c\u97f3\u4e50\u8fd8\u5f97\u9760\u773c\u775b\u3002 \uff08\u6ce8\u610f\uff1aflag \u82b1\u62ec\u53f7\u5185\u662f\u4e00\u4e2a 12 \u4f4d\u6574\u6570\uff0c\u7531 0-9 \u6570\u4f4d\u7ec4\u6210\uff0c\u6ca1\u6709\u5176\u5b83\u5b57\u7b26\u3002\uff09 \u867d\u7136\u8fd9\u9898\u662f\u5728\u5012\u6570\u7b2c\u4e09\u9898\uff0c\u8fd8\u503c 400pt\uff0c \u4f46\u4f60\u4e00\u8bf4\u5085\u91cc\u53f6\u6211\u53ef\u5c31\u4e0d\u56f0\u4e86\u55f7 \u4e0b\u8f7d\u9898\u76ee\u5305\uff0c\u6709\u4e00\u4e2a\u751f\u6210 gif \u7684 py \u4ee3\u7801\u548c\u90a3\u4e2a gif \u6587\u4ef6 \u6b63\u597d\u524d\u9762\u7684\u7535\u6ce2\u4e5f\u6709\u4e00\u6bb5\u97f3\u9891\uff0c\u53ef\u4ee5\u7528\u90a3\u4e2a\u5e26\u5165\u5230 generate_sound_visualization.py \u4e2d\u751f\u6210\u4e00\u4e2a gif\uff0c\u7136\u540e\u7528\u8fd9\u4e2a\u6765\u6d4b\u8bd5 \u518d\u4ed4\u7ec6\u770b\u4e00\u770b generate_sound_visualization.py \u8fd9\u4e2a\u6587\u4ef6 \u4e3b\u8981\u4f7f\u7528\u4e86 librosa \uff0c\u4e8e\u662f\u5c31\u53ef\u4ee5\u7ffb \u6587\u6863 \u6765\u770b\u61c2\u8fd9\u4e2a\u7a0b\u5e8f\uff1a y , sample_rate = librosa . load ( \"flag.mp3\" ) # \u4ecemp3\u4e2d\u8bfb\u53d6\u6570\u636e\u548c\u91c7\u6837\u7387 spectrogram = numpy . around ( # \u56db\u820d\u4e94\u5165\uff0c\u4f46\u4f1a\u9020\u6210\u9006\u5411\u7684\u65f6\u5019\u6709\u5c11\u8bb8\u8bef\u5dee\u5bfc\u81f4\u6742\u97f3 librosa . power_to_db ( # \u628a\u4ee5\u529f\u7387\u4e3a\u5355\u4f4d\u7684\u9891\u8c31\u56fe\u8f6c\u6362\u4e3a\u4ee5\u5206\u8d1d\u4e3a\u5355\u4f4d librosa . feature . melspectrogram ( # \u901a\u8fc7\u97f3\u9891\u6570\u636e\u548c\u91c7\u6837\u7387\u8ba1\u7b97\u6885\u5c14\u9891\u8c31 y , sample_rate , n_mels = num_freqs , n_fft = fft_window_size , hop_length = frame_step_size , window = window_function_type ) ) / quantize # \u9664\u4ee52 ) * quantize # \u4e58\u4ee52 \u7136\u540e\u53c8\u901a\u8fc7\u4e00\u4e9b numpy \u7684\u9a9a\u64cd\u4f5c\u6765\u751f\u6210\u6bcf\u4e00\u5e27\u7684\u6570\u636e\uff0c\u7136\u540e\u901a\u8fc7 array2gif \u5305\u7684 write_gif \u51fd\u6570\u6765\u751f\u6210 gif \u6240\u4ee5\u4e3b\u8981\u601d\u8def\u5c31\u662f\u628a\u6574\u4e2a\u7a0b\u5e8f \u5b8c\u6574\u5730\u9006\u8fc7\u6765 \u7531\u4e8e\u5fc5\u5e94\u6ca1\u6709\u67e5\u5230 gif2array \u7684\u5305\uff0c\u6240\u4ee5\u8bfb\u53d6 gif \u5c31\u7528\u4e86\u7ecf\u5178 PIL.Image \uff1a from PIL import Image file = Image . open ( \"flag.gif\" ) try : while True : gif_data . append ( np . array ( file )) file . seek ( file . tell () + 1 ) except : print ( \"[+] Read gif file\" ) \u7136\u540e\u662f\u89e3\u51b3\u90a3\u4e00\u5927\u6bb5 numpy \u9a9a\u64cd\u4f5c\u7684\u9006\u9a9a\u64cd\u4f5c\uff08 \u4f46\u662f\u6570\u7406\u57fa\u7840\u8fd9\u4e48\u5dee\u7684\u6211\u5f53\u7136\u662f\u4e0d\u60f3\u4ed4\u7ec6\u7814\u7a76\u4e86\uff0c\u6240\u4ee5\u76f4\u63a5\u7528\u7535\u6ce2\u90a3\u9898\u7684 radio.mp3 \u5e26\u5165\uff0c\u770b\u4e00\u770b\u8981\u5f97\u5230\u7684 spectrogram \u662f\u4ec0\u4e48\u6837\u5b50 \u8f93\u51fa\u5f97\u5230\u7684 spectrogram \u662f\uff1a [[ - 58. - 48. - 30. ... - 58. - 58. - 58. ] [ - 58. - 44. - 26. ... - 58. - 58. - 58. ] [ - 58. - 40. - 16. ... - 58. - 58. - 58. ] ... [ - 58. - 42. - 30. ... - 58. - 58. - 58. ] [ - 58. - 44. - 32. ... - 58. - 58. - 58. ] [ - 58. - 46. - 34. ... - 58. - 58. - 58. ]] \u800c\u8f6c\u7f6e\u8fc7\u6765\u662f\uff1a [[ - 58. - 58. - 58. ... - 58. - 58. - 58. ] [ - 48. - 44. - 40. ... - 42. - 44. - 46. ] [ - 30. - 26. - 16. ... - 30. - 32. - 34. ] ... [ - 58. - 58. - 58. ... - 58. - 58. - 58. ] [ - 58. - 58. - 58. ... - 58. - 58. - 58. ] [ - 58. - 58. - 58. ... - 58. - 58. - 58. ]] \u51cf\u53bb min_db=-60 \u7b2c\u4e00\u884c\u6b63\u597d\u662f 2\uff0c\u7b2c\u4e8c\u884c\u662f [12. 16. 20. ... 18. 16. 14.] \u518d\u5bf9\u5e94\u5230\u751f\u6210\u7684 gif \u6587\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u770b\u51fa gif \u7684\u7b2c\u4e00\u5e27\u6bcf\u4e2a\u77e9\u5f62\u7684\u9ad8\u5ea6\u90fd\u662f 2 \u800c\u7b2c\u4e8c\u5e27\u6bcf\u4e2a\u77e9\u5f62\u7684\u9ad8\u5ea6\u4e5f\u6070\u597d\u662f\u521a\u5f97\u51fa\u7684\u90a3\u7ec4\u6570 \u6240\u4ee5\u8981\u5f97\u5230\u7684 spectrogram \u5c31\u662f gif \u6bcf\u4e00\u5e27\u6240\u6709\u77e9\u5f62\u7684\u9ad8\u5ea6\u6784\u6210\u7684\u77e9\u9635\u7684\u8f6c\u7f6e \u518d\u7ed3\u5408\u6e90\u7801\uff1a numpy . array ([ [ red_pixel if freq % 2 and round ( frame [ freq // 2 ]) > threshold else white_pixel for threshold in list ( range ( min_db , max_db + 1 , quantize ))[:: - 1 ] ] for freq in range ( num_freqs * 2 + 1 ) ]) \u53ef\u4ee5\u770b\u51fa\uff0c\u6bcf\u4e2a\u77e9\u5f62\u52a0\u4e0a\u5de6\u8fb9\u7684\u7a7a\u683c\u6b63\u597d\u662f 4 \u4e2a\u50cf\u7d20\uff0c\u6240\u4ee5\u6bcf\u56db\u5217\u8bfb\u53d6\u6700\u540e\u4e00\u5217\u5373\u53ef\uff1a spectrogramT = [] for data in gif_data : res = [] for ind , line in enumerate ( data . transpose ()): # \u5c06\u6bcf\u4e00\u5e27\u8f6c\u7f6e\uff0c\u65b9\u4fbf\u8ba1\u7b97 num = sum ( line ) # \u8ba1\u7b97\u6bcf\u4e2a\u77e9\u5f62\u7684\u9ad8\u5ea6\uff08\u8f6c\u7f6e\u540e\u662f\u5bbd\u5ea6\uff09 if ind % 4 == 3 : res . append ( num + min_db ) # \u5f97\u5230\u7684\u6570\u8981\u52a0\u4e0a-60\u624d\u7b26\u5408\u89c4\u77e9 spectrogramT . append ( res ) spectrogram = np . array ( spectrogramT ) . transpose () # \u5f97\u5230\u7684\u7ed3\u679c\u8f6c\u7f6e\u4e00\u4e0b \u8fd9\u6837\u5c31\u5f97\u5230\u4e86\u6885\u5c14\u9891\u8c31\u56fe\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u5bf9 librosa \u7684\u90e8\u5206\u8fdb\u884c\u9006\u8fc7\u7a0b\u4e86 \u7ffb librosa \u7684\u6587\u6863\uff0c\u6709 power_to_db \u5f53\u7136\u4e5f\u5c31\u6709 db_to_power \u800c\u4e14\u7c7b\u4f3c\u4e8e melspectrogram \u51fd\u6570\u5728 librosa.feature \u4e2d\uff0c\u53ef\u4ee5\u4e13\u95e8\u770b feature \u90e8\u5206\u7684\u6587\u6863 \u7ffb\u5230\u4e86 inverse \u90e8\u5206\uff0c\u53ef\u4ee5\u770b\u5230\u6709\u4e00\u4e2a\u51fd\u6570 librosa.feature.inverse.mel_to_audio \u53ef\u4ee5\u76f4\u63a5\u628a\u6885\u5c14\u9891\u8c31\u56fe\u4e13\u4e3a\u97f3\u9891\u6570\u636e\uff0c\u6240\u4ee5\u5c31\u7528\u5b83\u4e86\uff1a y = librosa . feature . inverse . mel_to_audio ( librosa . db_to_power ( spectrogram ), # \u4e58\u4e8c\u9664\u4e8c\u6ca1\u4ec0\u4e48\u5927\u7528\uff0c\u800c\u4e14\u5f71\u54cd\u6548\u679c\uff0c\u5c31\u5220\u4e86 sample_rate , n_iter = num_freqs , # \u91c7\u6837\u7387\u9898\u76ee\u63d0\u4f9b\u4e86\uff0c\u662f 22050Hz n_fft = fft_window_size , hop_length = frame_step_size , window = window_function_type , ) \u8fd9\u6837\u5c31\u5b8c\u6210\u4e86\u8fd8\u539f\uff0c\u6700\u540e\u662f\u8f93\u51fa\uff0c\u4f46\u662f\u5e76\u6ca1\u5728 librosa \u4e2d\u627e\u5230\u97f3\u9891\u8f93\u51fa\u7684\u51fd\u6570\uff0c\u6240\u4ee5\u5c31\u7528\u4e86\u7ecf\u5178 soundfile \uff1a import soundfile as sf sf . write ( \"flag.wav\" , y , sample_rate ) \u7136\u540e\u6253\u5f00\u542c\u5c31\u884c\u4e86\uff0c\u9898\u76ee\u8bf4\u4e86\u662f\u4e2a 12 \u4f4d\u6570\uff0c\u6240\u4ee5\u5269\u4e0b\u7684\u5c31\u662f\u82f1\u8bed\u542c\u529b\u4e86\uff0c\u7ffb\u8bd1\u8fc7\u6765\u7684\u6570\u5b57\u5c31\u662f flag \u4e86","title":"p\ud83d\ude2dq"},{"location":"writeups/hackergame2021/#reference","text":"Hackergame \u56fd\u9645\u822a\u7a7a\u65e0\u7ebf\u7535\u901a\u8baf26\u4e2a\u82f1\u6587\u5b57\u6bcd\u8bfb\u6cd5 - \u77e5\u4e4e LUG@USTC \u5b98\u7f51 Wayback Machine archive.org SIGBOVIK 2021 \u767e\u5ea6\u5168\u666f\u5730\u56fe \u4f2a\u9020http\u8bf7\u6c42ip\u5730\u5740 - \u535a\u5ba2\u56ed GraphQL\u5b98\u7f51 \u3001 GraphiQL \u3001 GraphQL Voyager \u3010\u5b89\u5168\u8bb0\u5f55\u3011\u73a9\u8f6cGraphQL - DVGA\u9776\u573a\uff08\u4e0a\uff09- \u77e5\u4e4e librosa\u6587\u6863 PySoundFile\u6587\u6863 Wilson's theorem - wikipedia BUU-RSA [RoarCTF2019]babyRSA - CSDN Euler's totient function - wikipedia LUKS2 doc pdf 10 Linux cryptsetup Examples for LUKS Key Management pyinstxtractor uncompyle6","title":"Reference"}]}