<!DOCTYPE html>
<html class="no-js" lang="zh">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="é¹¤ç¿”ä¸‡é‡Œï¼ˆTonyCraneï¼‰çš„ç¬”è®°æœ¬" name="description"/>
<link href="https://note.tonycrane.cc/writeups/sadservers/" rel="canonical"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.3.1, mkdocs-material-8.1.4" name="generator"/>
<title>SadServers - é¹¤ç¿”ä¸‡é‡Œçš„ç¬”è®°æœ¬</title>
<link href="../../assets/stylesheets/main.bb3983ee.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.e6a45f82.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=JetBrains+Mono:300,400,400i,700%7CJetBrains+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"JetBrains Mono";--md-code-font:"JetBrains Mono"}</style>
<link href="../../css/heti.css" rel="stylesheet"/>
<link href="../../css/timeline.css" rel="stylesheet"/>
<link href="https://gcore.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" rel="stylesheet"/>
<link href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css" rel="stylesheet"/>
<link href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css" rel="stylesheet"/>
<link href="../../css/tasklist.css" rel="stylesheet"/>
<link href="../../css/custom.css" rel="stylesheet"/>
<link href="../../css/card.css" rel="stylesheet"/>
<link href="../../css/flink.css" rel="stylesheet"/>
<link href="../../css/changelog_extra.css" rel="stylesheet"/>
<link href="/css/counter.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?c273de7f67d992cb6aef08c3ddf09bb2";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DYETCPM289"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&gtag("event","search",{search_term:this.value})}),"undefined"!=typeof location$&&location$.subscribe(function(e){gtag("config","G-DYETCPM289",{page_path:e.pathname})})})</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-DYETCPM289"></script>
</head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<script src="../../js/scheme.js" type="text/javascript"></script>
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#sadservers-writeup">
            è·³è½¬è‡³
          </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="é¡µçœ‰" class="md-header__inner md-grid">
<a aria-label="é¹¤ç¿”ä¸‡é‡Œçš„ç¬”è®°æœ¬" class="md-header__button md-logo" data-md-component="logo" href="../.." title="é¹¤ç¿”ä¸‡é‡Œçš„ç¬”è®°æœ¬">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 4v6l-2-2-2 2V4H9v16h10V4h-2M3 7V5h2V4a2 2 0 0 1 2-2h12c1.05 0 2 .95 2 2v16c0 1.05-.95 2-2 2H7c-1.05 0-2-.95-2-2v-1H3v-2h2v-4H3v-2h2V7H3m2-2v2h2V5H5m0 14h2v-2H5v2m0-6h2v-2H5v2z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            é¹¤ç¿”ä¸‡é‡Œçš„ç¬”è®°æœ¬
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              SadServers
            
          </span>
</div>
</div>
</div>
<div class="md-header__options">
<div class="md-header-nav__scheme md-header-nav__button md-source__icon md-icon">
<a class="light-mode" href="javascript:toggleScheme();" title="Light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"></path></svg>
</a>
<a class="dark-mode" href="javascript:toggleScheme();" title="Dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"></path></svg>
</a>
<a class="system-mode" href="javascript:toggleScheme();" title="System preference">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07 19.07 3.5m-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13.51 1.67m-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87.4 1.31M19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35-2.53-2.2m4.33-2.7 1.15-2.77 2.2 2.54-3.35.23m1.15-4.96-1.14-2.78 3.34.24-2.2 2.54M9.63 18.93l2.77 1.15-2.53 2.19-.24-3.34z"></path></svg>
</a>
<a class="unknown-mode" href="javascript:toggleScheme();" title="Unknown scheme">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m15.07 11.25-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 0 0-2-2 2 2 0 0 0-2 2H8a4 4 0 0 1 4-4 4 4 0 0 1 4 4 3.2 3.2 0 0 1-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10z"></path></svg>
</a>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="æœç´¢" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="æœç´¢" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<nav aria-label="æŸ¥æ‰¾" class="md-search__options">
<button aria-label="æ¸…ç©ºå½“å‰å†…å®¹" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/TonyCrane/note/" title="å‰å¾€ä»“åº“">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    TonyCrane/note
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="æ ‡ç­¾" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
        Home
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../cs/">
        Computer Science
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../sec/">
        Security
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../web/">
        Web
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../ctf/">
        CTF
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../">
        Writeups
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../others/">
        Others
      </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="å¯¼èˆªæ " class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="é¹¤ç¿”ä¸‡é‡Œçš„ç¬”è®°æœ¬" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="é¹¤ç¿”ä¸‡é‡Œçš„ç¬”è®°æœ¬">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 4v6l-2-2-2 2V4H9v16h10V4h-2M3 7V5h2V4a2 2 0 0 1 2-2h12c1.05 0 2 .95 2 2v16c0 1.05-.95 2-2 2H7c-1.05 0-2-.95-2-2v-1H3v-2h2v-4H3v-2h2V7H3m2-2v2h2V5H5m0 14h2v-2H5v2m0-6h2v-2H5v2z"></path></svg>
</a>
    é¹¤ç¿”ä¸‡é‡Œçš„ç¬”è®°æœ¬
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/TonyCrane/note/" title="å‰å¾€ä»“åº“">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    TonyCrane/note
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../..">Home</a>
<label for="__nav_1">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Home" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
          Home
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../changelog/">
        æœ€è¿‘æ›´æ–°
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../links/">
        å‹é“¾
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../cs/">Computer Science</a>
<label for="__nav_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Computer Science" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Computer Science
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" id="__nav_2_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../cs/pl/">ç¼–ç¨‹è¯­è¨€ &amp; ISA</a>
<label for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="ç¼–ç¨‹è¯­è¨€ &amp; ISA" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
          ç¼–ç¨‹è¯­è¨€ &amp; ISA
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_2" id="__nav_2_2_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../cs/pl/python/">Python</a>
<label for="__nav_2_2_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Python" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_2_2">
<span class="md-nav__icon md-icon"></span>
          Python
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/pl/python/basic/">
        Python åŸºç¡€è¯­æ³•
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/pl/python/numpy/">
        NumPy
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/pl/python/pil/">
        PIL
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_3" id="__nav_2_2_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../cs/pl/rust/">Rust</a>
<label for="__nav_2_2_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Rust" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_2_3">
<span class="md-nav__icon md-icon"></span>
          Rust
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/pl/rust/basic/">
        Rust åŸºç¡€è¯­æ³•
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/pl/rust/misc/">
        Rust æ‚é¡¹éšè®°
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/pl/c_cpp/">
        C/C++
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/pl/haskell/">
        Haskell
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/pl/asm/">
        x86 æ±‡ç¼–è¯­è¨€
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_7" id="__nav_2_2_7" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../cs/pl/riscv/">RISC-V ISA</a>
<label for="__nav_2_2_7">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="RISC-V ISA" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_2_7">
<span class="md-nav__icon md-icon"></span>
          RISC-V ISA
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/pl/riscv/unprivileged/">
        RISC-V éç‰¹æƒçº§ ISA
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/pl/riscv/privileged/">
        RISC-V ç‰¹æƒçº§ ISA
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" id="__nav_2_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../cs/system/">è®¡ç®—æœºç³»ç»Ÿ</a>
<label for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="è®¡ç®—æœºç³»ç»Ÿ" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
          è®¡ç®—æœºç³»ç»Ÿ
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_2" id="__nav_2_3_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../cs/system/cs1/">è®¡ç®—æœºç³»ç»Ÿ I</a>
<label for="__nav_2_3_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="è®¡ç®—æœºç³»ç»Ÿ I" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_3_2">
<span class="md-nav__icon md-icon"></span>
          è®¡ç®—æœºç³»ç»Ÿ I
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/topic1/">
        æ•°æ®çš„è¡¨ç¤º
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/topic2/">
        æ•°å­—é€»è¾‘ç”µè·¯åŸºç¡€
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/topic3/">
        ç»„åˆé€»è¾‘ç”µè·¯è®¾è®¡
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/topic4/">
        æ—¶åºé€»è¾‘ç”µè·¯è®¾è®¡
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/topic5/">
        æŒ‡ä»¤é›†ä½“ç³»ç»“æ„
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/topic6/">
        å¤„ç†å™¨
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_2_8" id="__nav_2_3_2_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3_2_8">
          ç³»ç»Ÿ I å®éªŒéƒ¨åˆ†
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="ç³»ç»Ÿ I å®éªŒéƒ¨åˆ†" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_2_3_2_8">
<span class="md-nav__icon md-icon"></span>
          ç³»ç»Ÿ I å®éªŒéƒ¨åˆ†
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/lab1-1/">
        ç³»ç»Ÿ I lab1-1
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/lab1-2/">
        ç³»ç»Ÿ I lab1-2
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/lab2-1/">
        ç³»ç»Ÿ I lab2-1
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/lab2-2/">
        ç³»ç»Ÿ I lab2-2
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/lab3/">
        ç³»ç»Ÿ I lab3
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/lab4-1/">
        ç³»ç»Ÿ I lab4-1
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/lab4-2/">
        ç³»ç»Ÿ I lab4-2
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/lab5-1/">
        ç³»ç»Ÿ I lab5-1
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs1/lab5-2/">
        ç³»ç»Ÿ I lab5-2
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_3" id="__nav_2_3_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../cs/system/cs2/">è®¡ç®—æœºç³»ç»Ÿ II</a>
<label for="__nav_2_3_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="è®¡ç®—æœºç³»ç»Ÿ II" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_3_3">
<span class="md-nav__icon md-icon"></span>
          è®¡ç®—æœºç³»ç»Ÿ II
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs2/topic1/">
        æµæ°´çº¿ CPU
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs2/topic2/">
        æ“ä½œç³»ç»Ÿç®€ä»‹
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs2/topic3/">
        æ“ä½œç³»ç»Ÿç»“æ„åŠç³»ç»Ÿè°ƒç”¨
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs2/topic4/">
        è¿›ç¨‹ä¸çº¿ç¨‹
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs2/topic5/">
        CPU è°ƒåº¦
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_3_7" id="__nav_2_3_3_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3_3_7">
          ç³»ç»Ÿ II å®éªŒéƒ¨åˆ†
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="ç³»ç»Ÿ II å®éªŒéƒ¨åˆ†" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_2_3_3_7">
<span class="md-nav__icon md-icon"></span>
          ç³»ç»Ÿ II å®éªŒéƒ¨åˆ†
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs2/lab1/">
        ç³»ç»Ÿ II lab1
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs2/lab2/">
        ç³»ç»Ÿ II lab2
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs2/lab3/">
        ç³»ç»Ÿ II lab3
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs2/lab4/">
        ç³»ç»Ÿ II lab4
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/system/cs2/lab5/">
        ç³»ç»Ÿ II lab5
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4">
          ç®—æ³•ç›¸å…³
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="ç®—æ³•ç›¸å…³" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
          ç®—æ³•ç›¸å…³
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4_1" id="__nav_2_4_1" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../cs/algorithm/ds/">æ•°æ®ç»“æ„åŸºç¡€</a>
<label for="__nav_2_4_1">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="æ•°æ®ç»“æ„åŸºç¡€" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_4_1">
<span class="md-nav__icon md-icon"></span>
          æ•°æ®ç»“æ„åŸºç¡€
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/algorithm/ds/topic1/">
        ç®—æ³•åˆ†æåŸºç¡€
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/algorithm/ds/topic2/">
        åˆ—è¡¨ã€æ ˆã€é˜Ÿåˆ—
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5">
          äººå·¥æ™ºèƒ½ç›¸å…³
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="äººå·¥æ™ºèƒ½ç›¸å…³" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
          äººå·¥æ™ºèƒ½ç›¸å…³
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5_1" id="__nav_2_5_1" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../cs/ai/basic/">äººå·¥æ™ºèƒ½åŸºç¡€</a>
<label for="__nav_2_5_1">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="äººå·¥æ™ºèƒ½åŸºç¡€" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_5_1">
<span class="md-nav__icon md-icon"></span>
          äººå·¥æ™ºèƒ½åŸºç¡€
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/ai/basic/topic1/">
        é€»è¾‘ä¸æ¨ç†
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/ai/basic/topic2/">
        æœç´¢æ±‚è§£
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" id="__nav_2_6" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../hpc/">é«˜æ€§èƒ½è®¡ç®—</a>
<label for="__nav_2_6">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="é«˜æ€§èƒ½è®¡ç®—" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_6">
<span class="md-nav__icon md-icon"></span>
          é«˜æ€§èƒ½è®¡ç®—
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6_2" id="__nav_2_6_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6_2">
          HPC 101 è¶…ç®—å°å­¦æœŸ
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="HPC 101 è¶…ç®—å°å­¦æœŸ" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_2">
<span class="md-nav__icon md-icon"></span>
          HPC 101 è¶…ç®—å°å­¦æœŸ
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../hpc/hpc101/vectorized/">
        å‘é‡åŒ–è®¡ç®—
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../hpc/hpc101/gpu/">
        GPU ç¼–ç¨‹
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../hpc/hpc101/openmp/">
        OpenMP åŸºç¡€
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../hpc/hpc101/mpi/">
        MPI åŸºç¡€
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../hpc/hpc101/ml/">
        æœºå™¨å­¦ä¹ åŸºç¡€
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7" id="__nav_2_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_7">
          é›¶æ•£çŸ¥è¯†ç‚¹
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="é›¶æ•£çŸ¥è¯†ç‚¹" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_7">
<span class="md-nav__icon md-icon"></span>
          é›¶æ•£çŸ¥è¯†ç‚¹
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/regex/">
        æ­£åˆ™è¡¨è¾¾å¼
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/unicode/">
        Unicode
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_8" id="__nav_2_8" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../cs/analysis/">æºç å‰–æ</a>
<label for="__nav_2_8">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="æºç å‰–æ" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_8">
<span class="md-nav__icon md-icon"></span>
          æºç å‰–æ
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/analysis/mkdocs/">
        mkdocs æºç å‰–æ
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_9" id="__nav_2_9" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../cs/tools/">å·¥å…·ç›¸å…³</a>
<label for="__nav_2_9">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="å·¥å…·ç›¸å…³" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_9">
<span class="md-nav__icon md-icon"></span>
          å·¥å…·ç›¸å…³
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/tools/toolbox/">
        å·¥å…·æ”¶é›†
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_9_3" id="__nav_2_9_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_9_3">
          å‘½ä»¤è¡Œå·¥å…·
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="å‘½ä»¤è¡Œå·¥å…·" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_9_3">
<span class="md-nav__icon md-icon"></span>
          å‘½ä»¤è¡Œå·¥å…·
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/tools/git/">
        Git å‘½ä»¤å¤‡å¿˜
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/tools/shell/">
        Shell å‘½ä»¤å¤‡å¿˜
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/tools/docker/">
        Docker ç›¸å…³å¤‡å¿˜
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/tools/gdb/">
        gdb ç›¸å…³å¤‡å¿˜
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_9_4" id="__nav_2_9_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_9_4">
          CI å·¥å…·
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="CI å·¥å…·" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_9_4">
<span class="md-nav__icon md-icon"></span>
          CI å·¥å…·
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/tools/action/">
        GitHub Action
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_9_5" id="__nav_2_9_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_9_5">
          ç«™ç‚¹ç”Ÿæˆå·¥å…·
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="ç«™ç‚¹ç”Ÿæˆå·¥å…·" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_9_5">
<span class="md-nav__icon md-icon"></span>
          ç«™ç‚¹ç”Ÿæˆå·¥å…·
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/tools/mkdocs/">
        mkdocs ä½¿ç”¨è®°å½•
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/tools/hexo/">
        hexo ä½¿ç”¨è®°å½•
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../cs/tools/sphinx/">
        sphinx ä½¿ç”¨è®°å½•
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../sec/">Security</a>
<label for="__nav_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Security" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Security
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2">
          æ¼æ´å¤ç°
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="æ¼æ´å¤ç°" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
          æ¼æ´å¤ç°
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../sec/vulns/log4j/">
        log4j æ¼æ´å¤ç°
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../web/">Web</a>
<label for="__nav_4">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Web" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Web
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" id="__nav_4_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../web/protocol/">ç½‘ç»œåè®®</a>
<label for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="ç½‘ç»œåè®®" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
          ç½‘ç»œåè®®
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../web/protocol/vmess/">
        VMess
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" id="__nav_4_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_3">
          æ’ç‰ˆå†™ä½œè§„èŒƒ
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="æ’ç‰ˆå†™ä½œè§„èŒƒ" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
          æ’ç‰ˆå†™ä½œè§„èŒƒ
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../web/typesetting/clreq/">
        ä¸­æ–‡æ’ç‰ˆéœ€æ±‚
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../web/typesetting/tech/">
        ä¸­æ–‡æŠ€æœ¯æ–‡æ¡£é£æ ¼æŒ‡å—
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../web/svg/">
        SVG
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../ctf/">CTF</a>
<label for="__nav_5">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="CTF" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          CTF
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" id="__nav_5_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../ctf/steg/">éšå†™æœ¯</a>
<label for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="éšå†™æœ¯" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_2">
<span class="md-nav__icon md-icon"></span>
          éšå†™æœ¯
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/steg/image/">
        å›¾ç‰‡éšå†™
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/steg/audio/">
        éŸ³é¢‘éšå†™
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" id="__nav_5_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../ctf/escapes/">æ²™ç®±é€ƒé€¸</a>
<label for="__nav_5_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="æ²™ç®±é€ƒé€¸" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_3">
<span class="md-nav__icon md-icon"></span>
          æ²™ç®±é€ƒé€¸
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/escapes/pysandbox/">
        Python æ²™ç®±é€ƒé€¸
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" id="__nav_5_4" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../ctf/forensics/">å–è¯</a>
<label for="__nav_5_4">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="å–è¯" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_4">
<span class="md-nav__icon md-icon"></span>
          å–è¯
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/forensics/mem/">
        å†…å­˜å–è¯
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/coding/">
        ç¼–ç ä¸å¯†ç 
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/qrcode/">
        QRCode
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/esolang/">
        Esolang
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_8" id="__nav_5_8" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../ctf/blockchain/">Blockchain</a>
<label for="__nav_5_8">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Blockchain" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_5_8">
<span class="md-nav__icon md-icon"></span>
          Blockchain
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_8_2" id="__nav_5_8_2" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../ctf/blockchain/eth/">Ethereum</a>
<label for="__nav_5_8_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Ethereum" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_5_8_2">
<span class="md-nav__icon md-icon"></span>
          Ethereum
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/blockchain/eth/basic/">
        ä»¥å¤ªåŠåŸºç¡€
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/blockchain/eth/evm/">
        ä»¥å¤ªåŠè™šæ‹Ÿæœº
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/blockchain/eth/solidity/">
        Solidity è¯­è¨€
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/blockchain/eth/yul/">
        Yul è¯­è¨€
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/blockchain/eth/vuln/">
        å¸¸è§åˆçº¦æ¼æ´æ”»å‡»æ‰‹æ®µ
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/blockchain/eth/erc/">
        ERC æ ‡å‡†
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ctf/blockchain/eth/eip/">
        å…¶ä½™é‡è¦ EIPs
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_8_3" id="__nav_5_8_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../ctf/blockchain/solana/">Solana</a>
</div>
<nav aria-label="Solana" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_5_8_3">
<span class="md-nav__icon md-icon"></span>
          Solana
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../">Writeups</a>
<label for="__nav_6">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Writeups" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Writeups
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" id="__nav_6_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_2">
          Training
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Training" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_2">
<span class="md-nav__icon md-icon"></span>
          Training
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../ethernaut/">
        Ethernaut
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../SecurityInnovation/">
        Security Innovation
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          SadServers
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        SadServers
      </a>
<nav aria-label="ç›®å½•" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
        ç›®å½•
      </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#saint-john">
    "Saint John"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#saskatoon">
    "Saskatoon"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tokyo">
    "Tokyo"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#manhattan">
    "Manhattan"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cape-town">
    "Cape Town"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#salta">
    "Salta"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#jakarta">
    "Jakarta"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bern">
    "Bern"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#singara">
    "Singara"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#karakorum">
    "Karakorum"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hong-kong">
    "Hong-Kong"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#venice">
    "Venice"
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../AAA/">
        ğŸ”’ AAA School Bus
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" id="__nav_6_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_3">
          2021
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="2021" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_3">
<span class="md-nav__icon md-icon"></span>
          2021
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../sysu_msc_puzzle/">
        SYSU MSC Puzzle 2021
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hackergame2021/">
        USTC Hackergame 2021
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../d0g3/">
        ç¬¬å››å±Šâ€œå®‰æ´µæ¯â€
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../bytectf2021_final/">
        ByteCTF 2021 Final
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sctf2021/">
        SCTF 2021
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_4" id="__nav_6_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_4">
          2022
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="2022" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_4">
<span class="md-nav__icon md-icon"></span>
          2022
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../vnctf2022/">
        VNCTF 2022
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tqlctf2022/">
        TQLCTF 2022
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../susctf2022/">
        SUSCTF 2022
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../d3ctf2022/">
        D3CTF 2022
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../%2Actf2022/">
        *CTF 2022
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../mrctf2022/">
        MRCTF 2022
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../qwb2022/">
        å¼ºç½‘æ¯ 2022 Quals
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tctf2022/">
        TCTF/0CTF 2022
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hackergame2022/">
        USTC Hackergame 2022
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../n1ctf2022/">
        N1CTF 2022
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../seccon2022/">
        SECCON 2022 Quals
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" id="__nav_7" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../others/">Others</a>
<label for="__nav_7">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Others" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          Others
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../others/notes/">
        è¯¾ç¨‹ç¬”è®°
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" id="__nav_7_3" type="checkbox"/>
<div class="md-nav__link md-nav__link--index">
<a href="../../others/troubleshooting/">TroubleShooting</a>
<label for="__nav_7_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="TroubleShooting" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_7_3">
<span class="md-nav__icon md-icon"></span>
          TroubleShooting
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../others/troubleshooting/mac/">
        macOS TroubleShooting
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="ç›®å½•" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
        ç›®å½•
      </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#saint-john">
    "Saint John"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#saskatoon">
    "Saskatoon"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tokyo">
    "Tokyo"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#manhattan">
    "Manhattan"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cape-town">
    "Cape Town"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#salta">
    "Salta"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#jakarta">
    "Jakarta"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bern">
    "Bern"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#singara">
    "Singara"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#karakorum">
    "Karakorum"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hong-kong">
    "Hong-Kong"
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#venice">
    "Venice"
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<script defer="" src="/js/toc.js"></script>
<link href="/css/fold_toc.css" rel="stylesheet"/>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/TonyCrane/note/tree/master/docs/writeups/sadservers.md" title="ç¼–è¾‘æ­¤é¡µ">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1 id="sadservers-writeup">SadServers Writeup<a class="headerlink" href="#sadservers-writeup" title="Permanent link">Â¶</a></h1>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p>æ°´<span class="heti-skip"><span class="heti-spacing"> </span>tg<span class="heti-spacing"> </span></span>å‘ç°çš„ï¼ŒæŒºå¥½ç©çš„ï¼Œå°±åšä¸€åšï¼Œå­¦åˆ°å¾ˆå¤šï¼Œå°±å†™ä¸€å†™ã€‚</p>
<p>å¹³å°åœ°å€åœ¨<a href="https://sadservers.com/"><span><span class="heti-spacing"> </span>https://sadservers.com/</span></a> ã€‚å¤§æ¦‚ç±»ä¼¼è¿ç»´ï¼Ÿåæ­£å¤§æ¦‚å°±æ˜¯ä¿®å¤ä¸€äº›<span class="heti-skip"><span class="heti-spacing"> </span>Linux<span class="heti-spacing"> </span></span>æœåŠ¡å™¨å‡ºç°çš„é—®é¢˜ã€‚</p>
<p>ä¸ç®—<span><span class="heti-spacing"> </span>CTF</span>ï¼Œä¸çŸ¥é“å’‹åˆ†ç±»ï¼Œå°±æ‰”è¿™é‡Œå§</p>
<p>çœ‹èµ·æ¥é¢˜ç›®ä¸å¤šï¼Œæ®è¯´æ˜¯<span><span class="heti-spacing"> </span>"new challenges weekly"</span>ï¼Œå‡ºçš„è¯æˆ–è®¸å¯ä»¥éšæ—¶æ›´æ–°<heti-adjacent class="heti-adjacent-half">ï¼Ÿ</heti-adjacent>ï¼ˆå’•å’•å’•</p>
</div>
<hr/>
<h2 id="saint-john">"Saint John"<a class="headerlink" href="#saint-john" title="Permanent link">Â¶</a></h2>
<blockquote>
<p><strong>Scenario:</strong> "Saint John": what is writing to this log file?</p>
<p><strong>Level:</strong> Easy</p>
<p><strong>Description:</strong> A developer created a testing program that is continuously writing to a log file /var/log/bad.log and filling up disk. You can check for example with <code>tail -f /var/log/bad.log</code>.
This program is no longer needed. Find it and terminate it.</p>
<p><strong>OS:</strong> Ubuntu 22.04 LTS</p>
</blockquote>
<p>å¯ä»¥<span class="heti-skip"><span class="heti-spacing"> </span>tail -f /var/log/bad.log<span class="heti-spacing"> </span></span>çœ‹ä¸€çœ¼ç¡®å®åœ¨ä¸€ç›´å¡«ä¸œè¥¿ã€‚ç„¶åå½“ç„¶æ˜¯å…ˆæŸ¥ä¸€ä¸‹åå°è¿›ç¨‹<span><span class="heti-spacing"> </span>ps -aux</span>ï¼Œå¯ä»¥å‘ç°æœ‰ä¸€æ¡å¾ˆå¯ç–‘ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a>USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>...
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>ubuntu       610  0.0  1.7  17672  8212 ?        S    07:57   0:00 /usr/bin/python3 /home/ubuntu/badlog.py
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>...
</code></pre></div>
å¯ä»¥ cat çœ‹ä¸€ä¸‹ badlog.py:
<div class="highlight"><pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="ch">#! /usr/bin/python3</span>
<a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="c1"># test python writing to a file</span>
<a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>
<a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="kn">import</span> <span class="nn">random</span>
<a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="kn">import</span> <span class="nn">time</span>
<a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a>
<a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'/var/log/bad.log'</span><span class="p">,</span> <span class="s1">'a'</span><span class="p">)</span>
<a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a>  <span class="n">r</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">2147483647</span><span class="p">)</span>
<a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a>  <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span> <span class="o">+</span> <span class="s1">' token: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a>  <span class="n">f</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
<a href="#__codelineno-1-13" id="__codelineno-1-13" name="__codelineno-1-13"></a>  <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
ç¡®å®æ˜¯åœ¨æ¯ä¸€ç§’å†™ä¸€è¡Œã€‚æ‰€ä»¥ç›´æ¥ kill -9 610 å¼ºåˆ¶æ€æ­»è¿™ä¸ªè¿›ç¨‹å°±å¥½äº†ã€‚
<p>é¢˜ç›®çš„æœ¬æ„å¤§æ¦‚æ˜¯ç”¨<span class="heti-skip"><span class="heti-spacing"> </span>lsof<span class="heti-spacing"> </span></span>æ¥æŸ¥çœ‹ä½¿ç”¨æŸä¸€æ–‡ä»¶çš„è¿›ç¨‹ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>ubuntu@ip-172-31-32-108:/$ lsof /var/log/bad.log 
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>COMMAND   PID   USER   FD   TYPE DEVICE SIZE/OFF  NODE NAME
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>badlog.py 610 ubuntu    3w   REG  259,1    31275 67701 /var/log/bad.log
</code></pre></div>
<p>ç„¶ååŒæ ·æ˜¯å¼ºæ€ã€‚</p>
<hr/>
<h2 id="saskatoon">"Saskatoon"<a class="headerlink" href="#saskatoon" title="Permanent link">Â¶</a></h2>
<blockquote>
<p><strong>Scenario:</strong> "Saskatoon": counting IPs.</p>
<p><strong>Level:</strong> Easy</p>
<p><strong>Description:</strong> There's a web server access log file at /home/admin/access.log. The file consists of one line per HTTP request, with the requester's IP address at the beginning of each line.</p>
<p>Find what's the IP address that has the most requests in this file (there's no tie; the IP is unique). Write the solution into a file /home/admin/highestip.txt. For example, if your solution is "1.2.3.4", you can do echo "1.2.3.4" &gt; /home/admin/highestip.txt</p>
<p><strong>OS:</strong> Debian 11</p>
</blockquote>
<p>æ‰€æœ‰éœ€è¦çš„ä¸œè¥¿éƒ½åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>access.log<span class="heti-spacing"> </span></span>é‡Œé¢ï¼Œæ‰€ä»¥å†™ä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>python<span class="heti-spacing"> </span></span>è„šæœ¬è¯»å–ã€ç»Ÿè®¡ã€æ’åºã€è¾“å‡ºå°±å¥½äº†ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"/home/admin/access.log"</span><span class="p">,</span> <span class="s2">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>    <span class="n">contents</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>
<a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="n">ips</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">" "</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">contents</span><span class="p">]</span>
<a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="n">cnt</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">([(</span><span class="n">ips</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">ip</span><span class="p">),</span> <span class="n">ip</span><span class="p">)</span> <span class="k">for</span> <span class="n">ip</span> <span class="ow">in</span> <span class="n">ips</span><span class="p">]))</span>
<a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="nb">print</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">cnt</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<a href="#__codelineno-3-7" id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="c1"># (482, '66.249.73.135')</span>
</code></pre></div>
æ‰€ä»¥è¯·æ±‚æœ€å¤šçš„ ip å°±æ˜¯ 66.249.73.135ã€‚
<p>å½“ç„¶é¢˜ç›®çš„æ„æ€æ˜¯é€šè¿‡<span class="heti-skip"><span class="heti-spacing"> </span>shell<span class="heti-spacing"> </span></span>å‘½ä»¤ç›´æ¥æ¥åšã€‚å¯ä»¥<span class="heti-skip"><span class="heti-spacing"> </span>cat<span class="heti-spacing"> </span></span>ç„¶å<span class="heti-skip"><span class="heti-spacing"> </span>cut<span class="heti-spacing"> </span></span>æ¥å–å‡º<span><span class="heti-spacing"> </span>ip</span>ï¼Œç„¶å<span class="heti-skip"><span class="heti-spacing"> </span>sort | uniq -c<span class="heti-spacing"> </span></span>æ¥ç»Ÿè®¡æ¬¡æ•°ï¼ˆè¦å…ˆ<span><span class="heti-spacing"> </span>sort</span>ï¼Œ<span>uniq<span class="heti-spacing"> </span></span>åªä¼šç»Ÿè®¡ç›¸é‚»çš„é‡å¤è¡Œï¼‰ï¼Œä¹‹ååœ¨<span class="heti-skip"><span class="heti-spacing"> </span>sort<span class="heti-spacing"> </span></span>ä¸€ä¸‹ï¼Œæœ€åä¸€è¡Œå°±æ˜¯è¦çš„äº†ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>$ cat /home/admin/access.log | cut -d ' ' -f 1 | sort | uniq -c | sort | tail -n 1
<a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a>    482 66.249.73.135
</code></pre></div>
ç”¨ awk æ¥å¤„ç†ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œç›´æ¥ä¸€è¡Œè§£å†³ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>$ awk <span class="s1">'{print $1}'</span> /home/admin/access.log <span class="p">|</span> sort <span class="p">|</span> uniq -c <span class="p">|</span> sort <span class="p">|</span> tail -n <span class="m">1</span> <span class="p">|</span> awk <span class="s1">'{print $2}'</span> &gt; /home/admin/highestip.txt
</code></pre></div>
<hr/>
<h2 id="tokyo">"Tokyo"<a class="headerlink" href="#tokyo" title="Permanent link">Â¶</a></h2>
<blockquote>
<p><strong>Scenario:</strong> "Tokyo": can't serve web file</p>
<p><strong>Level:</strong> Medium</p>
<p><strong>Description:</strong> There's a web server serving a file /var/www/html/index.html with content "hello sadserver" but when we try to check it locally with an HTTP client like curl 127.0.0.1:80, nothing is returned. This scenario is not about the particular web server configuration and you only need to have general knowledge about how web servers work.</p>
<p><strong>OS:</strong> Ubuntu 22.04 LTS</p>
</blockquote>
<p><span>ps -aux<span class="heti-spacing"> </span></span>å¯ä»¥å‘ç°è¿™ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>web server<span class="heti-spacing"> </span></span>æœåŠ¡æ˜¯ç”±<span class="heti-skip"><span class="heti-spacing"> </span>apache2<span class="heti-spacing"> </span></span>æä¾›çš„ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
<a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>...
<a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a>www-data     774  0.0  0.9 1211728 4304 ?        Sl   08:27   0:00 /usr/sbin/apache2 -k start
<a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>www-data     775  0.0  0.9 1211728 4304 ?        Sl   08:27   0:00 /usr/sbin/apache2 -k start
<a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>...
</code></pre></div>
å» /etc/apache2 é€›äº†ä¸€åœˆï¼Œç¡®å®æ²¡ä»€ä¹ˆé—®é¢˜ã€‚
<p><code>curl -v 127.0.0.1:80</code>ï¼Œå‘ç°æ ¹æœ¬å°±è¿ä¸ä¸Šã€‚å¯èƒ½æ˜¯é˜²ç«å¢™çš„é—®é¢˜ï¼Œçœ‹ä¸€ä¸‹<span><span class="heti-spacing"> </span>iptables</span>ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a># iptables -L -n
<a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a>Chain INPUT (policy ACCEPT)
<a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a>target     prot opt source               destination         
<a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a>DROP       tcp  --  0.0.0.0/0            0.0.0.0/0            tcp dpt:80
<a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a>
<a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a>Chain FORWARD (policy ACCEPT)
<a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a>target     prot opt source               destination         
<a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a>
<a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a>Chain OUTPUT (policy ACCEPT)
<a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a>target     prot opt source               destination
</code></pre></div>
å‘ç° INPUT é“¾æŠŠæ‰€æœ‰ tcp åŒ…éƒ½ DROP äº†ã€‚æ‰€ä»¥å¯ä»¥ç›´æ¥æƒ…å†µè§„åˆ™ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a># iptables -F
</code></pre></div>
ç„¶åå† curl å‘ç°è¿”å› 403 Forbiddenã€‚æ£€æŸ¥ä¸€ä¸‹ /var/www/html/index.html çš„æƒé™ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a># ls -l /var/www/html/index.html
<a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>-rw------- 1 root root 16 Aug  1 00:40 /var/www/html/index.html
</code></pre></div>
æ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸€ä¸‹æƒé™ï¼Œè®©æ‰€æœ‰äººå¯è¯»ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a># chmod +r /var/www/html/index.html
</code></pre></div>
ç„¶åå† curl å°±å¯ä»¥äº†ã€‚
<hr/>
<h2 id="manhattan">"Manhattan"<a class="headerlink" href="#manhattan" title="Permanent link">Â¶</a></h2>
<blockquote>
<p><strong>Scenario:</strong> "Manhattan": can't write data into database.</p>
<p><strong>Level:</strong> Medium</p>
<p><strong>Description:</strong> Your objective is to be able to insert a row in an existing Postgres database. The issue is not specific to Postgres and you don't need to know details about it (although it may help).</p>
<p>Helpful Postgres information: it's a service that listens to a port (:5432) and writes to disk in a data directory, the location of which is defined in the data_directory parameter of the configuration file /etc/postgresql/14/main/postgresql.conf. In our case Postgres is managed by systemd as a unit with name postgresql.</p>
<p><strong>OS:</strong> Debian 10</p>
</blockquote>
<p>æœ‰ä¸€äº›éš¾åº¦ï¼Œçœ‹äº†äº›æç¤ºã€‚</p>
<p>é¦–å…ˆ <code>systemctl status postgresql</code> å¯ä»¥çœ‹å‡º<span class="heti-skip"><span class="heti-spacing"> </span>postgresql<span class="heti-spacing"> </span></span>ç¡®å®åœ¨è¿è¡Œï¼Œä½†æ˜¯è¿ä¸ä¸Šã€‚çœ‹ä¸€çœ‹<span class="heti-skip"><span class="heti-spacing"> </span>/var/log/syslog<span class="heti-spacing"> </span></span>æ²¡æœ‰ä»€ä¹ˆå¼‚æ ·ã€‚</p>
<p>è¯•ç€ <code>systemctl restart postgresql</code> é‡å¯<span><span class="heti-spacing"> </span>postgresql</span>ï¼Œæ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>/var/log/syslog<span class="heti-spacing"> </span></span>é‡Œé¢å¯ä»¥çœ‹åˆ°é”™è¯¯ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a>Nov  3 09:11:58 ip-172-31-47-134 postgresql@14-main[884]: 2022-11-03 09:11:58.882 UTC [889] FATAL:  could not create lock file "postmaster.pid": No space left on device
</code></pre></div>
No space left on deviceï¼Œæ‰€ä»¥ df çœ‹ä¸€ä¸‹ç£ç›˜ç”¨é‡ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a>root@ip-172-31-47-134:/# df
<a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a>Filesystem      1K-blocks    Used Available Use% Mounted on
<a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a>udev               229200       0    229200   0% /dev
<a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a>tmpfs               47660    1520     46140   4% /run
<a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a>/dev/nvme1n1p1    8026128 1233676   6363196  17% /
<a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a>tmpfs              238300       0    238300   0% /dev/shm
<a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a>tmpfs                5120       0      5120   0% /run/lock
<a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a>tmpfs              238300       0    238300   0% /sys/fs/cgroup
<a href="#__codelineno-12-9" id="__codelineno-12-9" name="__codelineno-12-9"></a>/dev/nvme1n1p15    126710     278    126432   1% /boot/efi
<a href="#__codelineno-12-10" id="__codelineno-12-10" name="__codelineno-12-10"></a>/dev/nvme0n1      8378368 8378340        28 100% /opt/pgdata
</code></pre></div>
å¯ä»¥çœ‹åˆ°æŒ‚è½½åœ¨ /opt/pgdata ä¸Šçš„è®¾å¤‡å®¹é‡æ»¡äº†ã€‚æ£€æŸ¥ä¸€ä¸‹è¿™ä¸ªç›®å½•ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a>root@ip-172-31-47-134:/# ls -l /opt/pgdata
<a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a>total 8285620
<a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a>-rw-r--r--  1 root     root             69 May 21 22:20 deleteme
<a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a>-rw-r--r--  1 root     root     7516192768 May 21 22:06 file1.bk
<a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a>-rw-r--r--  1 root     root      967774208 May 21 22:17 file2.bk
<a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a>-rw-r--r--  1 root     root         499712 May 21 22:23 file3.bk
<a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a>drwx------ 19 postgres postgres       4096 May 21 22:24 main
</code></pre></div>
å¯ä»¥å‘ç°ä¸€å † .bk å¤‡ä»½æ–‡ä»¶å æ»¡äº†ç£ç›˜ï¼Œåˆ é™¤ã€é‡å¯ã€æµ‹è¯•ï¼Œå‘ç°ä¸€åˆ‡æ­£å¸¸äº†ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a>root@ip-172-31-47-134:/# rm /opt/pgdata/file*.bk
<a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a>root@ip-172-31-47-134:/# ls -l /opt/pgdata
<a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a>total 8
<a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a>-rw-r--r--  1 root     root       69 May 21 22:20 deleteme
<a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a>drwx------ 19 postgres postgres 4096 May 21 22:24 main
<a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a>root@ip-172-31-47-134:/# systemctl restart postgresql
<a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a>root@ip-172-31-47-134:/# sudo -u postgres psql -c "insert into persons(name) values ('jane smith');" -d dt
<a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a>INSERT 0 1
</code></pre></div>
<hr/>
<h2 id="cape-town">"Cape Town"<a class="headerlink" href="#cape-town" title="Permanent link">Â¶</a></h2>
<blockquote>
<p><strong>Scenario:</strong> "Cape Town": Borked Nginx</p>
<p><strong>Level:</strong> Medium</p>
<p><strong>Description:</strong> There's an Nginx web server installed and managed by systemd. Running curl -I 127.0.0.1:80 returns curl: (7) Failed to connect to localhost port 80: Connection refused , fix it so when you curl you get the default Nginx page.</p>
<p><strong>OS:</strong> Debian 11</p>
</blockquote>
<p>é¦–å…ˆ<span class="heti-skip"><span class="heti-spacing"> </span>systemctl status nginx<span class="heti-spacing"> </span></span>æ£€æŸ¥ä¸€ä¸‹<span class="heti-skip"><span class="heti-spacing"> </span>nginx<span class="heti-spacing"> </span></span>è¿è¡ŒçŠ¶æ€ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a>$ sudo systemctl status nginx
<a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>â— nginx.service - The NGINX HTTP and reverse proxy server
<a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>     Loaded: loaded (/etc/systemd/system/nginx.service; enabled; vendor preset: enabled)
<a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a>     Active: failed (Result: exit-code) since Thu 2022-11-03 09:30:47 UTC; 42s ago
<a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a>    Process: 584 ExecStartPre=/usr/sbin/nginx -t (code=exited, status=1/FAILURE)
<a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a>        CPU: 28ms
<a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a>
<a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a>Nov 03 09:30:47 ip-172-31-33-45 systemd[1]: Starting The NGINX HTTP and reverse proxy server...
<a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a>Nov 03 09:30:47 ip-172-31-33-45 nginx[584]: nginx: [emerg] unexpected ";" in /etc/nginx/sites-enabled/default:1
<a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a>Nov 03 09:30:47 ip-172-31-33-45 nginx[584]: nginx: configuration file /etc/nginx/nginx.conf test failed
<a href="#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a>Nov 03 09:30:47 ip-172-31-33-45 systemd[1]: nginx.service: Control process exited, code=exited, status=1/FAILURE
<a href="#__codelineno-15-12" id="__codelineno-15-12" name="__codelineno-15-12"></a>Nov 03 09:30:47 ip-172-31-33-45 systemd[1]: nginx.service: Failed with result 'exit-code'.
<a href="#__codelineno-15-13" id="__codelineno-15-13" name="__codelineno-15-13"></a>Nov 03 09:30:47 ip-172-31-33-45 systemd[1]: Failed to start The NGINX HTTP and reverse proxy server.
</code></pre></div>
å‘ç°æœ‰æŠ¥é”™ï¼Œè¯´åœ¨ /etc/nginx/sites-enabled/default:1 æœ‰ä¸€ä¸ª unexpected ";"ï¼Œæ‰€ä»¥å»åˆ æ‰å®ƒï¼Œç„¶åé‡å¯ã€‚
<div class="highlight"><pre><span></span><code><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a>admin@ip-172-31-33-45:/$ sudo vim /etc/nginx/sites-enabled/default 
<a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a>admin@ip-172-31-33-45:/$ sudo systemctl restart nginx
<a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a>admin@ip-172-31-33-45:/$ sudo systemctl status nginx
<a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a>â— nginx.service - The NGINX HTTP and reverse proxy server
<a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a>     Loaded: loaded (/etc/systemd/system/nginx.service; enabled; vendor preset: enabled)
<a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a>     Active: active (running) since Thu 2022-11-03 09:32:32 UTC; 6s ago
<a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a>    Process: 868 ExecStartPre=/usr/sbin/nginx -t (code=exited, status=0/SUCCESS)
<a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a>    Process: 869 ExecStart=/usr/sbin/nginx (code=exited, status=0/SUCCESS)
<a href="#__codelineno-16-9" id="__codelineno-16-9" name="__codelineno-16-9"></a>   Main PID: 870 (nginx)
<a href="#__codelineno-16-10" id="__codelineno-16-10" name="__codelineno-16-10"></a>      Tasks: 2 (limit: 524)
<a href="#__codelineno-16-11" id="__codelineno-16-11" name="__codelineno-16-11"></a>     Memory: 2.4M
<a href="#__codelineno-16-12" id="__codelineno-16-12" name="__codelineno-16-12"></a>        CPU: 27ms
<a href="#__codelineno-16-13" id="__codelineno-16-13" name="__codelineno-16-13"></a>     CGroup: /system.slice/nginx.service
<a href="#__codelineno-16-14" id="__codelineno-16-14" name="__codelineno-16-14"></a>             â”œâ”€870 nginx: master process /usr/sbin/nginx
<a href="#__codelineno-16-15" id="__codelineno-16-15" name="__codelineno-16-15"></a>             â””â”€871 nginx: worker process
<a href="#__codelineno-16-16" id="__codelineno-16-16" name="__codelineno-16-16"></a>
<a href="#__codelineno-16-17" id="__codelineno-16-17" name="__codelineno-16-17"></a>Nov 03 09:32:32 ip-172-31-33-45 systemd[1]: Starting The NGINX HTTP and reverse proxy server...
<a href="#__codelineno-16-18" id="__codelineno-16-18" name="__codelineno-16-18"></a>Nov 03 09:32:32 ip-172-31-33-45 nginx[868]: nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
<a href="#__codelineno-16-19" id="__codelineno-16-19" name="__codelineno-16-19"></a>Nov 03 09:32:32 ip-172-31-33-45 nginx[868]: nginx: configuration file /etc/nginx/nginx.conf test is successful
<a href="#__codelineno-16-20" id="__codelineno-16-20" name="__codelineno-16-20"></a>Nov 03 09:32:32 ip-172-31-33-45 systemd[1]: Started The NGINX HTTP and reverse proxy server.
</code></pre></div>
å·¥ä½œæ­£å¸¸ï¼Œä½†æ˜¯ curl ä¸€ä¸‹ä¼šå¾—åˆ° 500ã€‚æ£€æŸ¥ä¸€ä¸‹ logï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a>admin@ip-172-31-33-45:/$ cat /var/log/nginx/error.log | tail -n 10
<a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a>2022/09/11 16:39:11 [emerg] 5875#5875: unexpected ";" in /etc/nginx/sites-enabled/default:1
<a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a>2022/09/11 16:54:26 [emerg] 5931#5931: unexpected ";" in /etc/nginx/sites-enabled/default:1
<a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a>2022/09/11 16:55:00 [emerg] 5961#5961: unexpected ";" in /etc/nginx/sites-enabled/default:1
<a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a>2022/09/11 17:02:07 [emerg] 6066#6066: unexpected ";" in /etc/nginx/sites-enabled/default:1
<a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a>2022/09/11 17:07:03 [emerg] 6146#6146: unexpected ";" in /etc/nginx/sites-enabled/default:1
<a href="#__codelineno-17-7" id="__codelineno-17-7" name="__codelineno-17-7"></a>2022/11/03 09:30:47 [emerg] 584#584: unexpected ";" in /etc/nginx/sites-enabled/default:1
<a href="#__codelineno-17-8" id="__codelineno-17-8" name="__codelineno-17-8"></a>2022/11/03 09:32:32 [alert] 870#870: socketpair() failed while spawning "worker process" (24: Too many open files)
<a href="#__codelineno-17-9" id="__codelineno-17-9" name="__codelineno-17-9"></a>2022/11/03 09:32:32 [emerg] 871#871: eventfd() failed (24: Too many open files)
<a href="#__codelineno-17-10" id="__codelineno-17-10" name="__codelineno-17-10"></a>2022/11/03 09:32:32 [alert] 871#871: socketpair() failed (24: Too many open files)
<a href="#__codelineno-17-11" id="__codelineno-17-11" name="__codelineno-17-11"></a>2022/11/03 09:33:03 [crit] 871#871: *1 open() "/var/www/html/index.nginx-debian.html" failed (24: Too many open files), client: 127.0.0.1, server: _, request: "GET / HTTP/1.1", host: "127.0.0.1"
</code></pre></div>
å¯ä»¥å‘ç°æŠ¥é”™ Too many open filesã€‚æœäº†ä¸€ä¸‹ï¼Œç½‘ä¸Šæä¾›çš„æ–¹æ³•éƒ½è¯•äº†ä¸€åœˆï¼Œé—®é¢˜ä¸å‡ºåœ¨ nginx çš„é…ç½®ä¸Šã€‚ç„¶åæ ¹æ®æç¤ºå»çœ‹äº† systemd ä¸Š nginx çš„é…ç½®ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a>admin@ip-172-31-33-45:/$ cat /etc/systemd/system/nginx.service 
<a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a>[Unit]
<a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a>Description=The NGINX HTTP and reverse proxy server
<a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a>After=syslog.target network-online.target remote-fs.target nss-lookup.target
<a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a>Wants=network-online.target
<a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a>
<a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a>[Service]
<a href="#__codelineno-18-8" id="__codelineno-18-8" name="__codelineno-18-8"></a>Type=forking
<a href="#__codelineno-18-9" id="__codelineno-18-9" name="__codelineno-18-9"></a>PIDFile=/run/nginx.pid
<a href="#__codelineno-18-10" id="__codelineno-18-10" name="__codelineno-18-10"></a>ExecStartPre=/usr/sbin/nginx -t
<a href="#__codelineno-18-11" id="__codelineno-18-11" name="__codelineno-18-11"></a>ExecStart=/usr/sbin/nginx
<a href="#__codelineno-18-12" id="__codelineno-18-12" name="__codelineno-18-12"></a>ExecReload=/usr/sbin/nginx -s reload
<a href="#__codelineno-18-13" id="__codelineno-18-13" name="__codelineno-18-13"></a>ExecStop=/bin/kill -s QUIT $MAINPID
<a href="#__codelineno-18-14" id="__codelineno-18-14" name="__codelineno-18-14"></a>PrivateTmp=true
<a href="#__codelineno-18-15" id="__codelineno-18-15" name="__codelineno-18-15"></a>LimitNOFILE=10
<a href="#__codelineno-18-16" id="__codelineno-18-16" name="__codelineno-18-16"></a>
<a href="#__codelineno-18-17" id="__codelineno-18-17" name="__codelineno-18-17"></a>[Install]
<a href="#__codelineno-18-18" id="__codelineno-18-18" name="__codelineno-18-18"></a>WantedBy=multi-user.target
</code></pre></div>
æŠŠ LimitNOFILE=10 æ”¹æˆ LimitNOFILE=1024ï¼Œç„¶åé‡å¯ nginx å³å¯æ­£å¸¸å¾—åˆ°å“åº”ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a>admin@ip-172-31-33-45:/$ sudo systemctl restart nginx
<a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a>Warning: The unit file, source configuration file or drop-ins of nginx.service changed on disk. Run 'systemctl daemon-reload' to reload units.
<a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a>admin@ip-172-31-33-45:/$ sudo systemctl daemon-reload
<a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a>admin@ip-172-31-33-45:/$ sudo systemctl restart nginx
<a href="#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a>admin@ip-172-31-33-45:/$ curl -Is 127.0.0.1:80 | head -1
<a href="#__codelineno-19-6" id="__codelineno-19-6" name="__codelineno-19-6"></a>HTTP/1.1 200 OK
</code></pre></div>
<hr/>
<h2 id="salta">"Salta"<a class="headerlink" href="#salta" title="Permanent link">Â¶</a></h2>
<blockquote>
<p><strong>Scenario:</strong> "Salta": Docker container won't start.</p>
<p><strong>Level:</strong> Medium</p>
<p><strong>Description:</strong> There's a "dockerized" Node.js web application in the /home/admin/app directory. Create a Docker container so you get a web app on port :8888 and can curl to it. For the solution to be valid, there should be only one running Docker container.</p>
<p><strong>OS:</strong> Debian 11</p>
</blockquote>
<p>é¦–å…ˆæ£€æŸ¥ä¸€ä¸‹<span class="heti-skip"><span class="heti-spacing"> </span>docker<span class="heti-spacing"> </span></span>å®¹å™¨ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a>admin@ip-172-31-38-21:/$ sudo docker ps -a
<a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a>CONTAINER ID   IMAGE     COMMAND                  CREATED       STATUS                   PORTS     NAMES
<a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a>124a4fb17a1c   app       "docker-entrypoint.sâ€¦"   6 weeks ago   Exited (1) 6 weeks ago             elated_taussig
<a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a>admin@ip-172-31-38-21:~/app$ sudo docker logs 124
<a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a>node:internal/modules/cjs/loader:928
<a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a>  throw err;
<a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a>  ^
<a href="#__codelineno-20-8" id="__codelineno-20-8" name="__codelineno-20-8"></a>
<a href="#__codelineno-20-9" id="__codelineno-20-9" name="__codelineno-20-9"></a>Error: Cannot find module '/usr/src/app/serve.js'
<a href="#__codelineno-20-10" id="__codelineno-20-10" name="__codelineno-20-10"></a>    at Function.Module._resolveFilename (node:internal/modules/cjs/loader:925:15)
<a href="#__codelineno-20-11" id="__codelineno-20-11" name="__codelineno-20-11"></a>    at Function.Module._load (node:internal/modules/cjs/loader:769:27)
<a href="#__codelineno-20-12" id="__codelineno-20-12" name="__codelineno-20-12"></a>    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:76:12)
<a href="#__codelineno-20-13" id="__codelineno-20-13" name="__codelineno-20-13"></a>    at node:internal/main/run_main_module:17:47 {
<a href="#__codelineno-20-14" id="__codelineno-20-14" name="__codelineno-20-14"></a>  code: 'MODULE_NOT_FOUND',
<a href="#__codelineno-20-15" id="__codelineno-20-15" name="__codelineno-20-15"></a>  requireStack: []
<a href="#__codelineno-20-16" id="__codelineno-20-16" name="__codelineno-20-16"></a>}
</code></pre></div>
å‘ç°æŠ¥é”™äº†ï¼ŒDockerfile é‡Œå‡ºäº†ä¸€äº›é—®é¢˜ï¼Œçœ‹ä¸€ä¸‹ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="c"># documentation https://nodejs.org/en/docs/guides/nodejs-docker-webapp/</span>
<a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a>
<a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="c"># most recent node (security patches) and alpine (minimal, adds to security, possible libc issues)</span>
<a href="#__codelineno-21-4" id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="k">FROM</span><span class="w"> </span><span class="s">node:15.7-alpine</span><span class="w"> </span>
<a href="#__codelineno-21-5" id="__codelineno-21-5" name="__codelineno-21-5"></a>
<a href="#__codelineno-21-6" id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="c"># Create app directory &amp; copy app files</span>
<a href="#__codelineno-21-7" id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/usr/src/app</span>
<a href="#__codelineno-21-8" id="__codelineno-21-8" name="__codelineno-21-8"></a>
<a href="#__codelineno-21-9" id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="c"># we copy first package.json only, so we take advantage of cached Docker layers</span>
<a href="#__codelineno-21-10" id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="k">COPY</span><span class="w"> </span>./package*.json ./
<a href="#__codelineno-21-11" id="__codelineno-21-11" name="__codelineno-21-11"></a>
<a href="#__codelineno-21-12" id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="c"># RUN npm ci --only=production</span>
<a href="#__codelineno-21-13" id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="k">RUN</span><span class="w"> </span>npm install
<a href="#__codelineno-21-14" id="__codelineno-21-14" name="__codelineno-21-14"></a>
<a href="#__codelineno-21-15" id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="c"># Copy app source</span>
<a href="#__codelineno-21-16" id="__codelineno-21-16" name="__codelineno-21-16"></a><span class="k">COPY</span><span class="w"> </span>./* ./
<a href="#__codelineno-21-17" id="__codelineno-21-17" name="__codelineno-21-17"></a>
<a href="#__codelineno-21-18" id="__codelineno-21-18" name="__codelineno-21-18"></a><span class="c"># port used by this app</span>
<a href="#__codelineno-21-19" id="__codelineno-21-19" name="__codelineno-21-19"></a><span class="k">EXPOSE</span><span class="w"> </span><span class="s">8880</span>
<a href="#__codelineno-21-20" id="__codelineno-21-20" name="__codelineno-21-20"></a>
<a href="#__codelineno-21-21" id="__codelineno-21-21" name="__codelineno-21-21"></a><span class="c"># command to run</span>
<a href="#__codelineno-21-22" id="__codelineno-21-22" name="__codelineno-21-22"></a><span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"node"</span><span class="p">,</span><span class="w"> </span><span class="s2">"serve.js"</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
å‘ç°æœ€å CMD é‡Œ server.js æ‰“æˆäº† serve.jsï¼Œè€Œä¸” EXPOSE çš„ç«¯å£ä¹Ÿä¸å¯¹ã€‚ä¸¤ä¸ªé—®é¢˜ä¿®ä¸€ä¸‹ç„¶åé‡æ–°æ„å»ºã€è¿è¡Œï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a>admin@ip-172-31-38-21:~/app$ sudo docker build -t app .
<a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a>admin@ip-172-31-38-21:~/app$ sudo docker rm 124
<a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a>admin@ip-172-31-38-21:~/app$ sudo docker run -d -p 8888:8888 app
<a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a>e67b36ff14ff3676e419036180abf9231e97eacc5ec6fe9d76426e7003acfb8f
<a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a>docker: Error response from daemon: driver failed programming external connectivity on endpoint nifty_bhaskara (ce8a09c7a42f730b89e0bd1bd3298de1598d79bf0d08d1532a7f38002cda84d4): Error starting userland proxy: listen tcp4 0.0.0.0:8888: bind: address already in use.
</code></pre></div>
å‘ç°æŠ¥é”™ 8888 ç«¯å£è¢«å ç”¨äº†ã€‚æ²¡æœ‰ lsofï¼Œç”¨ netstat æŸ¥ä¸€ä¸‹ç«¯å£ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a>admin@ip-172-31-38-21:~/app$ netstat -tunlp
<a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a>(Not all processes could be identified, non-owned process info
<a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a> will not be shown, you would have to be root to see it all.)
<a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a>Active Internet connections (only servers)
<a href="#__codelineno-23-5" id="__codelineno-23-5" name="__codelineno-23-5"></a>Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
<a href="#__codelineno-23-6" id="__codelineno-23-6" name="__codelineno-23-6"></a>tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      -                   
<a href="#__codelineno-23-7" id="__codelineno-23-7" name="__codelineno-23-7"></a>tcp        0      0 0.0.0.0:8888            0.0.0.0:*               LISTEN      -                   
<a href="#__codelineno-23-8" id="__codelineno-23-8" name="__codelineno-23-8"></a>tcp6       0      0 :::8080                 :::*                    LISTEN      562/gotty           
<a href="#__codelineno-23-9" id="__codelineno-23-9" name="__codelineno-23-9"></a>tcp6       0      0 :::22                   :::*                    LISTEN      -                   
<a href="#__codelineno-23-10" id="__codelineno-23-10" name="__codelineno-23-10"></a>tcp6       0      0 :::8888                 :::*                    LISTEN      -                   
<a href="#__codelineno-23-11" id="__codelineno-23-11" name="__codelineno-23-11"></a>tcp6       0      0 :::6767                 :::*                    LISTEN      563/sadagent        
<a href="#__codelineno-23-12" id="__codelineno-23-12" name="__codelineno-23-12"></a>udp        0      0 127.0.0.1:323           0.0.0.0:*                           -                   
<a href="#__codelineno-23-13" id="__codelineno-23-13" name="__codelineno-23-13"></a>udp        0      0 0.0.0.0:68              0.0.0.0:*                           -                   
<a href="#__codelineno-23-14" id="__codelineno-23-14" name="__codelineno-23-14"></a>udp6       0      0 fe80::8d3:45ff:fee9:546 :::*                                -                   
<a href="#__codelineno-23-15" id="__codelineno-23-15" name="__codelineno-23-15"></a>udp6       0      0 ::1:323                 :::*                                - 
</code></pre></div>
å‘ç° 8888 ç«¯å£åœ¨ç”¨ï¼Œps -aux å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª nginx åœ¨è¿è¡Œï¼Œåœ¨ /etc/nginx/sites-enabled/default é‡Œç¡®å®æœ‰ä½¿ç”¨ 8888 ç«¯å£ã€‚
<p>æ‰€ä»¥å…ˆåœæ‰<span><span class="heti-spacing"> </span>nginx</span>ï¼Œç„¶åé‡æ–°éƒ¨ç½²å®¹å™¨å³å¯ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a>admin@ip-172-31-38-21:~/app$ sudo systemctl stop nginx
<a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a>admin@ip-172-31-38-21:~/app$ sudo docker stop e6
<a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a>e6
<a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a>admin@ip-172-31-38-21:~/app$ sudo docker rm e6
<a href="#__codelineno-24-5" id="__codelineno-24-5" name="__codelineno-24-5"></a>e6
<a href="#__codelineno-24-6" id="__codelineno-24-6" name="__codelineno-24-6"></a>admin@ip-172-31-38-21:~/app$ sudo docker run -d -p 8888:8888 app
<a href="#__codelineno-24-7" id="__codelineno-24-7" name="__codelineno-24-7"></a>...
<a href="#__codelineno-24-8" id="__codelineno-24-8" name="__codelineno-24-8"></a>admin@ip-172-31-38-21:~/app$ curl localhost:8888
<a href="#__codelineno-24-9" id="__codelineno-24-9" name="__codelineno-24-9"></a>Hello World!
</code></pre></div>
<hr/>
<h2 id="jakarta">"Jakarta"<a class="headerlink" href="#jakarta" title="Permanent link">Â¶</a></h2>
<blockquote>
<p><strong>Scenario:</strong> "Jakarta": it's always DNS.</p>
<p><strong>Level:</strong> Hard</p>
<p><strong>Description:</strong> Can't ping google.com. It returns ping: google.com: Name or service not known. Expected is being able to resolve the hostname. (Note: currently the VMs can't ping outside so there's no automated check for the solution).</p>
<p><strong>OS:</strong> Ubuntu 22.04 LTS</p>
</blockquote>
<p>æ ¹æ®é¢˜ç›®çŸ¥é“æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>dns<span class="heti-spacing"> </span></span>å‡ºäº†é—®é¢˜ï¼Œ<span>/etc/resolv.conf<span class="heti-spacing"> </span></span>é‡Œçš„é…ç½®éƒ½æ²¡å•¥é—®é¢˜ã€‚è€Œä¸”æ•´ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>sadservers<span class="heti-spacing"> </span></span>æ˜¯ä¸èƒ½è¿æ¥å¤–ç½‘çš„ï¼Œæ‰€ä»¥å¤§æ¦‚åªèƒ½ç”¨æœ¬æœºçš„äº†ã€‚æœç´¢äº†ä¸€ä¸‹<span class="heti-skip"><span class="heti-spacing"> </span>dns<span class="heti-spacing"> </span></span>ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼Œçœ‹äº†ä¸€åœˆå‘ç°<span class="heti-skip"><span class="heti-spacing"> </span>/etc/nsswitch.conf<span class="heti-spacing"> </span></span>é‡Œçš„<span class="heti-skip"><span class="heti-spacing"> </span>hosts<span class="heti-spacing"> </span></span>é…ç½®æœ‰é—®é¢˜ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a>hosts:          files
</code></pre></div>
è€Œç½‘ä¸Šçš„ä¾‹å­é‡Œéƒ½æœ‰ dnsï¼Œæ‰€ä»¥åœ¨ files åé¢åŠ ä¸€ä¸ª dns å°±å¯ä»¥äº†ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a>ubuntu@ip-172-31-42-233:/$ ping google.com
<a href="#__codelineno-26-2" id="__codelineno-26-2" name="__codelineno-26-2"></a>PING google.com (142.250.191.174) 56(84) bytes of data.
</code></pre></div>
<hr/>
<h2 id="bern">"Bern"<a class="headerlink" href="#bern" title="Permanent link">Â¶</a></h2>
<blockquote>
<p><strong>Scenario:</strong> "Bern": Docker web container can't connect to db container.</p>
<p><strong>Level:</strong> Hard</p>
<p><strong>Description:</strong> There are two Docker containers running, a web application (Wordpress or WP) and a database (MariaDB) as back-end, but if we look at the web page, we see that it cannot connect to the database. curl -s localhost:80 |tail -4 returns:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="p">&lt;</span><span class="nt">body</span> <span class="na">id</span><span class="o">=</span><span class="s">"error-page"</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"wp-die-message"</span><span class="p">&gt;&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Error establishing a database connection<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;&lt;/</span><span class="nt">body</span><span class="p">&gt;</span> <span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<p>This is not a Wordpress code issue (the image is :latest with some network utilities added). What you need to know is that WP uses "WORDPRESS_DB_" environment variables to create the MySQL connection string. See the ./html/wp-config.php WP config file for example (from /home/admin).</p>
<p><strong>OS:</strong> Debian 11</p>
</blockquote>
<p><span>docker ps -a<span class="heti-spacing"> </span></span>å¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªå®¹å™¨åœ¨è¿è¡Œã€‚æ ¹æ®é¢˜ç›®çš„<span class="heti-skip"><span class="heti-spacing"> </span>test<span class="heti-spacing"> </span></span>å¯ä»¥çŸ¥é“<span class="heti-skip"><span class="heti-spacing"> </span>mysql<span class="heti-spacing"> </span></span>çš„è´¦å·å¯†ç æ˜¯<span><span class="heti-spacing"> </span>root:password</span>ã€‚</p>
<p><span>WordPress<span class="heti-spacing"> </span></span>å¯åŠ¨ä¼šä»ç¯å¢ƒå˜é‡è¯»å–é…ç½®ï¼Œæ‰€ä»¥åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>wordpress<span class="heti-spacing"> </span></span>çš„å®¹å™¨ä¸­æŸ¥ä¸€ä¸‹<span><span class="heti-spacing"> </span>env</span>ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a>admin@ip-172-31-19-232:/$ sudo docker exec wordpress env |grep WORDPRESS_DB_
<a href="#__codelineno-28-2" id="__codelineno-28-2" name="__codelineno-28-2"></a>WORDPRESS_DB_PASSWORD=password
<a href="#__codelineno-28-3" id="__codelineno-28-3" name="__codelineno-28-3"></a>WORDPRESS_DB_USER=root
</code></pre></div>
å¯ä»¥çœ‹å‡ºç”¨æˆ·åå’Œå¯†ç è®¾ç½®çš„æ˜¯æ­£ç¡®çš„ã€‚ä½†æ˜¯ NAME å’Œ HOST ä½¿ç”¨çš„å°±æ˜¯ wp-config.php ä¸­é»˜è®¤çš„äº†ï¼Œä¹Ÿå°±æ˜¯ wordpress å’Œ mysqlï¼ŒNAME çš„è¯åœ¨ mariadb å®¹å™¨é‡Œå¯ä»¥çœ‹åˆ°ç¡®å®æ˜¯ wordpressï¼Œä½† HOST æ˜¯ mysqlï¼Œå°±è¿æ¥ä¸åˆ°äº†ã€‚
<p>è€Œé¢˜ç»™çš„<span class="heti-skip"><span class="heti-spacing"> </span>test<span class="heti-spacing"> </span></span>ä¸€å®šè¦åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>wordpress<span class="heti-spacing"> </span></span>å®¹å™¨é‡Œæ‰“å¼€<span><span class="heti-spacing"> </span>mysqladmin</span>ï¼Œè¿æ¥<span><span class="heti-spacing"> </span>host mysql</span>ã€‚ä¸çŸ¥é“æ€ä¹ˆæ<span><span class="heti-spacing"> </span>qwq</span>ï¼Œ<span>hint<span class="heti-spacing"> </span></span>æ²¡å†æ¥ç€å†™äº†ï¼Œå…«ä¼š<span><span class="heti-spacing"> </span>qwq</span>ã€‚</p>
<hr/>
<h2 id="singara">"Singara"<a class="headerlink" href="#singara" title="Permanent link">Â¶</a></h2>
<blockquote>
<p><strong>Scenario:</strong> "Singara": Docker and Kubernetes web app not working.</p>
<p><strong>Level:</strong> Hard</p>
<p><strong>Description:</strong> There's a k3s Kubernetes install you can access with kubectl. The Kubernetes YAML manifests under /home/admin have been applied. The objective is to access from the host the "webapp" web server deployed and find what message it serves (it's a name of a town or city btw). In order to pass the check, the webapp Docker container should not be run separately outside Kubernetes as a shortcut.</p>
<p><strong>OS:</strong> Debian 11</p>
</blockquote>
<p>å…ˆçœ‹ä¸€ä¸‹<span class="heti-skip"><span class="heti-spacing"> </span>k3s<span class="heti-spacing"> </span></span>çš„é…ç½®æ–‡ä»¶ï¼š</p>
<details class="example">
<summary>é…ç½®æ–‡ä»¶</summary>
<p></p><div class="highlight"><span class="filename">deployment.yml</span><pre><span></span><code><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span><span class="w"></span>
<a href="#__codelineno-29-2" id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span><span class="w"></span>
<a href="#__codelineno-29-3" id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-29-4" id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webapp-deployment</span><span class="w"></span>
<a href="#__codelineno-29-5" id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="w"></span>
<a href="#__codelineno-29-6" id="__codelineno-29-6" name="__codelineno-29-6"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-29-7" id="__codelineno-29-7" name="__codelineno-29-7"></a><span class="nt">selector</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-29-8" id="__codelineno-29-8" name="__codelineno-29-8"></a><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-29-9" id="__codelineno-29-9" name="__codelineno-29-9"></a><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webapp</span><span class="w"></span>
<a href="#__codelineno-29-10" id="__codelineno-29-10" name="__codelineno-29-10"></a><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<a href="#__codelineno-29-11" id="__codelineno-29-11" name="__codelineno-29-11"></a><span class="nt">template</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-29-12" id="__codelineno-29-12" name="__codelineno-29-12"></a><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-29-13" id="__codelineno-29-13" name="__codelineno-29-13"></a><span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-29-14" id="__codelineno-29-14" name="__codelineno-29-14"></a><span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webapp</span><span class="w"></span>
<a href="#__codelineno-29-15" id="__codelineno-29-15" name="__codelineno-29-15"></a><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-29-16" id="__codelineno-29-16" name="__codelineno-29-16"></a><span class="w">    </span><span class="nt">containers</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-29-17" id="__codelineno-29-17" name="__codelineno-29-17"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webapp</span><span class="w"></span>
<a href="#__codelineno-29-18" id="__codelineno-29-18" name="__codelineno-29-18"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webapp</span><span class="w"></span>
<a href="#__codelineno-29-19" id="__codelineno-29-19" name="__codelineno-29-19"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">imagePullPolicy</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Always</span><span class="w"></span>
<a href="#__codelineno-29-20" id="__codelineno-29-20" name="__codelineno-29-20"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">ports</span><span class="p p-Indicator">:</span><span class="w"></span>
<a href="#__codelineno-29-21" id="__codelineno-29-21" name="__codelineno-29-21"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8880</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><span class="filename">namespace.yml</span><pre><span></span><code><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span><span class="w"></span>
<a href="#__codelineno-30-2" id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Namespace</span><span class="w"></span>
<a href="#__codelineno-30-3" id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-30-4" id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><span class="filename">nodeport.yml</span><pre><span></span><code><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span><span class="w"></span>
<a href="#__codelineno-31-2" id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Service</span><span class="w"></span>
<a href="#__codelineno-31-3" id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-31-4" id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webapp-service</span><span class="w"></span>
<a href="#__codelineno-31-5" id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="w"></span>
<a href="#__codelineno-31-6" id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-31-7" id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NodePort</span><span class="w"></span>
<a href="#__codelineno-31-8" id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="nt">selector</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-31-9" id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="w">    </span><span class="nt">app.kubernetes.io/name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webapp</span><span class="w"></span>
<a href="#__codelineno-31-10" id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="nt">ports</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-31-11" id="__codelineno-31-11" name="__codelineno-31-11"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w"></span>
<a href="#__codelineno-31-12" id="__codelineno-31-12" name="__codelineno-31-12"></a><span class="w">    </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8888</span><span class="w"></span>
<a href="#__codelineno-31-13" id="__codelineno-31-13" name="__codelineno-31-13"></a><span class="w">    </span><span class="nt">nodePort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30007</span><span class="w"></span>
</code></pre></div>
</details>
<p>ç„¶åæ£€æŸ¥ä¸€ä¸‹<span class="heti-skip"><span class="heti-spacing"> </span>k3s<span class="heti-spacing"> </span></span>å„éƒ¨åˆ†çš„çŠ¶æ€ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-32-1" id="__codelineno-32-1" name="__codelineno-32-1"></a>admin@ip-10-0-0-64:~$ kubectl get all -n web
<a href="#__codelineno-32-2" id="__codelineno-32-2" name="__codelineno-32-2"></a>NAME                                     READY   STATUS             RESTARTS   AGE
<a href="#__codelineno-32-3" id="__codelineno-32-3" name="__codelineno-32-3"></a>pod/webapp-deployment-666b67994b-5sffz   0/1     ImagePullBackOff   0          46d
<a href="#__codelineno-32-4" id="__codelineno-32-4" name="__codelineno-32-4"></a>
<a href="#__codelineno-32-5" id="__codelineno-32-5" name="__codelineno-32-5"></a>NAME                     TYPE       CLUSTER-IP    EXTERNAL-IP   PORT(S)        AGE
<a href="#__codelineno-32-6" id="__codelineno-32-6" name="__codelineno-32-6"></a>service/webapp-service   NodePort   10.43.35.97   &lt;none&gt;        80:30007/TCP   46d
<a href="#__codelineno-32-7" id="__codelineno-32-7" name="__codelineno-32-7"></a>
<a href="#__codelineno-32-8" id="__codelineno-32-8" name="__codelineno-32-8"></a>NAME                                READY   UP-TO-DATE   AVAILABLE   AGE
<a href="#__codelineno-32-9" id="__codelineno-32-9" name="__codelineno-32-9"></a>deployment.apps/webapp-deployment   0/1     1            0           46d
<a href="#__codelineno-32-10" id="__codelineno-32-10" name="__codelineno-32-10"></a>
<a href="#__codelineno-32-11" id="__codelineno-32-11" name="__codelineno-32-11"></a>NAME                                           DESIRED   CURRENT   READY   AGE
<a href="#__codelineno-32-12" id="__codelineno-32-12" name="__codelineno-32-12"></a>replicaset.apps/webapp-deployment-666b67994b   1         1         0       46d
</code></pre></div>
å¯ä»¥å‘ç° webapp-deployment çš„é•œåƒæ‹‰å–å¤±è´¥äº†ã€‚å› ä¸ºå®ƒä¼šä»ç½‘ç»œæ‹‰å– webapp é•œåƒè€Œä¸æ˜¯æœ¬åœ°ï¼Œè€Œæ•´ä¸ª sadservers ä¸èƒ½è¿æ¥å¤–éƒ¨ç½‘ç»œï¼Œæ‰€ä»¥è‡ªç„¶ä¼šæ‹‰å–å¤±è´¥ã€‚
<p>è¿™ä¸ªçŠ¶æ€å’Œå‰ä¸€é˜µåŠ<span class="heti-skip"><span class="heti-spacing"> </span>ZJUCTF<span class="heti-spacing"> </span></span>æ ¡èµ›å¾ˆåƒï¼Œå¤§æ¦‚å°±æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>k3s<span class="heti-spacing"> </span></span>æ‹‰å–é•œåƒçš„é—®é¢˜ã€‚å½“æ—¶æ˜¯è‡ªå»ºäº†ä¸€ä¸ª<span class="heti-skip"><span class="heti-spacing"> </span>registry<span class="heti-spacing"> </span></span>æ¥æçš„ã€‚æ‰€ä»¥æŸ¥ä¸€ä¸‹æœ¬åœ°çš„é•œåƒï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-33-1" id="__codelineno-33-1" name="__codelineno-33-1"></a>admin@ip-10-0-0-64:~$ sudo docker images
<a href="#__codelineno-33-2" id="__codelineno-33-2" name="__codelineno-33-2"></a>REPOSITORY   TAG        IMAGE ID       CREATED        SIZE
<a href="#__codelineno-33-3" id="__codelineno-33-3" name="__codelineno-33-3"></a>webapp       latest     9c082e2983bc   6 weeks ago    135MB
<a href="#__codelineno-33-4" id="__codelineno-33-4" name="__codelineno-33-4"></a>python       3.7-slim   c1d0bab51bbf   7 weeks ago    123MB
<a href="#__codelineno-33-5" id="__codelineno-33-5" name="__codelineno-33-5"></a>registry     2          3a0f7b0a13ef   2 months ago   24.1MB
</code></pre></div>
å‘ç°æ­£å¥½æœ‰ registry é•œåƒã€‚æ‰€ä»¥æœ¬åœ°èµ·ä¸€ä¸ª registry ç„¶åå°† webapp ä¸Šä¼ ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-34-1" id="__codelineno-34-1" name="__codelineno-34-1"></a>admin@ip-10-0-0-64:~$ sudo docker run -d -p 5000:5000 registry:2
<a href="#__codelineno-34-2" id="__codelineno-34-2" name="__codelineno-34-2"></a>...
<a href="#__codelineno-34-3" id="__codelineno-34-3" name="__codelineno-34-3"></a>admin@ip-10-0-0-64:~$ sudo docker tag webapp localhost:5000/webapp
<a href="#__codelineno-34-4" id="__codelineno-34-4" name="__codelineno-34-4"></a>admin@ip-10-0-0-64:~$ sudo docker push localhost:5000/webapp
<a href="#__codelineno-34-5" id="__codelineno-34-5" name="__codelineno-34-5"></a>Using default tag: latest
<a href="#__codelineno-34-6" id="__codelineno-34-6" name="__codelineno-34-6"></a>The push refers to repository [localhost:5000/webapp]
<a href="#__codelineno-34-7" id="__codelineno-34-7" name="__codelineno-34-7"></a>...
</code></pre></div>
ç„¶åæ”¹ä¸€ä¸‹ deployment.ymlï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-35-1" id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="nn">...</span><span class="w"></span>
<a href="#__codelineno-35-2" id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="nt">template</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-35-3" id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-35-4" id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="w">    </span><span class="nt">labels</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-35-5" id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webapp</span><span class="w"></span>
<a href="#__codelineno-35-6" id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-35-7" id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="w">    </span><span class="nt">containers</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-35-8" id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webapp</span><span class="w"></span>
<a href="#__codelineno-35-9" id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost:5000/webapp</span><span class="w"> </span><span class="c1"># è¿™é‡Œ</span><span class="w"></span>
<a href="#__codelineno-35-10" id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="w">        </span><span class="nt">imagePullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Always</span><span class="w"></span>
<a href="#__codelineno-35-11" id="__codelineno-35-11" name="__codelineno-35-11"></a><span class="w">        </span><span class="nt">ports</span><span class="p">:</span><span class="w"></span>
<a href="#__codelineno-35-12" id="__codelineno-35-12" name="__codelineno-35-12"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">containerPort</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8888</span><span class="w"> </span><span class="c1"># å’Œè¿™é‡Œ</span><span class="w"></span>
</code></pre></div>
ç„¶ååº”ç”¨ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-36-1" id="__codelineno-36-1" name="__codelineno-36-1"></a>admin@ip-10-0-0-64:~$ kubectl apply -f deployment.yml 
<a href="#__codelineno-36-2" id="__codelineno-36-2" name="__codelineno-36-2"></a>deployment.apps/webapp-deployment configured
<a href="#__codelineno-36-3" id="__codelineno-36-3" name="__codelineno-36-3"></a>admin@ip-10-0-0-64:~$ kubectl get pods -n web
<a href="#__codelineno-36-4" id="__codelineno-36-4" name="__codelineno-36-4"></a>NAME                                 READY   STATUS        RESTARTS   AGE
<a href="#__codelineno-36-5" id="__codelineno-36-5" name="__codelineno-36-5"></a>webapp-deployment-666b67994b-5sffz   0/1     Terminating   0          46d
<a href="#__codelineno-36-6" id="__codelineno-36-6" name="__codelineno-36-6"></a>webapp-deployment-8f869f757-g2m7n    1/1     Running       0          12s
</code></pre></div>
å¯ä»¥å‘ç°æˆåŠŸå¯åŠ¨äº†ï¼Œæ¥ä¸‹æ¥çš„å°±æ˜¯å°†å…¶ä¸­çš„ 8888 ç«¯å£è½¬å‘å‡ºæ¥ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-37-1" id="__codelineno-37-1" name="__codelineno-37-1"></a>admin@ip-10-0-0-64:~$ kubectl port-forward deployments/webapp-deployment 8888 -n web &amp;
<a href="#__codelineno-37-2" id="__codelineno-37-2" name="__codelineno-37-2"></a>Forwarding from 127.0.0.1:8888 -&gt; 8888
<a href="#__codelineno-37-3" id="__codelineno-37-3" name="__codelineno-37-3"></a>Forwarding from [::1]:8888 -&gt; 8888
<a href="#__codelineno-37-4" id="__codelineno-37-4" name="__codelineno-37-4"></a>...
</code></pre></div>
ç„¶ååœ¨å¦ä¸€ä¸ªç»ˆç«¯é‡Œ curl localhost:8888 å°±å¯ä»¥å¾—åˆ°æ­£å¸¸ç»“æœäº†ã€‚
<hr/>
<h2 id="karakorum">"Karakorum"<a class="headerlink" href="#karakorum" title="Permanent link">Â¶</a></h2>
<blockquote>
<p><strong>Scenario:</strong> "Karakorum": WTFIT â€“ What The Fun Is This?</p>
<p><strong>Level:</strong> Hard</p>
<p><strong>Description:</strong> There's a binary at /home/admin/wtfit that nobody knows how it works or what it does ("what the fun is this"). Someone remembers something about wtfit needing to communicate to a service in order to start. Run this wtfit program so it doesn't exit with an error, fixing or working around things that you need but are broken in this server. (Note that you can open more than one web "terminal").</p>
<p><strong>OS:</strong> Debian 11</p>
</blockquote>
<p><span>ls -l<span class="heti-spacing"> </span></span>å¯ä»¥çœ‹å‡ºæ¥<span class="heti-skip"><span class="heti-spacing"> </span>wtfit<span class="heti-spacing"> </span></span>æ²¡æœ‰è¿è¡Œæƒé™ã€‚æ‰€ä»¥å…ˆ<span><span class="heti-spacing"> </span>chmod</span>ï¼Œä½†<span class="heti-skip"><span class="heti-spacing"> </span>chmod<span class="heti-spacing"> </span></span>ä¼šæŠ¥é”™<span><span class="heti-spacing"> </span>bash: /usr/bin/chmod: Permission denied</span>ã€‚ç»è¿‡æ£€æŸ¥å¯ä»¥å‘ç°æ˜¯<span class="heti-skip"><span class="heti-spacing"> </span>/usr/bin/chmod<span class="heti-spacing"> </span></span>è‡ªèº«ä¹Ÿæ²¡æœ‰è¿è¡Œæƒé™ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-38-1" id="__codelineno-38-1" name="__codelineno-38-1"></a>admin@ip-172-31-46-91:/$ ls -l /usr/bin/chmod
<a href="#__codelineno-38-2" id="__codelineno-38-2" name="__codelineno-38-2"></a>-rw-r--r-- 1 root root 64448 Sep 24  2020 /usr/bin/chmod
</code></pre></div>
å¯ä»¥æœç´¢åˆ°<a href="https://www.cnblogs.com/chuckzhang/p/9277268.html">ä¸€äº›è§£å†³åŠæ³•</a>ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-39-1" id="__codelineno-39-1" name="__codelineno-39-1"></a>admin@ip-172-31-46-91:/$ sudo su
<a href="#__codelineno-39-2" id="__codelineno-39-2" name="__codelineno-39-2"></a>root@ip-172-31-46-91:/# /lib64/ld-linux-x86-64.so.2 /bin/chmod 755 /bin/chmod
<a href="#__codelineno-39-3" id="__codelineno-39-3" name="__codelineno-39-3"></a>root@ip-172-31-46-91:/# cd /home/admin/
<a href="#__codelineno-39-4" id="__codelineno-39-4" name="__codelineno-39-4"></a>root@ip-172-31-46-91:/home/admin# chmod +x wtfit
</code></pre></div>
è¿è¡Œ wtfit å‡ºé”™ï¼šERROR: can't open config fileã€‚æ ¹æ®æç¤ºé€šè¿‡ strace æ¥è·Ÿè¸ªå¾—åˆ°é”™è¯¯çš„è¯¦ç»†æ¶ˆæ¯ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-40-1" id="__codelineno-40-1" name="__codelineno-40-1"></a>admin@ip-172-31-46-91:~$ strace ./wtfit
<a href="#__codelineno-40-2" id="__codelineno-40-2" name="__codelineno-40-2"></a>...
<a href="#__codelineno-40-3" id="__codelineno-40-3" name="__codelineno-40-3"></a>openat(AT_FDCWD, "/home/admin/wtfitconfig.conf", O_RDONLY|O_CLOEXEC) = -1 ENOENT (No such file or directory)
<a href="#__codelineno-40-4" id="__codelineno-40-4" name="__codelineno-40-4"></a>...
</code></pre></div>
åœ¨è¿™ä¸ªä½ç½®åˆ›å»ºä¸€ä¸ªç©ºçš„é…ç½®æ–‡ä»¶ã€‚ç„¶åå†è¿è¡Œï¼Œè¿˜æ˜¯å‡ºé”™ï¼šERROR: can't connect to serverã€‚åŒæ · strace å¯ä»¥å¾—åˆ°ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-41-1" id="__codelineno-41-1" name="__codelineno-41-1"></a>admin@ip-172-31-46-91:~$ strace ./wtfit
<a href="#__codelineno-41-2" id="__codelineno-41-2" name="__codelineno-41-2"></a>...
<a href="#__codelineno-41-3" id="__codelineno-41-3" name="__codelineno-41-3"></a>connect(3, {sa_family=AF_INET, sin_port=htons(7777), sin_addr=inet_addr("127.0.0.1")}, 16) = -1 EINPROGRESS (Operation now in progress)
<a href="#__codelineno-41-4" id="__codelineno-41-4" name="__codelineno-41-4"></a>...
</code></pre></div>
æ‰€ä»¥å¯ä»¥çœ‹å‡ºå®ƒåœ¨è¯•å›¾è¿æ¥ localhost:7777ã€‚å¼€ä¸€ä¸ªæ–°çš„ terminal ç„¶åç›‘å¬ä¸€ä¸‹ 7777 ç«¯å£ï¼Œè¿è¡Œ wtfitï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-42-1" id="__codelineno-42-1" name="__codelineno-42-1"></a>admin@ip-172-31-46-91:/$ nc -lvvp 7777
<a href="#__codelineno-42-2" id="__codelineno-42-2" name="__codelineno-42-2"></a>Listening on 0.0.0.0 7777
<a href="#__codelineno-42-3" id="__codelineno-42-3" name="__codelineno-42-3"></a>Connection received on localhost 54756
<a href="#__codelineno-42-4" id="__codelineno-42-4" name="__codelineno-42-4"></a>GET / HTTP/1.1
<a href="#__codelineno-42-5" id="__codelineno-42-5" name="__codelineno-42-5"></a>Host: localhost:7777
<a href="#__codelineno-42-6" id="__codelineno-42-6" name="__codelineno-42-6"></a>User-Agent: Go-http-client/1.1
<a href="#__codelineno-42-7" id="__codelineno-42-7" name="__codelineno-42-7"></a>Accept-Encoding: gzip
</code></pre></div>
å¯ä»¥å‘ç°å°±æ˜¯ç®€å•çš„ GETï¼Œæ‰€ä»¥ python èµ·ä¸€ä¸ª http serverï¼Œç„¶åè¿è¡Œï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-43-1" id="__codelineno-43-1" name="__codelineno-43-1"></a>admin@ip-172-31-46-91:/$ python3 -m http.server 7777
<a href="#__codelineno-43-2" id="__codelineno-43-2" name="__codelineno-43-2"></a>Serving HTTP on 0.0.0.0 port 7777 (http://0.0.0.0:7777/) ...
<a href="#__codelineno-43-3" id="__codelineno-43-3" name="__codelineno-43-3"></a>127.0.0.1 - - [03/Nov/2022 12:58:30] "GET / HTTP/1.1" 200 -
</code></pre></div>
è¿™æ—¶ wtfit å°±å¯ä»¥æ­£å¸¸è¿è¡Œç»“æŸäº†ã€‚
<hr/>
<h2 id="hong-kong">"Hong-Kong"<a class="headerlink" href="#hong-kong" title="Permanent link">Â¶</a></h2>
<blockquote>
<p><strong>Scenario:</strong> "Hong-Kong": can't write data into database.</p>
<p><strong>Level:</strong> Hard</p>
<p><strong>Description:</strong> (Similar to "Manhattan" scenario but harder). Your objective is to be able to insert a row in an existing Postgres database. The issue is not specific to Postgres and you don't need to know details about it (although it may help).</p>
<p>Postgres information: it's a service that listens to a port (:5432) and writes to disk in a data directory, the location of which is defined in the data_directory parameter of the configuration file /etc/postgresql/14/main/postgresql.conf. In our case Postgres is managed by systemd as a unit with name postgresql.</p>
<p><strong>OS:</strong> Debian 10</p>
</blockquote>
<p>å’Œå‰é¢çš„<span class="heti-skip"><span class="heti-spacing"> </span>"Manhattan"<span class="heti-spacing"> </span></span>ç±»ä¼¼ã€‚è¿˜æ˜¯å…ˆæ£€æŸ¥çŠ¶æ€æ²¡å¼‚å¸¸ï¼Œé‡å¯æ²¡å¼‚å¸¸ï¼ŒæŸ¥çœ‹<span><span class="heti-spacing"> </span>/var/log/syslog</span>ï¼Œå‘ç°ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-44-1" id="__codelineno-44-1" name="__codelineno-44-1"></a>Nov  3 11:52:20 ip-172-31-25-11 systemd[1]: Starting PostgreSQL Cluster 14-main...
<a href="#__codelineno-44-2" id="__codelineno-44-2" name="__codelineno-44-2"></a>Nov  3 11:52:20 ip-172-31-25-11 postgresql@14-main[1318]: Error: /opt/pgdata/main is not accessible or does not exist
<a href="#__codelineno-44-3" id="__codelineno-44-3" name="__codelineno-44-3"></a>Nov  3 11:52:20 ip-172-31-25-11 systemd[1]: postgresql@14-main.service: Can't open PID file /run/postgresql/14-main.pid (yet?) after start: No such file or directory
<a href="#__codelineno-44-4" id="__codelineno-44-4" name="__codelineno-44-4"></a>Nov  3 11:52:20 ip-172-31-25-11 systemd[1]: postgresql@14-main.service: Failed with result 'protocol'.
<a href="#__codelineno-44-5" id="__codelineno-44-5" name="__codelineno-44-5"></a>Nov  3 11:52:20 ip-172-31-25-11 systemd[1]: Failed to start PostgreSQL Cluster 14-main.
</code></pre></div>
<p>æ‰¾ä¸åˆ°<span><span class="heti-spacing"> </span>/opt/pgdata/main</span>ï¼Œ<span>ls<span class="heti-spacing"> </span></span>ä¸€ä¸‹<span class="heti-skip"><span class="heti-spacing"> </span>/opt/pgdata<span class="heti-spacing"> </span></span>ä¹Ÿæ²¡æœ‰ã€‚å†å¾€å‰çœ‹<span class="heti-skip"><span class="heti-spacing"> </span>syslog<span class="heti-spacing"> </span></span>å¯ä»¥å‘ç°ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-45-1" id="__codelineno-45-1" name="__codelineno-45-1"></a>Nov  3 11:47:54 ip-172-31-25-11 systemd[1]: dev-xvdb.device: Job dev-xvdb.device/start timed out.
<a href="#__codelineno-45-2" id="__codelineno-45-2" name="__codelineno-45-2"></a>Nov  3 11:47:54 ip-172-31-25-11 systemd[1]: Timed out waiting for device /dev/xvdb.
<a href="#__codelineno-45-3" id="__codelineno-45-3" name="__codelineno-45-3"></a>Nov  3 11:47:54 ip-172-31-25-11 systemd[1]: Dependency failed for /opt/pgdata.
<a href="#__codelineno-45-4" id="__codelineno-45-4" name="__codelineno-45-4"></a>Nov  3 11:47:54 ip-172-31-25-11 systemd[1]: opt-pgdata.mount: Job opt-pgdata.mount/start failed with result 'dependency'.
<a href="#__codelineno-45-5" id="__codelineno-45-5" name="__codelineno-45-5"></a>Nov  3 11:47:54 ip-172-31-25-11 systemd[1]: Startup finished in 2.669s (kernel) + 1min 31.106s (userspace) = 1min 33.776s.
<a href="#__codelineno-45-6" id="__codelineno-45-6" name="__codelineno-45-6"></a>Nov  3 11:47:54 ip-172-31-25-11 systemd[1]: dev-xvdb.device: Job dev-xvdb.device/start failed with result 'timeout'.
</code></pre></div>
å¯ä»¥å‘ç°æŒ‚è½½è®¾å¤‡è¶…æ—¶äº†ã€‚
<p><span>fdisk<span class="heti-spacing"> </span></span>çœ‹ä¸€ä¸‹ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-46-1" id="__codelineno-46-1" name="__codelineno-46-1"></a>root@ip-172-31-25-11:/# fdisk -l
<a href="#__codelineno-46-2" id="__codelineno-46-2" name="__codelineno-46-2"></a>Disk /dev/nvme0n1: 8 GiB, 8589934592 bytes, 16777216 sectors
<a href="#__codelineno-46-3" id="__codelineno-46-3" name="__codelineno-46-3"></a>Disk model: Amazon Elastic Block Store              
<a href="#__codelineno-46-4" id="__codelineno-46-4" name="__codelineno-46-4"></a>Units: sectors of 1 * 512 = 512 bytes
<a href="#__codelineno-46-5" id="__codelineno-46-5" name="__codelineno-46-5"></a>Sector size (logical/physical): 512 bytes / 512 bytes
<a href="#__codelineno-46-6" id="__codelineno-46-6" name="__codelineno-46-6"></a>I/O size (minimum/optimal): 512 bytes / 512 bytes
<a href="#__codelineno-46-7" id="__codelineno-46-7" name="__codelineno-46-7"></a>
<a href="#__codelineno-46-8" id="__codelineno-46-8" name="__codelineno-46-8"></a>
<a href="#__codelineno-46-9" id="__codelineno-46-9" name="__codelineno-46-9"></a>Disk /dev/nvme1n1: 8 GiB, 8589934592 bytes, 16777216 sectors
<a href="#__codelineno-46-10" id="__codelineno-46-10" name="__codelineno-46-10"></a>Disk model: Amazon Elastic Block Store              
<a href="#__codelineno-46-11" id="__codelineno-46-11" name="__codelineno-46-11"></a>Units: sectors of 1 * 512 = 512 bytes
<a href="#__codelineno-46-12" id="__codelineno-46-12" name="__codelineno-46-12"></a>Sector size (logical/physical): 512 bytes / 512 bytes
<a href="#__codelineno-46-13" id="__codelineno-46-13" name="__codelineno-46-13"></a>I/O size (minimum/optimal): 512 bytes / 512 bytes
<a href="#__codelineno-46-14" id="__codelineno-46-14" name="__codelineno-46-14"></a>Disklabel type: gpt
<a href="#__codelineno-46-15" id="__codelineno-46-15" name="__codelineno-46-15"></a>Disk identifier: 56507B41-5D22-1349-81AD-C628BA074922
<a href="#__codelineno-46-16" id="__codelineno-46-16" name="__codelineno-46-16"></a>
<a href="#__codelineno-46-17" id="__codelineno-46-17" name="__codelineno-46-17"></a>Device           Start      End  Sectors  Size Type
<a href="#__codelineno-46-18" id="__codelineno-46-18" name="__codelineno-46-18"></a>/dev/nvme1n1p1  262144 16777182 16515039  7.9G Linux filesystem
<a href="#__codelineno-46-19" id="__codelineno-46-19" name="__codelineno-46-19"></a>/dev/nvme1n1p14   2048     8191     6144    3M BIOS boot
<a href="#__codelineno-46-20" id="__codelineno-46-20" name="__codelineno-46-20"></a>/dev/nvme1n1p15   8192   262143   253952  124M EFI System
<a href="#__codelineno-46-21" id="__codelineno-46-21" name="__codelineno-46-21"></a>
<a href="#__codelineno-46-22" id="__codelineno-46-22" name="__codelineno-46-22"></a>Partition table entries are not in disk order.
<a href="#__codelineno-46-23" id="__codelineno-46-23" name="__codelineno-46-23"></a>root@ip-172-31-25-11:/# df
<a href="#__codelineno-46-24" id="__codelineno-46-24" name="__codelineno-46-24"></a>Filesystem      1K-blocks    Used Available Use% Mounted on
<a href="#__codelineno-46-25" id="__codelineno-46-25" name="__codelineno-46-25"></a>udev               228728       0    228728   0% /dev
<a href="#__codelineno-46-26" id="__codelineno-46-26" name="__codelineno-46-26"></a>tmpfs               47568    1524     46044   4% /run
<a href="#__codelineno-46-27" id="__codelineno-46-27" name="__codelineno-46-27"></a>/dev/nvme1n1p1    8026128 1230452   6366420  17% /
<a href="#__codelineno-46-28" id="__codelineno-46-28" name="__codelineno-46-28"></a>tmpfs              237828       0    237828   0% /dev/shm
<a href="#__codelineno-46-29" id="__codelineno-46-29" name="__codelineno-46-29"></a>tmpfs                5120       0      5120   0% /run/lock
<a href="#__codelineno-46-30" id="__codelineno-46-30" name="__codelineno-46-30"></a>tmpfs              237828       0    237828   0% /sys/fs/cgroup
<a href="#__codelineno-46-31" id="__codelineno-46-31" name="__codelineno-46-31"></a>/dev/nvme1n1p15    126710     278    126432   1% /boot/efi
</code></pre></div>
å¯ä»¥å‘ç° /dev/nvme0n1 æ²¡æœ‰æŒ‚è½½ä¸Šï¼Œæ ¹æ®å‰é¢é¢˜ç›®å¯ä»¥æ¨æµ‹è¿™ä¸ªè®¾å¤‡é‡Œé¢æ˜¯ /opt/pgdata çš„å†…å®¹ã€‚
<p><code>mount /dev/nvme0n1 /opt/pgdata</code> å°è¯•æŒ‚è½½ï¼Œæ²¡æœ‰æŠ¥é”™ï¼Œä½†ä»æ—§æ²¡æœ‰ä¸œè¥¿ã€‚çœ‹ä¸€ä¸‹<span class="heti-skip"><span class="heti-spacing"> </span>/var/log/syslog<span class="heti-spacing"> </span></span>å‘ç°ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-47-1" id="__codelineno-47-1" name="__codelineno-47-1"></a>Nov  3 12:02:06 ip-172-31-25-11 kernel: [  945.914667] SGI XFS with ACLs, security attributes, realtime, no debug enabled
<a href="#__codelineno-47-2" id="__codelineno-47-2" name="__codelineno-47-2"></a>Nov  3 12:02:06 ip-172-31-25-11 kernel: [  945.925395] XFS (nvme0n1): Mounting V5 Filesystem
<a href="#__codelineno-47-3" id="__codelineno-47-3" name="__codelineno-47-3"></a>Nov  3 12:02:07 ip-172-31-25-11 kernel: [  946.092049] XFS (nvme0n1): Ending clean mount
<a href="#__codelineno-47-4" id="__codelineno-47-4" name="__codelineno-47-4"></a>Nov  3 12:02:07 ip-172-31-25-11 systemd[1]: opt-pgdata.mount: Unit is bound to inactive unit dev-xvdb.device. Stopping, too.
<a href="#__codelineno-47-5" id="__codelineno-47-5" name="__codelineno-47-5"></a>Nov  3 12:02:07 ip-172-31-25-11 systemd[1]: Unmounting /opt/pgdata...
<a href="#__codelineno-47-6" id="__codelineno-47-6" name="__codelineno-47-6"></a>Nov  3 12:02:07 ip-172-31-25-11 kernel: [  946.124665] XFS (nvme0n1): Unmounting Filesystem
<a href="#__codelineno-47-7" id="__codelineno-47-7" name="__codelineno-47-7"></a>Nov  3 12:02:07 ip-172-31-25-11 systemd[1]: opt-pgdata.mount: Succeeded.
<a href="#__codelineno-47-8" id="__codelineno-47-8" name="__codelineno-47-8"></a>Nov  3 12:02:07 ip-172-31-25-11 systemd[1]: Unmounted /opt/pgdata.
</code></pre></div>
<p>å¯ä»¥çœ‹å‡º<span class="heti-skip"><span class="heti-spacing"> </span>systemd<span class="heti-spacing"> </span></span>ä¸è®©æˆ‘ä»¬æŒ‚è½½åˆ°<span class="heti-skip"><span class="heti-spacing"> </span>/opt/pgdata<span class="heti-spacing"> </span></span>ä¸Šï¼Œå› ä¸ºå®ƒå’Œ<span class="heti-skip"><span class="heti-spacing"> </span>/dev/xvdb<span class="heti-spacing"> </span></span>è®¾å¤‡å…³è”äº†ã€‚è¿™ä¸ªå…³è”æ˜¯åœ¨<span class="heti-skip"><span class="heti-spacing"> </span>/etc/fstab<span class="heti-spacing"> </span></span>æ–‡ä»¶ä¸­çš„ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-48-1" id="__codelineno-48-1" name="__codelineno-48-1"></a># /etc/fstab: static file system information
<a href="#__codelineno-48-2" id="__codelineno-48-2" name="__codelineno-48-2"></a>UUID=5db68868-2d70-449f-8b1d-f3c769ec01c7 / ext4 rw,discard,errors=remount-ro,x-systemd.growfs 0 1
<a href="#__codelineno-48-3" id="__codelineno-48-3" name="__codelineno-48-3"></a>UUID=72C9-F191 /boot/efi vfat defaults 0 0
<a href="#__codelineno-48-4" id="__codelineno-48-4" name="__codelineno-48-4"></a>/dev/xvdb /opt/pgdata xfs defaults,nofail 0 0
</code></pre></div>
æŠŠé‡Œé¢çš„ /dev/xvdb æ¢æˆ /dev/nvme0n1ï¼Œç„¶å systemctl daemon-reload é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ã€‚ä¹‹åå°±å¯ä»¥æ­£å¸¸ mount äº†ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-49-1" id="__codelineno-49-1" name="__codelineno-49-1"></a>root@ip-172-31-25-11:/# systemctl daemon-reload
<a href="#__codelineno-49-2" id="__codelineno-49-2" name="__codelineno-49-2"></a>root@ip-172-31-25-11:/# ls /opt/pgdata
<a href="#__codelineno-49-3" id="__codelineno-49-3" name="__codelineno-49-3"></a>root@ip-172-31-25-11:/# mount /dev/nvme0n1 /opt/pgdata
<a href="#__codelineno-49-4" id="__codelineno-49-4" name="__codelineno-49-4"></a>root@ip-172-31-25-11:/# ls /opt/pgdata
<a href="#__codelineno-49-5" id="__codelineno-49-5" name="__codelineno-49-5"></a>deleteme  file1.bk  file2.bk  file3.bk  main
</code></pre></div>
åŒæ ·ï¼Œè¿™äº› .bk æ–‡ä»¶å æ»¡äº†ç©ºé—´ï¼Œåˆ æ‰ç„¶åé‡å¯ postgresqlï¼Œå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼š
<div class="highlight"><pre><span></span><code><a href="#__codelineno-50-1" id="__codelineno-50-1" name="__codelineno-50-1"></a>root@ip-172-31-25-11:/# ls -l /opt/pgdata
<a href="#__codelineno-50-2" id="__codelineno-50-2" name="__codelineno-50-2"></a>total 8285620
<a href="#__codelineno-50-3" id="__codelineno-50-3" name="__codelineno-50-3"></a>-rw-r--r--  1 root     root             69 May 21 22:20 deleteme
<a href="#__codelineno-50-4" id="__codelineno-50-4" name="__codelineno-50-4"></a>-rw-r--r--  1 root     root     7516192768 May 21 22:06 file1.bk
<a href="#__codelineno-50-5" id="__codelineno-50-5" name="__codelineno-50-5"></a>-rw-r--r--  1 root     root      967774208 May 21 22:17 file2.bk
<a href="#__codelineno-50-6" id="__codelineno-50-6" name="__codelineno-50-6"></a>-rw-r--r--  1 root     root         499712 May 21 22:23 file3.bk
<a href="#__codelineno-50-7" id="__codelineno-50-7" name="__codelineno-50-7"></a>drwx------ 19 postgres postgres       4096 May 21 22:24 main
<a href="#__codelineno-50-8" id="__codelineno-50-8" name="__codelineno-50-8"></a>root@ip-172-31-25-11:/# rm /opt/pgdata/file*.bk
<a href="#__codelineno-50-9" id="__codelineno-50-9" name="__codelineno-50-9"></a>root@ip-172-31-25-11:/# sudo systemctl start postgresql
<a href="#__codelineno-50-10" id="__codelineno-50-10" name="__codelineno-50-10"></a>root@ip-172-31-25-11:/# sudo -u postgres psql -c "insert into persons(name) values ('jane smith');" -d dt
<a href="#__codelineno-50-11" id="__codelineno-50-11" name="__codelineno-50-11"></a>INSERT 0 1
</code></pre></div>
<hr/>
<h2 id="venice">"Venice"<a class="headerlink" href="#venice" title="Permanent link">Â¶</a></h2>
<blockquote>
<p><strong>Scenario:</strong> "Venice": Am I in a container?</p>
<p><strong>Level:</strong> Medium</p>
<p><strong>Description:</strong> Try and figure out if you are inside a container (like a Docker one for example) or inside a Virtual Machine (like in the other scenarios).</p>
<p><strong>OS:</strong> Debian 11</p>
</blockquote>
<p>emmmï¼Œ<span>ps -aux<span class="heti-spacing"> </span></span>çœ‹åˆ°ï¼š
</p><div class="highlight"><pre><span></span><code><a href="#__codelineno-51-1" id="__codelineno-51-1" name="__codelineno-51-1"></a>root@ip-172-31-33-228:/# ps -aux
<a href="#__codelineno-51-2" id="__codelineno-51-2" name="__codelineno-51-2"></a>USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
<a href="#__codelineno-51-3" id="__codelineno-51-3" name="__codelineno-51-3"></a>root           1  0.4  2.0 100712  9600 ?        Ss   12:14   0:01 /sbin/init
<a href="#__codelineno-51-4" id="__codelineno-51-4" name="__codelineno-51-4"></a>root          22  0.0  1.4  26728  6912 ?        Ss   12:14   0:00 /lib/systemd/systemd-journald
<a href="#__codelineno-51-5" id="__codelineno-51-5" name="__codelineno-51-5"></a>message+      47  0.0  0.7   8268  3700 ?        Ss   12:14   0:00 /usr/bin/dbus-daemon --system --addres
<a href="#__codelineno-51-6" id="__codelineno-51-6" name="__codelineno-51-6"></a>root          49  0.0  1.1  13404  5532 ?        Ss   12:14   0:00 /lib/systemd/systemd-logind
<a href="#__codelineno-51-7" id="__codelineno-51-7" name="__codelineno-51-7"></a>root          71  0.0  2.4 1230092 11584 ?       S&lt;sl 12:14   0:00 /usr/local/gotty --permit-write --reco
<a href="#__codelineno-51-8" id="__codelineno-51-8" name="__codelineno-51-8"></a>root          91  0.0  0.7   6056  3652 pts/0    S&lt;s  12:18   0:00 bash
<a href="#__codelineno-51-9" id="__codelineno-51-9" name="__codelineno-51-9"></a>root          92  0.0  0.7   8840  3416 pts/0    R&lt;+  12:18   0:00 ps -aux
</code></pre></div>
å’Œå…¶å®ƒé¢˜ç›®å®ä¾‹é‡Œé¢ä¸ä¸€æ ·ï¼Œæ²¡æœ‰ kernel threadï¼Œæ‰€ä»¥æ˜¯å®¹å™¨è€Œä¸æ˜¯è™šæ‹Ÿæœºã€‚ï¼ˆå°±è¿™ï¼Ÿ
<details class="success">
<summary>é¢˜ç»™ç­”æ¡ˆ</summary>
<blockquote>
<p><strong>Solution:</strong> This is in fact a Podman container :-)<br/>
You can get the image: docker.io/fduran/venice.</p>
<p>A way of checking is by looking at the environment of the PID=1 process and see if there's a container variable, for ex: cat /proc/1/environ|tr "\0" "\n"|grep container , in our case would be container=podman but I changed its value.</p>
<p>An indicator is to look at the running processes and see that there are no kernel threads like [kthreadd].</p>
</blockquote>
</details>
<hr/>
<div class="md-source-file">
<small>
    
      æœ€åæ›´æ–°:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2022å¹´11æœˆ3æ—¥ 21:05:30</span>
<br/>
        åˆ›å»ºæ—¥æœŸ:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2022å¹´11æœˆ3æ—¥ 21:05:30</span>
</small>
</div>
<script async="" crossorigin="anonymous" data-category="General" data-category-id="DIC_kwDOGnfbUc4CPrf4" data-emit-metadata="0" data-input-position="bottom" data-lang="zh-CN" data-mapping="pathname" data-reactions-enabled="1" data-repo="TonyCrane/note" data-repo-id="R_kgDOGnfbUQ" data-theme="light" src="https://giscus.app/client.js">
</script>
<script>
                      if (document.querySelector("body").getAttribute("data-md-color-scheme") === "slate") {
                        var giscus = document.querySelector("script[src*=giscus]")
                        giscus.setAttribute("data-theme", "https://gcore.jsdelivr.net/gh/TonyCrane/note/docs/css/giscus.css") 
                      }
                    </script>
</article>
</div>
</div>
<a class="md-top md-icon" data-md-component="top" data-md-state="hidden" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path></svg>
              å›åˆ°é¡µé¢é¡¶éƒ¨
            </a>
</main>
<footer class="md-footer">
<nav aria-label="é¡µè„š" class="md-footer__inner md-grid">
<a aria-label="ä¸Šä¸€é¡µ: Security Innovation" class="md-footer__link md-footer__link--prev" href="../SecurityInnovation/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                ä¸Šä¸€é¡µ
              </span>
              Security Innovation
            </div>
</div>
</a>
<a aria-label="ä¸‹ä¸€é¡µ: ğŸ”’ AAA School Bus" class="md-footer__link md-footer__link--next" href="../AAA/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                ä¸‹ä¸€é¡µ
              </span>
              ğŸ”’ AAA School Bus
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright Â© 2022 <a href="https://github.com/TonyCrane" rel="noopener" target="_blank">TonyCrane</a>
</div>
  
  
    Powered by
    <a href="https://www.mkdocs.org/" rel="noopener" target="_blank">
      MkDocs
    </a>
    with theme
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material
    </a>
    modified by
    <a href="https://github.com/TonyCrane" rel="noopener" target="_blank">
      TonyCrane
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/TonyCrane/" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
<a class="md-social__link" href="https://blog.tonycrane.cc/" rel="noopener" target="_blank" title="blog.tonycrane.cc">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg>
</a>
<a class="md-social__link" href="https://tonycrane.cc/" rel="noopener" target="_blank" title="tonycrane.cc">
<svg viewbox="0 0 576 512" xmlns="http://www.w3.org/2000/svg"><path d="M280.37 148.26 96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47 488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "navigation.tracking", "navigation.tabs", "navigation.indexes", "navigation.top"], "search": "../../assets/javascripts/workers/search.361d90f1.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
<script src="../../assets/javascripts/bundle.289a2a4b.min.js"></script>
<script src="https://gcore.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
<script src="../../js/katex.js"></script>
</body>
</html>
